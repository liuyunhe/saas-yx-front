{"version":3,"sources":["webpack:///src/pages/Market/ActTpl/Jiugongge.ActTpl.vue","webpack:///./src/pages/Market/ActTpl/Jiugongge.ActTpl.vue?8ab8","webpack:///./src/pages/Market/ActTpl/Jiugongge.ActTpl.vue"],"names":["Jiugongge_ActTpl","props","ACT_JIUGONGGE","commonImg","phoneModel","activityInfo","activityImageEditor","this","getActDetail","key","getBtn","bg","that","conf","noAward","knowBtn","value","index","type","url","itemRepeat","img","note","name","id","message","title","desc","description","push","res","data","form","tplCode","ActTpl_Jiugongge_ActTpl","render","_vm","_h","$createElement","_c","_self","attrs","separator-class","_v","mode","default-active","defaultActive","on","select","switchMenu","body-style","padding","span","titleLength","page","imgKey","imgData","edit","titleInput","descInput","_e","editData","editType","picChange","editPic","staticClass","staticStyle","margin-top","height","for","model","callback","$$v","isPublish","expression","size","width","click","save","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.70d2195b0ce3c3d9f2ae.js","sourcesContent":["<template>\r\n    <div id=\"root\">\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item>活动管理</el-breadcrumb-item>\r\n            <el-breadcrumb-item>新建活动</el-breadcrumb-item>\r\n            <el-breadcrumb-item>模板设置</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <el-menu mode=\"horizontal\" :default-active=\"defaultActive\" @select=\"switchMenu\">\r\n            <el-menu-item index=\"1\">首页</el-menu-item>\r\n            <el-menu-item index=\"2\">活动说明页</el-menu-item>\r\n            <el-menu-item index=\"3\">我的奖品页</el-menu-item>\r\n            <el-menu-item index=\"4\">中奖页</el-menu-item>\r\n            <el-menu-item index=\"5\">未中奖页</el-menu-item>\r\n        </el-menu>\r\n        <el-card :body-style=\"{padding:'40px'}\">\r\n            <el-row>\r\n                <el-col :span=\"8\">\r\n                    <phone-model \r\n                        :title=\"conf.title\" \r\n                        :titleLength=\"30\" \r\n                        :page = \"page\"\r\n                        imgKey =\"ACT_JIUGONGGE\" \r\n                        :imgData=\"conf.img\"\r\n                        :commonImg =  \"conf.commonImg\"\r\n                        @edit=\"edit\" />\r\n                </el-col>\r\n                <el-col :span=\"14\">\r\n                    <activity-info \r\n                        :title = \"conf.title\"\r\n                        :desc = \"conf.description\"\r\n                        @titleInput=\"titleInput\" \r\n                        @descInput=\"descInput\" \r\n                        v-if=\"page == 1\"/>\r\n                    <activity-image-editor \r\n                        v-if=\"page != 2 && page !=3\"\r\n                        :editData=\"editData\" \r\n                        :type=\"editType\" \r\n                        :itemRepeat = \"itemRepeat\"\r\n                        @picChange = \"editPic\"/>\r\n                </el-col>\r\n            </el-row>\r\n            <el-row class=\"tool-bar\" style=\"margin-top: 20px\">\r\n            <el-col :span=\"8\">\r\n                <div style=\"height: 100px;\"></div>\r\n            </el-col>\r\n            <el-col :span=\"14\">\r\n                <div class=\"publish\">\r\n                    <label for=\"\">是否投放：</label>\r\n                    <el-switch v-model=\"isPublish\"></el-switch>\r\n                </div>\r\n                <div class=\"save\">\r\n                    <el-button type=\"primary\" size=\"medium\" width=\"100\" @click=\"save\">保存</el-button>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport phoneModel from \"@/components/activity/phoneModel\";\r\nimport activityInfo from \"@/components/activity/activityInfo\";\r\nimport activityImageEditor from \"@/components/activity/activityImageEditor\";\r\nimport img from './imageConf'\r\nexport default {\r\nprops: ['id'],\r\n  data() {\r\n    return {\r\n      defaultActive: \"1\",\r\n      editData: [img.img.ACT_JIUGONGGE['normal']['bg']],\r\n      editType: \"normal\",\r\n      itemRepeat: false,   //元素格子是否重复，重复是true， 不重复为false\r\n      page: 1,\r\n      isPublish: false,\r\n      conf : {\r\n        form: 'act-104',\r\n        id: '',\r\n        description: '',\r\n        title: '活动标题',\r\n        img: img.img.ACT_JIUGONGGE,\r\n        commonImg: img.commonImg,\r\n        conf: {img: '', commonImg: '', title: '', desc: ''},\r\n        name: '',\r\n        note: ''\r\n      }\r\n    };\r\n  },\r\n  components: {\r\n    phoneModel,\r\n    activityInfo,\r\n    activityImageEditor\r\n  },\r\n  created () {\r\n      let that = this;\r\n      that.getActDetail();\r\n    //   console.log(this.conf.pic)\r\n  },\r\n  mounted () {\r\n      console.log(this)\r\n    //   console.log(this.conf.pic)\r\n  },\r\n  computed: {\r\n\r\n  },\r\n  methods: {\r\n    switchMenu(key, keyPath) {\r\n        let that = this;\r\n        that.page = key;\r\n        if(key == 4) {\r\n            that.editData = [that.conf.commonImg.getBtn];\r\n            that.editType = 'common';\r\n        }else if(key == 1) {\r\n            that.editData = [that.conf.img.normal.bg];\r\n            that.editType = 'normal';\r\n        }else if(key == 5) {\r\n            that.editData = [\r\n                that.conf.commonImg.noAward,\r\n                that.conf.commonImg.knowBtn\r\n            ];\r\n            that.editType = 'common'\r\n        }\r\n    },\r\n    titleInput(e) {\r\n        let value = e.value;\r\n        value ? this.conf.title = value : this.title = \"活动标题\";\r\n    },\r\n    descInput (e) {\r\n        let value = e.value;\r\n        value ? this.conf.description = value : this.description = '';\r\n    },\r\n    edit(e){\r\n        let that = this;\r\n        let index = e.index;\r\n        let type = index.indexOf('item') > -1 ? 'item' : 'normal';\r\n        that.editType =  type;\r\n        that.editData = type == 'item' ? that.itemRepeat ? [this.conf.img[type]['item0']] : this.conf.img[type] : [this.conf.img[type][index]];\r\n    },\r\n    editPic (e) {\r\n        let that = this, \r\n            type = e.type, \r\n            index = e.index, \r\n            url = e.url,\r\n            itemRepeat = e.itemRepeat,\r\n            item = 'item',\r\n            conf = that.conf;\r\n        if(!url) return;\r\n        if(type == 'item' && itemRepeat){\r\n            for(let i in conf.img[type]){\r\n                conf.img[type][i].url = url;\r\n            }\r\n        }else if((type == 'item' && !itemRepeat) || type == 'normal') {\r\n            conf.img[type][index].url = url;\r\n        }else if(type == 'common'){\r\n            console.log(index)\r\n            conf.commonImg[index].url = url;\r\n        }\r\n        that.conf = conf;\r\n    },\r\n    getActDetail() {\r\n        let that = this;\r\n        let conf = null;\r\n        if(!that.id) return;\r\n        that.$request.post('/api/saotx/acttpl/detail', { id: that.id }, true, res => {\r\n            if (res.ret === '200000') {\r\n                conf = JSON.parse(res.data.conf);\r\n                that.conf.img = JSON.parse(conf.img);\r\n                that.conf.commonImg = JSON.parse(conf.commonImg);\r\n                that.conf.description = res.data.note;\r\n                that.conf.title = res.data.name;\r\n                that.conf.id = res.data.id;\r\n            if (res.data.statusName == '未投放') {\r\n                that.isPublish = false\r\n            } else {\r\n                that.isPublish = true\r\n            }\r\n            } else {\r\n            this.$message.error(res.message)\r\n            }\r\n        })\r\n    },\r\n    // 保存进入下一步\r\n    save() {\r\n      let that = this;\r\n      if (!that.conf.title) return this.$message.warning('请输入模板名称');\r\n      that.conf.conf.img = JSON.stringify(that.conf.img);\r\n      that.conf.conf.commonImg = JSON.stringify(that.conf.commonImg);\r\n      that.conf.conf.title = that.conf.title;\r\n      that.conf.conf.desc = that.conf.desc;\r\n      that.conf.conf = JSON.stringify(that.conf.conf);\r\n      that.conf.name = that.conf.title;\r\n      that.conf.note = that.conf.description;\r\n      that.$request.post('/api/saotx/acttpl/saveOrModify', that.conf, true, res => {\r\n        if (res.ret === '200000') {\r\n          // 投放\r\n          if (that.isPublish) {\r\n            // 跳到活动基本信息页\r\n            that.$router.push(\r\n              '/market/actTpl/actSetConf?form=' + res.data.form + '&tplCode=' + res.data.tplCode\r\n            )\r\n          } else {\r\n            // 不投放\r\n            // 跳到活动模板\r\n            that.$router.push('/market/actTpl')\r\n          }\r\n          that.$message.success('保存成功!')\r\n          return\r\n        }\r\n        that.$message.error(res.message)\r\n      })\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    #root{\r\n        .tool-bar{\r\n            .publish, .save{\r\n                // text-align: center;\r\n                padding: 20px;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Market/ActTpl/Jiugongge.ActTpl.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"root\"}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"活动管理\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"新建活动\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"模板设置\")])],1),_vm._v(\" \"),_c('el-menu',{attrs:{\"mode\":\"horizontal\",\"default-active\":_vm.defaultActive},on:{\"select\":_vm.switchMenu}},[_c('el-menu-item',{attrs:{\"index\":\"1\"}},[_vm._v(\"首页\")]),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"2\"}},[_vm._v(\"活动说明页\")]),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"3\"}},[_vm._v(\"我的奖品页\")]),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"4\"}},[_vm._v(\"中奖页\")]),_vm._v(\" \"),_c('el-menu-item',{attrs:{\"index\":\"5\"}},[_vm._v(\"未中奖页\")])],1),_vm._v(\" \"),_c('el-card',{attrs:{\"body-style\":{padding:'40px'}}},[_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('phone-model',{attrs:{\"title\":_vm.conf.title,\"titleLength\":30,\"page\":_vm.page,\"imgKey\":\"ACT_JIUGONGGE\",\"imgData\":_vm.conf.img,\"commonImg\":_vm.conf.commonImg},on:{\"edit\":_vm.edit}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":14}},[(_vm.page == 1)?_c('activity-info',{attrs:{\"title\":_vm.conf.title,\"desc\":_vm.conf.description},on:{\"titleInput\":_vm.titleInput,\"descInput\":_vm.descInput}}):_vm._e(),_vm._v(\" \"),(_vm.page != 2 && _vm.page !=3)?_c('activity-image-editor',{attrs:{\"editData\":_vm.editData,\"type\":_vm.editType,\"itemRepeat\":_vm.itemRepeat},on:{\"picChange\":_vm.editPic}}):_vm._e()],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"tool-bar\",staticStyle:{\"margin-top\":\"20px\"}},[_c('el-col',{attrs:{\"span\":8}},[_c('div',{staticStyle:{\"height\":\"100px\"}})]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":14}},[_c('div',{staticClass:\"publish\"},[_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"是否投放：\")]),_vm._v(\" \"),_c('el-switch',{model:{value:(_vm.isPublish),callback:function ($$v) {_vm.isPublish=$$v},expression:\"isPublish\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"save\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"medium\",\"width\":\"100\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a0cb820a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Market/ActTpl/Jiugongge.ActTpl.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a0cb820a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Jiugongge.ActTpl.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Jiugongge.ActTpl.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Jiugongge.ActTpl.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a0cb820a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Jiugongge.ActTpl.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Market/ActTpl/Jiugongge.ActTpl.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}