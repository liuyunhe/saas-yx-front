webpackJsonp([3],{"+KqV":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({loading:!1,keyTypeList:{1:"门店名称",2:"联系人姓名",3:"手机号",4:"专卖许可证"},form:{pageNo:1,pageSize:10,status:1,keyType:"3",keywords:""},pagination:{total:0},tableList:[],modifyForm:{isNew:!0,show:!1,id:"",shopName:"",licenceNo:"",ownerName:"",phoneNo:""}}),created(){this.list()},methods:{currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},resetForm(){this.form={pageNo:1,pageSize:10,status:1,keyType:"3",keywords:""},this.list()},list(e,t,a){let s=1;t&&(s=t),this.form.pageNo=s;let l=10;a&&(l=a),this.form.pageSize=l,this.loading=!0,this.$request.post("/api/wiseqr/seller/whitelist",this.form,!0,e=>{this.loading=!1,2e5==e.ret?(this.tableList=e.data.list||[],this.initPagination(e.data.page||{})):this.$message.error(e.message)})},resetModifyForm(){this.modifyForm={isNew:!0,show:!1,id:"",shopName:"",licenceNo:"",ownerName:"",phoneNo:""}},removeSeller(e,t){let a={id:t.id,status:0};this.$confirm("确认要删除白名单数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/api/wiseqr/seller/mstatus",a,!0,e=>{2e5==e.ret?this.list(null,this.form.pageNo,this.form.pageSize):this.$message.error(e.message)})}).catch(()=>{})},modifySeller(e,t){this.modifyForm={isNew:!1,show:!0,id:t.id,shopName:t.shopName,licenceNo:t.licenceNo,ownerName:t.ownerName,phoneNo:t.phoneNo}},newWhitelist(){this.resetModifyForm(),this.modifyForm.show=!0},modifyConfirm(){if(!/^1[0-9]{10}$/.test(this.modifyForm.phoneNo))return void this.$message.error("手机号格式错误！");this.modifyForm.isNew,this.$request.post("/api/wiseqr/seller/somWhitelist",this.modifyForm,!0,e=>{this.loading=!1,2e5==e.ret?(this.resetModifyForm(),this.list()):this.$message.error(e.message)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.newWhitelist}},[e._v("添加")])],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form",{staticClass:"search-block",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"请输入关键词"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.form.keyType,callback:function(t){e.$set(e.form,"keyType",t)},expression:"form.keyType"}},e._l(e.keyTypeList,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})}))],1)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s((e.form.pageNo-1)*e.form.pageSize+t.$index+1)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"门店名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"licenceNo",label:"专卖许可证",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ownerName",label:"联系人姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"联系人电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.modifySeller(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.removeSeller(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{center:"",title:"白名单管理",visible:e.modifyForm.show,width:"30%"},on:{"update:visible":function(t){e.$set(e.modifyForm,"show",t)},closed:e.resetModifyForm}},[a("div",[a("el-form",{staticClass:"search-block",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"门店名称"}},[a("el-input",{staticClass:"audit-score",attrs:{size:"small",disabled:!1,placeholder:"请输入门店名称"},model:{value:e.modifyForm.shopName,callback:function(t){e.$set(e.modifyForm,"shopName",t)},expression:"modifyForm.shopName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"专卖许可证"}},[a("el-input",{staticClass:"audit-score",attrs:{size:"small",type:"number",disabled:!1,placeholder:"请输入专卖许可证"},model:{value:e.modifyForm.licenceNo,callback:function(t){e.$set(e.modifyForm,"licenceNo",t)},expression:"modifyForm.licenceNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人姓名"}},[a("el-input",{staticClass:"audit-score",attrs:{size:"small",placeholder:"请输入联系人姓名"},model:{value:e.modifyForm.ownerName,callback:function(t){e.$set(e.modifyForm,"ownerName",t)},expression:"modifyForm.ownerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",required:!0}},[a("el-input",{staticClass:"audit-score",attrs:{size:"small",type:"number",placeholder:"请输入手机号"},model:{value:e.modifyForm.phoneNo,callback:function(t){e.$set(e.modifyForm,"phoneNo",t)},expression:"modifyForm.phoneNo"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.modifyConfirm}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.modifyForm.show=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("/INc")},"data-v-208fbdc6",null);t.default=i.exports},"+giB":function(e,t){},"/BNA":function(e,t){},"/Gwn":function(e,t){},"/INc":function(e,t){},"/doM":function(e,t,a){"use strict";var s={props:["sellerId","returnPath"],name:"SellerManage",data:()=>({listLoading:!1,awardTypeList:[{code:"",name:"全部"},{code:"1",name:"实物奖励"},{code:"3",name:"红包奖励"},{code:"6",name:"积分奖励"}],filters:{awardType:"",time:[]},scanInstoreList:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.getScanInstoreList()},methods:{getScanInstoreList(){let e={sellerId:this.sellerId,awardType:this.filters.awardType,startTime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endTime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};this.postSearch(e)},postSearch(e){this.$request.post("/lsh/seller-manager/seller/scanInstore",e,!1,e=>{console.log(e.data),this.scanInstoreList=e.data.list,this.total=e.data.page.count,this.pageNo=e.data.page.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getScanInstoreList()},getStatus(){this.filters.awardType="",this.filters.time=[],this.pageNo=1,this.currentPage=1,this.getScanInstoreList()},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.getScanInstoreList()},returnMgr(){this.$router.push({path:this.returnPath})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters,"label-width":"90px"}},[a("el-form-item",{attrs:{size:"small",label:"时间区间："}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.filters.time,callback:function(t){e.$set(e.filters,"time",t)},expression:"filters.time"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"奖励类型："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.awardType,callback:function(t){e.$set(e.filters,"awardType",t)},expression:"filters.awardType"}},e._l(e.awardTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitForm}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:e.getStatus}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.scanInstoreList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"brandName",label:"品牌"}}),e._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"规格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"num",label:"单次入库数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"award",label:"单次扫码奖励"}}),e._v(" "),a("el-table-column",{attrs:{prop:"awardType",label:"奖励类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.awardType?a("span",[e._v(e._s("实物奖励"))]):3==t.row.awardType?a("span",[e._v(e._s("红包奖励"))]):6==t.row.awardType?a("span",[e._v(e._s("积分奖励"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"入库时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(new Date(t.row.ctime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.returnMgr}},[e._v("返回列表")])],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("nCSy"),a("E8jQ")},"data-v-5882e931",null);t.a=i.exports},"/jIQ":function(e,t){},"/lNv":function(e,t,a){"use strict";var s={props:["sellerId","returnPath"],name:"",data:()=>({disabled:!0,headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},saleZone:[],commercialList:[{code:"",name:"全部"},{code:"1",name:"食杂店"},{code:"2",name:"便利店"},{code:"3",name:"超市"},{code:"4",name:"商场"},{code:"5",name:"烟酒商店"},{code:"6",name:"娱乐服务"},{code:"7",name:"其他"}],districtList:[{code:"",name:"全部"},{code:"1",name:"城镇"},{code:"2",name:"乡村"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],iconList:[],lbsIocn:"",ruleForm:{saleZoneCode:"",shopImg:"",shopName:"",shopImgCode:"",provCode:"",provName:"",cityCode:"",cityName:"",countyCode:"",countyName:"",detailAddr:"",licenseNo:"",licenseImg:"",licenseImgCode:"",areaType:"",commercial:"",salesman:"",contactName:"",contactPhone:"",status:"",auditMsg:"",shopLat:null,shopLng:null,gender:null,shopIconCode:null,birthday:null},rules:{shopImg:[{required:!0,message:"请上传门店照片",trigger:"change"}],shopName:[{required:!0,message:"请输入门店名称",trigger:"blur"}],contactName:[{required:!0,message:"请输入经营人姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入经营人电话",trigger:"blur"}],shopLat:[{required:!0,message:"请输入Lat",trigger:"blur"}],shopLng:[{required:!0,message:"请输入Lng",trigger:"blur"}],provCode:[{required:!0,message:"请选择省份",trigger:"change"}],cityCode:[{required:!0,message:"请选择城市",trigger:"change"}],countyCode:[{required:!0,message:"请选择地区",trigger:"change"}],detailAddr:[{required:!0,message:"请输入门店地址",trigger:"blur"}],licenseNo:[{required:!0,message:"请输入烟草专卖证号",trigger:"blur"}],licenseImg:[{required:!0,message:"请上传烟草专卖证号照片",trigger:"change"}],areaType:[{required:!0,message:"请选择区域",trigger:"change"}],saleZoneCode:[{required:!0,message:"请选择销区",trigger:"change"}],commercial:[{required:!0,message:"请选择业态",trigger:"change"}],salesman:[{required:!0,message:"请输入业务员姓名",trigger:"change"}],auditMsg:[{required:!0,message:"请输入审核不通过理由",trigger:"change"}],authStatus:[{required:!0,message:"请选择审核状态",trigger:"change"}],failReason:[]},applyTime:"",auditTime:"",dialogImageUrl:"",dialogVisible:!1}),created(){this.getIconList(),this.getSaleZone(),this.getOneCategory()},methods:{handleClickMap(e,t){window.open(`https://mapapi.qq.com/web/mapComponents/locationPicker/v/index.html?search=1&type=0&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77&referer=myapp&coord=${e},${t}`)},getIconList(){this.$request.post("/saasHbseller/shop/lbsIcon/query",{page:1,pageSize:50,iconName:""},!1,e=>{"200"==e.code&&(this.iconList=e.data.records||[]),this.getReviewDetail()})},handleLbsIconChange(e){this.lbsIocn=this.iconList.find(t=>t.iconCode==e).iconUrl},handlePictureCardPreview(e){console.log(e),this.dialogImageUrl=e,this.dialogVisible=!0},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[])})},getReviewDetail(){this.$request.post("/saasHbseller/seller/manager/selectById",{id:this.sellerId},!1,e=>{200==e.code&&(this.applyTime=e.data.info.ctime,this.auditTime=e.data.info.auditTime,this.ruleForm.shopImg=e.data.info.shopImg,this.ruleForm.shopName=e.data.info.shopName,this.ruleForm.shopImgCode=e.data.info.shopImgCode,this.ruleForm.contactName=e.data.info.contactName,this.ruleForm.contactPhone=e.data.info.contactPhone,this.ruleForm.provCode=e.data.info.provCode+"",this.ruleForm.provName=e.data.info.provName+"",this.ruleForm.cityCode=e.data.info.cityCode+"",this.ruleForm.cityName=e.data.info.cityName+"",this.ruleForm.countyCode=e.data.info.countyCode+"",this.ruleForm.countyName=e.data.info.countyName+"",this.ruleForm.shopLat=e.data.info.shopLat+"",this.ruleForm.shopLng=e.data.info.shopLng+"",this.ruleForm.saleZoneCode=e.data.info.saleZoneCode,this.ruleForm.detailAddr=e.data.info.detailAddr,this.ruleForm.licenseNo=e.data.info.licenseNo,this.ruleForm.licenseImg=e.data.info.licenseImg,this.ruleForm.licenseImgCode=e.data.info.licenseImgCode,this.ruleForm.areaType=e.data.info.areaType+"",this.ruleForm.salesman=e.data.info.salesman,this.ruleForm.gender=e.data.info.gender,this.ruleForm.shopIconCode=e.data.info.shopIconCode,this.ruleForm.birthday=e.data.info.birthday,this.ruleForm.status=e.data.info.status+"",this.ruleForm.auditMsg=e.data.info.auditMsg||"",this.getTwoCategory(),this.getThreeCategory(),this.lbsIocn=this.iconList.find(e=>e.iconCode==this.ruleForm.shopIconCode).iconUrl)})},getOneCategory(){this.$request.post("/saasHbseller/region/province",{},!0,e=>{this.cateLvl1List=[...e]})},selectBrand1(e){this.ruleForm.provName=this.cateLvl1List.find(t=>t.code===e).name,this.ruleForm.cityCode="",this.cateLvl2List=[],this.ruleForm.countyCode="",this.cateLvl3List=[],this.getTwoCategory()},getTwoCategory(){""!=this.ruleForm.provCode&&this.$request.post("/saasHbseller/region/city",{parentCode:this.ruleForm.provCode},!1,e=>{this.cateLvl2List=[...e]})},selectBrand2(e){this.ruleForm.cityName=this.cateLvl2List.find(t=>t.code===e).name,this.ruleForm.countyCode="",this.cateLvl3List=[],this.getThreeCategory()},getThreeCategory(){""!=this.ruleForm.cityCode&&this.$request.post("/saasHbseller/region/district",{parentCode:this.ruleForm.cityCode},!1,e=>{this.cateLvl3List=[...e]})},selectBrand3(e){this.ruleForm.countyName=this.cateLvl3List.find(t=>t.code===e).name},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{let e={id:this.sellerId,shopName:this.ruleForm.shopName,shopImgCode:this.ruleForm.shopImgCode,provCode:this.ruleForm.provCode,provName:this.ruleForm.provName,cityCode:this.ruleForm.cityCode,cityName:this.ruleForm.cityName,countyCode:this.ruleForm.countyCode,countyName:this.ruleForm.countyName,shopLat:this.ruleForm.shopLat,shopLng:this.ruleForm.shopLng,saleZoneCode:this.ruleForm.saleZoneCode,detailAddr:this.ruleForm.detailAddr,licenseNo:this.ruleForm.licenseNo,licenseImgCode:this.ruleForm.licenseImgCode,areaType:this.ruleForm.areaType,salesman:this.ruleForm.salesman,contactName:this.ruleForm.contactName,contactPhone:this.ruleForm.contactPhone,gender:this.ruleForm.gender,shopIconCode:this.ruleForm.shopIconCode,birthday:this.ruleForm.birthday};this.postParams(e)}})},postParams(e){this.$request.post("/saasHbseller/seller/manager/infoUpdate",e,!0,e=>{200==e.code?(this.$message({message:"保存成功！",type:"success"}),this.returnMgr()):this.$message({message:e.msg,type:"warning"})},e=>{})},handleAvatarSuccess(e,t){this.ruleForm.shopImg=e.data.filePath,this.ruleForm.shopImgCode=e.data.rdmCode},handleAvatarSuccessUrl(e,t){this.ruleForm.licenseImgCode=e.data.rdmCode,this.ruleForm.licenseImg=e.data.filePath},returnMgr(){this.$router.push({path:this.returnPath})},cancelModify(){this.disabled=!this.disabled,this.$refs.ruleForm.resetFields(),this.getReviewDetail()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"basic-msg-container-1"},[a("div",{staticClass:"basic-msg-broad"},[a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[e._v("申请时间：")]),e._v(e._s(e.applyTime))]),e._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[e._v("审核时间：")]),e._v(e._s(e.auditTime))])]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,disabled:e.disabled,inline:!0,rules:e.rules,"label-width":"150px"}},[a("div",{staticClass:"basic-msg-form-container"},[a("el-form-item",{attrs:{label:"门店照片：",prop:"shopImg",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.ruleForm.shopImg,callback:function(t){e.$set(e.ruleForm,"shopImg",t)},expression:"ruleForm.shopImg"}}),e._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/wiseqr/attach/commonNewUpload","list-type":"picture-card",headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess,data:{channel:"hebei-sellerInfo "}}},[e.ruleForm.shopImg?a("img",{staticClass:"avatar",attrs:{width:"200",height:"200",src:e.ruleForm.shopImg}}):e._e()]),e._v(" "),a("div",{staticClass:"pic-tips"},[e._v("上传图片的最佳尺寸：750像素*468像素；格式png、jpg；大小不超过2M")]),e._v(" "),a("div",[e.ruleForm.shopImg?a("div",{staticClass:"preview-btn el-button el-button--primary el-button--small",on:{click:function(t){e.handlePictureCardPreview(e.ruleForm.shopImg)}}},[e._v("预览")]):e._e()])],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"门店名称：",prop:"shopName",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.shopName,callback:function(t){e.$set(e.ruleForm,"shopName",t)},expression:"ruleForm.shopName"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"烟草专卖证号：",prop:"licenseNo",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:e.ruleForm.licenseNo,callback:function(t){e.$set(e.ruleForm,"licenseNo",t)},expression:"ruleForm.licenseNo"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"烟草专卖证号照片：",prop:"licenseImg",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.ruleForm.licenseImg,callback:function(t){e.$set(e.ruleForm,"licenseImg",t)},expression:"ruleForm.licenseImg"}}),e._v(" "),a("el-upload",{staticClass:"product-url",attrs:{action:"/api/wiseqr/attach/commonNewUpload","list-type":"picture-card",headers:e.headers,"show-file-list":!1,"on-preview":e.handlePictureCardPreview,"on-success":e.handleAvatarSuccessUrl,data:{channel:"hebei-sellerInfo "}}},[e.ruleForm.licenseImg?a("img",{staticClass:"avatar",attrs:{width:"200",height:"200",src:e.ruleForm.licenseImg}}):e._e()]),e._v(" "),a("div",{staticClass:"pic-tips"},[e._v("此图用于商品详情展示；尺寸：宽750像素；格式png、jpg；大小不超过2M")]),e._v(" "),a("div",[e.ruleForm.licenseImg?a("div",{staticClass:"preview-btn el-button el-button--primary el-button--small",on:{click:function(t){e.handlePictureCardPreview(e.ruleForm.licenseImg)}}},[e._v("预览")]):e._e()])],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"经营人姓名：",prop:"contactName",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{size:"small",prop:"gender",label:"性别："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[a("el-option",{attrs:{label:"男",value:1}}),e._v(" "),a("el-option",{attrs:{label:"女",value:2}})],1)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"经营人电话：",prop:"contactPhone",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.contactPhone,callback:function(t){e.$set(e.ruleForm,"contactPhone",t)},expression:"ruleForm.contactPhone"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"LBS显示图标名称：",prop:"saleZoneCode",size:"small"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.handleLbsIconChange},model:{value:e.ruleForm.shopIconCode,callback:function(t){e.$set(e.ruleForm,"shopIconCode",t)},expression:"ruleForm.shopIconCode"}},e._l(e.iconList,function(e,t){return a("el-option",{key:t,attrs:{label:e.iconName,value:e.iconCode}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"LBS图标：",size:"small"}},[e.ruleForm.shopIconCode?a("img",{staticStyle:{display:"block",border:"1px dashed #c0ccda"},attrs:{width:"100",height:"100",src:e.lbsIocn}}):e._e()]),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"位置：",prop:"provCode"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand1},model:{value:e.ruleForm.provCode,callback:function(t){e.$set(e.ruleForm,"provCode",t)},expression:"ruleForm.provCode"}},e._l(e.cateLvl1List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cityCode"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand2},model:{value:e.ruleForm.cityCode,callback:function(t){e.$set(e.ruleForm,"cityCode",t)},expression:"ruleForm.cityCode"}},e._l(e.cateLvl2List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"countyCode"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand3},model:{value:e.ruleForm.countyCode,callback:function(t){e.$set(e.ruleForm,"countyCode",t)},expression:"ruleForm.countyCode "}},e._l(e.cateLvl3List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"门店地址：",prop:"detailAddr",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.detailAddr,callback:function(t){e.$set(e.ruleForm,"detailAddr",t)},expression:"ruleForm.detailAddr"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"定位lat：",prop:"shopLat",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.shopLat,callback:function(t){e.$set(e.ruleForm,"shopLat",t)},expression:"ruleForm.shopLat"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"定位lng：",prop:"shopLat",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.shopLng,callback:function(t){e.$set(e.ruleForm,"shopLng",t)},expression:"ruleForm.shopLng"}}),e._v(" "),a("div",{staticClass:"preview-btn el-button el-button--primary el-button--small",staticStyle:{"margin-left":"20px"},on:{click:function(t){e.handleClickMap(e.ruleForm.shopLat,e.ruleForm.shopLng)}}},[e._v("核对定位")])],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{size:"small",prop:"areaType",label:"区域"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.areaType,callback:function(t){e.$set(e.ruleForm,"areaType",t)},expression:"ruleForm.areaType"}},e._l(e.districtList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode",size:"small"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.ruleForm.saleZoneCode,callback:function(t){e.$set(e.ruleForm,"saleZoneCode",t)},expression:"ruleForm.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"业务员姓名：",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.salesman,callback:function(t){e.$set(e.ruleForm,"salesman",t)},expression:"ruleForm.salesman"}})],1),e._v(" "),a("div"),e._v(" "),"/seller/review/reviewDetail"===e.$route.path?a("el-form-item",{attrs:{label:"审核状态：",prop:"status",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}}),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[e._v("审核通过")]),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[e._v("审核不通过")])],1):e._e(),e._v(" "),a("div"),e._v(" "),3==e.ruleForm.status?a("el-form-item",{attrs:{label:"审核不通过理由：",prop:"auditMsg",size:"small"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.ruleForm.auditMsg,callback:function(t){e.$set(e.ruleForm,"auditMsg",t)},expression:"ruleForm.auditMsg"}})],1):e._e(),e._v(" "),a("div")],1)]),e._v(" "),a("div",{staticClass:"basic-msg-form-bt"},["/seller/mgr/sellerDetail"===e.$route.path?[e.disabled?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.disabled=!e.disabled}}},[e._v("修改基本信息")]):e._e()]:e._e(),e._v(" "),e.disabled?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),e.disabled?e._e():a("el-button",{on:{click:e.cancelModify}},[e._v("取消")]),e._v(" "),e.disabled?a("el-button",{on:{click:e.returnMgr}},[e._v("返回列表")]):e._e()],2),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("yBrm"),a("tKth")},"data-v-566d92c9",null);t.a=i.exports},"0cSA":function(e,t){},"0jEH":function(e,t,a){"use strict";var s={props:["sellerId","returnPath"],name:"SellerManage",data:()=>({listLoading:!1,filters:{sortType:1,sortValue:1},fansList:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.querySellerFans()},methods:{querySellerFans(e){let t={sellerId:this.sellerId,sortType:this.filters.sortType,sortValue:this.filters.sortValue,pageNo:this.pageNo,pageSize:10};e&&(t.sortType=e,1==this.filters.sortValue?this.filters.sortValue=0:this.filters.sortValue=1),this.postSearch(t)},postSearch(e){this.$request.post("/lsh/seller-manager/seller/querySellerFans",e,!1,e=>{console.log(e.data),this.fansList=e.data.list,this.total=e.data.page.count,this.pageNo=e.data.page.pageNo})},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.querySellerFans()},returnMgr(){this.$router.push({path:this.returnPath})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters,"label-width":"90px"}},[a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.querySellerFans(1)}}},[e._v("按最后扫码时间")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.querySellerFans(2)}}},[e._v("按扫码次数")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.querySellerFans(3)}}},[e._v("按扫店码次数")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fansList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openId",label:"微信openld",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"scanSellerCount",label:"扫店码次数",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"scanProdCount",label:"扫烟码次数",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lastScanTime",label:"最后一次扫店码时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(new Date(t.row.lastScanTime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.returnMgr}},[e._v("返回列表")])],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("Gw0h"),a("a2us")},"data-v-30804c65",null);t.a=i.exports},"1VzB":function(e,t){},"2K1m":function(e,t){},"3Kap":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"FansAge",data:()=>({loading:!1,saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),search:{saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),provinceCode:null},saleZone:[],saleZoneProv:[],showBtn:!1,listLoading:!1,dimAgeLevel:[],ageList:[],genderList:[]}),mounted(){null===this.saleZoneCode&&(this.showBtn=!0),this.getSaleZone(),null===this.saleZoneCode?this.handleClickALL("allZone"):this.getData()},methods:{handleClickALL(e){this.search.saleZoneCode=null,this.search.provinceCode=null;let t={saleZoneCode:"allZone"===e?"all":null,provCode:"allProv"===e?"all":null};this.$request.post("/dataStats/statHbsSeller/fansDs/ageGenderDistribution",t,!1,e=>{"200"==e.code&&(this.dimAgeLevel=e.data.dimAgeLevel,this.ageList=e.data.ageList,this.genderList=e.data.genderList,this.handleDrawMap1(),this.handleDrawMap2())})},handleDrawMap1(){let e=this.$echarts.init(document.getElementById("echart-1"));console.log(e);let t={color:["#00a3ff","#ffd135","#00ce7b"],title:{text:"性别",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"40%",formatter:function(e){return e}},series:[{name:"性别",type:"pie",radius:"50%",data:this.genderList.map(e=>({value:e.num,name:1==e.fanGender?"男":2==e.fanGender?"女":"未知"})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.setOption(t)},handleDrawMap2(){let e=this.$echarts.init(document.getElementById("echart-2"));const t=this.ageList.map(e=>{if(void 0!==e.ageLevel)return{value:e.num,name:this.dimAgeLevel.find(t=>t.ageLevel===e.ageLevel).levelName}});console.log(t);let a={color:["#00a3ff","#ffd135","#00ce7b","#a15ee3","#00cece","#ff3559"],title:{text:"年龄",left:"40%"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",right:0,top:"30%",formatter:function(e){return e}},series:[{name:"年龄",type:"pie",radius:"50%",data:t,center:["45%","50%"],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.setOption(a)},handleSaleZoneCodeChange(e){this.search.provinceCode=null,this.$request.post("/api/saleZone/saleZoneProv",{saleZone:e},!1,e=>{"200"==e.code&&(this.saleZoneProv=e.data||[])})},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.search.saleZoneCode=this.saleZoneCode))})},getData(){let e={saleZoneCode:this.search.saleZoneCode,provCode:this.search.provinceCode};e.saleZoneCode||e.provCode?this.$request.post("/dataStats/statHbsSeller/fansDs/ageGenderDistribution",e,!1,e=>{"200"==e.code&&e.data&&(this.dimAgeLevel=e.data.dimAgeLevel,this.ageList=e.data.ageList,this.genderList=e.data.genderList,this.handleDrawMap1(),this.handleDrawMap2())}):this.$message.warning("提示：请选择销区或省份进行查询！")}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"seller-rank-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",[a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择销区"},on:{change:e.handleSaleZoneCodeChange},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1)],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"省份：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择省份"},model:{value:e.search.provinceCode,callback:function(t){e.$set(e.search,"provinceCode",t)},expression:"search.provinceCode"}},e._l(e.saleZoneProv,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getData}},[e._v("查询")]),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allZone")}}},[e._v("全部销区")]):e._e(),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allProv")}}},[e._v("全部省份")]):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{height:"20px"}}),e._v(" "),a("el-card",[a("div",{staticClass:"echart-container"},[a("div",{attrs:{id:"echart-1"}}),e._v(" "),a("div",{attrs:{id:"echart-2"}})])])],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("XFZA")},"data-v-116d1c16",null);t.default=i.exports},"4/Hn":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("/lNv"),l=a("0jEH"),i=a("e05C"),r=a("f7LP"),o=a("/doM"),n={name:"SelllerDetail",props:["sellerId"],components:{SellerMsg1:s.a,SellerMsg2:l.a,SellerMsg3:i.a,SellerMsg4:r.a,SellerMsg5:o.a},data:()=>({activeName:"1",returnPath:"/seller/mgr"}),methods:{handleClick(e,t){console.log(e,t)}}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"seller-detail-container"},[t("seller-msg1",{attrs:{sellerId:this.sellerId,returnPath:this.returnPath}})],1)},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(e){a("qZzT")},"data-v-b1dee5d6",null);t.default=d.exports},"4JJ4":function(e,t){},"62NV":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({search:{page:1,pageSize:10,keywordType:"",keyword:""},pagination:{total:0},tableList:[],form:{show:!1,id:"",shopImg:"",licenseImg:"",auditStatus:""},loading:!1}),created(){this.list()},methods:{inputWithSelectChange(e){this.search.keyword=""},currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e)},reset(){this.search={page:1,pageSize:10,keywordType:"",keyword:""},this.list()},list(e,t,a){let s=1;t&&(s=t),this.search.page=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/saasHbseller/fans/select",this.search,!1,e=>{"200"==e.code?(this.tableList=e.data.records||[],this.initPagination(e.data.total)):this.$message.error(e.msg)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{size:"small",label:"关键词："}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"320px"},attrs:{placeholder:"请输入内容"},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}},[a("el-select",{staticStyle:{width:"140px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.inputWithSelectChange},slot:"prepend",model:{value:e.search.keywordType,callback:function(t){e.$set(e.search,"keywordType",t)},expression:"search.keywordType"}},[a("el-option",{attrs:{label:"昵称 ",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"手机号",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"店铺名称",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"烟草许可证号",value:"4"}})],1)],1)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.search.page-1)*e.search.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"fanNickName",label:"昵称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fanGender",label:"性别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.fanGender?a("span",[e._v("男")]):e._e(),e._v(" "),2==t.row.fanGender?a("span",[e._v("女")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"birthday",label:"出生年月",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fanMobile",label:"手机号",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"licenseNo",label:"烟草专卖证号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"所属门店",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"绑定时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"scanCodeNum",label:"扫烟码次数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopScanActNum",label:"核销次数",align:"center"}})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.page,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("941l")},"data-v-4ae5e697",null);t.default=i.exports},"6U5d":function(e,t){},"78HK":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"FansAge",data:()=>({loading:!1,saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),search:{saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),provCode:null},saleZone:[],saleZoneProv:[],showBtn:!1,listLoading:!1,curAllNum:"",newAllNum:"",listData:[]}),mounted(){null===this.saleZoneCode&&(this.showBtn=!0),this.getSaleZone(),null===this.saleZoneCode?this.handleClickALL("allZone"):this.getData()},methods:{handleClickALL(e){this.search.saleZoneCode=null,this.search.provCode=null;let t={type:e};this.$request.post("/dataStats/statHbsSeller/sellerNumber/allData",t,!1,e=>{if("200"==e.code){const t={curAllNum:44,newAllNum:16,listData:[{curNum:12,name:"西北大区",newNum:5},{curNum:10,name:"西南大区",newNum:3},{curNum:12,name:"东北大区",newNum:5},{curNum:10,name:"北京销区",newNum:3}]};this.curAllNum=e.data.curAllNum?e.data.curAllNum:t.curAllNum,this.newAllNum=e.data.newAllNum?e.data.newAllNum:t.newAllNum,this.listData=e.data.listData.length?e.data.listData:t.listData,this.handleDrawMap1()}})},handleDrawMap1(){let e=this.$echarts.init(document.getElementById("echart-1"));console.log(e);let t=[],a=[];const s=this.listData.map(e=>(t.push(e.curNum),a.push(e.newNum),e.name)),l=this.curAllNum;let i={color:["#00a3ff","#d5d5d5"],title:{text:"零售户区域分布",left:"center",subtext:`新增零售户:${this.newAllNum}家   累计零售户:${l}家`},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{top:"bottom"},grid:{left:"3%",right:"4%",bottom:"10%",top:"15%",containLabel:!0},xAxis:[{type:"category",data:s}],yAxis:[{type:"value",name:"数量"}],series:[{name:"新增零售户",type:"bar",stack:"Ad",emphasis:{focus:"series"},barMaxWidth:40,data:a},{name:"累计零售户",type:"bar",stack:"Ad",emphasis:{focus:"series"},barMaxWidth:40,data:t}]};e.setOption(i)},handleSaleZoneCodeChange(e){this.search.provCode=null,this.$request.post("/api/saleZone/saleZoneProv",{saleZone:e},!1,e=>{"200"==e.code&&(this.saleZoneProv=e.data||[])})},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.search.saleZoneCode=this.saleZoneCode))})},getData(){let e={saleZoneCode:this.search.saleZoneCode,provCode:this.search.provCode};e.saleZoneCode||e.provCode?this.$request.post("/dataStats/statHbsSeller/sellerNumber/regionData",e,!1,e=>{"200"==e.code&&e.data&&(this.curAllNum=e.data.curAllNum,this.newAllNum=e.data.newAllNum,this.listData=e.data.listData,this.handleDrawMap1())}):this.$message.warning("提示：请选择销区或省份进行查询！")}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"seller-rank-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",[a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择销区"},on:{change:e.handleSaleZoneCodeChange},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1)],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"省份：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择省份"},model:{value:e.search.provCode,callback:function(t){e.$set(e.search,"provCode",t)},expression:"search.provCode"}},e._l(e.saleZoneProv,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getData}},[e._v("查询")]),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allZone")}}},[e._v("全部销区")]):e._e(),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allProv")}}},[e._v("全部省份")]):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{height:"20px"}}),e._v(" "),a("el-card",[a("div",{staticClass:"echart-container"},[a("div",{attrs:{id:"echart-1"}}),e._v(" "),a("div",{attrs:{id:"echart-2"}})])])],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("ONaW")},"data-v-4fff58a8",null);t.default=i.exports},"7ynx":function(e,t){},"82wY":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"AddMessage",props:["id"],data:()=>({showNum:!1,form:{id:"",title:"",subTitle:"",msgContent:"",saleZoneCode:null,msgTarget:null,status:"1",shopGearList:[],shopLevelList:[]},rules:{title:[{required:!0,message:"请输入消息主标题",trigger:"blur"}],subTitle:[{required:!0,message:"请输入消息副标题",trigger:"blur"}],msgContent:[{required:!0,message:"请输入消息内容",trigger:"blur"}],saleZoneCode:[{required:!0,message:"请选择销区",trigger:"change"}],msgTarget:[{required:!0,message:"请选择接收人",trigger:"change"}],status:[{required:!0,message:"请选择是否发送",trigger:"change"}],shopGearList:[{required:!0,message:"请选择档位",trigger:"change"}],shopLevelList:[{required:!0,message:"请选择等级",trigger:"change"}]},saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),saleZone:[]}),created(){this.getSaleZone(),this.$request.post("/saasHbseller/msg/system/detail",{id:this.id},!1,e=>{if("200"==e.code){this.form.id=e.data.msgDetail.id,this.form.title=e.data.msgDetail.title,this.form.subTitle=e.data.msgDetail.subTitle,this.form.msgContent=e.data.msgDetail.msgContent,this.form.saleZoneCode=e.data.msgDetail.saleZoneCode,this.form.msgTarget=e.data.msgDetail.msgTarget+"",this.form.status=e.data.msgDetail.status+"";let t=e.data.gears,a=e.data.levels;5==t.length?this.form.shopGearList=["0"]:this.form.shopGearList=t.map(e=>e.shopGear+""),8==a.length?this.form.shopLevelList=["0"]:this.form.shopLevelList=a.map(e=>e.shopLevel+"")}else this.$message({message:e.msg,type:"warning"})})},methods:{onCheckNum(){if(!this.form.saleZoneCode)return void this.$message({message:"请选择销区",type:"warning"});if(!this.form.msgTarget)return void this.$message({message:"请选择接收人",type:"warning"});if(!this.form.shopGearList.length)return void this.$message({message:"请选择档位",type:"warning"});if(!this.form.shopLevelList.length)return void this.$message({message:"请选择等级",type:"warning"});const e={saleZoneCode:this.form.saleZoneCode,msgTarget:this.form.msgTarget,shopGears:this.form.shopGearList.join(","),shopLevels:this.form.shopLevelList.join(",")};console.log(e),"0"===e.shopGears&&(e.shopGears=["1","2","3","4","5"].join(",")),"0"===e.shopLevels&&(e.shopLevels=["1","2","3","4","5","6","7","8"].join(",")),this.$request.post("/saasHbseller/msg/system/totalNum",e,!1,e=>{"200"==e.code?this.$alert(`当前人数${e.data.totalNum}`,"查看人数",{confirmButtonText:"确定"}):this.$message({message:e.msg,type:"warning"})})},handleSelectChange(e,t){console.log(e),e.indexOf("0")>=0&&(console.log(11110),this.form[t]=[],this.form[t].push("0"))},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[])})},confUpdate(e){this.$refs[e].validate(e=>{if(e){const e=Object.assign({},this.form);1==e.shopGearList.length&&"0"===e.shopGearList[0]&&(e.shopGearList=["1","2","3","4","5"]),1==e.shopLevelList.length&&"0"===e.shopLevelList[0]&&(e.shopLevelList=["1","2","3","4","5","6","7","8"]),this.$request.post("/saasHbseller/msg/system/update",e,!0,e=>{"200"==e.code?(this.$message({message:"更新成功！",type:"success"}),this.$router.push("/seller/messagemgr")):(console.log(e),this.$message({message:e.msg,type:"warning"}))})}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"msg-container"},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.form,rules:e.rules}},[a("div",{staticClass:"title"},[e._v("基本信息：")]),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"消息主标题：",prop:"title"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入消息主标题，最长10个字",maxlength:"10"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"消息副标题：",prop:"subTitle"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入消息副标题，最长20个字",maxlength:"20"},model:{value:e.form.subTitle,callback:function(t){e.$set(e.form,"subTitle",t)},expression:"form.subTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"消息内容：",prop:"msgContent"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:"请输入消息内容，最长100个字",maxlength:"100"},model:{value:e.form.msgContent,callback:function(t){e.$set(e.form,"msgContent",t)},expression:"form.msgContent"}})],1),e._v(" "),a("div",{staticClass:"title"},[e._v("接收条件：")]),e._v(" "),a("el-form-item",{attrs:{label:"目标销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.saleZoneCode,callback:function(t){e.$set(e.form,"saleZoneCode",t)},expression:"form.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择接收人:",prop:"msgTarget"}},[a("el-radio-group",{model:{value:e.form.msgTarget,callback:function(t){e.$set(e.form,"msgTarget",t)},expression:"form.msgTarget"}},[a("el-radio",{attrs:{label:"1"}},[e._v("零售户")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("消费者")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"选择档位：",prop:"shopGearList"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},on:{change:function(t){e.handleSelectChange(t,"shopGearList")}},model:{value:e.form.shopGearList,callback:function(t){e.$set(e.form,"shopGearList",t)},expression:"form.shopGearList"}},[a("el-option",{attrs:{value:"0",label:"全部"}},[e._v("全部")]),e._v(" "),a("el-option",{attrs:{value:"1",label:"1档"}},[e._v("1档")]),e._v(" "),a("el-option",{attrs:{value:"2",label:"2档"}},[e._v("2档")]),e._v(" "),a("el-option",{attrs:{value:"3",label:"3档"}},[e._v("3档")]),e._v(" "),a("el-option",{attrs:{value:"4",label:"4档"}},[e._v("4档")]),e._v(" "),a("el-option",{attrs:{value:"5",label:"5档"}},[e._v("5档")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"选择等级：",prop:"shopLevelList"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},on:{change:function(t){e.handleSelectChange(t,"shopLevelList")}},model:{value:e.form.shopLevelList,callback:function(t){e.$set(e.form,"shopLevelList",t)},expression:"form.shopLevelList"}},[a("el-option",{attrs:{value:"0",label:"全部"}},[e._v("全部")]),e._v(" "),a("el-option",{attrs:{value:"1",label:"1级"}},[e._v("1级")]),e._v(" "),a("el-option",{attrs:{value:"2",label:"2级"}},[e._v("2级")]),e._v(" "),a("el-option",{attrs:{value:"3",label:"3级"}},[e._v("3级")]),e._v(" "),a("el-option",{attrs:{value:"4",label:"4级"}},[e._v("4级")]),e._v(" "),a("el-option",{attrs:{value:"5",label:"5级"}},[e._v("5级")]),e._v(" "),a("el-option",{attrs:{value:"6",label:"6级"}},[e._v("6级")]),e._v(" "),a("el-option",{attrs:{value:"7",label:"7级"}},[e._v("7级")]),e._v(" "),a("el-option",{attrs:{value:"8",label:"8级"}},[e._v("8级")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onCheckNum}},[e._v("查看人数")])],1),e._v(" "),a("el-form-item",{attrs:{label:"是否立即发送:",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){e.confUpdate("form")}}},[e._v("提交")]),e._v(" "),a("router-link",{attrs:{to:"/seller/messagemgr",replace:""}},[a("el-button",{staticStyle:{width:"100px"},on:{click:function(e){}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("ntMB")},"data-v-0f2d5b7e",null);t.default=i.exports},"8yZU":function(e,t,a){"use strict";var s={props:["step"],data(){return{detail:!1,loading:!1,audStatusList:{1:"未审核",2:"审核通过",3:"审核不通过"},keyTypeList:{2:"联系人姓名",1:"门店名称",3:"手机号",4:"专卖许可证"},form:{pageNo:1,pageSize:10,step:this.step,audStatus:"1",province:"",city:"",district:"",keyType:"2",keywords:"",stime:"",etime:"",dates:[]},pagination:{total:0},provinceList:[],cityList:[],districtList:[],tableList:[],auditForm:{hisAudit:!1,show:!1,title:"",step:this.step,id:"",audStatus:"",score:"",note:""},detailForm:{id:"",ownerName:"",phoneNo:"",licenceNo:"",shopName:"",licenceImg:"",province:"",city:"",district:"",provinceName:"",cityName:"",districtName:"",detail:"",openid:"",nickname:"",step:{},imgs:[]},detailAuditRules:{audStatus:[{required:!0,message:"审核状态不能为空！",trigger:"blur"}],note:[{required:!0,validator:(e,t,a)=>t?t.length>50?a(new Error("审核不通过时理由不能超过50个字！")):void a():a(new Error("审核不通过时理由不能为空！")),trigger:"blur"}],score:[{required:!0,message:"审核状态不能为空！",trigger:"blur"}]},minScore:0,maxScore:20}},created(){2==this.step&&(this.maxScore=30),this.getRegions(1),this.list()},methods:{currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},checkScore(e){let t=e;e>this.maxScore?t=this.maxScore:e<this.minScore&&(t=this.minScore),this.auditForm.score=t,this.detail?this.$refs.scoreInput2.currentValue=t:this.$refs.scoreInput1.currentValue=t},getRegions(e,t){1==e&&(t=""),this.$request.post("/api/wiseqr/dim/regionByPCode",{parentCode:t},!0,t=>{2e5==t.ret&&(1==e?this.provinceList=t.data||[]:2==e?this.cityList=t.data||[]:3==e&&(this.districtList=t.data||[]))})},regionChange(e){1==e?(this.form.city="",this.form.district="",this.getRegions(2,this.form.province)):2==e&&(this.form.district="",this.getRegions(3,this.form.city))},resetForm(){this.form={pageNo:1,pageSize:10,step:this.step,audStatus:"1",province:"",city:"",district:"",keyType:"2",keywords:"",stime:"",etime:"",dates:[]},this.list()},list(e,t,a){let s=1;t&&(s=t),this.form.pageNo=s;let l=10;a&&(l=a),this.form.pageSize=l,this.form.dates&&2==this.form.dates.length&&(this.form.stime=this.form.dates[0]+" 00:00:00",this.form.etime=this.form.dates[1]+" 23:59:59"),this.loading=!0,this.$request.post("/api/wiseqr/seller/list",this.form,!0,e=>{this.loading=!1,2e5==e.ret?(this.tableList=e.data.list||[],this.initPagination(e.data.page||{})):this.$message.error(e.message)})},exportDatas(){let e=new XMLHttpRequest,t=new FormData;for(let e in this.form)t.append(e,this.form[e]);t.pageNo=1,t.pageSize=-1,e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("POST","/api/wiseqr/seller/export",!0),e.responseType="blob",e.responseType="arraybuffer",e.setRequestHeader("token",sessionStorage.getItem("access_token")),e.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),e.onload=function(t){if(200==this.status){let t=new Blob([this.response],{type:"application/vnd.ms-excel"}),a=e.getResponseHeader("Content-Disposition"),s=decodeURI(a.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(t,s);else{let e=document.createElement("a");e.href=window.URL.createObjectURL(t),e.download=s,e.click(),window.URL.revokeObjectURL(e.href)}}},e.send(t)},audit(e,t,a,s){this.auditForm.id=t.id,this.auditForm.audStatus=a,this.auditForm.title=s,this.auditForm.show=!0},auditFormConfirm(){if(3==this.auditForm.audStatus&&(this.auditForm.score="",this.auditForm.note&&this.auditForm.note.length>50))return this.$message.error("审核不通过的理由不能超过50个字！"),!1;let e=this;e.$request.post("/api/wiseqr/seller/audit",e.auditForm,!0,t=>{2e5==t.ret?(e.auditForm.show=!1,e.$message({type:"success",message:"审核操作成功！"}),e.list(null,e.form.pageNo,e.form.pageSize)):e.$message.error(t.message)})},resetAuditForm(e){this.auditForm.hisAudit=!1,this.auditForm.id="",this.auditForm.audStatus="",this.auditForm.score="",this.auditForm.note="",this.detail=!1,e&&this.list(null,this.form.pageNo,this.form.pageSize)},audStatusChange(){2==this.auditForm.audStatus?this.auditForm.note="":3==this.auditForm.audStatus&&(this.auditForm.score="")},seeDetail(e,t){let a=this;a.$request.post("/api/wiseqr/seller/detail",{id:t.id},!0,e=>{2e5==e.ret?(a.detailForm=e.data||{},a.auditForm.id=a.detailForm.id,1==a.auditForm.step?(a.auditForm.note=a.detailForm.step.s1Note||"",a.auditForm.score=a.detailForm.step.s1Score||"",a.auditForm.audStatus=a.detailForm.step.s1Status||""):2==a.auditForm.step&&(a.auditForm.note=a.detailForm.step.s2Note||"",a.auditForm.score=a.detailForm.step.s2Score||"",a.auditForm.audStatus=a.detailForm.step.s2Status||""),2==a.auditForm.audStatus||3==a.auditForm.audStatus?a.auditForm.hisAudit=!0:a.auditForm.audStatus=2,a.detail=!0):a.$message.error(e.message)})},saveAudit(e,t){if(2==t)return this.resetAuditForm(),!1;this.$refs[e].validate(e=>{let a=!1;if(2==this.auditForm.audStatus&&this.auditForm.score&&(a=!0),3==this.auditForm.audStatus&&this.auditForm.note&&this.auditForm.note.length<=50&&(a=!0),a){let e="/api/wiseqr/seller/audit";this.auditForm.hisAudit&&(e="/api/wiseqr/seller/mscore"),this.$request.post(e,this.auditForm,!0,e=>{2e5==e.ret?3==t&&this.resetAuditForm(!0):this.$message.error(e.message)})}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"audit-mgr"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detail,expression:"!detail"}],staticClass:"list"},[a("el-card",[a("el-form",{staticClass:"search-block",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.form.audStatus,callback:function(t){e.$set(e.form,"audStatus",t)},expression:"form.audStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.audStatusList,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"请输入关键词"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.form.keyType,callback:function(t){e.$set(e.form,"keyType",t)},expression:"form.keyType"}},e._l(e.keyTypeList,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"申请时间"}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{size:"small",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.dates,callback:function(t){e.$set(e.form,"dates",t)},expression:"form.dates"}})],1)]),e._v(" "),a("el-form-item",{staticClass:"pl30",attrs:{label:"位置"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:function(t){e.regionChange(1)}},model:{value:e.form.province,callback:function(t){e.$set(e.form,"province",t)},expression:"form.province"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.provinceList,function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})})],2),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:function(t){e.regionChange(2)}},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.cityList,function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})})],2),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.district,callback:function(t){e.$set(e.form,"district",t)},expression:"form.district"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.districtList,function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})})],2)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportDatas}},[e._v("导出")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s((e.form.pageNo-1)*e.form.pageSize+t.$index+1)+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"门店名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ownerName",label:"联系人姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"联系人电话",align:"center",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{label:"位置",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.provinceName)+e._s(t.row.cityName)+e._s(t.row.districtName)+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请时间",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.step?a("span",[e._v(e._s(new Date(t.row.step.s1ApplyTime).Format("yyyy-MM-dd hh:mm:ss")))]):e._e(),e._v(" "),2==e.step?a("span",[e._v(e._s(new Date(t.row.step.s2ApplyTime).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"分数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.step?a("span",[e._v(e._s(t.row.step.s1Score))]):e._e(),e._v(" "),2==e.step?a("span",[e._v(e._s(t.row.step.s2Score))]):e._e()]}}])}),e._v(" "),2==e.step?a("el-table-column",{attrs:{label:"总分数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.step.totalScore))])]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.step?a("span",[e._v(e._s(t.row.step.s1StatusName))]):e._e(),e._v(" "),2==e.step?a("span",[e._v(e._s(t.row.step.s2StatusName))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.seeDetail(t.$index,t.row)}}},[e._v("查看详情")]),e._v(" "),1==e.step&&1==t.row.step.s1Status||2==e.step&&1==t.row.step.s2Status?a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.audit(t.$index,t.row,2,"审核通过")}}},[e._v("审核通过")]):e._e(),e._v(" "),1==e.step&&1==t.row.step.s1Status||2==e.step&&1==t.row.step.s2Status?a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.audit(t.$index,t.row,3,"请输入不通过理由")}}},[e._v("审核不通过")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{center:"",title:e.auditForm.title,visible:e.auditForm.show,width:"30%"},on:{"update:visible":function(t){e.$set(e.auditForm,"show",t)},closed:e.resetAuditForm}},[a("div",[a("el-form",{staticClass:"search-block"},[a("el-input",{attrs:{type:"hidden"},model:{value:e.auditForm.id,callback:function(t){e.$set(e.auditForm,"id",t)},expression:"auditForm.id"}}),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.auditForm.audStatus,expression:"auditForm.audStatus==2"}],attrs:{label:"得分"}},[a("el-input",{ref:"scoreInput1",staticClass:"audit-score",attrs:{size:"small",type:"number",placeholder:"请输入["+e.minScore+"-"+e.maxScore+"]之间的正整数"},on:{input:e.checkScore},model:{value:e.auditForm.score,callback:function(t){e.$set(e.auditForm,"score",t)},expression:"auditForm.score"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.auditForm.audStatus,expression:"auditForm.audStatus==3"}],attrs:{label:""}},[a("el-input",{attrs:{size:"small",type:"textarea",rows:5,placeholder:"请输入不超过50字的内容"},model:{value:e.auditForm.note,callback:function(t){e.$set(e.auditForm,"note",t)},expression:"auditForm.note"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.auditFormConfirm}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.auditForm.show=!1}}},[e._v("取 消")])],1)])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.detail,expression:"detail"}],staticClass:"detail"},[a("el-card",[a("table",{staticClass:"detail-info-table",attrs:{width:"100%",border:"0"}},[a("tr",[a("td",{attrs:{width:"35%"}},[a("label",[e._v("初次申请时间：")]),e._v(" "),e.detailForm.step.s1ApplyTime?a("span",[e._v(e._s(new Date(e.detailForm.step.s1ApplyTime).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]),e._v(" "),a("td",{attrs:{width:"35%"}},[a("label",[e._v("初审时间：")]),e._v(" "),e.detailForm.step.s1AudTime?a("span",[e._v(e._s(new Date(e.detailForm.step.s1AudTime).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]),e._v(" "),a("td",[a("label",[e._v("得分：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.step.s1Score))])])]),e._v(" "),a("tr",[a("td",[a("label",[e._v("联系人姓名：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.ownerName))])]),e._v(" "),a("td",[a("label",[e._v("联系人微信：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.nickname))])]),e._v(" "),a("td",{attrs:{rowspan:"4",valign:"top"}},[a("label",{staticClass:"multi-span"},[e._v("烟草许可证照片：")]),e._v(" "),a("el-popover",{attrs:{placement:"right",trigger:"click"}},[a("img",{staticClass:"popover-img",attrs:{src:e.detailForm.licenceImg}}),e._v(" "),a("img",{staticClass:"licence-img",attrs:{slot:"reference",src:e.detailForm.licenceImg},slot:"reference"})])],1)]),e._v(" "),a("tr",[a("td",[a("label",[e._v("联系人电话：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.phoneNo))])]),e._v(" "),a("td",[a("label",[e._v("门店名称：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.shopName))])])]),e._v(" "),a("tr",[a("td",[a("label",[e._v("位置：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.provinceName)+e._s(e.detailForm.cityName)+e._s(e.detailForm.districtName))])]),e._v(" "),a("td",[a("label",[e._v("烟草专卖证号：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.licenceNo))])])]),e._v(" "),a("tr",[a("td",[a("label",[e._v("详细地址：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.detail))])]),e._v(" "),a("td",[a("label",[e._v("业态：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.commercialName))])])])])]),e._v(" "),a("div",{staticClass:"space10"}),e._v(" "),2==e.step?a("el-card",[a("table",{staticClass:"detail-info-table detail-step2",attrs:{width:"100%",border:"0"}},[a("tr",[a("td",{attrs:{width:"35%"}},[a("label",[e._v("二次申请时间：")]),e._v(" "),e.detailForm.step.s2ApplyTime?a("span",[e._v(e._s(new Date(e.detailForm.step.s2ApplyTime).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]),e._v(" "),a("td",{attrs:{width:"35%"}},[a("label",[e._v("终审时间：")]),e._v(" "),e.detailForm.step.s2AudTime?a("span",[e._v(e._s(new Date(e.detailForm.step.s2AudTime).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]),e._v(" "),a("td",[a("label",[e._v("得分：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm.step.s2Score))])])]),e._v(" "),a("tr",{attrs:{height:"180"}},[a("td",{attrs:{colspan:"3"}},[a("label",{staticClass:"img-label"},[e._v("店面照片：")]),e._v(" "),a("div",e._l(e.detailForm.imgs,function(t){return a("el-popover",{key:t.id,attrs:{placement:"top-start",trigger:"click"}},[a("img",{staticClass:"popover-img",attrs:{src:t.imgUrl}}),e._v(" "),1==t.type?a("img",{attrs:{slot:"reference",src:t.imgUrl},slot:"reference"}):e._e()])}))])]),e._v(" "),a("tr",{attrs:{height:"180"}},[a("td",{attrs:{colspan:"3"}},[a("label",{staticClass:"img-label"},[e._v("陈列照片：")]),e._v(" "),a("div",e._l(e.detailForm.imgs,function(t){return a("el-popover",{key:t.id,attrs:{placement:"top-start",trigger:"click"}},[a("img",{staticClass:"popover-img",attrs:{src:t.imgUrl}}),e._v(" "),2==t.type?a("img",{attrs:{slot:"reference",src:t.imgUrl},slot:"reference"}):e._e()])}))])]),e._v(" "),a("tr",{attrs:{height:"180"}},[a("td",{attrs:{colspan:"3"}},[a("label",{staticClass:"img-label"},[e._v("烟品订单照片：")]),e._v(" "),a("div",e._l(e.detailForm.imgs,function(t){return a("el-popover",{key:t.id,attrs:{placement:"top-start",trigger:"click"}},[a("img",{staticClass:"popover-img",attrs:{src:t.imgUrl}}),e._v(" "),3==t.type?a("img",{attrs:{slot:"reference",src:t.imgUrl},slot:"reference"}):e._e()])}))])])])]):e._e(),e._v(" "),a("div",{staticClass:"space10"}),e._v(" "),a("el-card",[a("el-form",{ref:"auditForm",staticClass:"detail-audit-block",attrs:{model:e.auditForm,rules:e.detailAuditRules,"label-width":"100px"}},[a("el-input",{attrs:{type:"hidden"},model:{value:e.auditForm.id,callback:function(t){e.$set(e.auditForm,"id",t)},expression:"auditForm.id"}}),e._v(" "),a("el-form-item",{attrs:{label:"审核状态",prop:"audStatus"}},[a("el-radio",{attrs:{label:2,disabled:e.auditForm.hisAudit},on:{change:e.audStatusChange},model:{value:e.auditForm.audStatus,callback:function(t){e.$set(e.auditForm,"audStatus",t)},expression:"auditForm.audStatus"}},[e._v("审核通过")]),e._v(" "),a("el-radio",{attrs:{label:3,disabled:e.auditForm.hisAudit},on:{change:e.audStatusChange},model:{value:e.auditForm.audStatus,callback:function(t){e.$set(e.auditForm,"audStatus",t)},expression:"auditForm.audStatus"}},[e._v("审核不通过")])],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.auditForm.audStatus,expression:"auditForm.audStatus==3"}],attrs:{label:"",prop:"note"}},[a("el-input",{attrs:{size:"small",type:"textarea",rows:5,disabled:e.auditForm.hisAudit,placeholder:"请输入不超过50字的内容"},model:{value:e.auditForm.note,callback:function(t){e.$set(e.auditForm,"note",t)},expression:"auditForm.note"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.auditForm.audStatus,expression:"auditForm.audStatus==2"}],attrs:{label:"得分"}},[a("el-input",{ref:"scoreInput2",staticClass:"audit-score",attrs:{size:"small",type:"number",placeholder:"请输入["+e.minScore+"-"+e.maxScore+"]之间的正整数"},on:{input:e.checkScore},model:{value:e.auditForm.score,callback:function(t){e.$set(e.auditForm,"score",t)},expression:"auditForm.score"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.saveAudit("auditForm",2)}}},[e._v("退出")]),e._v(" "),e.auditForm.hisAudit&&2!=e.auditForm.audStatus?e._e():a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.saveAudit("auditForm",3)}}},[e._v("保存并退出")])],1)],1)],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("ksrO")},"data-v-66d2a67a",null);t.a=i.exports},"941l":function(e,t){},AjDu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"Reviewmanage",data:()=>({listLoading:!1,statusList:[{code:"",name:"全部"},{code:"1",name:"未审核"},{code:"2",name:"已到账"},{code:"3",name:"申请失败"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],filters:{status:"1",searchType:"",keywords:"",time:[],addrProvince:"",addrCity:"",addrArea:""},TxList:[],pageSize:10,pageNo:1,currentPage:1,total:0,dialogVisible:!1,failReason:"",txId:""}),created(){this.getListTx(),this.getOneCategory()},methods:{getOneCategory(){this.$request.post("/lsh/seller-manager/region/province",{},!0,e=>{this.cateLvl1List=[...e]})},selectBrand1(){this.filters.addrCity="",this.cateLvl2List=[],this.filters.addrArea="",this.cateLvl3List=[],this.getTwoCategory()},getTwoCategory(){""!=this.filters.addrProvince&&this.$request.post("/lsh/seller-manager/region/newCity",{parentCode:this.filters.addrProvince},!0,e=>{this.cateLvl2List=[...e]})},selectBrand2(){this.filters.addrArea="",this.cateLvl3List=[],this.getThreeCategory()},getThreeCategory(){""!=this.filters.addrCity&&this.$request.post("/lsh/seller-manager/region/newDistrict",{parentCode:this.filters.addrCity},!0,e=>{this.cateLvl3List=[...e]})},getListTx(){let e={status:this.filters.status,searchType:this.filters.searchType,keywords:this.filters.keywords,addrProvince:this.filters.addrProvince,addrCity:this.filters.addrCity,addrArea:this.filters.addrArea,stime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",etime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};this.postSearch(e)},postSearch(e){this.$request.post("/lsh/seller-manager/seller/txList",e,!1,e=>{console.log(e.data),this.TxList=e.data.list,this.total=e.data.page.count,this.pageNo=e.data.page.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getListTx()},getStatus(){this.filters.status="1",this.filters.searchType="",this.filters.keywords="",this.filters.time=[],this.filters.addrProvince="",this.filters.addrCity="",this.filters.addrArea="",this.pageNo=1,this.currentPage=1,this.getListTx()},inputWithSelectChange(e){this.filters.keywords=""},approval(e){let t={txId:e,authResult:1};this.$confirm("您确定为此账户转账？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/lsh/seller-manager/seller/txAuth",t,!1,e=>{e.ok?(this.$message({message:"操作成功！",type:"success"}),this.getListTx()):(console.log(e),this.$message({message:e.msg,type:"warning"}))})})},disapprovalDialog(e){this.dialogVisible=!0,this.txId=e},disapproval(){let e={txId:this.txId,authResult:0,authDesc:this.failReason};this.$confirm("您确定审核不通过？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/lsh/seller-manager/seller/txAuth",e,!1,e=>{e.ok?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.failReason="",this.getListTx()):(console.log(e),this.$message({message:e.msg,type:"warning"}),this.dialogVisible=!1,this.failReason="",this.getListTx())})})},cancelDialog(){this.dialogVisible=!1,this.failReason=""},sellerDetail(e){this.$router.push({path:"/seller/tx/sellerDetail?sellerId="+e})},jumpTo(){this.$emit("current-change")},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.getListTx()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"amount-examine-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"订单状态"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:e.filters.keywords,callback:function(t){e.$set(e.filters,"keywords",t)},expression:"filters.keywords"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.inputWithSelectChange},slot:"prepend",model:{value:e.filters.searchType,callback:function(t){e.$set(e.filters,"searchType",t)},expression:"filters.searchType"}},[a("el-option",{attrs:{label:"联系人名称",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"联系人电话",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"门店名称",value:"4"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"时间区间"}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.filters.time,callback:function(t){e.$set(e.filters,"time",t)},expression:"filters.time"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"位置：",prop:"addrProvince"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand1},model:{value:e.filters.addrProvince,callback:function(t){e.$set(e.filters,"addrProvince",t)},expression:"filters.addrProvince"}},e._l(e.cateLvl1List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrCity"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand2},model:{value:e.filters.addrCity,callback:function(t){e.$set(e.filters,"addrCity",t)},expression:"filters.addrCity"}},e._l(e.cateLvl2List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrArea"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:e.filters.addrArea,callback:function(t){e.$set(e.filters,"addrArea",t)},expression:"filters.addrArea "}},e._l(e.cateLvl3List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitForm}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:e.getStatus}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.TxList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sellerInfo.shopName",label:"门店名称\t",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sellerInfo.ownerName",label:"联系人姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sellerInfo.phoneNo",label:"联系人电话",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"账户余额",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"txAmount",label:"提现金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(t.row.txAmount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"txTime",label:"申请时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(new Date(t.row.txTime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"txTime",label:"到账时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(e){}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"authStatus",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.status?a("span",[e._v(e._s("未审核"))]):"2"==t.row.status?a("span",[e._v(e._s("已到账"))]):"3"==t.row.status?a("span",[e._v(e._s("申请失败"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.sellerDetail(t.row.sellerId)}}},[e._v("查看详情")]),e._v(" "),a("el-button",{attrs:{disabled:1!==t.row.status,type:"text",size:"mini"},on:{click:function(a){e.disapprovalDialog(t.row.id)}}},[e._v("审核不通过")]),e._v(" "),a("el-button",{attrs:{disabled:1!==t.row.status,type:"text",size:"mini"},on:{click:function(a){e.approval(t.row.id)}}},[e._v("审核通过")])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"请输入不通过理由",visible:e.dialogVisible,width:"30%","before-close":e.cancelDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.failReason,callback:function(t){e.failReason=t},expression:"failReason"}}),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.disapproval}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("hJNe"),a("vxW7")},"data-v-5f45ffa1",null);t.default=i.exports},Dw0t:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data(){var e=(e,t,a)=>{this.form.hstimeStr&&this.form.hetimeStr?this.form.hstimeStr>=this.form.hetimeStr?a(new Error("助力开始时间必须小于助力结束时间！")):a():a(new Error("助力时间不能为空！"))},t=(e,t,a)=>{this.form.actStimeStr&&this.form.actEtimeStr?this.form.actStimeStr>=this.form.actEtimeStr?a(new Error("活动开始时间必须小于活动结束时间！")):a():a(new Error("活动时间不能为空！"))};return{loading:!1,business:1,search:{pageNo:1,pageSize:10,name:"",htype:""},pagination:{total:0},tableList:[],form:{id:"",actName:"",note:"",htype:1,status:1,hstimeStr:"",hetimeStr:"",actStimeStr:"",actEtimeStr:"",exchanges:[{id:"",srange:"",num:"",key:(new Date).Format("yyyyMMddhhmmssS")+Math.random()}]},rules:{actName:[{required:!0,validator:(e,t,a)=>{this.form.actName?this.form.actName.length>=30?(this.form.actName=this.form.actName.substr(0,30),a(new Error("活动名称长度不能大于30个字符！"))):a():a(new Error("活动名称不能为空！"))},trigger:"change"}],note:[{required:!0,validator:(e,t,a)=>{this.form.note?this.form.note.length>=500?(this.form.note=this.form.note.substr(0,500),a(new Error("活动规则长度不能大于200个字符！"))):a():a(new Error("活动规则不能为空！"))},trigger:"change"}],hstimeStr:[{required:!0,validator:e,trigger:"blur"}],hetimeStr:[{required:!0,validator:e,trigger:"blur"}],actStimeStr:[{required:!0,validator:t,trigger:"blur"}],actEtimeStr:[{required:!0,validator:t,trigger:"blur"}]}}},created(){this.list()},methods:{resetSearch(){this.search={pageNo:1,pageSize:10,name:"",htype:""},this.list()},initPagination(e){e&&(this.pagination.total=e.count)},list(){this.business=1,this.$request.post("/lsh/seller-manager/help/list",this.search,!0,e=>{if(e.ok){let t=e.data.list||[];this.tableList=t,this.initPagination(e.data.page||{})}else this.$message.error(e.msg)})},edit(e,t){this.$request.post("/lsh/seller-manager/help/detail",{id:t.id},!0,e=>{if(e.ok){this.business=2;let t=e.data||{},a=t.exchanges||[];if(a.length>0)for(let e=0;e<a.length;e++)a[e].key=(new Date).Format("yyyyMMddhhmmssS")+Math.random();this.form=t,this.form.hstime="",this.form.hetime="",this.form.actStime="",this.form.actEtime=""}else this.$message.error(e.msg)})},mstatus(e,t){this.$request.post("/lsh/seller-manager/help/mstatus",{id:e,status:t},!0,e=>{e.ok?(this.$message({type:"success",message:"操作成功！"}),this.list()):this.$message.error(e.msg)})},resetForm(){this.form={id:"",actName:"",note:"",htype:1,status:1,hstimeStr:"",hetimeStr:"",actStimeStr:"",actEtimeStr:"",exchanges:[{id:"",srange:"",num:"",key:(new Date).Format("yyyyMMddhhmmssS")+Math.random()}]},this.$refs.form.clearValidate()},goListShow(){this.list(),this.resetForm()},curAct(){this.$request.post("/lsh/seller-manager/help/curAct",{},!0,e=>{if(e.ok){let t=e.data||{},a=t.exchanges||[];if(a.length>0)for(let e=0;e<a.length;e++)a[e].key=(new Date).Format("yyyyMMddhhmmssS")+Math.random();this.form=t,this.form.hstime="",this.form.hetime="",this.form.actStime="",this.form.actEtime=""}else this.$message.error(e.msg)})},somAct(e){let t=this.form.exchanges;if(0==t.length)return this.$message.error("抽奖机会设置不能为空！"),!1;for(let e=0;e<t.length;e++){let a=t[e];if(!a.srange||!a.num||a.srange<1||a.num<1)return this.$message.error("第"+(e+1)+"行设置中粉丝数量、抽奖机会不能为空且必须大于0！"),!1}this.$refs[e].validate(e=>{e&&this.$request.post("/lsh/seller-manager/help/somAct",this.form,!0,e=>{e.ok?(this.$message({type:"success",message:"保存成功！"}),this.list(),this.resetForm()):this.$message.error(e.msg)})})},addItem(){let e={id:"",srange:"",num:""};e.key=(new Date).Format("yyyyMMddhhmmssS")+Math.random(),this.form.exchanges.push(e)},removeItem(e){if(this.form.exchanges.length<=1)return this.$message.error("抽奖机会设置不能为空！"),!1;console.log(e);for(let t=0;t<this.form.exchanges.length;t++)this.form.exchanges[t].key==e&&this.form.exchanges.splice(t,1)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.business,expression:"business==1"}]},[a("el-card",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.business=2}}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form",{staticClass:"search-block",attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入活动名称"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"助力类型"}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.search.htype,callback:function(t){e.$set(e.search,"htype",t)},expression:"search.htype"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"累计助力",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"拉新助力",value:"2"}})],1)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.resetSearch}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((e.search.pageNo-1)*e.search.pageSize+t.$index+1)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"actCode",label:"活动编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"htype",label:"活动类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.htype?a("span",[e._v("累计助力")]):e._e(),e._v(" "),2==t.row.htype?a("span",[e._v("拉新助力")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v("已启用")]):e._e(),e._v(" "),2==t.row.status?a("span",[e._v("未启用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"助力时间",align:"center",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.hstimeStr)+" - "+e._s(t.row.hetimeStr)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"活动时间",align:"center",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.actStimeStr)+" - "+e._s(t.row.actEtimeStr)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.edit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.mstatus(t.row.id,2)}}},[e._v("不启用")]):e._e(),e._v(" "),2==t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.mstatus(t.row.id,1)}}},[e._v("启用")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.business,expression:"business==2"}]},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"actName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.actName,callback:function(t){e.$set(e.form,"actName",t)},expression:"form.actName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"助力时间",prop:"hstimeStr"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始日期"},model:{value:e.form.hstimeStr,callback:function(t){e.$set(e.form,"hstimeStr",t)},expression:"form.hstimeStr"}}),e._v("\n          至\n          "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束日期"},model:{value:e.form.hetimeStr,callback:function(t){e.$set(e.form,"hetimeStr",t)},expression:"form.hetimeStr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动时间",prop:"actStimeStr"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始日期"},model:{value:e.form.actStimeStr,callback:function(t){e.$set(e.form,"actStimeStr",t)},expression:"form.actStimeStr"}}),e._v("\n          至\n          "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束日期"},model:{value:e.form.actEtimeStr,callback:function(t){e.$set(e.form,"actEtimeStr",t)},expression:"form.actEtimeStr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动规则",prop:"note"}},[a("el-input",{attrs:{size:"small",type:"textarea",autosize:{minRows:3,maxRows:10}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"助力类型",prop:"htype",required:""}},[a("el-radio",{attrs:{size:"small",label:1},model:{value:e.form.htype,callback:function(t){e.$set(e.form,"htype",t)},expression:"form.htype"}},[e._v("累计助力")]),e._v(" "),a("el-radio",{attrs:{size:"small",label:2},model:{value:e.form.htype,callback:function(t){e.$set(e.form,"htype",t)},expression:"form.htype"}},[e._v("拉新助力")]),e._v(" "),a("p",{staticClass:"form-note"},[e._v("\n            提示：累计助力为零售户在活动时间内所有店铺粉丝数量；"),a("br"),e._v(" "),a("span",{staticClass:"pl36"},[e._v("拉新助力为零售户在活动时间内新增粉丝数量，不含活动之前的粉丝数量。")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"活动状态",prop:"status",required:""}},[a("el-radio",{attrs:{size:"small",label:1},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{size:"small",label:2},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("不启用")])],1),e._v(" "),a("el-form-item",{attrs:{label:"抽奖机会设置",required:""}},[a("table",{staticClass:"award-table",attrs:{border:"1"}},[a("thead",[a("td",[e._v("粉丝数量（人）")]),e._v(" "),a("td",[e._v("抽奖机会（次）")]),e._v(" "),a("td")]),e._v(" "),e._l(e.form.exchanges,function(t,s){return a("tr",{key:t.key},[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"item.id"}],attrs:{type:"hidden"},domProps:{value:t.id},on:{input:function(a){a.target.composing||e.$set(t,"id",a.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.srange,expression:"item.srange"}],attrs:{type:"number"},domProps:{value:t.srange},on:{input:function(a){a.target.composing||e.$set(t,"srange",a.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.num,expression:"item.num"}],attrs:{type:"number"},domProps:{value:t.num},on:{input:function(a){a.target.composing||e.$set(t,"num",a.target.value)}}})]),e._v(" "),a("td",[0===s?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addItem}},[e._v("新增")]):e._e(),e._v(" "),0!==s?a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.removeItem(t.key)}}},[e._v("删除")]):e._e()],1)])})],2)]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.somAct("form")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.goListShow}},[e._v("返回")])],1)],1)],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("ZV5I")},"data-v-00a75662",null);t.default=i.exports},E8jQ:function(e,t){},FDp4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={components:{mgr:a("8yZU").a},data:()=>({step:1})},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("mgr",{attrs:{step:this.step}})],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("H55r")},null,null);t.default=i.exports},GENw:function(e,t){},Gpeh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({search:{pageNo:1,pageSize:10,status:"1",phoneNo:"",stime:""},pagination:{total:0},tableList:[],form:{show:!1,id:"",tips:""},failNum:0,loading:!1,showTransferAccounts:!1,showFT:!1}),created(){this.list(),this.getFailNum()},methods:{currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},reset(){this.search={pageNo:1,pageSize:10,status:"1",phoneNo:"",stime:""},this.list()},getFailNum(){this.$request.post("/lsh/seller-manager/seller/sellerTx/failNum",{},!0,e=>{console.log(e),e.ok?this.failNum=e.data||0:this.$message.error(e.msg)})},list(e,t,a){let s=1;t&&(s=t),this.search.pageNo=s;let l=10;a&&(l=a),this.search.pageSize=l,this.loading=!0,this.tableList=[],this.$request.post("/lsh/seller-manager/seller/sellerTx/query",this.search,!0,e=>{this.loading=!1,2==this.search.status?this.showFT=!0:this.showFT=!1,e.ok?(this.tableList=e.data.list||[],this.initPagination(e.data.page||{})):this.$message.error(e.msg)})},handleRetry(){this.$request.post("/lsh/seller-manager/seller/sellerTx/retry",{},!0,e=>{console.log(e),e.ok?(this.showTransferAccounts=!1,this.$message.success("操作成功!"),this.list(),this.getFailNum()):this.$message.error(e.msg)})},handleCloseForm(){this.form.id="",this.form.tips=""},dataForm(e,t){this.form.id="",console.log(t),t&&t.id&&(this.form.id=t.id,3==this.search.status?this.form.tips=t.memo||"暂无":this.form.tips=t.err_msg||"暂无"),console.log(t),this.form.show=!0},handleUnDeal(e,t){this.$confirm("转账失败的记录后续不再处理，确认操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{this.$request.post("/lsh/seller-manager/seller//sellerTx/unDeal",{id:t.id},!1,e=>{console.log(e),e.ok?(this.$message.success("操作成功!"),this.list(),this.getFailNum()):this.$message.error(e.msg)})}).catch(()=>{})},exportData(){var e=new XMLHttpRequest;e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("POST","/lsh/seller-manager/seller/sellerTx/failListExport",!0),e.responseType="blob",e.responseType="arraybuffer",e.setRequestHeader("token",sessionStorage.getItem("access_token")),e.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),e.onload=function(t){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=e.getResponseHeader("Content-Disposition");console.log(s.match(/filename\*=utf-8''(.*?)(;|$)/));var l=decodeURI(s.match(/filename\*=utf-8''(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,l);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(a),i.download=l,i.click(),window.URL.revokeObjectURL(i.href)}}},e.send()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},[a("el-option",{attrs:{label:"提现中",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"提现成功",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"审批失败",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"转账中(审核通过)",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"转账重试多次仍失败",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"失败不再处理",value:"6"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"转账时间："}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期时间","value-format":"yyyy-MM-dd"},model:{value:e.search.stime,callback:function(t){e.$set(e.search,"stime",t)},expression:"search.stime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号：",prop:"phoneNo"}},[a("el-input",{model:{value:e.search.phoneNo,callback:function(t){e.$set(e.search,"phoneNo",t)},expression:"search.phoneNo"}})],1),e._v(" "),a("div"),e._v(" "),a("div",{staticStyle:{width:"100%"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary"},on:{click:e.exportData}},[e._v("导出转账失败列表")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",disabled:0==e.failNum},on:{click:function(t){e.showTransferAccounts=!0}}},[e._v("重新转帐("+e._s(e.failNum)+"条)")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.search.pageNo-1)*e.search.pageSize+t.$index+1)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shop_name",label:"店铺名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"owner_name",label:"零售户姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone_no",label:"零售户电话",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tx_amount",label:"提现金额",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"账户余额",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"owner_name",label:"申请时间",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.tx_time?a("span",[e._v(e._s(new Date(t.row.tx_time).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]}}])}),e._v(" "),e.showFT?a("el-table-column",{attrs:{label:"到账时间",align:"center",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.opt_finish_time?a("span",[e._v(e._s(new Date(t.row.opt_finish_time).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"提现状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v("待审核")]):e._e(),e._v(" "),2==t.row.status?a("span",[e._v("提现完成")]):e._e(),e._v(" "),3==t.row.status?a("span",[e._v("审批失败")]):e._e(),e._v(" "),4==t.row.status?a("span",[e._v("转账中(审核通过)")]):e._e(),e._v(" "),5==t.row.status?a("span",[e._v("转账重试多次仍失败")]):e._e(),e._v(" "),6==t.row.status?a("span",[e._v("失败不再处理")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.status||5==t.row.status||6==t.row.status?a("span",{staticStyle:{color:"#409EFF",cursor:"pointer"},attrs:{size:"mini"},on:{click:function(a){e.dataForm(t.$index,t.row)}}},[e._v("失败原因")]):a("span",[e._v("无")]),e._v(" "),5==t.row.status?a("span",{staticStyle:{"margin-left":"20px",color:"red",cursor:"pointer"},attrs:{type:"danger",size:"mini"},on:{click:function(a){e.handleUnDeal(t.$index,t.row)}}},[e._v("不再处理")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNo,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"查看详情",width:"400px",visible:e.form.show,center:""},on:{"update:visible":function(t){e.$set(e.form,"show",t)},close:e.handleCloseForm}},[a("div",{staticStyle:{width:"300px","text-align":"center",margin:"0 auto"}},[e._v(e._s(e.form.tips))]),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.form.show=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"重新转账",width:"400px",visible:e.showTransferAccounts,center:""},on:{"update:visible":function(t){e.showTransferAccounts=t},close:function(e){}}},[a("div",{staticStyle:{width:"300px","text-align":"center",margin:"0 auto"}},[e._v("当前系统检测到有"+e._s(e.failNum)+"条转账失败记 录，是否重新提现？")]),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.showTransferAccounts=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleRetry}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("O+sl")},"data-v-549edb7d",null);t.default=i.exports},Gw0h:function(e,t){},H55r:function(e,t){},H60O:function(e,t){},IDKc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data(){var e=(e,t,a)=>{this.dataForm.stimeStr&&this.dataForm.etimeStr?this.dataForm.stimeStr>=this.dataForm.etimeStr?a(new Error("活动开始时间必须小于活动结束时间！")):a():a(new Error("活动时间不能为空！"))};return{loading:!1,business:1,requesting:!0,form:{pageNo:1,pageSize:10,periodName:"",status:"",achievementType:""},pagination:{total:0},tableList:[],dataForm:{id:"",periodName:"",achievementType:1,ruleHtml:"",datetime:[],stimeStr:"",etimeStr:"",templateId:"",topNum:"100",awards:[]},dataRules:{periodName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],achievementType:[{required:!0,message:"请选择活动类型",trigger:"blur"}],periodName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],ruleHtml:[{required:!0,message:"请输入活动规则",trigger:"blur"}],stimeStr:[{required:!0,validator:e,trigger:"blur"}],etimeStr:[{required:!0,validator:e,trigger:"blur"}],templateId:[{required:!0,message:"请输入微信消息模板ID",trigger:"blur"}]},awardConfList:[],rankForm:{pageNo:1,pageSize:10,periodId:"",rankSection:"",shopName:""},canPay:!1,canExport:!0,tableRankList:[],tplMsgForm:{show:!1,first:"",keyword1:"",keyword2:"",remark:"",templateUrl:"",sendScope:2},tplMsgRules:{sendScope:[{required:!0,message:"发送范围不能为空",trigger:"blur"}],first:[{required:!0,message:"头部内容不能为空",trigger:"blur"}],keyword1:[{required:!0,message:"活动名称不能为空",trigger:"blur"}],keyword2:[{required:!0,message:"完成时间不能为空",trigger:"blur"}],remark:[{required:!0,message:"底部内容不能为空",trigger:"blur"}]},sendMsg:!1}},created(){this.list()},methods:{currentChange(e){1==this.business?this.list(event,e):3==this.business&&this.listRank(event,e)},sizeChange(e){1==this.business?this.list(event,null,e):3==this.business&&this.listRank(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},resetForm(){this.form={pageNo:1,pageSize:10,periodName:"",status:"",achievementType:""},this.list()},list(e,t,a){let s=1;t&&(s=t),this.form.pageNo=s;let l=10;a&&(l=a),this.form.pageSize=l,this.loading=!0,this.$request.post("/lsh/seller-manager/achieve/queryList",this.form,!0,e=>{this.loading=!1,e.ok?(this.tableList=e.data.list||[],this.initPagination(e.data.page||{})):this.$message.error(e.msg)})},seeRank(e,t){this.rankForm.periodId=t.id,this.periodAwardList(),this.listRank(),this.judgePay(),this.business=3},confDetail(e,t){this.getConfDetail(t.id)},seeSellerDetail(e,t){this.$router.push({path:"/seller/mgr/sellerDetail?sellerId="+t.sellerId})},goTable(){this.list(),this.business=1,this.resetRandForm(!1)},getConfDetail(e){this.$request.post("/lsh/seller-manager/achieve/configDetail",{periodId:e},!0,e=>{e.ok?(this.business=2,this.dataForm=e.data||{},this.$set(this.dataForm,"datetime",[this.dataForm.stimeStr,this.dataForm.etimeStr])):this.$message.error(e.msg)})},addAwardItem(){let e={id:"",periodId:"",awardType:3,rankStart:"",rankEnd:"",awardName:"",awardPrice:""};e.key=(new Date).Format("yyyyMMddhhmmssS")+Math.random(),this.dataForm.awards.push(e)},removeAwardItem(){let e=this.dataForm.awards;e.length>0&&e.splice(e.length-1,1)},submitForm(e){let t=this.dataForm.awards;if(0==t.length)return this.$message.error("奖项设置内容不能为空！"),!1;for(let e=0;e<t.length;e++){let a=t[e];if(!a.rankStart||!a.rankEnd||a.rankStart<1||a.rankEnd<1)return this.$message.error("第"+(e+1)+"行奖项设置中名次不能为空并且必须大于0！"),!1;if(!a.awardName)return this.$message.error("第"+(e+1)+"行奖项设置中奖项名称不能为空！"),!1;if(!a.awardPrice||a.awardPrice<=0)return this.$message.error("第"+(e+1)+"行奖项设置中市场价不能为空并且必须大于0！"),!1;a.periodId=this.dataForm.id}this.$refs[e].validate(e=>{e&&this.$request.post("/lsh/seller-manager/achieve/saveOrModify",this.dataForm,!0,e=>{e.ok?(this.$message({type:"success",message:"数据保存成功！"}),this.business=1,this.list()):this.$message.error(e.msg)})})},cancelForm(){this.dataForm={id:"",periodName:"",achievementType:1,ruleHtml:"",datetime:[],stimeStr:"",etimeStr:"",templateId:"",topNum:"100",awards:[]},this.business=1,this.$refs.dataForm.clearValidate()},periodAwardList(){this.$request.post("/lsh/seller-manager/achieve/queryAwardList",{periodId:this.rankForm.periodId},!0,e=>{e.ok?this.awardConfList=e.data||[]:this.$message.error(e.msg)})},listRank(e,t,a){let s=1;t&&(s=t),this.rankForm.pageNo=s;let l=10;a&&(l=a),this.rankForm.pageSize=l,this.loading=!0,this.$request.post("/lsh/seller-manager/achieve/periodResultList",this.rankForm,!0,e=>{this.loading=!1,e.ok?(this.tableRankList=e.data.list||[],this.canExport=0!=this.tableRankList.length,this.initPagination(e.data.page||{})):this.$message.error(e.msg)})},resetRandForm(e){let t=this.rankForm.periodId;this.rankForm={pageNo:1,pageSize:10,periodId:t,rankSection:"",shopName:""},!0===e&&this.listRank()},exportDatas(){let e=new XMLHttpRequest,t=new FormData;for(let e in this.rankForm)t.append(e,this.rankForm[e]);e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("POST","/lsh/seller-manager/achieve/exportPeriodResult",!0),e.responseType="blob",e.responseType="arraybuffer",e.setRequestHeader("token",sessionStorage.getItem("access_token")),e.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),e.onload=function(t){if(200==this.status){let t=new Blob([this.response],{type:"application/vnd.ms-excel"}),a=e.getResponseHeader("Content-Disposition"),s=decodeURI(a.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(t,s);else{let e=document.createElement("a");e.href=window.URL.createObjectURL(t),e.download=s,e.click(),window.URL.revokeObjectURL(e.href)}}},e.send(t)},judgePay(){this.$request.post("/lsh/seller-manager/achieve/judgePay",{periodId:this.rankForm.periodId},!0,e=>{e.ok?this.canPay=!0:this.canPay=!1})},sendRankPay(){if(!this.canPay)return this.$message.error("暂不允许派发现金奖励！"),!1;this.$confirm("确认要进行派发奖项吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.canPay=!1,this.$request.post("/lsh/seller-manager/achieve/payAchievement",{periodId:this.rankForm.periodId},!0,e=>{e.ok?(this.canPay=!1,this.listRank(),this.$message({type:"success",message:"操作成功！"})):(this.canPay=!0,this.$message.error(e.msg))})}).catch(()=>{})},openTplMsg(){this.tplMsgForm.show=!0},resetTplMsgForm(){this.tplMsgForm={show:!1,show:!1,first:"",keyword1:"",keyword2:"",remark:"",templateUrl:"",sendScope:2},this.$refs.tplMsgForm.clearValidate()},confirmSendMsg(e){if(this.sendMsg)return this.$message.error("发送模板消息请求已发出，请勿重复操作！"),!1;this.$refs[e].validate(e=>{if(e){this.sendMsg=!0;let e={wxTemplateParams:{first:this.tplMsgForm.first,keyword1:this.tplMsgForm.keyword1,keyword2:this.tplMsgForm.keyword2,remark:this.tplMsgForm.remark,templateUrl:this.tplMsgForm.templateUrl},achieveParams:{sendScope:this.tplMsgForm.sendScope,periodId:this.rankForm.periodId}};this.$request.post("/lsh/seller-manager/achieve/sendWechatTemplate",e,!0,e=>{this.sendMsg=!1,e.ok?(this.tplMsgForm.show=!1,this.$message({type:"success",message:e.data})):this.$message.error(e.msg)})}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.business,expression:"business==1"}]},[a("el-card",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.business=2}}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form",{staticClass:"search-block",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入活动名称"},model:{value:e.form.periodName,callback:function(t){e.$set(e.form,"periodName",t)},expression:"form.periodName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"待上线",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"进行中",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"已结束",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"活动类型"}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.form.achievementType,callback:function(t){e.$set(e.form,"achievementType",t)},expression:"form.achievementType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"累计排行榜",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"拉新排行榜",value:"2"}})],1)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s((e.form.pageNo-1)*e.form.pageSize+t.$index+1)+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"periodName",label:"活动姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"achievementTypeName",label:"活动类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusName",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"活动时间",align:"center",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.stimeStr)+" -- "+e._s(t.row.etimeStr)+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.seeRank(t.$index,t.row)}}},[e._v("查看排名")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.confDetail(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.business,expression:"business==2"}]},[a("el-card",[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"periodName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.dataForm.periodName,callback:function(t){e.$set(e.dataForm,"periodName",t)},expression:"dataForm.periodName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动类型",prop:"achievementType"}},[a("el-radio",{attrs:{size:"small",label:1},model:{value:e.dataForm.achievementType,callback:function(t){e.$set(e.dataForm,"achievementType",t)},expression:"dataForm.achievementType"}},[e._v("累计排行榜")]),e._v(" "),a("el-radio",{attrs:{size:"small",label:2},model:{value:e.dataForm.achievementType,callback:function(t){e.$set(e.dataForm,"achievementType",t)},expression:"dataForm.achievementType"}},[e._v("拉新排行榜")]),e._v(" "),a("p",{staticClass:"form-note"},[e._v("\n                        提示：累积排行榜为零售户在活动时间内所有店铺粉丝的扫烟包量；"),a("br"),e._v(" "),a("span",{staticClass:"pl36"},[e._v("拉新排行榜为零售户在活动时间内新增粉丝的扫码烟包量，不含活动之前粉丝的扫码烟包数。")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"活动时间",prop:"stimeStr"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择开始日期"},model:{value:e.dataForm.stimeStr,callback:function(t){e.$set(e.dataForm,"stimeStr",t)},expression:"dataForm.stimeStr"}}),e._v("\n                    至\n                    "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束日期"},model:{value:e.dataForm.etimeStr,callback:function(t){e.$set(e.dataForm,"etimeStr",t)},expression:"dataForm.etimeStr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动规则",prop:"ruleHtml"}},[a("el-input",{attrs:{size:"small",type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:e.dataForm.ruleHtml,callback:function(t){e.$set(e.dataForm,"ruleHtml",t)},expression:"dataForm.ruleHtml"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信消息模板ID",prop:"templateId"}},[a("el-input",{attrs:{size:"small"},model:{value:e.dataForm.templateId,callback:function(t){e.$set(e.dataForm,"templateId",t)},expression:"dataForm.templateId"}}),e._v(" "),a("p",{staticClass:"form-note"},[e._v("\n                        提示：微信消息模板ID为对应公众号给零售户发送消息模板的ID，通过后台向零售户发送微信模板消息，公号必须添加此模板。"),a("br"),e._v(" "),a("span",{staticClass:"pl36"},[e._v("模板ID举例：cmtrt_o4nyw5XZXxuCLUstPtNei2DzvYk-4uGZX5ldo")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"奖品设置"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addAwardItem}},[e._v("增加奖项")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.removeAwardItem}},[e._v("删除奖项")]),e._v(" "),a("table",{staticClass:"award-table",attrs:{border:"1"}},[a("thead",[a("td",[e._v("名次")]),e._v(" "),a("td",[e._v("奖品名称")]),e._v(" "),a("td",[e._v("市场价（元）")])]),e._v(" "),e._l(e.dataForm.awards,function(t){return a("tr",{key:t.key},[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.id,expression:"item.id"}],attrs:{type:"hidden"},domProps:{value:t.id},on:{input:function(a){a.target.composing||e.$set(t,"id",a.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rankStart,expression:"item.rankStart"}],staticClass:"one-cell-two",attrs:{type:"number"},domProps:{value:t.rankStart},on:{input:function(a){a.target.composing||e.$set(t,"rankStart",a.target.value)}}}),e._v("\n                                -\n                                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rankEnd,expression:"item.rankEnd"}],staticClass:"one-cell-two",attrs:{type:"number"},domProps:{value:t.rankEnd},on:{input:function(a){a.target.composing||e.$set(t,"rankEnd",a.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.awardName,expression:"item.awardName"}],attrs:{type:"text"},domProps:{value:t.awardName},on:{input:function(a){a.target.composing||e.$set(t,"awardName",a.target.value)}}})]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.awardPrice,expression:"item.awardPrice"}],attrs:{type:"number"},domProps:{value:t.awardPrice},on:{input:function(a){a.target.composing||e.$set(t,"awardPrice",a.target.value)}}})])])})],2)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm("dataForm")}}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.cancelForm}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.business,expression:"business==3"}]},[a("el-card",[a("el-row",[a("el-button",{attrs:{type:"text"},on:{click:e.goTable}},[e._v("返回")])],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form",{staticClass:"search-block",attrs:{inline:!0,model:e.rankForm}},[a("el-form-item",{attrs:{label:"名次"}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.rankForm.rankSection,callback:function(t){e.$set(e.rankForm,"rankSection",t)},expression:"rankForm.rankSection"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.awardConfList,function(e){return a("el-option",{key:e.id,attrs:{label:e.rankStart+"-"+e.rankEnd,value:e.rankStart+"-"+e.rankEnd}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入门店名称"},model:{value:e.rankForm.shopName,callback:function(t){e.$set(e.rankForm,"shopName",t)},expression:"rankForm.shopName"}})],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.listRank}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetRandForm(!0)}}},[e._v("重置")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openTplMsg}},[e._v("发送模板消息")]),e._v(" "),a("el-button",{attrs:{size:"small",type:e.canPay?"primary":"",disabled:!e.canPay},on:{click:e.sendRankPay}},[e._v("派发现金奖励")]),e._v(" "),a("el-button",{attrs:{size:"small",type:e.canExport?"primary":"",disabled:!e.canExport},on:{click:e.exportDatas}},[e._v("导出中奖名单")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableRankList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s((e.form.pageNo-1)*e.form.pageSize+t.$index+1)+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"idx",label:"名次",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"门店名称",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ownerName",label:"联系人",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"联系人电话",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"licenceNo",label:"许可证号",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"门店地区",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row.addrProvinceName)+e._s(t.row.addrCityName)+e._s(t.row.addrAreaName)+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"addrDetail",label:"门店地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"achieveNum",label:"扫码业绩",align:"center",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖品",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"市场价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        ￥ "+e._s(t.row.price)+"\n                    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"payStatusName",label:"派奖状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.seeSellerDetail(t.$index,t.row)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{center:"",title:"模板消息编辑",visible:e.tplMsgForm.show,width:"60%"},on:{"update:visible":function(t){e.$set(e.tplMsgForm,"show",t)},closed:e.resetTplMsgForm}},[a("div",[a("el-form",{ref:"tplMsgForm",staticClass:"tplM-msg-block",attrs:{rules:e.tplMsgRules,model:e.tplMsgForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"头部内容",prop:"first"}},[a("el-input",{attrs:{size:"small",type:"textarea",placeholder:"请输入顶部描述"},model:{value:e.tplMsgForm.first,callback:function(t){e.$set(e.tplMsgForm,"first",t)},expression:"tplMsgForm.first"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动名称",prop:"keyword1"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入活动名称"},model:{value:e.tplMsgForm.keyword1,callback:function(t){e.$set(e.tplMsgForm,"keyword1",t)},expression:"tplMsgForm.keyword1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"完成时间",prop:"keyword2"}},[a("el-input",{attrs:{size:"small",placeholder:"例如：2019年01月01日-2019年01月31日"},model:{value:e.tplMsgForm.keyword2,callback:function(t){e.$set(e.tplMsgForm,"keyword2",t)},expression:"tplMsgForm.keyword2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"底部内容",prop:"remark"}},[a("el-input",{attrs:{size:"small",type:"textarea",placeholder:"请输入底部描述"},model:{value:e.tplMsgForm.remark,callback:function(t){e.$set(e.tplMsgForm,"remark",t)},expression:"tplMsgForm.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送范围",prop:"sendScope"}},[a("el-radio",{attrs:{label:1},model:{value:e.tplMsgForm.sendScope,callback:function(t){e.$set(e.tplMsgForm,"sendScope",t)},expression:"tplMsgForm.sendScope"}},[e._v("所有零售户")]),e._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.tplMsgForm.sendScope,callback:function(t){e.$set(e.tplMsgForm,"sendScope",t)},expression:"tplMsgForm.sendScope"}},[e._v("中奖零售户")])],1),e._v(" "),a("el-form-item",{attrs:{label:"链接地址"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入此消息跳转链接。如无跳转功能，此项为空"},model:{value:e.tplMsgForm.templateUrl,callback:function(t){e.$set(e.tplMsgForm,"templateUrl",t)},expression:"tplMsgForm.templateUrl"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.confirmSendMsg("tplMsgForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.resetTplMsgForm}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("yzmQ")},"data-v-015171f1",null);t.default=i.exports},"IOn+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({search:{page:1,pageSize:10},pagination:{total:0},tableList:[],form:{show:!1,id:"",shopImg:"",licenseImg:"",auditStatus:""},loading:!1}),created(){this.list()},methods:{inputWithSelectChange(e){this.search.keyword=""},currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e)},reset(){this.search={page:1,pageSize:10},this.list()},list(e,t,a){let s=1;t&&(s=t),this.search.page=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/saasHbseller/feedback/queryList",this.search,!1,e=>{"200"==e.code?(this.tableList=e.data.records||[],this.initPagination(e.data.total)):this.$message.error(e.msg)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.search.page-1)*e.search.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"feedContent",label:"反馈内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.feedContent&&t.row.feedContent.length>10?a("span",{attrs:{title:t.row.feedContent}},[e._v(e._s(t.row.feedContent.substring(0,10))+"...")]):a("span",[e._v(e._s(t.row.feedContent))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"openid",label:"反馈人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"联系电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"反馈时间",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"feedFrom",label:"反馈来源",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.feedFrom?a("span",[e._v("消费者")]):e._e(),e._v(" "),2==t.row.feedFrom?a("span",[e._v("零售户")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.page,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("/BNA")},"data-v-64d09870",null);t.default=i.exports},JZmd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({search:{pageNo:1,pageSize:10,keywords:"",keyType:""},pagination:{total:0},tableList:[],keyTypeList:{shopName:"门店名称",ownerName:"联系人姓名",ownerMobile:"联系人电话",licenseNo:"烟草证号"},form:{show:!1,id:"",licenseNo:"",shopName:"",ownerMobile:"",ownerName:"",ctime:"",utime:"",shopImg:"",licenseImg:"",auditStatus:""},loading:!1}),created(){this.list()},methods:{currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},reset(){this.search={pageNo:1,pageSize:10,keywords:"",keyType:""},this.list()},list(e,t,a){let s=1;t&&(s=t),this.search.pageNo=s;let l=10;a&&(l=a),this.search.pageSize=l;let i={pageNo:this.search.pageNo,pageSize:this.search.pageSize};this.search.keyType||!this.search.keywords?(this.search.keyType&&(i[this.search.keyType]=this.search.keywords),this.$request.post("/api/hsUser/list",i,!0,e=>{"200"==e.code?(this.tableList=e.data.list||[],this.initPagination(e.data.page||{})):this.$message.error(e.msg)})):this.$message.error("请选择关键词！")},handleCloseForm(){this.form.id="",this.form.shopImg="",this.form.licenseImg="",this.form.auditStatus="",this.form.licenseNo="",this.form.ownerName="",this.form.ownerMobile="",this.form.shopName="",this.form.ctime="",this.form.utime=""},dataForm(e,t){this.loading=!0,this.form.id="",t&&t.id&&(this.form.id=t.id),console.log(t),this.$request.post("/api/hsUser/detail",{itemId:this.form.id},!1,e=>{this.loading=!1,this.form.show=!0,"200"==e.code?(this.form.licenseNo=e.data.hsUser.licenseNo,this.form.ownerName=e.data.hsUser.ownerName,this.form.ownerMobile=e.data.hsUser.ownerMobile,this.form.shopName=e.data.hsUser.shopName,this.form.ctime=e.data.hsUser.ctime,this.form.utime=e.data.hsUser.utime,this.form.licenseImg=e.data.hsUser.licenseImg,this.form.shopImg=e.data.hsUser.shopImg):this.$message.error(e.msg)})},handleDelete(e,t){this.$confirm("下架后，将不在提供上架功能，确认操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{console.log(t),this.modifyData(t.id)}).catch(()=>{})},modifyData(e){let t={itemId:e};this.$request.post("/api/hsUser/ban",t,!1,e=>{"200"==e.code?(this.list(event,this.search.pageNo),this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.message)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"seller-review-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"关键词："}},[a("el-input",{staticClass:"input-with-select",attrs:{size:"small",placeholder:"请输入关键词"},model:{value:e.search.keywords,callback:function(t){e.$set(e.search,"keywords",t)},expression:"search.keywords"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.search.keyType,callback:function(t){e.$set(e.search,"keyType",t)},expression:"search.keyType"}},e._l(e.keyTypeList,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e}})}))],1)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.search.pageNo-1)*e.search.pageSize+t.$index+1)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"licenseNo",label:"烟草专卖号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"门店名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ownerName",label:"联系人姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ownerMobile",label:"联系人电话",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v("上架中")]):e._e(),e._v(" "),2==t.row.status?a("span",[e._v("下架中")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"申请时间",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ctime?a("span",[e._v(e._s(new Date(t.row.ctime).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.dataForm(t.$index,t.row)}}},[e._v("查看详情")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("下架")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNo,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"查看详情",width:"1100px",visible:e.form.show,center:""},on:{"update:visible":function(t){e.$set(e.form,"show",t)},close:e.handleCloseForm}},[a("el-form",{staticStyle:{"text-align":"center"},attrs:{inline:!0}},[a("div",{staticStyle:{"text-align":"left"}},[a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"烟草专卖号：","label-width":"150px"}},[e._v(e._s(e.form.licenseNo))]),e._v(" "),a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"门店名称：","label-width":"150px"}},[a("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"inline-block",width:"170px"},attrs:{title:e.form.shopName}},[e._v("\n                        "+e._s(e.form.shopName)+"\n                    ")])]),e._v(" "),a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"注册时间：","label-width":"150px"}},[e._v(e._s(e.form.ctime))])],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"联系人：","label-width":"150px"}},[e._v(e._s(e.form.ownerName))]),e._v(" "),a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"联系电话：","label-width":"150px"}},[e._v(e._s(e.form.ownerMobile))]),e._v(" "),a("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"图片审核时间：","label-width":"150px"}},[e._v(e._s(e.form.utime))])],1),e._v(" "),a("el-form-item",[a("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("门头照片：")]),e._v(" "),a("img",{staticStyle:{display:"block"},attrs:{src:e.form.shopImg,width:"500",alt:""}})]),e._v(" "),a("el-form-item",[a("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("烟草专卖零售许可证照：")]),e._v(" "),a("img",{staticStyle:{display:"block"},attrs:{src:e.form.licenseImg,width:"500",alt:""}})])],1),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.form.show=!1}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("uMyX"),a("+giB")},"data-v-4850b87c",null);t.default=i.exports},"L2N+":function(e,t){},Lba7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={components:{mgr:a("8yZU").a},data:()=>({step:2})},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("mgr",{attrs:{step:this.step}})],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("6U5d")},null,null);t.default=i.exports},Lgbe:function(e,t){},"O+sl":function(e,t){},ONaW:function(e,t){},OdvE:function(e,t){},Ooxo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("/lNv"),l=a("0jEH"),i=a("e05C"),r=a("f7LP"),o=a("/doM"),n={name:"SelllerDetail",props:["sellerId"],components:{SellerMsg1:s.a,SellerMsg2:l.a,SellerMsg3:i.a,SellerMsg4:r.a,SellerMsg5:o.a},data:()=>({activeName:"1",returnPath:"/seller/review"}),methods:{handleClick(e,t){console.log(e,t)}}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"seller-detail-container"},[t("seller-msg1",{attrs:{sellerId:this.sellerId,returnPath:this.returnPath}})],1)},staticRenderFns:[]};var d=a("VU/8")(n,c,!1,function(e){a("L2N+")},"data-v-c053ea72",null);t.default=d.exports},VdSK:function(e,t){},WFzI:function(e,t){},XFZA:function(e,t){},XYKG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"FansAge",data:()=>({loading:!1,saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),search:{saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),provCode:null},saleZone:[],saleZoneProv:[],showBtn:!1,listLoading:!1,curAllNum:"",newAllNum:"",listData:[]}),mounted(){null===this.saleZoneCode&&(this.showBtn=!0),this.getSaleZone(),null===this.saleZoneCode?this.handleClickALL("allZone"):this.getData()},methods:{handleClickALL(e){this.search.saleZoneCode=null,this.search.provCode=null;let t={saleZoneCode:"allZone"===e?"all":null,provCode:"allProv"===e?"all":null};this.$request.post("/dataStats/statHbsSeller/fansDs/regionDistribution",t,!1,e=>{"200"==e.code&&(this.curAllNum=e.data.heJi[0]?e.data.heJi[0].totalFans:0,this.newAllNum=e.data.heJi[0]?e.data.heJi[0].newFanNum:0,this.listData=e.data.dataList,this.handleDrawMap1())})},handleDrawMap1(){let e=this.$echarts.init(document.getElementById("echart-1"));console.log(e);let t=[],a=[];const s=this.listData.map(e=>(t.push(e.totalFans||0),a.push(e.newFanNum||0),e.displayName));console.log(t,a,s);const l=this.curAllNum;let i={color:["#00a3ff","#d5d5d5"],title:{text:"粉丝区域分布",left:"center",subtext:`新增粉丝:${this.newAllNum}人   累计粉丝:${l}人`},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{top:"bottom"},grid:{left:"3%",right:"4%",bottom:"10%",top:"15%",containLabel:!0},xAxis:[{type:"category",data:s}],yAxis:[{type:"value",name:"数量"}],series:[{name:"新增粉丝",type:"bar",stack:"Ad",emphasis:{focus:"series"},barMaxWidth:40,data:a},{name:"累计粉丝",type:"bar",stack:"Ad",emphasis:{focus:"series"},barMaxWidth:40,data:t}]};e.setOption(i)},handleSaleZoneCodeChange(e){this.search.provCode=null,this.$request.post("/api/saleZone/saleZoneProv",{saleZone:e},!1,e=>{"200"==e.code&&(this.saleZoneProv=e.data||[])})},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.search.saleZoneCode=this.saleZoneCode))})},getData(){let e={saleZoneCode:this.search.saleZoneCode,provCode:this.search.provCode};e.saleZoneCode||e.provCode?this.$request.post("/dataStats/statHbsSeller/fansDs/regionDistribution",e,!1,e=>{"200"==e.code&&(this.curAllNum=e.data.heJi[0]?e.data.heJi[0].totalFans:0,this.newAllNum=e.data.heJi[0]?e.data.heJi[0].newFanNum:0,this.listData=e.data.dataList,this.handleDrawMap1())}):this.$message.warning("提示：请选择销区或省份进行查询！")}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"seller-rank-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",[a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择销区"},on:{change:e.handleSaleZoneCodeChange},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1)],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"省份：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择省份"},model:{value:e.search.provCode,callback:function(t){e.$set(e.search,"provCode",t)},expression:"search.provCode"}},e._l(e.saleZoneProv,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getData}},[e._v("查询")]),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allZone")}}},[e._v("全部销区")]):e._e(),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allProv")}}},[e._v("全部省份")]):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{height:"20px"}}),e._v(" "),a("el-card",[a("div",{staticClass:"echart-container"},[a("div",{attrs:{id:"echart-1"}}),e._v(" "),a("div",{attrs:{id:"echart-2"}})])])],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("2K1m")},"data-v-7ea9d210",null);t.default=i.exports},ZV5I:function(e,t){},a2us:function(e,t){},cA94:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),search:{page:1,pageSize:10,shopLevel:null,shopGear:null,keywordType:null,keyword:"",saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},pagination:{total:0},tableList:[],saleZone:[],form:{show:!1,id:"",shopImg:"",licenseImg:"",auditStatus:""},loading:!1}),created(){this.getSaleZone(),this.list()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.search.saleZoneCode=this.saleZoneCode))})},getSaleZoneName(e){if(!e)return"";let t="",a=this.saleZone.find(t=>{if(t.zoneCode==e)return t});return t=a?a.zoneName:""},inputWithSelectChange(e){this.search.keyword=""},currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e)},reset(){this.search={page:1,pageSize:10,shopLevel:null,shopGear:null,keywordType:null,keyword:"",saleZoneCode:null},this.list()},list(e,t,a){let s=1;t&&(s=t),this.search.page=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/saasHbseller/groupManager/query",this.search,!0,e=>{"200"==e.code?(this.tableList=e.data.infoList.records||[],this.initPagination(e.data.infoList.total)):this.$message.error(e.msg)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"选择档位：",size:"small",prop:"shopGearList"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.shopGear,callback:function(t){e.$set(e.search,"shopGear",t)},expression:"search.shopGear"}},[a("el-option",{attrs:{value:"",label:"全部"}},[e._v("全部")]),e._v(" "),a("el-option",{attrs:{value:"1",label:"1档"}},[e._v("1档")]),e._v(" "),a("el-option",{attrs:{value:"2",label:"2档"}},[e._v("2档")]),e._v(" "),a("el-option",{attrs:{value:"3",label:"3档"}},[e._v("3档")]),e._v(" "),a("el-option",{attrs:{value:"4",label:"4档"}},[e._v("4档")]),e._v(" "),a("el-option",{attrs:{value:"5",label:"5档"}},[e._v("5档")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"选择等级：",size:"small",prop:"shopLevelList"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.shopLevel,callback:function(t){e.$set(e.search,"shopLevel",t)},expression:"search.shopLevel"}},[a("el-option",{attrs:{value:"",label:"全部"}},[e._v("全部")]),e._v(" "),a("el-option",{attrs:{value:"1",label:"1级"}},[e._v("1级")]),e._v(" "),a("el-option",{attrs:{value:"2",label:"2级"}},[e._v("2级")]),e._v(" "),a("el-option",{attrs:{value:"3",label:"3级"}},[e._v("3级")]),e._v(" "),a("el-option",{attrs:{value:"4",label:"4级"}},[e._v("4级")]),e._v(" "),a("el-option",{attrs:{value:"5",label:"5级"}},[e._v("5级")]),e._v(" "),a("el-option",{attrs:{value:"6",label:"6级"}},[e._v("6级")]),e._v(" "),a("el-option",{attrs:{value:"7",label:"7级"}},[e._v("7级")]),e._v(" "),a("el-option",{attrs:{value:"8",label:"8级"}},[e._v("8级")])],1)],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"关键词："}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.inputWithSelectChange},slot:"prepend",model:{value:e.search.keywordType,callback:function(t){e.$set(e.search,"keywordType",t)},expression:"search.keywordType"}},[a("el-option",{attrs:{label:"烟草证号",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"联系人姓名",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"联系人手机号",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"门店名称",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"业务员名称",value:"5"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.search.page-1)*e.search.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shopGear",label:"档位",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopLevel",label:"等级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"licenseNo",label:"烟草专卖号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"门店名称",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactName",label:"经营人姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"联系人电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detailAddr",label:"门店地址",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.provName+t.row.cityName+t.row.countyName+t.row.detailAddr)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"saleZoneCode",label:"销区",align:"center",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.getSaleZoneName(t.row.saleZoneCode))+"\n        ")]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.page,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("hKlM")},"data-v-39f3c6ba",null);t.default=i.exports},cQgK:function(e,t){},cSVv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({loading:!0,dataList:[],handleChange(e,t){console.log(e,t);let a="";a=0===t?"/saasHbseller/shopLevel/close":"/saasHbseller/shopLevel/open",this.$request.post(a,{id:e},!1,e=>{"200"!=e.code?(this.$message.error(e.msg),this.getInfo()):this.getInfo()})}}),created(){this.getInfo()},methods:{getInfo(){this.$request.post("/saasHbseller/shopLevel/query",{},!0,e=>{if("200"==e.code)return this.dataList=e.data.dataList,void(this.loading=!1);this.$message.error(e.msg)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"body-style":{padding:"30px 0 0"}}},[e._l(e.dataList,function(t,s){return[a("el-card",{staticStyle:{width:"250px",float:"left","margin-left":"30px","margin-bottom":"30px"},attrs:{"body-style":{padding:"0px"}}},[a("div",{staticClass:"lv-title"},[e._v(e._s(t.levelName))]),e._v(" "),a("div",{staticClass:"img-container"},[a("img",{staticClass:"lv-icon",attrs:{src:t.levelIconUrl}})]),e._v(" "),a("div",{staticClass:"lv-tips"},[e._v("需要等级值"+e._s(t.levelScoreMin))]),e._v(" "),a("div",{staticStyle:{padding:"14px"}},[a("div",{staticStyle:{"margin-bottom":"10px",height:"24px",color:"#999",display:"none"}},[a("span",{staticStyle:{float:"left"}},[e._v("等级权益")]),e._v(" "),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.shopLevel))])]),e._v(" "),a("div",{staticClass:"bottom clearfix"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(a){e.handleChange(t.id,a)}},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}}),e._v(" "),a("el-button",{staticClass:"button",staticStyle:{"margin-top":"4px"},attrs:{type:"text"},on:{click:function(a){e.$router.push("/seller/editLevel?id="+t.id)}}},[e._v("编辑")])],1)])])]})],2)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("oEK1")},"data-v-15f3c10a",null);t.default=i.exports},dFOq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({uploadURL:"/api/wiseqr/attach/commonNewUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},search:{page:1,pageSize:10,iconName:""},pagination:{total:0},tableList:[],addFlag:!1,form:{show:!1,id:"",iconUrl:"",rdmCode:"",iconName:""},loading:!1}),created(){this.list()},methods:{addIcon(){this.addFlag=!0,this.form.show=!0},uploadImgUrlSuccess(e){if("200000"===e.ret)return console.log(e),this.form.rdmCode=e.data.rdmCode,void(this.form.iconUrl=e.data.filePath);this.$message.error(e.message)},deleteIcon(e){this.$confirm("您确定删除此图标？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/saasHbseller/shop/lbsIcon/del",{id:e},!1,e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.list()):(console.log(e),this.$message({message:e.msg,type:"warning"}),this.list())})})},currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e)},reset(){this.search={page:1,pageSize:10,iconName:""},this.list()},list(e,t,a){let s=1;t&&(s=t),this.search.page=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/saasHbseller/shop/lbsIcon/query",this.search,!1,e=>{"200"==e.code?(this.tableList=e.data.records||[],this.initPagination(e.data.total)):this.$message.error(e.msg)})},handleCloseForm(){this.addFlag=!1,this.form.id="",this.form.iconName="",this.form.iconUrl="",this.form.rdmCode=""},dataForm(e,t){this.loading=!0,this.form.id="",t&&t.id&&(this.form.id=t.id),console.log(t),this.$request.post("/saasHbseller/shop/lbsIcon/detail",{id:this.form.id},!1,e=>{this.loading=!1,this.form.show=!0,"200"==e.code?(this.form.iconUrl=e.data.iconUrl,this.form.iconName=e.data.iconName,this.form.rdmCode=e.data.imgRdmCode):this.$message.error(e.msg)})},addForm(){this.form.iconName||this.$message.error("请填写图片名称！"),this.form.rdmCode||this.$message.error("请上传图片！");let e={iconName:this.form.iconName,rdmCode:this.form.rdmCode};this.$request.post("/saasHbseller/shop/lbsIcon/add",e,!1,e=>{"200"==e.code?(this.list(),this.form.show=!1,this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.msg)})},submitForm(){let e={id:this.form.id,iconName:this.form.iconName,rdmCode:this.form.rdmCode};this.$request.post("/saasHbseller/shop/lbsIcon/update",e,!1,e=>{"200"==e.code?(this.list(),this.form.show=!1,this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.msg)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"seller-icon-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addIcon}},[e._v("新建图标")])],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"图标名称："}},[a("el-input",{attrs:{size:"small"},model:{value:e.search.iconName,callback:function(t){e.$set(e.search,"iconName",t)},expression:"search.iconName"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.search.page-1)*e.search.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"iconName",label:"图标名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.dataForm(t.$index,t.row)}}},[e._v("查看详情")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.deleteIcon(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.page,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新建/编辑图标",width:"500px",visible:e.form.show,center:""},on:{"update:visible":function(t){e.$set(e.form,"show",t)},close:e.handleCloseForm}},[a("el-form",{attrs:{inline:!1,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"图标名称："}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.iconName,callback:function(t){e.$set(e.form,"iconName",t)},expression:"form.iconName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标图片："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadURL,headers:e.headerObj,data:{channel:"hebei-sellerInfo "},"on-success":e.uploadImgUrlSuccess,"show-file-list":!1}},[e.form.iconUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.iconUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),a("div",{staticClass:"pic-tips"},[e._v("图标格式要求：png、jpg，尺寸：266x220px")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[e.addFlag?e._e():a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),e.addFlag?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addForm}},[e._v("确 定")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.form.show=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("oYL3"),a("WFzI")},"data-v-3f0c644f",null);t.default=i.exports},e05C:function(e,t,a){"use strict";var s={props:["sellerId","returnPath"],name:"SellerManage",data:()=>({listLoading:!1,isFxList:[{code:"",name:"全部"},{code:"0",name:"无"},{code:"1",name:"有"}],unitList:[{code:"",name:"全部"},{code:"1",name:"盒"},{code:"2",name:"条"}],filters:{unit:"",isFx:"",time:[]},newFxlist:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.getNewFxlist()},methods:{getNewFxlist(){let e={sellerId:this.sellerId,unit:this.filters.unit,isFx:this.filters.isFx,startTime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endTime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};this.postSearch(e)},postSearch(e){this.$request.post("/lsh/seller-manager/seller/select/newFxlist",e,!1,e=>{console.log(e.data),this.newFxlist=e.data.list,this.total=e.data.page.count,this.pageNo=e.data.page.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getNewFxlist()},getStatus(){this.filters.unit="",this.filters.isFx="",this.filters.time=[],this.pageNo=1,this.currentPage=1,this.getNewFxlist()},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.getNewFxlist()},returnMgr(){this.$router.push({path:this.returnPath})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters,"label-width":"90px"}},[a("el-form-item",{attrs:{size:"small",label:"时间区间："}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.filters.time,callback:function(t){e.$set(e.filters,"time",t)},expression:"filters.time"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"扫码单位："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.unit,callback:function(t){e.$set(e.filters,"unit",t)},expression:"filters.unit"}},e._l(e.unitList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"有无返还："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.isFx,callback:function(t){e.$set(e.filters,"isFx",t)},expression:"filters.isFx"}},e._l(e.isFxList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitForm}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:e.getStatus}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.newFxlist}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openId",label:"微信openld",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"扫店码时间\t"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(new Date(t.row.ctime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"zjTime",label:"扫烟码时间\t"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(new Date(t.row.zjTime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"扫码单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.unit?a("span",[e._v(e._s("盒"))]):2==t.row.unit?a("span",[e._v(e._s("条"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"fxAmount",label:"返回金额",width:"120"}})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.returnMgr}},[e._v("返回列表")])],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("xWYt"),a("j3+U")},"data-v-6811f1e2",null);t.a=i.exports},eWzN:function(e,t){},f7LP:function(e,t,a){"use strict";var s={props:["sellerId","returnPath"],name:"SellerManage",data:()=>({listLoading:!1,typeList:[{code:"",name:"全部"},{code:"1",name:"扫码返现"},{code:"2",name:"提现"}],filters:{type:"",time:[]},accountFlowList:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.getAccountFlowList()},methods:{getAccountFlowList(){let e={sellerId:this.sellerId,type:this.filters.type,startTime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endTime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};this.postSearch(e)},postSearch(e){this.$request.post("/lsh/seller-manager/seller/accountFlow",e,!1,e=>{console.log(e.data),this.accountFlowList=e.data.list,this.total=e.data.page.count,this.pageNo=e.data.page.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getAccountFlowList()},getStatus(){this.filters.type="",this.filters.time=[],this.pageNo=1,this.currentPage=1,this.getAccountFlowList()},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.getAccountFlowList()},returnMgr(){this.$router.push({path:this.returnPath})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters,"label-width":"90px"}},[a("el-form-item",{attrs:{size:"small",label:"时间区间："}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.filters.time,callback:function(t){e.$set(e.filters,"time",t)},expression:"filters.time"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"交易类型："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitForm}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:e.getStatus}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.accountFlowList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"交易类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v(e._s("扫码返现"))]):2==t.row.type?a("span",[e._v(e._s("提现"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.type?a("span",{staticStyle:{color:"red"}},[e._v("-￥"+e._s(t.row.amount))]):1==t.row.type?a("span",{staticStyle:{color:"#0c9b0d"}},[e._v("+￥"+e._s(t.row.amount))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"交易时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(new Date(t.row.time).Format("yyyy-MM-dd hh:mm:ss")))])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.returnMgr}},[e._v("返回列表")])],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("0cSA"),a("nphx")},"data-v-03ca44dc",null);t.a=i.exports},hJNe:function(e,t){},hKlM:function(e,t){},"j+in":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s={fansScanSnNumRankList:[{totalScanCount:705,snName:"测试规格1"},{totalScanCount:411,snName:"测试规格2"},{totalScanCount:203,snName:"测试规格3"},{totalScanCount:705,snName:"测试规格1"},{totalScanCount:411,snName:"测试规格2"},{totalScanCount:203,snName:"测试规格3"},{totalScanCount:705,snName:"测试规格1"},{totalScanCount:411,snName:"测试规格2"},{totalScanCount:203,snName:"测试规格3"},{totalScanCount:705,snName:"测试规格1"},{totalScanCount:411,snName:"测试规格2"},{totalScanCount:203,snName:"测试规格3"}],fansNumRankList:[{totalFans:160,displayName:"东北大区"},{totalFans:130,displayName:"石家庄"},{totalFans:160,displayName:"东北大区"},{totalFans:130,displayName:"石家庄"},{totalFans:160,displayName:"东北大区"},{totalFans:130,displayName:"石家庄"},{totalFans:160,displayName:"东北大区"},{totalFans:130,displayName:"石家庄"},{totalFans:160,displayName:"东北大区"},{totalFans:130,displayName:"石家庄"}],fansScanNumRankList:[{totalScanCount:800,displayName:"石家庄"},{totalScanCount:519,displayName:"广西云南大区"},{totalScanCount:800,displayName:"石家庄"},{totalScanCount:519,displayName:"广西云南大区"},{totalScanCount:800,displayName:"石家庄"},{totalScanCount:519,displayName:"广西云南大区"},{totalScanCount:800,displayName:"石家庄"},{totalScanCount:519,displayName:"广西云南大区"},{totalScanCount:800,displayName:"石家庄"},{totalScanCount:519,displayName:"广西云南大区"},{totalScanCount:519,displayName:"广西云南大区"},{totalScanCount:519,displayName:"广西云南大区"}]};var l={name:"SellerRank",data:()=>({loading:!1,saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),search:{saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),provinceCode:null,opDate:new Date((new Date).getTime()-864e5).Format("yyyy-MM-dd"),dateType:"day"},dateType:[{name:"日",code:"day"},{name:"周",code:"week"},{name:"月",code:"month"}],dates:[],saleZone:[],saleZoneProv:[],fansScanSnNumRankList:[],fansNumRankList:[],fansScanNumRankList:[],showBtn:!1,listLoading:!1,showMore1:!1,showMore2:!1,showMore3:!1,showMore4:!1}),mounted(){null===this.saleZoneCode&&(this.showBtn=!0),this.getSaleZone(),null===this.saleZoneCode?this.handleClickALL("allZone"):this.getSellerRank()},methods:{handleSelectDateType(e){if(console.log(e),this.search.opDate=null,this.dates=[],"day"!=e){let t={type:e};this.$request.post("/dataStats/dim/dataShow/select",t,!1,e=>{"200"==e.code&&(this.dates=e.data)})}},handleClickALL(e){this.search.saleZoneCode=null,this.search.provinceCode=null;let t={saleZoneCode:"allZone"===e?"all":null,provCode:"allProv"===e?"all":null,opDate:this.search.opDate,dateType:this.search.dateType};t.opDate?this.$request.post("/dataStats/statHbsSeller/fansDs/rank",t,!1,e=>{"200"==e.code?(this.fansScanSnNumRankList=e.data.fansScanSnNumRankList.length?e.data.fansScanSnNumRankList:[],this.fansNumRankList=e.data.fansNumRankList.length?e.data.fansNumRankList:[],this.fansScanNumRankList=e.data.fansScanNumRankList.length?e.data.fansScanNumRankList:[]):this.$message.error(e.msg)}):this.$message.warning("提示：请选择日期进行查询！")},handleSaleZoneCodeChange(e){this.search.provinceCode=null,this.$request.post("/api/saleZone/saleZoneProv",{saleZone:e},!1,e=>{"200"==e.code&&(this.saleZoneProv=e.data||[])})},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.search.saleZoneCode=this.saleZoneCode))})},getSellerRank(){let e={saleZoneCode:this.search.saleZoneCode,provCode:this.search.provinceCode,opDate:this.search.opDate,dateType:this.search.dateType};e.saleZoneCode||e.provCode?e.opDate?this.$request.post("/dataStats/statHbsSeller/fansDs/rank",e,!1,e=>{"200"==e.code?(e.data||(e.data=s),this.fansScanSnNumRankList=e.data.fansScanSnNumRankList,this.fansNumRankList=e.data.fansNumRankList,this.sellerShopFansNumRank=e.data.sellerShopFansNumRank,this.fansScanNumRankList=e.data.fansScanNumRankList):this.$message.error(e.msg)}):this.$message.warning("提示：请选择日期进行查询！"):this.$message.warning("提示：请选择销区或省份进行查询！")}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"seller-rank-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",[a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择销区"},on:{change:e.handleSaleZoneCodeChange},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1)],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"省份：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择省份"},model:{value:e.search.provinceCode,callback:function(t){e.$set(e.search,"provinceCode",t)},expression:"search.provinceCode"}},e._l(e.saleZoneProv,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"日期类型：",prop:"dateType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择日期类型"},on:{change:e.handleSelectDateType},model:{value:e.search.dateType,callback:function(t){e.$set(e.search,"dateType",t)},expression:"search.dateType"}},e._l(e.dateType,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"日期：",prop:"opDate"}},["day"==e.search.dateType?a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.search.opDate,callback:function(t){e.$set(e.search,"opDate",t)},expression:"search.opDate"}}):e._e(),e._v(" "),"day"!=e.search.dateType?a("el-select",{attrs:{size:"small",placeholder:"选择日期"},model:{value:e.search.opDate,callback:function(t){e.$set(e.search,"opDate",t)},expression:"search.opDate"}},e._l(e.dates,function(e,t){return a("el-option",{key:t,attrs:{label:e.dateShow,value:e.opDate}})})):e._e()],1)],1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getSellerRank}},[e._v("查询")]),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allZone")}}},[e._v("全部销区")]):e._e(),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allProv")}}},[e._v("全部省份")]):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{height:"20px"}}),e._v(" "),a("el-card",[a("div",{staticClass:"form-container"},[a("div",{staticClass:"rank-form"},[a("div",{staticClass:"title"},[e._v("粉丝数量排名")]),e._v(" "),e.showMore1?[e.showMore1?a("el-table",{staticStyle:{width:"300px","min-height":"440px"},attrs:{data:e.fansNumRankList,"max-height":"600"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"totalFans",label:"粉丝数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.totalFans?a("span",[e._v(e._s(t.row.totalFans))]):a("span",[e._v("0")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"displayName",label:"销区/地区"}})],1):e._e(),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore1=!1}}},[e._v("收起")])]:[a("el-table",{staticStyle:{width:"300px",height:"440px"},attrs:{data:e.fansNumRankList}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"totalFans",label:"粉丝数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.totalFans?a("span",[e._v(e._s(t.row.totalFans))]):a("span",[e._v("0")])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"displayName",label:"销区/地区"}})],1),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore1=!0}}},[e._v("点击查看更多")])]],2),e._v(" "),a("div",{staticClass:"rank-form"},[a("div",{staticClass:"title"},[e._v("扫码量排名")]),e._v(" "),e.showMore2?[e.showMore2?a("el-table",{staticStyle:{width:"300px","min-height":"440px"},attrs:{data:e.fansScanNumRankList,"max-height":"600"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"totalScanCount",label:"扫码次数"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"displayName",label:"销区/地区"}})],1):e._e(),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore2=!1}}},[e._v("收起")])]:[a("el-table",{staticStyle:{width:"300px",height:"440px"},attrs:{data:e.fansScanNumRankList}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"totalScanCount",label:"扫码次数"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"displayName",label:"销区/地区"}})],1),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore2=!0}}},[e._v("点击查看更多")])]],2),e._v(" "),a("div",{staticClass:"rank-form"},[a("div",{staticClass:"title"},[e._v("各规格扫码量排名")]),e._v(" "),e.showMore3?[e.showMore3?a("el-table",{staticStyle:{width:"300px","min-height":"440px"},attrs:{data:e.fansScanSnNumRankList,"max-height":"600"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"totalScanCount",label:"扫码包数"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"snName",label:"规格"}})],1):e._e(),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore3=!1}}},[e._v("收起")])]:[a("el-table",{staticStyle:{width:"300px",height:"440px"},attrs:{data:e.fansScanSnNumRankList}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"totalScanCount",label:"扫码包数"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"snName",label:"规格"}})],1),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore3=!0}}},[e._v("点击查看更多")])]],2)])])],1)},staticRenderFns:[]};var r=a("VU/8")(l,i,!1,function(e){a("cQgK")},"data-v-8fa61f7a",null);t.default=r.exports},"j3+U":function(e,t){},ksrO:function(e,t){},mRng:function(e,t){},nCSy:function(e,t){},nphx:function(e,t){},ntMB:function(e,t){},oEK1:function(e,t){},oHOG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({search:{pageNo:1,pageSize:10,auditStatus:"1"},pagination:{total:0},tableList:[],form:{show:!1,id:"",shopImg:"",licenseImg:"",auditStatus:""},loading:!1}),created(){this.list()},methods:{currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},reset(){this.search={pageNo:1,pageSize:10,auditStatus:"1"},this.list()},list(e,t,a){let s=1;t&&(s=t),this.search.pageNo=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/api/hsInfoAudit/list",this.search,!0,e=>{"200"==e.code?(this.tableList=e.data.list||[],this.initPagination(e.data.page||{})):this.$message.error(e.msg)})},handleCloseForm(){this.form.id="",this.form.shopImg="",this.form.licenseImg="",this.form.auditStatus=""},dataForm(e,t){this.loading=!0,this.form.id="",t&&t.id&&(this.form.id=t.id),console.log(t),this.$request.post("/api/hsInfoAudit/detail",{itemId:this.form.id},!1,e=>{this.loading=!1,this.form.show=!0,"200"==e.code?(this.form.licenseImg=e.data.hsUser.licenseImg,this.form.shopImg=e.data.hsUser.shopImg):this.$message.error(e.msg)})},submitForm(){if(!this.form.auditStatus)return void this.$message.error("请选择审核状态！");let e={auditItemId:this.form.id,auditStatus:this.form.auditStatus};this.$request.post(" /api/hsInfoAudit/doAudit",e,!1,e=>{"200"==e.code?(this.list(),this.form.show=!1,this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.msg)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"审核状态："}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.search.auditStatus,callback:function(t){e.$set(e.search,"auditStatus",t)},expression:"search.auditStatus"}},[a("el-option",{attrs:{label:"待审核",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"审核失败",value:"3"}})],1)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.search.pageNo-1)*e.search.pageSize+t.$index+1)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"license_no",label:"烟草专卖号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shop_name",label:"门店名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"owner_name",label:"联系人姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"owner_mobile",label:"联系人电话",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.audit_status?a("span",[e._v("待审核")]):e._e(),e._v(" "),3==t.row.audit_status?a("span",[e._v("审核失败")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"申请时间",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ctime?a("span",[e._v(e._s(new Date(t.row.ctime).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.audit_status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.dataForm(t.$index,t.row)}}},[e._v("查看详情")]):e._e(),e._v(" "),3==t.row.audit_status?a("span",[e._v("无")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNo,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"查看详情",width:"1100px",visible:e.form.show,center:""},on:{"update:visible":function(t){e.$set(e.form,"show",t)},close:e.handleCloseForm}},[a("el-form",{staticStyle:{"text-align":"center"},attrs:{inline:!0}},[a("el-form-item",[a("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("门头照片：")]),e._v(" "),a("img",{staticStyle:{display:"block"},attrs:{src:e.form.shopImg,width:"500",alt:""}})]),e._v(" "),a("el-form-item",[a("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("烟草专卖零售许可证照：")]),e._v(" "),a("img",{staticStyle:{display:"block"},attrs:{src:e.form.licenseImg,width:"500",alt:""}})]),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-radio",{attrs:{label:"2"},model:{value:e.form.auditStatus,callback:function(t){e.$set(e.form,"auditStatus",t)},expression:"form.auditStatus"}},[e._v("审核通过")]),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:e.form.auditStatus,callback:function(t){e.$set(e.form,"auditStatus",t)},expression:"form.auditStatus"}},[e._v("审核不通过")])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.form.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("mRng")},"data-v-353d0222",null);t.default=i.exports},oYL3:function(e,t){},oyZN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s={sellerScanRank:[{name:"河北石家庄",sellerScan:56},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26},{name:"西南大区",sellerScan:26}],sellerNumRank:[{curNum:22,name:"河北石家庄"},{curNum:12,name:"西北大区"},{curNum:22,name:"河北石家庄"},{curNum:12,name:"西北大区"},{curNum:22,name:"河北石家庄"},{curNum:12,name:"西北大区"},{curNum:22,name:"河北石家庄"},{curNum:12,name:"西北大区"},{curNum:22,name:"河北石家庄"},{curNum:12,name:"西北大区"},{curNum:22,name:"河北石家庄"},{curNum:12,name:"西北大区"},{curNum:22,name:"河北石家庄"},{curNum:12,name:"西北大区"}],sellerShopFansNumRank:[{zoneProvName:"东北大区",fansNum:120,shopName:"name2"},{zoneProvName:"石家庄",fansNum:100,shopName:"name1"},{zoneProvName:"东北大区",fansNum:120,shopName:"name2"},{zoneProvName:"石家庄",fansNum:100,shopName:"name1"},{zoneProvName:"东北大区",fansNum:120,shopName:"name2"},{zoneProvName:"石家庄",fansNum:100,shopName:"name1"},{zoneProvName:"东北大区",fansNum:120,shopName:"name2"},{zoneProvName:"石家庄",fansNum:100,shopName:"name1"},{zoneProvName:"东北大区",fansNum:120,shopName:"name2"},{zoneProvName:"石家庄",fansNum:100,shopName:"name1"},{zoneProvName:"东北大区",fansNum:120,shopName:"name2"},{zoneProvName:"石家庄",fansNum:100,shopName:"name1"},{zoneProvName:"东北大区",fansNum:120,shopName:"name2"},{zoneProvName:"石家庄",fansNum:100,shopName:"name1"},{zoneProvName:"东北大区",fansNum:120,shopName:"name2"},{zoneProvName:"石家庄",fansNum:100,shopName:"name1"},{zoneProvName:"东北大区",fansNum:120,shopName:"name2"},{zoneProvName:"石家庄",fansNum:100,shopName:"name1"}],sellerSnScanRank:[{snName:"马尔斯绿",sellerScan:120},{snName:"软荷花",sellerScan:103},{snName:"马尔斯绿",sellerScan:120},{snName:"软荷花",sellerScan:103},{snName:"马尔斯绿",sellerScan:120},{snName:"软荷花",sellerScan:103},{snName:"马尔斯绿",sellerScan:120},{snName:"软荷花",sellerScan:103},{snName:"马尔斯绿",sellerScan:120},{snName:"软荷花",sellerScan:103},{snName:"马尔斯绿",sellerScan:120},{snName:"软荷花",sellerScan:103},{snName:"马尔斯绿",sellerScan:120},{snName:"软荷花",sellerScan:103}]};var l={name:"SellerRank",data:()=>({loading:!1,saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),search:{saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),provinceCode:null,opDate:new Date((new Date).getTime()-864e5).Format("yyyy-MM-dd"),dateType:"day"},dateType:[{name:"日",code:"day"},{name:"周",code:"week"},{name:"月",code:"month"}],dates:[],saleZone:[],saleZoneProv:[],sellerScanRank:[],sellerNumRank:[],sellerSnScanRank:[],sellerShopFansNumRank:[],showBtn:!1,listLoading:!1,showMore1:!1,showMore2:!1,showMore3:!1,showMore4:!1}),mounted(){null===this.saleZoneCode&&(this.showBtn=!0),this.getSaleZone(),null===this.saleZoneCode?this.handleClickALL("allZone"):this.getSellerRank()},methods:{handleSelectDateType(e){if(console.log(e),this.search.opDate=null,this.dates=[],"day"!=e){let t={type:e};this.$request.post("/dataStats/dim/dataShow/select",t,!1,e=>{"200"==e.code&&(this.dates=e.data)})}},handleClickALL(e){this.search.saleZoneCode=null,this.search.provinceCode=null;let t={type:e,optDate:this.search.opDate,dateType:this.search.dateType};t.optDate?this.$request.post("/dataStats/statHbsSeller/sellerRank/allRankData",t,!1,e=>{"200"==e.code?(this.sellerScanRank=e.data.sellerScanRank.length?e.data.sellerScanRank:[],this.sellerNumRank=e.data.sellerNumRank.length?e.data.sellerNumRank:[],this.sellerShopFansNumRank=e.data.sellerShopFansNumRank.length?e.data.sellerShopFansNumRank:[],this.sellerSnScanRank=e.data.sellerSnScanRank.length?e.data.sellerSnScanRank:[]):this.$message.error(e.msg)}):this.$message.warning("提示：请选择日期进行查询！")},handleSaleZoneCodeChange(e){this.search.provinceCode=null,this.$request.post("/api/saleZone/saleZoneProv",{saleZone:e},!1,e=>{"200"==e.code&&(this.saleZoneProv=e.data||[])})},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.search.saleZoneCode=this.saleZoneCode))})},getSellerRank(){let e={saleZoneCode:this.search.saleZoneCode,provCode:this.search.provinceCode,optDate:this.search.opDate,dateType:this.search.dateType};e.saleZoneCode||e.provCode?e.optDate?this.$request.post("/dataStats/statHbsSeller/sellerRank/regionRankData",e,!1,e=>{"200"==e.code?(e.data||(e.data=s),this.sellerScanRank=e.data.sellerScanRank,this.sellerNumRank=e.data.sellerNumRank,this.sellerShopFansNumRank=e.data.sellerShopFansNumRank,this.sellerSnScanRank=e.data.sellerSnScanRank):this.$message.error(e.msg)}):this.$message.warning("提示：请选择日期进行查询！"):this.$message.warning("提示：请选择销区或省份进行查询！")}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"seller-rank-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",[a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择销区"},on:{change:e.handleSaleZoneCodeChange},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1)],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"省份：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择省份"},model:{value:e.search.provinceCode,callback:function(t){e.$set(e.search,"provinceCode",t)},expression:"search.provinceCode"}},e._l(e.saleZoneProv,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"日期类型：",prop:"dateType"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择日期类型"},on:{change:e.handleSelectDateType},model:{value:e.search.dateType,callback:function(t){e.$set(e.search,"dateType",t)},expression:"search.dateType"}},e._l(e.dateType,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"日期：",prop:"opDate"}},["day"==e.search.dateType?a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.search.opDate,callback:function(t){e.$set(e.search,"opDate",t)},expression:"search.opDate"}}):e._e(),e._v(" "),"day"!=e.search.dateType?a("el-select",{attrs:{size:"small",placeholder:"选择日期"},model:{value:e.search.opDate,callback:function(t){e.$set(e.search,"opDate",t)},expression:"search.opDate"}},e._l(e.dates,function(e,t){return a("el-option",{key:t,attrs:{label:e.dateShow,value:e.opDate}})})):e._e()],1)],1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getSellerRank}},[e._v("查询")]),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allZone")}}},[e._v("全部销区")]):e._e(),e._v(" "),e.showBtn?a("el-button",{attrs:{size:"small"},on:{click:function(t){e.handleClickALL("allProv")}}},[e._v("全部省份")]):e._e()],1)],1),e._v(" "),a("div",{staticStyle:{height:"20px"}}),e._v(" "),a("el-card",[a("div",{staticClass:"form-container"},[a("div",{staticClass:"rank-form"},[a("div",{staticClass:"title"},[e._v("注册排名")]),e._v(" "),e.showMore1?[e.showMore1?a("el-table",{staticStyle:{width:"300px","min-height":"440px"},attrs:{data:e.sellerNumRank,"max-height":"600"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"curNum",label:"注册数量"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"name",label:"销区/地区"}})],1):e._e(),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore1=!1}}},[e._v("收起")])]:[a("el-table",{staticStyle:{width:"300px",height:"440px"},attrs:{data:e.sellerNumRank}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"curNum",label:"注册数量"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"name",label:"销区/地区"}})],1),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore1=!0}}},[e._v("点击查看更多")])]],2),e._v(" "),a("div",{staticClass:"rank-form"},[a("div",{staticClass:"title"},[e._v("扫码量排名")]),e._v(" "),e.showMore2?[e.showMore2?a("el-table",{staticStyle:{width:"300px","min-height":"440px"},attrs:{data:e.sellerScanRank,"max-height":"600"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"sellerScan",label:"扫码次数"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"name",label:"销区/地区"}})],1):e._e(),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore2=!1}}},[e._v("收起")])]:[a("el-table",{staticStyle:{width:"300px",height:"440px"},attrs:{data:e.sellerScanRank}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"sellerScan",label:"扫码次数"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"name",label:"销区/地区"}})],1),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore2=!0}}},[e._v("点击查看更多")])]],2),e._v(" "),a("div",{staticClass:"rank-form"},[a("div",{staticClass:"title"},[e._v("各规格扫码量排名")]),e._v(" "),e.showMore3?[e.showMore3?a("el-table",{staticStyle:{width:"300px","min-height":"440px"},attrs:{data:e.sellerSnScanRank,"max-height":"600"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"sellerScan",label:"扫码包数"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"snName",label:"规格"}})],1):e._e(),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore3=!1}}},[e._v("收起")])]:[a("el-table",{staticStyle:{width:"300px",height:"440px"},attrs:{data:e.sellerSnScanRank}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"sellerScan",label:"扫码包数"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"snName",label:"规格"}})],1),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore3=!0}}},[e._v("点击查看更多")])]],2)]),e._v(" "),a("div",{staticClass:"form-container"},[a("div",{staticClass:"rank-form",staticStyle:{width:"400px"}},[a("div",{staticClass:"title"},[e._v("零售户店铺排名")]),e._v(" "),e.showMore4?[e.showMore4?a("el-table",{staticStyle:{width:"400px","min-height":"440px"},attrs:{data:e.sellerShopFansNumRank,"max-height":"600"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"shopName",label:"店铺名称"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"zoneProvName",label:"销区/地区"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"fansNum",label:"粉丝数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.fansNum?a("span",[e._v(e._s(t.row.fansNum))]):a("span",[e._v("0")])]}}])})],1):e._e(),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore4=!1}}},[e._v("收起")])]:[a("el-table",{staticStyle:{width:"400px",height:"440px"},attrs:{data:e.sellerShopFansNumRank}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"shopName",label:"店铺名称"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"zoneProvName",label:"销区/地区"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"fansNum",label:"粉丝数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.fansNum?a("span",[e._v(e._s(t.row.fansNum))]):a("span",[e._v("0")])]}}])})],1),e._v(" "),a("div",{staticClass:"more",on:{click:function(t){e.showMore4=!0}}},[e._v("点击查看更多")])]],2)])])],1)},staticRenderFns:[]};var r=a("VU/8")(l,i,!1,function(e){a("1VzB")},"data-v-73d8dde6",null);t.default=r.exports},p4s7:function(e,t){},pzri:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),search:{saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),page:1,pageSize:10,keyType:"",keyValue:""},pagination:{total:0},tableList:[],saleZone:[],form:{show:!1,id:"",shopImg:"",licenseImg:"",auditStatus:""},loading:!1,txId:null,dialogVisible:!1,hbsSeller:null,sellerInvite:null,ruleForm:{status:null,auditMsg:null},rules:{status:[{required:!0,message:"请选择审核状态",trigger:"blur"}],auditMsg:[{required:!0,message:"请输入审核不通过理由",trigger:"blur"}]}}),created(){this.getSaleZone(),this.list()},methods:{cancelDialog(){this.dialogVisible=!1,this.ruleForm.status=null,this.ruleForm.auditMsg=null},getDetail(e){this.txId=e,this.$request.post("/saasHbseller/sellerInvite/detail",{id:e},!1,e=>{"200"==e.code?(this.hbsSeller=e.data.hbsSeller,this.sellerInvite=e.data.sellerInvite,0!=e.data.sellerInvite.status&&(this.ruleForm.status=e.data.sellerInvite.status+"",this.ruleForm.auditMsg=e.data.sellerInvite.auditMsg),this.dialogVisible=!0):this.$message({message:e.msg,type:"warning"})})},approval(){if(!this.ruleForm.status)return void this.$message({message:"请选择是否通过此邀约",type:"warning"});let e={id:this.txId,status:this.ruleForm.status,auditMsg:this.ruleForm.auditMsg};this.$confirm(`您确定${1==this.ruleForm.status?"":"不"}通过此邀约审核？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/saasHbseller/sellerInvite/audit",e,!1,e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.ruleForm.status=null,this.ruleForm.auditMsg=null,this.list()):(console.log(e),this.$message({message:e.msg,type:"warning"}),this.dialogVisible=!1,this.ruleForm.status=null,this.ruleForm.auditMsg=null,this.list())})})},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.search.saleZoneCode=this.saleZoneCode))})},getSaleZoneName(e){if(!e)return"";let t="",a=this.saleZone.find(t=>{if(t.zoneCode==e)return t});return t=a?a.zoneName:""},inputWithSelectChange(e){this.search.keyValue=""},currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e)},reset(){this.search={page:1,pageSize:10,saleZoneCode:this.saleZoneCode,keyType:"",keyValue:""},this.list()},list(e,t,a){let s=1;t&&(s=t),this.search.page=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/saasHbseller/sellerInvite/list",this.search,!0,e=>{"200"==e.code?(this.tableList=e.data.records||[],this.initPagination(e.data.total)):this.$message.error(e.msg)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{size:"small",label:"关键词："}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:e.search.keyValue,callback:function(t){e.$set(e.search,"keyValue",t)},expression:"search.keyValue"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.inputWithSelectChange},slot:"prepend",model:{value:e.search.keyType,callback:function(t){e.$set(e.search,"keyType",t)},expression:"search.keyType"}},[a("el-option",{attrs:{label:"烟草证号",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"发起人姓名",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"发起人手机号",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"门店名称",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"业务员名称",value:"5"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.search.page-1)*e.search.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"邀约模板",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"msgContent",label:"详细内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.msgContent&&t.row.msgContent.length>10?a("span",{attrs:{title:t.row.msgContent}},[e._v(e._s(t.row.msgContent.substring(0,10))+"...")]):a("span",[e._v(e._s(t.row.msgContent))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"licenseNo",label:"烟草专卖号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"门店名称",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactName",label:"发起人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"发起人电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleZoneName",label:"所属销区",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"发起时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v("已通过")]):e._e(),e._v(" "),2==t.row.status?a("span",[e._v("未通过")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.getDetail(t.row.id)}}},[e._v("查看")]),e._v(" "),"0"==t.row.status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.getDetail(t.row.id)}}},[e._v("审核通过")]):e._e(),e._v(" "),"0"==t.row.status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.getDetail(t.row.id)}}},[e._v("审核不通过")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.page,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:" 活动邀约审核",visible:e.dialogVisible,width:"900px",center:"","before-close":e.cancelDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.hbsSeller&&e.sellerInvite?a("div",{staticStyle:{"text-align":"center"}},[a("div",{staticClass:"basic-msg-broad"},[a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[e._v("烟草专卖号：")]),e._v(e._s(e.hbsSeller.licenseNo))]),e._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[e._v("门店名称：")]),e._v(e._s(e.hbsSeller.shopName))]),e._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[e._v("发起人：")]),e._v(e._s(e.hbsSeller.contactName))]),e._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[e._v("联系电话：")]),e._v(e._s(e.hbsSeller.contactPhone))]),e._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[e._v("所属销区：")]),e._v(e._s(e.getSaleZoneName(e.hbsSeller.saleZoneCode)))]),e._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[e._v("发起时间：")]),e._v(e._s(e.sellerInvite.ctime))])]),e._v(" "),a("div",{staticClass:"basic-title"},[e._v("邀约模板")]),e._v(" "),a("div",{staticClass:"basic-msg"},[a("span",{staticClass:"title"},[e._v("主标题：")]),e._v(e._s(e.sellerInvite.title))]),e._v(" "),a("div",{staticClass:"basic-msg"},[a("span",{staticClass:"title"},[e._v("副标题：")]),e._v(e._s(e.sellerInvite.subTitle))]),e._v(" "),a("div",{staticClass:"basic-msg"},[a("span",{staticClass:"title"},[e._v("详细内容：")]),a("span",{staticClass:"content"},[e._v(e._s(e.sellerInvite.msgContent))])]),e._v(" "),a("div"),e._v(" "),a("el-form",{attrs:{"label-width":"162px",disabled:0!=e.sellerInvite.status,rules:e.rules}},[a("el-form-item",{staticStyle:{width:"385px"},attrs:{label:"审核状态：",prop:"status",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}}),e._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[e._v("审核通过")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.ruleForm.status,callback:function(t){e.$set(e.ruleForm,"status",t)},expression:"ruleForm.status"}},[e._v("审核不通过")])],1),e._v(" "),2==e.ruleForm.status?a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"审核不通过理由：",prop:"auditMsg",size:"small"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.ruleForm.auditMsg,callback:function(t){e.$set(e.ruleForm,"auditMsg",t)},expression:"ruleForm.auditMsg"}})],1):e._e()],1),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.cancelDialog}},[e._v("关闭")]),e._v(" "),0==e.sellerInvite.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.approval}},[e._v("确 定")]):e._e()],1):e._e()])],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("7ynx")},"data-v-3c4088e6",null);t.default=i.exports},qZzT:function(e,t){},rz5l:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"Reviewmanage",data:()=>({listLoading:!1,brandList:[],snList:[],AllRegion:[],AllRegionOrign:[],allFormsBrand:[{code:"",name:"全部"}],statusList:[{code:"",name:"全部"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],filters:{brandCodeArr:[],snArr:[],adCodes:[],activityForm:"",status:"",keywords:"",time:[]},activityRebateList:[],pageSize:10,pageNo:1,currentPage:1,total:0,dialogVisible:!1,rebate:"",activityCode:""}),created(){this.getListBrand(),this.getListAllForms(),this.getListStatus(),this.getListAllRegion(),this.getActivityRebateList()},methods:{getListBrand(){this.$request.post("/api/wiseqr/prod/listBrand",{},!0,e=>{"200000"==e.ret&&(this.brandList=e.data.list)})},getListSN(){this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.filters.brandCodeArr},!0,e=>{"200000"==e.ret&&(this.snList=e.data.list)})},selectBrand(e){this.filters.snArr=[],this.getListSN()},getListAllForms(){this.$request.post("/api/wiseqr/act/allForms",{},!0,e=>{"200000"==e.ret&&(this.allFormsBrand=[...this.allFormsBrand,...e.data.list])})},getListStatus(){this.$request.post("/api/wiseqr/act/statusSelect",{},!0,e=>{if("200000"==e.ret){let t=[];Object.entries(e.data).map((e,a)=>{let[s,l]=e;t.push({code:s,name:l})}),this.statusList=[...this.statusList,...t]}})},getListAllRegion(){this.$request.post("/lsh/seller-manager/region/queryAllRegion",{parentCode:""},!1,e=>{if(e.ok){let t=[],a=Object.entries(e.data.cities),s=[...e.data.provinces];a.map(e=>{let[a,l]=e;s.map(e=>{e.code==a&&l.map(t=>{t.province=e.name})}),t=[...t,...l]}),this.AllRegion=t,this.AllRegionOrign=t}})},filterRegion(e){if(console.log(e),e){let t=[...this.AllRegionOrign].filter(t=>t.name.includes(e)||t.province.includes(e));this.AllRegion=[...t]}else this.AllRegion=this.AllRegionOrign},RegionOrign(){this.AllRegion=this.AllRegionOrign},getActivityRebateList(){let e={brandCode:this.filters.brandCodeArr.join(","),sn:this.filters.snArr.join(","),adCodes:this.filters.adCodes.join(","),activityForm:this.filters.activityForm,status:this.filters.status,keywords:this.filters.keywords,activityStime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",activityEtime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};this.postSearch(e)},postSearch(e){this.$request.post("/lsh/seller-manager/setting/activityRebateList",e,!1,e=>{console.log(e.data),this.activityRebateList=e.data.list,this.total=e.data.page.count,this.pageNo=e.data.page.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getActivityRebateList()},getStatus(){this.filters.brandCodeArr=[],this.filters.snArr=[],this.filters.adCodes=[],this.filters.activityForm="",this.filters.status="",this.filters.keywords="",this.filters.time=[],this.pageNo=1,this.currentPage=1,this.getActivityRebateList()},rebateDialog(e){this.dialogVisible=!0,this.activityCode=e},setActivityRebate(){let e={activityCode:this.activityCode,rebate:this.rebate};this.$request.post("/lsh/seller-manager/setting/setActivityRebate",e,!1,e=>{e.ok?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.rebate="",this.getActivityRebateList()):(console.log(e),this.$message({message:e.msg,type:"warning"}),this.dialogVisible=!1,this.rebate="",this.getActivityRebateList())})},cancelDialog(){this.dialogVisible=!1,this.rebate=""},jumpTo(){this.$emit("current-change")},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.getActivityRebateList()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rebate-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"品牌"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:e.selectBrand},model:{value:e.filters.brandCodeArr,callback:function(t){e.$set(e.filters,"brandCodeArr",t)},expression:"filters.brandCodeArr"}},e._l(e.brandList,function(e){return a("el-option",{key:e.brandCode,attrs:{label:e.name,value:e.brandCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"规格"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},model:{value:e.filters.snArr,callback:function(t){e.$set(e.filters,"snArr",t)},expression:"filters.snArr"}},e._l(e.snList,function(e){return a("el-option",{key:e.sn,attrs:{label:e.name,value:e.sn}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"地区"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{multiple:"","collapse-tags":"",filterable:"","reserve-keyword":"",placeholder:"请选择","filter-method":e.filterRegion},on:{blur:e.RegionOrign,focus:e.RegionOrign},model:{value:e.filters.adCodes,callback:function(t){e.$set(e.filters,"adCodes",t)},expression:"filters.adCodes"}},e._l(e.AllRegion,function(t){return a("el-option",{key:t.code,staticStyle:{width:"250px"},attrs:{label:t.name,value:t.code}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-right":"30px"}},[e._v(e._s(t.province))])])}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"活动类型"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择"},model:{value:e.filters.activityForm,callback:function(t){e.$set(e.filters,"activityForm",t)},expression:"filters.activityForm"}},e._l(e.allFormsBrand,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"活动状态"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择"},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"250px"},attrs:{placeholder:"请输入内容"},model:{value:e.filters.keywords,callback:function(t){e.$set(e.filters,"keywords",t)},expression:"filters.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"时间区间"}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.filters.time,callback:function(t){e.$set(e.filters,"time",t)},expression:"filters.time"}})],1),e._v(" "),a("div"),e._v(" "),a("div"),e._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitForm}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:e.getStatus}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.activityRebateList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rebate",label:"返现比例",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"activityName",label:"活动名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"规格",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"活动时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(new Date(t.row.stime).Format("yyyy-MM-dd hh:mm:ss")))]),e._v(" "),a("div",[e._v("-")]),e._v(" "),a("div",[e._v(e._s(new Date(t.row.etime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"adNames",label:"投放地区",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.adNames?[t.row.adNames.length<=20?a("span",[e._v(e._s(t.row.adNames))]):a("span",{attrs:{title:t.row.adNames}},[e._v(e._s(t.row.adNames.substr(0,20)+"..."))])]:e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statusName",label:"使用状态"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.rebateDialog(t.row.activityCode)}}},[e._v("设置返佣比例")])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"设置返佣比例",visible:e.dialogVisible,width:"30%","before-close":e.cancelDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{type:"number",rows:2,placeholder:"请输入返佣比例"},model:{value:e.rebate,callback:function(t){e.rebate=t},expression:"rebate"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.setActivityRebate}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("GENw"),a("eWzN")},"data-v-54672339",null);t.default=i.exports},tKth:function(e,t){},tk8r:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"AddMessage",data:()=>({showNum:!1,form:{title:"",subTitle:"",msgContent:"",saleZoneCode:null,msgTarget:null,status:"1",shopGearList:[],shopLevelList:[]},rules:{title:[{required:!0,message:"请输入消息主标题",trigger:"blur"}],subTitle:[{required:!0,message:"请输入消息副标题",trigger:"blur"}],msgContent:[{required:!0,message:"请输入消息内容",trigger:"blur"}],saleZoneCode:[{required:!0,message:"请选择销区",trigger:"change"}],msgTarget:[{required:!0,message:"请选择接收人",trigger:"change"}],status:[{required:!0,message:"请选择是否发送",trigger:"change"}],shopGearList:[{required:!0,message:"请选择档位",trigger:"change"}],shopLevelList:[{required:!0,message:"请选择等级",trigger:"change"}]},saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),saleZone:[]}),created(){this.getSaleZone()},methods:{onCheckNum(){if(!this.form.saleZoneCode)return void this.$message({message:"请选择销区",type:"warning"});if(!this.form.msgTarget)return void this.$message({message:"请选择接收人",type:"warning"});if(!this.form.shopGearList.length)return void this.$message({message:"请选择档位",type:"warning"});if(!this.form.shopLevelList.length)return void this.$message({message:"请选择等级",type:"warning"});const e={saleZoneCode:this.form.saleZoneCode,msgTarget:this.form.msgTarget,shopGears:this.form.shopGearList.join(","),shopLevels:this.form.shopLevelList.join(",")};console.log(e),"0"===e.shopGears&&(e.shopGears=["1","2","3","4","5"].join(",")),"0"===e.shopLevels&&(e.shopLevels=["1","2","3","4","5","6","7","8"].join(",")),this.$request.post("/saasHbseller/msg/system/totalNum",e,!1,e=>{"200"==e.code?this.$alert(`当前人数${e.data.totalNum}`,"查看人数",{confirmButtonText:"确定"}):this.$message({message:e.msg,type:"warning"})})},handleSelectChange(e,t){console.log(e),e.indexOf("0")>=0&&(console.log(11110),this.form[t]=[],this.form[t].push("0"))},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.form.saleZoneCode=this.saleZoneCode))})},confUpdate(e){this.$refs[e].validate(e=>{if(e){const e=Object.assign({},this.form);1==e.shopGearList.length&&"0"===e.shopGearList[0]&&(e.shopGearList=["1","2","3","4","5"]),1==e.shopLevelList.length&&"0"===e.shopLevelList[0]&&(e.shopLevelList=["1","2","3","4","5","6","7","8"]),this.$request.post("/saasHbseller/msg/system/add",e,!0,e=>{"200"==e.code?(this.$message({message:"保存成功！",type:"success"}),this.$router.push("/seller/messagemgr")):(console.log(e),this.$message({message:e.msg,type:"warning"}))})}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"msg-container"},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.form,rules:e.rules}},[a("div",{staticClass:"title"},[e._v("基本信息：")]),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"消息主标题：",prop:"title"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入消息主标题，最长10个字",maxlength:"10"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"消息副标题：",prop:"subTitle"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入消息副标题，最长20个字",maxlength:"20"},model:{value:e.form.subTitle,callback:function(t){e.$set(e.form,"subTitle",t)},expression:"form.subTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"消息内容：",prop:"msgContent"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:"请输入消息内容，最长100个字",maxlength:"100"},model:{value:e.form.msgContent,callback:function(t){e.$set(e.form,"msgContent",t)},expression:"form.msgContent"}})],1),e._v(" "),a("div",{staticClass:"title"},[e._v("接收条件：")]),e._v(" "),a("el-form-item",{attrs:{label:"目标销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.saleZoneCode,callback:function(t){e.$set(e.form,"saleZoneCode",t)},expression:"form.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"选择接收人:",prop:"msgTarget"}},[a("el-radio-group",{model:{value:e.form.msgTarget,callback:function(t){e.$set(e.form,"msgTarget",t)},expression:"form.msgTarget"}},[a("el-radio",{attrs:{label:"1"}},[e._v("零售户")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("消费者")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"选择档位：",prop:"shopGearList"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},on:{change:function(t){e.handleSelectChange(t,"shopGearList")}},model:{value:e.form.shopGearList,callback:function(t){e.$set(e.form,"shopGearList",t)},expression:"form.shopGearList"}},[a("el-option",{attrs:{value:"0",label:"全部"}},[e._v("全部")]),e._v(" "),a("el-option",{attrs:{value:"1",label:"1档"}},[e._v("1档")]),e._v(" "),a("el-option",{attrs:{value:"2",label:"2档"}},[e._v("2档")]),e._v(" "),a("el-option",{attrs:{value:"3",label:"3档"}},[e._v("3档")]),e._v(" "),a("el-option",{attrs:{value:"4",label:"4档"}},[e._v("4档")]),e._v(" "),a("el-option",{attrs:{value:"5",label:"5档"}},[e._v("5档")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"选择等级：",prop:"shopLevelList"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},on:{change:function(t){e.handleSelectChange(t,"shopLevelList")}},model:{value:e.form.shopLevelList,callback:function(t){e.$set(e.form,"shopLevelList",t)},expression:"form.shopLevelList"}},[a("el-option",{attrs:{value:"0",label:"全部"}},[e._v("全部")]),e._v(" "),a("el-option",{attrs:{value:"1",label:"1级"}},[e._v("1级")]),e._v(" "),a("el-option",{attrs:{value:"2",label:"2级"}},[e._v("2级")]),e._v(" "),a("el-option",{attrs:{value:"3",label:"3级"}},[e._v("3级")]),e._v(" "),a("el-option",{attrs:{value:"4",label:"4级"}},[e._v("4级")]),e._v(" "),a("el-option",{attrs:{value:"5",label:"5级"}},[e._v("5级")]),e._v(" "),a("el-option",{attrs:{value:"6",label:"6级"}},[e._v("6级")]),e._v(" "),a("el-option",{attrs:{value:"7",label:"7级"}},[e._v("7级")]),e._v(" "),a("el-option",{attrs:{value:"8",label:"8级"}},[e._v("8级")])],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onCheckNum}},[e._v("查看人数")])],1),e._v(" "),a("el-form-item",{attrs:{label:"是否立即发送:",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){e.confUpdate("form")}}},[e._v("提交")]),e._v(" "),a("router-link",{attrs:{to:"/seller/messagemgr",replace:""}},[a("el-button",{staticStyle:{width:"100px"},on:{click:function(e){}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("4JJ4")},"data-v-3108976d",null);t.default=i.exports},tkZn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({search:{page:1,pageSize:10,title:"",status:null,msgTarget:null,saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?"ZXQ":sessionStorage.getItem("saleZoneCode")},pagination:{total:0},tableList:[],saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?"ZXQ":sessionStorage.getItem("saleZoneCode"),saleZone:[],statusList:[{code:null,name:"全部"},{code:"0",name:"待发送"},{code:"1",name:" 已发送"},{code:"2",name:"已作废"}],msgTargetList:[{code:null,name:"全部"},{code:"1",name:"零售户"},{code:"2",name:" 消费者"}],form:{show:!1,id:"",shopImg:"",licenseImg:"",auditStatus:""},loading:!1}),created(){this.getSaleZone(),this.list()},methods:{addNewMessage(){this.$router.push("/seller/addMessage")},editMessage(e){this.$router.push(`/seller/editMessage?id=${e}`)},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.search.saleZoneCode=this.saleZoneCode))})},getSaleZoneName(e){if(!e)return"";let t="",a=this.saleZone.find(t=>{if(t.zoneCode==e)return t});return t=a?a.zoneName:""},disapproval(e){let t={msgId:e};this.$confirm("您确定作废此条信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log(t),this.$request.post("/saasHbseller/msg/system/del",t,!1,e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.failReason="",this.list()):(console.log(e),this.$message({message:e.msg,type:"warning"}),this.dialogVisible=!1,this.failReason="",this.list())})})},inputWithSelectChange(e){this.filters.keywords=""},currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e)},reset(){this.search={page:1,pageSize:10,title:"",status:null,msgTarget:null,saleZoneCode:this.saleZoneCode},this.list()},list(e,t,a){let s=1;t&&(s=t),this.search.page=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/saasHbseller/msg/system/query",this.search,!0,e=>{"200"==e.code?(this.tableList=e.data.records||[],this.initPagination(e.data.total)):this.$message.error(e.msg)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"space"}),e._v(" "),a("div",{staticClass:"add-new-seller clearfix"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addNewMessage()}}},[e._v("新建消息")])],1),e._v(" "),a("div",{staticStyle:{height:"20px"}}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{size:"small",label:"消息名称："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:e.search.title,callback:function(t){e.$set(e.search,"title",t)},expression:"search.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"目标销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"状态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"接受人："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.search.msgTarget,callback:function(t){e.$set(e.search,"msgTarget",t)},expression:"search.msgTarget"}},e._l(e.msgTargetList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.search.page-1)*e.search.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"消息主标题",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleZoneCode",label:"目标销区",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.getSaleZoneName(t.row.saleZoneCode))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"optAccount",label:"创建人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"msgTarget",label:"接收人",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.msgTarget?a("span",[e._v("零售户")]):e._e(),e._v(" "),2==t.row.msgTarget?a("span",[e._v("消费者")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sendTime",label:"发送时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("待发送")]):e._e(),e._v(" "),1==t.row.status?a("span",[e._v("已发送")]):e._e(),e._v(" "),2==t.row.status?a("span",[e._v("已作废")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"scanCodeNum",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.editMessage(t.row.id)}}},[e._v("编辑")]):e._e(),e._v(" "),"0"==t.row.status||"1"==t.row.status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.disapproval(t.row.id)}}},[e._v("作废")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.page,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("Lgbe")},"data-v-a2b6cc74",null);t.default=i.exports},uCi9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"SellerManage",data:()=>({showSelection:!1,ids:"",batchOperations:!0,dialogVisible:!1,failReason:"",txId:"",saleZone:[],listLoading:!1,statusList:[{code:"1",name:"审核通过"},{code:"2",name:" 待审核"},{code:"3",name:"审核不通过"}],commercialList:[{code:"",name:"全部"},{code:"1",name:"食杂店"},{code:"2",name:"便利店"},{code:"3",name:"超市"},{code:"4",name:"商场"},{code:"5",name:"烟酒商店"},{code:"6",name:"娱乐服务"},{code:"7",name:"其他"}],districtList:[{code:"",name:"全部"},{code:"1",name:"城镇"},{code:"2",name:"乡村"}],isPrintList:[{code:"",name:"全部"},{code:"0",name:"无"},{code:"1",name:"有"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),filters:{saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),status:"1",authStatus:"4",commercial:"",areaType:"",keywordType:null,keyword:null,startDate:"",endDate:"",time:[],provCode:null,cityCode:null,countyCode:null,isPrint:"",sortType:1,sortValue:1},newList:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.getSaleZone(),this.getListNewList(),this.getOneCategory()},methods:{modifyAuthOrder(e,t){let a={idList:e},s="";t&&(s="批量"),this.$confirm(`您确定${s}审核通过？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/saasHbseller/audit/agree",a,!1,e=>{"200"!=e.code||e.data.failList.length?this.$message({message:e.msg||`操作失败：零售户id为 ${e.data.failList.join(",")}`,type:"warning"}):(this.$message({message:"操作成功！",type:"success"}),this.getListNewList())})})},handleSelectionChange(e){let t=e;console.log(t);let a=[];t.length>0?(this.batchOperations=!1,t.map((e,t)=>{a.push(e.id)}),this.ids=a.join(",")):(this.ids="",this.batchOperations=!0)},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.filters.saleZoneCode=this.saleZoneCode))})},getSaleZoneName(e){if(!e)return"";let t="",a=this.saleZone.find(t=>{if(t.zoneCode==e)return t});return t=a?a.zoneName:""},addNewSeller(){this.$router.push({path:"/seller/mgr/addSeller"})},getOneCategory(){this.$request.post("/saasHbseller/region/province",{},!0,e=>{this.cateLvl1List=[...e]})},selectBrand1(){this.filters.cityCode="",this.cateLvl2List=[],this.filters.countyCode="",this.cateLvl3List=[],this.getTwoCategory()},getTwoCategory(){""!=this.filters.provCode&&this.$request.post("/saasHbseller/region/city",{parentCode:this.filters.provCode},!1,e=>{this.cateLvl2List=[...e]})},selectBrand2(){this.filters.countyCode="",this.cateLvl3List=[],this.getThreeCategory()},getThreeCategory(){""!=this.filters.cityCode&&this.$request.post("/saasHbseller/region/district",{parentCode:this.filters.cityCode},!1,e=>{this.cateLvl3List=[...e]})},sortDatasChange({column:e,prop:t,order:a}){this.filters.sortValue="descending"==a?1:0,this.getListNewList(1)},getListNewList(e){let t={saleZoneCode:this.filters.saleZoneCode,areaType:this.filters.areaType,keywordType:this.filters.keywordType,keyword:this.filters.keyword,provCode:this.filters.provCode,cityCode:this.filters.cityCode,countyCode:this.filters.countyCode,startDate:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endDate:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",page:this.pageNo,pageSize:10};this.postSearch(t)},postSearch(e){this.$request.post("/saasHbseller/seller/manager/queryList",e,!0,t=>{console.log(t),this.newList=t.data.infoList.records,this.total=t.data.infoList.total,this.pageNo=t.data.infoList.current,2==e.status?this.showSelection=!0:this.showSelection=!1})},commitForm(){this.pageNo=1,this.currentPage=1,this.getListNewList()},getStatus(){this.filters.status="1",this.filters.saleZoneCode=this.saleZoneCode,this.filters.areaType="",this.filters.keywordType="",this.filters.keyword="",this.filters.time=[],this.filters.startDate="",this.filters.endDate="",this.filters.provCode=null,this.filters.cityCode=null,this.filters.countyCode=null,this.filters.status="1",this.filters.isPrint="",this.pageNo=1,this.currentPage=1,this.getListNewList()},inputWithSelectChange(e){this.filters.keywords=""},approval(e){let t={idList:e};this.$confirm("您确定通过此零售户的审核？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/saasHbseller/audit/agree",t,!1,e=>{"200"!=e.code||e.data.failList.length?this.$message({message:e.msg||`操作失败：零售户id为 ${e.data.failList.join(",")}`,type:"warning"}):(this.$message({message:"操作成功！",type:"success"}),this.getListNewList())})})},disapproval(){let e={id:this.txId,appStatus:2,auditMsg:this.failReason};this.$confirm("您确定审核不通过？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/saasHbseller/audit/unAgree",e,!1,e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.failReason="",this.getListNewList()):(console.log(e),this.$message({message:e.msg,type:"warning"}),this.dialogVisible=!1,this.failReason="",this.getListNewList())})})},disapprovalDialog(e){this.dialogVisible=!0,this.txId=e},cancelDialog(){this.dialogVisible=!1,this.failReason=""},sellerDetail(e){this.$router.push({path:"/seller/mgr/sellerDetail?sellerId="+e})},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.getListNewList()},exportSeller(){let e={status:this.filters.status,saleZoneCode:this.filters.saleZoneCode,areaType:this.filters.areaType,keywordType:this.filters.keywordType,keyword:this.filters.keyword,provCode:this.filters.provCode,cityCode:this.filters.cityCode,countyCode:this.filters.countyCode,startDate:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endDate:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",isPrint:this.filters.isPrint,sortType:1,sortValue:this.filters.sortValue,pageNo:this.pageNo,pageSize:10};4==this.filters.status?e.authStatus=this.filters.authStatus:e.status=this.filters.status;var t=new XMLHttpRequest,a=new FormData;for(var s in e)a.append(s,e[s]);return t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/lsh/seller-manager/seller/exportDatas",!0),t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),l=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,l);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(a),i.download=l,i.click(),window.URL.revokeObjectURL(i.href)}}},t.send(a)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters,"label-width":"90px"}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{size:"small",label:"业态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.commercial,callback:function(t){e.$set(e.filters,"commercial",t)},expression:"filters.commercial"}},e._l(e.commercialList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.filters.saleZoneCode,callback:function(t){e.$set(e.filters,"saleZoneCode",t)},expression:"filters.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"区域："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.areaType,callback:function(t){e.$set(e.filters,"areaType",t)},expression:"filters.areaType"}},e._l(e.districtList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"关键词："}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.inputWithSelectChange},slot:"prepend",model:{value:e.filters.keywordType,callback:function(t){e.$set(e.filters,"keywordType",t)},expression:"filters.keywordType"}},[a("el-option",{attrs:{label:"烟草证号",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"联系人姓名",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"联系人手机号",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"门店名称",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"业务员名称",value:"5"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"时间区间："}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.filters.time,callback:function(t){e.$set(e.filters,"time",t)},expression:"filters.time"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"位置：",prop:"provCode"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand1},model:{value:e.filters.provCode,callback:function(t){e.$set(e.filters,"provCode",t)},expression:"filters.provCode"}},e._l(e.cateLvl1List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cityCode"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand2},model:{value:e.filters.cityCode,callback:function(t){e.$set(e.filters,"cityCode",t)},expression:"filters.cityCode"}},e._l(e.cateLvl2List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"countyCode"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:e.filters.countyCode,callback:function(t){e.$set(e.filters,"countyCode",t)},expression:"filters.countyCode "}},e._l(e.cateLvl3List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{staticClass:"large",staticStyle:{display:"none"},attrs:{size:"small",label:"是否打印店码："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.isPrint,callback:function(t){e.$set(e.filters,"isPrint",t)},expression:"filters.isPrint"}},e._l(e.isPrintList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitForm}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:e.getStatus}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.newList},on:{"selection-change":e.handleSelectionChange}},[e.showSelection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"licenseNo",label:"烟草专卖号\t",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"门店名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactName",label:"经营人姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaType",label:"区域",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.areaType?a("span",[e._v(e._s("城镇"))]):e._e(),e._v(" "),"2"==t.row.areaType?a("span",[e._v(e._s("乡村"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"detailAddr",label:"门店地址",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.provName+t.row.cityName+t.row.countyName+t.row.detailAddr)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"联系人电话",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"salesman",label:"业务员"}}),e._v(" "),a("el-table-column",{attrs:{property:"saleZoneCode",label:"销区",align:"center",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.getSaleZoneName(t.row.saleZoneCode))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"申请时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.status?a("span",[e._v(e._s("审核通过"))]):"2"==t.row.status?a("span",[e._v(e._s("待审核"))]):"3"==t.row.status?a("span",[e._v(e._s("审核不通过"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.sellerDetail(t.row.id)}}},[e._v("查看详情")])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[e.showSelection?a("el-button",{attrs:{type:"primary",size:"small",disabled:e.batchOperations},on:{click:function(t){e.modifyAuthOrder(e.ids,!0)}}},[e._v("批量通过")]):e._e(),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"请输入不通过理由",visible:e.dialogVisible,width:"30%","before-close":e.cancelDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.failReason,callback:function(t){e.failReason=t},expression:"failReason"}}),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.disapproval}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("H60O"),a("ugZ8")},"data-v-2f5e6086",null);t.default=i.exports},uL72:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"SellerManage",data:()=>({showSelection:!1,ids:"",batchOperations:!0,dialogVisible:!1,failReason:"",txId:"",saleZone:[],listLoading:!1,statusList:[{code:"1",name:"审核通过"},{code:"2",name:" 待审核"},{code:"3",name:"审核不通过"}],commercialList:[{code:"",name:"全部"},{code:"1",name:"食杂店"},{code:"2",name:"便利店"},{code:"3",name:"超市"},{code:"4",name:"商场"},{code:"5",name:"烟酒商店"},{code:"6",name:"娱乐服务"},{code:"7",name:"其他"}],districtList:[{code:"",name:"全部"},{code:"1",name:"城镇"},{code:"2",name:"乡村"}],isPrintList:[{code:"",name:"全部"},{code:"0",name:"无"},{code:"1",name:"有"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),filters:{saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode"),status:"2",authStatus:"4",commercial:"",areaType:"",keywordType:"",keyword:"",startDate:"",endDate:"",time:[],provCode:"",cityCode:"",countyCode:"",isPrint:"",sortType:1,sortValue:1},newList:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.getSaleZone(),this.getListNewList(),this.getOneCategory()},methods:{modifyAuthOrder(e,t){let a={idList:e},s="";t&&(s="批量"),this.$confirm(`您确定${s}审核通过？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/saasHbseller/audit/agree",a,!1,e=>{"200"!=e.code||e.data.failList.length?this.$message({message:e.msg||`操作失败：零售户id为 ${e.data.failList.join(",")}`,type:"warning"}):(this.$message({message:"操作成功！",type:"success"}),this.getListNewList())})})},handleSelectionChange(e){let t=e;console.log(t);let a=[];t.length>0?(this.batchOperations=!1,t.map((e,t)=>{a.push(e.id)}),this.ids=a.join(",")):(this.ids="",this.batchOperations=!0)},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[],1==this.isAllSaleZone||(this.filters.saleZoneCode=this.saleZoneCode))})},getSaleZoneName(e){if(!e)return"";let t="",a=this.saleZone.find(t=>{if(t.zoneCode==e)return t});return t=a?a.zoneName:""},addNewSeller(){this.$router.push({path:"/seller/mgr/addSeller"})},getOneCategory(){this.$request.post("/saasHbseller/region/province",{},!0,e=>{this.cateLvl1List=[...e]})},selectBrand1(){this.filters.cityCode="",this.cateLvl2List=[],this.filters.countyCode="",this.cateLvl3List=[],this.getTwoCategory()},getTwoCategory(){""!=this.filters.provCode&&this.$request.post("/saasHbseller/region/city",{parentCode:this.filters.provCode},!1,e=>{this.cateLvl2List=[...e]})},selectBrand2(){this.filters.countyCode="",this.cateLvl3List=[],this.getThreeCategory()},getThreeCategory(){""!=this.filters.cityCode&&this.$request.post("/saasHbseller/region/district",{parentCode:this.filters.cityCode},!1,e=>{this.cateLvl3List=[...e]})},sortDatasChange({column:e,prop:t,order:a}){this.filters.sortValue="descending"==a?1:0,this.getListNewList(1)},getListNewList(e){let t={status:this.filters.status,saleZoneCode:this.filters.saleZoneCode,areaType:this.filters.areaType,keywordType:this.filters.keywordType,keyword:this.filters.keyword,provCode:this.filters.provCode,cityCode:this.filters.cityCode,countyCode:this.filters.countyCode,startDate:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endDate:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};console.log(t),this.postSearch(t)},postSearch(e){this.$request.post("/saasHbseller/audit/query",e,!0,t=>{console.log(t.data),this.newList=t.data.records,this.total=t.data.total,this.pageNo=t.data.current,2==e.status?this.showSelection=!0:this.showSelection=!1})},commitForm(){this.pageNo=1,this.currentPage=1,this.getListNewList()},getStatus(){this.filters.status="1",this.filters.saleZoneCode=this.saleZoneCode,this.filters.areaType="",this.filters.keywordType="",this.filters.keyword="",this.filters.time=[],this.filters.startDate="",this.filters.endDate="",this.filters.provCode="",this.filters.cityCode="",this.filters.countyCode="",this.filters.status="1",this.filters.isPrint="",this.pageNo=1,this.currentPage=1,this.getListNewList()},inputWithSelectChange(e){this.filters.keywords=""},approval(e){let t={idList:e};this.$confirm("您确定通过此零售户的审核？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/saasHbseller/audit/agree",t,!1,e=>{"200"!=e.code||e.data.failList.length?this.$message({message:e.msg||`操作失败：零售户id为 ${e.data.failList.join(",")}`,type:"warning"}):(this.$message({message:"操作成功！",type:"success"}),this.getListNewList())})})},disapproval(){let e={id:this.txId,appStatus:2,auditMsg:this.failReason};this.$confirm("您确定审核不通过？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/saasHbseller/audit/unAgree",e,!1,e=>{200==e.code?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.failReason="",this.getListNewList()):(console.log(e),this.$message({message:e.msg,type:"warning"}),this.dialogVisible=!1,this.failReason="",this.getListNewList())})})},disapprovalDialog(e){this.dialogVisible=!0,this.txId=e},cancelDialog(){this.dialogVisible=!1,this.failReason=""},sellerDetail(e){this.$router.push({path:"/seller/review/reviewDetail?sellerId="+e})},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.getListNewList()},exportSeller(){let e={status:this.filters.status,saleZoneCode:this.filters.saleZoneCode,areaType:this.filters.areaType,keywordType:this.filters.keywordType,keyword:this.filters.keyword,provCode:this.filters.provCode,cityCode:this.filters.cityCode,countyCode:this.filters.countyCode,startDate:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endDate:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",isPrint:this.filters.isPrint,sortType:1,sortValue:this.filters.sortValue,pageNo:this.pageNo,pageSize:10};4==this.filters.status?e.authStatus=this.filters.authStatus:e.status=this.filters.status;var t=new XMLHttpRequest,a=new FormData;for(var s in e)a.append(s,e[s]);return t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/lsh/seller-manager/seller/exportDatas",!0),t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),l=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,l);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(a),i.download=l,i.click(),window.URL.revokeObjectURL(i.href)}}},t.send(a)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters,"label-width":"82px","label-position":"left"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"margin-right":"0"},attrs:{size:"small",label:"状态：","label-width":"68px"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"margin-right":"0"},attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.filters.saleZoneCode,callback:function(t){e.$set(e.filters,"saleZoneCode",t)},expression:"filters.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"margin-right":"0"},attrs:{size:"small",label:"区域："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.areaType,callback:function(t){e.$set(e.filters,"areaType",t)},expression:"filters.areaType"}},e._l(e.districtList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"margin-right":"0"},attrs:{size:"small",label:"关键词：","label-width":"68px"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"260px"},attrs:{placeholder:"请输入内容"},model:{value:e.filters.keyword,callback:function(t){e.$set(e.filters,"keyword",t)},expression:"filters.keyword"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.inputWithSelectChange},slot:"prepend",model:{value:e.filters.keywordType,callback:function(t){e.$set(e.filters,"keywordType",t)},expression:"filters.keywordType"}},[a("el-option",{attrs:{label:"烟草证号",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"联系人姓名",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"联系人手机号",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"门店名称",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"业务员名称",value:"5"}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{"margin-right":"0"},attrs:{size:"small",label:"时间区间："}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.filters.time,callback:function(t){e.$set(e.filters,"time",t)},expression:"filters.time"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"位置：",prop:"provCode","label-width":"68px"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand1},model:{value:e.filters.provCode,callback:function(t){e.$set(e.filters,"provCode",t)},expression:"filters.provCode"}},e._l(e.cateLvl1List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cityCode"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand2},model:{value:e.filters.cityCode,callback:function(t){e.$set(e.filters,"cityCode",t)},expression:"filters.cityCode"}},e._l(e.cateLvl2List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"countyCode"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:e.filters.countyCode,callback:function(t){e.$set(e.filters,"countyCode",t)},expression:"filters.countyCode "}},e._l(e.cateLvl3List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitForm}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:e.getStatus}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.newList},on:{"selection-change":e.handleSelectionChange}},[e.showSelection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"licenseNo",label:"烟草专卖号\t",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"门店名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactName",label:"经营人姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"areaType",label:"区域",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.areaType?a("span",[e._v(e._s("城镇"))]):e._e(),e._v(" "),"2"==t.row.areaType?a("span",[e._v(e._s("乡村"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"detailAddr",label:"门店地址",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.provName+t.row.cityName+t.row.countyName+t.row.detailAddr)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"联系人电话",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"salesman",label:"业务员"}}),e._v(" "),a("el-table-column",{attrs:{property:"saleZoneCode",label:"销区",align:"center",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.getSaleZoneName(t.row.saleZoneCode))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"申请时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.status?a("span",[e._v(e._s("审核通过"))]):"2"==t.row.status?a("span",[e._v(e._s("待审核"))]):"3"==t.row.status?a("span",[e._v(e._s("审核不通过"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.sellerDetail(t.row.id)}}},[e._v("查看详情")]),e._v(" "),"2"==t.row.status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.approval(t.row.id)}}},[e._v("审核通过")]):e._e(),e._v(" "),"2"==t.row.status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.disapprovalDialog(t.row.id)}}},[e._v("审核不通过")]):e._e()]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[e.showSelection?a("el-button",{attrs:{type:"primary",size:"small",disabled:e.batchOperations},on:{click:function(t){e.modifyAuthOrder(e.ids,!0)}}},[e._v("批量通过")]):e._e(),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"请输入不通过理由",visible:e.dialogVisible,width:"30%","before-close":e.cancelDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.failReason,callback:function(t){e.failReason=t},expression:"failReason"}}),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.disapproval}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("p4s7"),a("/Gwn")},"data-v-28d2f8f7",null);t.default=i.exports},uMyX:function(e,t){},ugZ8:function(e,t){},vxW7:function(e,t){},xLGc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"",data:()=>({headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},commercialList:[{code:"",name:"全部"},{code:"1",name:"食杂店"},{code:"2",name:"便利店"},{code:"3",name:"超市"},{code:"4",name:"商场"},{code:"5",name:"烟酒商店"},{code:"6",name:"娱乐服务"},{code:"7",name:"其他"}],districtList:[{code:"",name:"全部"},{code:"1",name:"城镇"},{code:"2",name:"乡村"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],ruleForm:{headImg:"",shopName:"",ownerName:"",phoneNo:"",addrProvince:"",addrCity:"",addrArea:"",addrDetail:"",licenceNo:"",licenceImg:"",district:"",commercial:"",salesManNames:"",contactName:"",contactPhone:""},rules:{headImg:[{required:!0,message:"请上传门店照片",trigger:"change"}],shopName:[{required:!0,message:"请输入门店名称",trigger:"blur"}],ownerName:[{required:!0,message:"请输入经营人姓名",trigger:"blur"}],phoneNo:[{required:!0,message:"请输入经营人电话",trigger:"blur"}],addrProvince:[{required:!0,message:"请选择省份",trigger:"change"}],addrCity:[{required:!0,message:"请选择城市",trigger:"change"}],addrArea:[{required:!0,message:"请选择地区",trigger:"change"}],addrDetail:[{required:!0,message:"请输入门店地址",trigger:"blur"}],licenceNo:[{required:!0,message:"请输入烟草专卖证号",trigger:"blur"}],licenceImg:[{required:!0,message:"请上传烟草专卖证号照片",trigger:"change"}],district:[{required:!0,message:"请选择区域",trigger:"change"}],commercial:[{required:!0,message:"请选择业态",trigger:"change"}],salesManNames:[{required:!0,message:"请输入业务员姓名",trigger:"change"}],contactName:[{required:!0,message:"请输入联系人姓名",trigger:"change"}],contactPhone:[{required:!0,message:"请输入联系人电话",trigger:"change"}]}}),created(){this.getOneCategory()},methods:{getOneCategory(){this.$request.post("/lsh/seller-manager/region/province",{},!0,e=>{this.cateLvl1List=[...e]})},selectBrand1(){this.ruleForm.addrCity="",this.cateLvl2List=[],this.ruleForm.addrArea="",this.cateLvl3List=[],this.getTwoCategory()},getTwoCategory(){""!=this.ruleForm.addrProvince&&this.$request.post("/lsh/seller-manager/region/newCity",{parentCode:this.ruleForm.addrProvince},!0,e=>{this.cateLvl2List=[...e]})},selectBrand2(){this.ruleForm.addrArea="",this.cateLvl3List=[],this.getThreeCategory()},getThreeCategory(){""!=this.ruleForm.addrCity&&this.$request.post("/lsh/seller-manager/region/newDistrict",{parentCode:this.ruleForm.addrCity},!0,e=>{this.cateLvl3List=[...e]})},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{let e={headImg:this.ruleForm.headImg,shopName:this.ruleForm.shopName,ownerName:this.ruleForm.ownerName,phoneNo:this.ruleForm.phoneNo,addrProvince:this.ruleForm.addrProvince,addrCity:this.ruleForm.addrCity,addrArea:this.ruleForm.addrArea,addrDetail:this.ruleForm.addrDetail,licenceNo:this.ruleForm.licenceNo,licenceImg:this.ruleForm.licenceImg,district:this.ruleForm.district,commercial:this.ruleForm.commercial,salesManNames:this.ruleForm.salesManNames,contactName:this.ruleForm.contactName,contactPhone:this.ruleForm.contactPhone};this.postParams(e)}})},postParams(e){this.$request.post("/lsh/seller-manager/seller/saveOrUpdateSeller",e,!1,e=>{e.ok?(this.$message({message:"保存成功！",type:"success"}),this.returnMgr()):this.$message({message:e.message,type:"warning"})},e=>{})},handleAvatarSuccess(e,t){var a=e.data||{},s=a&&a.accessUrl;this.ruleForm.headImg=s},handleAvatarSuccessUrl(e,t){var a=e.data||{},s=a&&a.accessUrl;this.ruleForm.licenceImg=s},returnMgr(){this.$router.push({path:"/seller/mgr"})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"add-seller-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,inline:!0,rules:e.rules,"label-width":"150px"}},[a("div",{staticClass:"add-seller-form-container"},[a("el-form-item",{attrs:{label:"门店照片：",prop:"headImg",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.ruleForm.headImg,callback:function(t){e.$set(e.ruleForm,"headImg",t)},expression:"ruleForm.headImg"}}),e._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/wiseqr/attach/commonAliUpload","list-type":"picture-card",headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.ruleForm.headImg?a("img",{staticClass:"avatar",attrs:{width:"200",height:"125",src:e.ruleForm.headImg}}):e._e()]),e._v(" "),a("div",{staticClass:"pic-tips"},[e._v("上传图片的最佳尺寸：750像素*468像素；格式png、jpg；大小不超过2M")])],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"门店名称：",prop:"shopName",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.shopName,callback:function(t){e.$set(e.ruleForm,"shopName",t)},expression:"ruleForm.shopName"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"经营人姓名：",prop:"ownerName",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.ownerName,callback:function(t){e.$set(e.ruleForm,"ownerName",t)},expression:"ruleForm.ownerName"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"经营人电话：",prop:"phoneNo",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.phoneNo,callback:function(t){e.$set(e.ruleForm,"phoneNo",t)},expression:"ruleForm.phoneNo"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"位置：",prop:"addrProvince"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand1},model:{value:e.ruleForm.addrProvince,callback:function(t){e.$set(e.ruleForm,"addrProvince",t)},expression:"ruleForm.addrProvince"}},e._l(e.cateLvl1List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrCity"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:e.selectBrand2},model:{value:e.ruleForm.addrCity,callback:function(t){e.$set(e.ruleForm,"addrCity",t)},expression:"ruleForm.addrCity"}},e._l(e.cateLvl2List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrArea"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.addrArea,callback:function(t){e.$set(e.ruleForm,"addrArea",t)},expression:"ruleForm.addrArea "}},e._l(e.cateLvl3List,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"门店地址：",prop:"addrDetail",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.addrDetail,callback:function(t){e.$set(e.ruleForm,"addrDetail",t)},expression:"ruleForm.addrDetail"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"烟草专卖证号：",prop:"licenceNo",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:e.ruleForm.licenceNo,callback:function(t){e.$set(e.ruleForm,"licenceNo",t)},expression:"ruleForm.licenceNo"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"烟草专卖证号照片：",prop:"licenceImg",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.ruleForm.licenceImg,callback:function(t){e.$set(e.ruleForm,"licenceImg",t)},expression:"ruleForm.licenceImg"}}),e._v(" "),a("el-upload",{staticClass:"product-url",attrs:{action:"/api/wiseqr/attach/commonAliUpload","list-type":"picture-card",headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccessUrl}},[e.ruleForm.licenceImg?a("img",{staticClass:"avatar",attrs:{width:"200",height:"200",src:e.ruleForm.licenceImg}}):e._e()]),e._v(" "),a("div",{staticClass:"pic-tips"},[e._v("此图用于商品详情展示；尺寸：宽750像素；格式png、jpg；大小不超过2M")])],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{size:"small",prop:"district",label:"区域"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.district,callback:function(t){e.$set(e.ruleForm,"district",t)},expression:"ruleForm.district"}},e._l(e.districtList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{size:"small",prop:"commercial",label:"业态"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.commercial,callback:function(t){e.$set(e.ruleForm,"commercial",t)},expression:"ruleForm.commercial"}},e._l(e.commercialList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"业务员姓名：",prop:"salesManNames",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.salesManNames,callback:function(t){e.$set(e.ruleForm,"salesManNames",t)},expression:"ruleForm.salesManNames"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"联系人姓名：",prop:"contactName",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{attrs:{label:"联系人电话：",prop:"contactPhone",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:e.ruleForm.contactPhone,callback:function(t){e.$set(e.ruleForm,"contactPhone",t)},expression:"ruleForm.contactPhone"}})],1),e._v(" "),a("div"),e._v(" "),a("div",{staticClass:"add-seller-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.returnMgr}},[e._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("OdvE"),a("VdSK")},"data-v-2cd75682",null);t.default=i.exports},xWYt:function(e,t){},"y/FA":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"EditLevel",props:["id"],data:()=>({uploadURL:"/api/wiseqr/attach/commonNewUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},rules:{levelName:[{required:!0,message:"请输入等级名称",trigger:"blur"}],levelScoreMin:[{required:!0,message:"请输入最小等级值",trigger:"blur"}],levelScoreMax:[{required:!0,message:"请输入最大等级值",trigger:"blur"}],levelIcon:[{required:!0,message:"请上传卡片图片",trigger:"change"}]},ruleForm:{id:"",levelName:"",levelScoreMin:"",levelScoreMax:"",levelIcon:"",rdmCode:""}}),created(){this.getInfo()},methods:{getInfo(){this.$request.post("/saasHbseller/shopLevel/detail",{id:this.id},!1,e=>{if("200"==e.code)return this.ruleForm.id=e.data.data.id,this.ruleForm.levelName=e.data.data.levelName,this.ruleForm.levelScoreMin=e.data.data.levelScoreMin,this.ruleForm.levelScoreMax=e.data.data.levelScoreMax,this.ruleForm.levelIcon=e.data.data.levelIconUrl,void(this.ruleForm.rdmCode=e.data.data.rdmCode);this.$message.error(e.msg)})},uploadImgUrlSuccess(e){if("200000"===e.ret)return console.log(e),this.ruleForm.rdmCode=e.data.rdmCode,void(this.ruleForm.levelIcon=e.data.filePath);this.$message.error(e.message)},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{if(this.ruleForm.levelScoreMin-0>=this.ruleForm.levelScoreMax-0)return void this.$message.error("最小等级值不能超过最大等级值！");let{levelName:e,levelScoreMin:t,levelScoreMax:a,rdmCode:s}=this.ruleForm,l={id:this.id,levelName:e,levelScoreMin:t,levelScoreMax:a,rdmCode:s};this.$request.post("/saasHbseller/shopLevel/edit",l,!1,e=>{if("200"==e.code)return this.$message.success("保存成功！"),void this.$router.back();this.$message.error(e.msg)})}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{staticStyle:{width:"350px"},attrs:{label:"活动名称",prop:"levelName"}},[a("el-input",{model:{value:e.ruleForm.levelName,callback:function(t){e.$set(e.ruleForm,"levelName",t)},expression:"ruleForm.levelName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"350px"},attrs:{label:"最小等级值：",prop:"levelScoreMin"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.levelScoreMin,callback:function(t){e.$set(e.ruleForm,"levelScoreMin",t)},expression:"ruleForm.levelScoreMin"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"350px"},attrs:{label:"最大等级值：",prop:"levelScoreMax"}},[a("el-input",{attrs:{type:"number"},model:{value:e.ruleForm.levelScoreMax,callback:function(t){e.$set(e.ruleForm,"levelScoreMax",t)},expression:"ruleForm.levelScoreMax"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"等级图标：",prop:"levelIcon"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.ruleForm.levelIcon,callback:function(t){e.$set(e.ruleForm,"levelIcon",t)},expression:"ruleForm.levelIcon"}}),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadURL,headers:e.headerObj,data:{channel:"hebei-sellerInfo "},"on-success":e.uploadImgUrlSuccess,"show-file-list":!1}},[e.ruleForm.levelIcon?a("img",{staticClass:"avatar",attrs:{src:e.ruleForm.levelIcon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),a("div",{staticClass:"pic-tips"},[e._v("图标格式要求：png、jpg，尺寸：100x100px")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){e.$router.back()}}},[e._v("返回")])],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,l,!1,function(e){a("/jIQ")},null,null);t.default=i.exports},yBrm:function(e,t){},yzmQ:function(e,t){}});
//# sourceMappingURL=3.2239eeb29fd014f979a7.js.map