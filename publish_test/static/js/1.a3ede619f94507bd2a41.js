webpackJsonp([1],{"+WVz":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["orderId"],name:"ObjectPageDetail",data:()=>({formDetail:{orderCode:"",actCode:"",winnerMobile:"",actName:"",nickname:"",prizeName:"",snName:"",ctime:"",getaddress:"",receiver:"",mobile:"",province:"",city:"",district:"",detail:"",logistics:"",stepTime1:"",stepTime2:"",status:2,stepStatusName1:"",stepStatusName2:""}}),created(){this.getObjectPageDetail(this.orderId)},methods:{submitFormSave(){let t={province:this.formDetail.province,city:this.formDetail.city,district:this.formDetail.district,detail:this.formDetail.detail,mobile:this.formDetail.mobile,receiver:this.formDetail.receiver,orderCode:this.formDetail.orderCode};this.$request.post("/api/saotx/order/save",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnObjectPage()):this.$message({message:t.message,type:"warning"})},t=>{})},returnObjectPage(){this.$router.push({path:"/Orders/ACT/object"})},getObjectPageDetail(t){this.$request.post("/api/saotx/order/detail",{orderCode:t},!0,t=>{"200000"==t.ret&&(console.log(t.data),this.formDetail.orderCode=t.data.orderCode,this.formDetail.actCode=t.data.actCode,this.formDetail.winnerMobile=t.data.winnerMobile,this.formDetail.actName=t.data.actName,this.formDetail.nickname=t.data.nickname,this.formDetail.prizeName=t.data.prizeName,this.formDetail.snName=t.data.snName,this.formDetail.ctime=this.formatDate(t.data.ctime),this.formDetail.getaddress=t.data.awdDistrictName,this.formDetail.receiver=t.data.receiver,this.formDetail.mobile=t.data.mobile,this.formDetail.province=t.data.province,this.formDetail.city=t.data.city,this.formDetail.district=t.data.district,this.formDetail.detail=t.data.detail,this.formDetail.logistics=t.data.logistics,this.formDetail.status=t.data.status,t.data.logs.length>1?(this.formDetail.stepTime1=t.data.logs[0].stepTime,this.formDetail.stepStatusName1=t.data.logs[0].stepStatusName,this.formDetail.stepTime2=t.data.logs[1].stepTime,this.formDetail.stepStatusName2=t.data.logs[1].stepStatusName):(this.formDetail.stepTime1=t.data.logs[0].stepTime,this.formDetail.stepStatusName1=t.data.logs[0].stepStatusName))})},formatDate(t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate(),r=e.getHours(),l=e.getMinutes(),o=e.getSeconds(),n=Array.apply(null,Array(10)).map(function(t,e){return"0"+e});return a+"-"+(n[s]||s)+"-"+(n[i]||i)+" "+(n[r]||r)+":"+(n[l]||l)+":"+(n[o]||o)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("实物领奖明细/领奖明细查询")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("div",[a("h1",[t._v("订单信息")])]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formDetail}},[a("el-row",[a("el-form-item",{attrs:{size:"small",label:"订单号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderCode,callback:function(e){t.$set(t.formDetail,"orderCode",e)},expression:"formDetail.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"活动ID:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.actCode,callback:function(e){t.$set(t.formDetail,"actCode",e)},expression:"formDetail.actCode"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"活动名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.actName,callback:function(e){t.$set(t.formDetail,"actName",e)},expression:"formDetail.actName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"中奖人:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.nickname,callback:function(e){t.$set(t.formDetail,"nickname",e)},expression:"formDetail.nickname"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"中奖人手机号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.winnerMobile,callback:function(e){t.$set(t.formDetail,"winnerMobile",e)},expression:"formDetail.winnerMobile"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"微信号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.nickname,callback:function(e){t.$set(t.formDetail,"nickname",e)},expression:"formDetail.nickname"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"奖项名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.prizeName,callback:function(e){t.$set(t.formDetail,"prizeName",e)},expression:"formDetail.prizeName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"关联规格:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.snName,callback:function(e){t.$set(t.formDetail,"snName",e)},expression:"formDetail.snName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"获奖时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.ctime,callback:function(e){t.$set(t.formDetail,"ctime",e)},expression:"formDetail.ctime"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"获奖地区:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.getaddress,callback:function(e){t.$set(t.formDetail,"getaddress",e)},expression:"formDetail.getaddress"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("收货人信息")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"收货人:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.receiver,callback:function(e){t.$set(t.formDetail,"receiver",e)},expression:"formDetail.receiver"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"手机号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.mobile,callback:function(e){t.$set(t.formDetail,"mobile",e)},expression:"formDetail.mobile"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"收货地址:省:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.province,callback:function(e){t.$set(t.formDetail,"province",e)},expression:"formDetail.province"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"市:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.city,callback:function(e){t.$set(t.formDetail,"city",e)},expression:"formDetail.city"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"区:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.district,callback:function(e){t.$set(t.formDetail,"district",e)},expression:"formDetail.district"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"详细地址:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.detail,callback:function(e){t.$set(t.formDetail,"detail",e)},expression:"formDetail.detail"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("订单跟踪")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.stepTime1,callback:function(e){t.$set(t.formDetail,"stepTime1",e)},expression:"formDetail.stepTime1"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.stepStatusName1,callback:function(e){t.$set(t.formDetail,"stepStatusName1",e)},expression:"formDetail.stepStatusName1"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"发货时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.stepTime2,callback:function(e){t.$set(t.formDetail,"stepTime2",e)},expression:"formDetail.stepTime2"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.stepStatusName2,callback:function(e){t.$set(t.formDetail,"stepStatusName2",e)},expression:"formDetail.stepStatusName2"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"物流号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.logistics,callback:function(e){t.$set(t.formDetail,"logistics",e)},expression:"formDetail.logistics"}})],1)],1),t._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",disabled:2!=t.formDetail.status},on:{click:t.submitFormSave}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.returnObjectPage}},[t._v("返回列表")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("/iq6")},"data-v-000ca738",null);e.default=r.exports},"/iq6":function(t,e){},"34yX":function(t,e){},"3Oyg":function(t,e){},"4wYT":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","actCode","form","quesId"],data:()=>({stepActive:1,keywords:"",tableData:[],loading:!1,max:10,total:10,titleName:"",detailData:{quesTitle:"",actAnsw:[{answName:"",answFlag:!1},{answName:"",answFlag:!1}],actCode:"",id:"",quesId:"",quesType:1},addFlag:!1}),watch:{detailData:{handler(t){t.actAnsw.length>3?this.addFlag=!1:this.addFlag=!0},deep:!0}},created(){this.id?this.titleName="编辑题目":this.titleName="新增题目",this.getDetail()},methods:{add(t){this.detailData.actAnsw.splice(t+1,0,{answFlag:!1,answName:""})},remove(t){this.detailData.actAnsw.splice(t,1)},getDetail(){this.quesId?this.$request.post("/api/saotx/actquest/detail",{actQuest:{id:parseInt(this.quesId)}},!0,t=>{if("200000"==t.ret)return this.detailData=t.data.bean,void this.detailData.actAnsw.forEach(t=>{1==t.answFlag?t.answFlag=!0:t.answFlag=!1});this.$message.error(t.messgae)}):this.detailData.actCode=this.actCode},back(){this.$router.push("/market/actTpl/quesActSetConf?id="+this.id+"&actCode="+this.actCode+"&form="+this.form)},nextStep(){if(!this.detailData.quesTitle)return this.$message.error("请填写题目内容!");var t=0,e=0;return this.detailData.actAnsw.forEach(a=>{a.answName?a.answFlag&&(t=1):e=1}),t?e?this.$message.error("请填写完整题目答案!"):this.detailData.actAnsw.length<2?this.$message.error("请至少填写两个答案!"):(this.detailData.actAnsw.forEach(t=>{1==t.answFlag?t.answFlag=1:t.answFlag=0}),void this.$request.post("/api/saotx/actquest/somquet",{actQuest:{id:this.detailData.id,quesId:this.detailData.quesId,actCode:this.detailData.actCode,quesTitle:this.detailData.quesTitle,quesType:this.detailData.quesType},actAnsw:this.detailData.actAnsw},!0,t=>{if(console.log(t),"200000"===t.ret)return this.$message.success("保存成功!"),this.$router.push("/market/actTpl/quesActSetConf?id="+this.id+"&actCode="+this.actCode+"&form="+this.form);this.$message.error(t.message)})):this.$message.error("请至少选择一个正确答案!")}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ques-edit-root"},[a("el-card",[a("el-steps",{staticClass:"step-style",attrs:{active:t.stepActive,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基础设置"}}),t._v(" "),a("el-step",{attrs:{title:"题目设置"}}),t._v(" "),a("el-step",{attrs:{title:"投放设置"}})],1),t._v(" "),a("div",{staticClass:"title"},[t._v(t._s(t.titleName))]),t._v(" "),a("el-form",{staticClass:"ques-part",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"题目名称"}},[a("el-input",{staticClass:"ques-input",attrs:{type:"textarea",maxlength:"100",resize:"false",placeholder:"请输入答案（最多输入100个字）"},model:{value:t.detailData.quesTitle,callback:function(e){t.$set(t.detailData,"quesTitle",e)},expression:"detailData.quesTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"题目答案"}},[a("span",[t._v("(限最多四个)")])]),t._v(" "),t._l(t.detailData.actAnsw,function(e,s){return a("el-form-item",{key:s,attrs:{label:""}},[a("el-checkbox",{staticClass:"answer-checkbox",model:{value:e.answFlag,callback:function(a){t.$set(e,"answFlag",a)},expression:"item.answFlag"}}),t._v(" "),a("el-input",{staticClass:"answer",attrs:{size:"small",placeholder:"请输入答案（最多输入15个字）",maxlength:"15"},model:{value:e.answName,callback:function(a){t.$set(e,"answName",a)},expression:"item.answName"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.addFlag,expression:"addFlag"}],staticClass:"add",on:{click:function(e){t.add(s)}}},[t._v("+")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:s>1,expression:"key>1"}],staticClass:"remove",on:{click:function(e){t.remove(s)}}},[t._v("-")])],1)}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.back}},[t._v("返回题目列表")])],1)],2)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("eheO")},"data-v-da94214c",null);e.default=r.exports},"5dgq":function(t,e){},"6Jfi":function(t,e){},"808d":function(t,e){},"8G00":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data(){return{defaultConf:{title:null,description:"",ratio:.4,img:this.getAllImage()},activeName:"home",addActParams:{conf:"",form:"act-105",id:"",name:"",note:""},addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}},computed:{},created(){this.getActDetail()},methods:{getImage(t,e){return"http://qoss.qrmkt.cn/new_platform/pc_front/"+t+"."+(e=e||this.suffix)},getStyle(t,e,a,s){var i=t.toString().indexOf("%")>-1,r=e.toString().indexOf("%")>-1;return{style:{"max-width":i?t:Math.floor(.4*t)+"px","max-height":r?e:Math.floor(.4*e)+"px",transform:"translate("+Math.floor(.4*a)+"px,"+Math.floor(.4*s)+"px)"},"c-style":{"max-width":i?t:Math.floor(.5*t)+"px","max-height":r?e:Math.floor(.5*e)+"px",transform:"translate("+Math.floor(.5*a)+"px,"+Math.floor(.5*s)+"px)"}}},getAllImage(){var t={};return t.bg={url:this.getImage("round-bg","png"),width:"100%",height:"100%",left:0,top:0,style:this.getStyle("100%","100%",0,0)},t.title={url:this.getImage("round-title","png"),width:734,height:276,left:13,top:137,style:this.getStyle(734,276,13,137).style,"c-style":this.getStyle(734,276,13,137)["c-style"]},t.tips={url:this.getImage("round-tips","png"),width:86,height:97,left:655,top:8,style:this.getStyle(86,97,655,8).style,"c-style":this.getStyle(98,103,638,38)["c-style"]},t.btm={url:this.getImage("round-btm","png"),width:686,height:676,left:31,top:384,style:this.getStyle(686,676,31,384).style,"c-style":this.getStyle(686,676,31,384)["c-style"]},t.mid={url:this.getImage("round-mid","png"),width:496,height:496,left:109,top:109,style:this.getStyle(496,496,109,109).style,"c-style":this.getStyle(496,496,109,109)["c-style"]},t.btn={url:this.getImage("round-btn","png"),width:209,height:240,left:300,top:272,style:this.getStyle(209,240,300,272).style,"c-style":this.getStyle(209,240,300,272)["c-style"]},t.award={url:"http://qoss.qrmkt.cn/new_platform/pc_front/djlq_btn.png"},t.noAward={url:"http://qoss.qrmkt.cn/new_platform/pc_front/cry75@2x.png"},t.zxNoAwardBtn={url:"http://qoss.qrmkt.cn/new_platform/know-btn.png"},console.log(t),t},getActDetail(){this.id?this.$request.post("/api/saotx/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/saotx/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.defaultConf.img.bg.url=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.title.url=t.data.accessUrl;this.$message.error(t.message)},upTipsImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.tips.url=t.data.accessUrl;this.$message.error(t.message)},upBtmImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.btm.url=t.data.accessUrl;this.$message.error(t.message)},upMidImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.mid.url=t.data.accessUrl;this.$message.error(t.message)},upBtnImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.btn.url=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upGameImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.kists[this.gameIndex].url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.award.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImg(t){if("200000"===t.ret)return this.defaultConf.img.noAward.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.zxNoAwardBtn.url=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.defaultConf.title=this.addActParams.name,this.defaultConf.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.defaultConf),this.edit?this.$request.post("/api/saotx/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/saotx/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"kits"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"btm"},[a("img",{attrs:{src:t.defaultConf.img.btm.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),a("div",{staticClass:"mid"},[a("img",{attrs:{src:t.defaultConf.img.mid.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=5}}})]),t._v(" "),a("div",{staticClass:"btn"},[a("img",{attrs:{src:t.defaultConf.img.btn.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=6}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("活动锦囊：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipsImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("转盘底图：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.btm.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBtmImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("转盘旋转图：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.mid.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upMidImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("抽奖按钮：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.btn.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBtnImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 734*276px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 120*120px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 686*676px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 469*469，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 210*240px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:"http://qoss.qrmkt.cn/new_platform/awarded.png",alt:""}}),t._v(" "),a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.award.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.award.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 344*84px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.defaultConf.img.noAward.url,alt:""}}),t._v(" "),a("h3",[t._v("很遗憾，未中奖")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖图片：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.noAward.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 620 x 345*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖按钮：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 290 × 74px格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("fDLt")},"data-v-ad42313c",null);e.default=r.exports},"8Y+z":function(t,e){},"8jgc":function(t,e){},"9/1V":function(t,e){},Byf1:function(t,e){},CAHD:function(t,e){},Ftn3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},data:()=>({listData:[],orderStatusData:[],allBrandsData:[],allSpecisData:[],allareaData:[],selectAllBrands:"",selectSpeciSns:"",selectAllarea:"",id:"1",form:{brandArr:[],snArr:[],cityArr:[],hdCode:"",orderCode:"",etime:"",stime:"",status:"",metraType:1,winnerMobile:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),name:"Object",created(){this.init()},watch:{selectAllBrands(t,e){t&&t!=e&&(this.form.brandArr=[],this.form.brandArr[0]=t,this.id="",this.selectSpeciSns="",this.form.snArr=[],this.allSpecisList(this.form.brandArr[0]))},selectSpeciSns(t,e){t&&t!=e&&(this.form.snArr=[],this.form.snArr[0]=t)},selectAllarea(t,e){t&&t!=e&&(this.form.cityArr=[],this.form.cityArr[0]=t)}},methods:{currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},init(){this.orderStatusList(),this.allBrandsList(),this.allareaList(),this.getlistData()},orderStatusList(){this.$request.post("/api/saotx/order/statusSelect",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.orderStatusData=t.data)})},allBrandsList(){this.$request.post("/api/saotx/prod/listBrand",{service:"browser"},!0,t=>{"200000"===t.ret&&(this.allBrandsData=t.data.list)})},allSpecisList(t){var e=[];e.push(t),this.$request.post("/api/saotx/prod/listTbc",{brandCodeArr:e},!0,t=>{"200000"===t.ret&&(this.allSpecisData=[],this.allSpecisData=t.data.list)})},allareaList(){let t=this;t.$request.post("/api/saotx/dim/regionByPCode",{brandListArrObj:{parentCode:"",withRegion:!0}},!0,e=>{if("200000"===e.ret){var a=e.data;0!=a.length&&a.forEach(function(e,a){var s={label:e.name,value:e.code,children:[]};t.$request.post("/api/saotx/dim/regionByPCode",{parentCode:e.code},!0,e=>{var a=e.data;null!=a&&0!=a.length&&a.forEach(function(t,e){s.children.push({label:t.name,value:t.code})}),t.allareaData.push(s)})})}})},getlistData(){this.$request.post("/api/saotx/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},initPagination(t){t&&(this.pagination.total=t.count)},queryData:function(t){this.getlistData()},resetData:function(t){this.selectAllBrands="",this.selectSpeciSns="",this.selectAllarea="",this.id="1",this.form={metraFlag:"Object",hdCode:"",orderCode:"",brandArr:[],snArr:[],cityArr:[],metraType:1,status:"",stime:"",etime:"",winnerMobile:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){if(2e5==t.ret){this.$message({type:"success",message:t.data.successMsg});let e={name:t.data.sourceFile,sourceCode:t.data.sourceCode,count:t.data.successCount};this.sourceFiles.push(e)}else this.$message.error(t.message)},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/api/saotx/order/export",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)},ObjectPageDatail(t){this.$router.push({path:"/Orders/ACT/objectDetail?orderId="+t})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("实物领奖明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"活动编号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入活动编号"},model:{value:t.form.hdCode,callback:function(e){t.$set(t.form,"hdCode",e)},expression:"form.hdCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllBrands,callback:function(e){t.selectAllBrands=e},expression:"selectAllBrands"}},t._l(t.allBrandsData,function(t,e){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.id,clearable:!!t.id},model:{value:t.selectSpeciSns,callback:function(e){t.selectSpeciSns=e},expression:"selectSpeciSns"}},t._l(t.allSpecisData,function(t,e){return a("el-option",{key:t.product.sn,attrs:{label:t.product.allName,value:t.product.sn}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"发货状态",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.orderStatusData,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"订单号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.form.orderCode,callback:function(e){t.$set(t.form,"orderCode",e)},expression:"form.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖地区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllarea,callback:function(e){t.selectAllarea=e},expression:"selectAllarea"}},t._l(t.allareaData,function(e){return a("el-option-group",{key:e.value,attrs:{label:e.label}},t._l(e.children,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"领奖时段",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.stime,callback:function(e){t.$set(t.form,"stime",e)},expression:"form.stime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.etime,callback:function(e){t.$set(t.form,"etime",e)},expression:"form.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.form.winnerMobile,callback:function(e){t.$set(t.form,"winnerMobile",e)},expression:"form.winnerMobile"}})],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/saotx/order/import",headers:t.headers,data:t.addPool,"before-upload":t.handlerSourceFileBUpload,"on-success":t.handleSourceFileSuccess,"on-remove":t.handleSourceFileRemove,"file-list":t.sourceFiles,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("导入物流信息")])],1)],1),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{prop:"orderCode",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actCode",label:"活动ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"winnerMobile",label:"中奖人手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prizeName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"关联规格"}}),t._v(" "),a("el-table-column",{attrs:{label:"领奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                   "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n               ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.awdProvinceName)+"-"+t._s(e.row.awdCityName)+"-"+t._s(e.row.awdDistrictName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态\t"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"已领取":2==e.row.status?"待发货":"已发货"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.ObjectPageDatail(e.row.orderCode)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("eV/g")},"data-v-51688656",null);e.default=l.exports},GMqS:function(t,e){},"H/Pf":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data:()=>({activeName:"home",addActParams:{conf:"",form:"act-702",id:"",name:"",note:""},addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},configItem:{title:"",description:"",headerImgUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-title.png",bgImgUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-bg.png",actTip:"http://qoss.qrmkt.cn/common/ddshu/hdjn.png",clickImgUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-clock.png",btnImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-btn.png",holeUrl:"http://qoss.qrmkt.cn/common/ddshu/hole.png",mouseUrl:"http://qoss.qrmkt.cn/common/ddshu/mouse.png",mouseCryUrl:"http://qoss.qrmkt.cn/common/ddshu/mouse-cry.png",hammerUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-hammer.png",drawImgUrl:"http://qoss.qrmkt.cn/common/ddshu/award-pop.png",drawBtnUrl:"http://qoss.qrmkt.cn/common/ddshu/award-btn.png",cryImgUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-nolucky.png",cryBtnUrl:"http://qoss.qrmkt.cn/common/ddshu/nolucky-btn.png"},uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail()},methods:{getActDetail(){this.id?this.$request.post("/api/saotx/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/saotx/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upHoleUrlSuccess(t){if("200000"===t.ret)return this.configItem.holeUrl=t.data.accessUrl;this.$message.error(t.message)},upClickImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.clickImgUrl=t.data.accessUrl;this.$message.error(t.message)},upMouseUrlSuccess(t){if("200000"===t.ret)return this.configItem.mouseUrl=t.data.accessUrl;this.$message.error(t.message)},upMouseCryUrlSuccess(t){if("200000"===t.ret)return this.configItem.mouseCryUrl=t.data.accessUrl;this.$message.error(t.message)},upHammerUrlSuccess(t){if("200000"===t.ret)return this.configItem.hammerUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upDrawImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.drawImgUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/saotx/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/saotx/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"clock"},[a("img",{attrs:{src:t.configItem.clickImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),t._l([1,2,3,4,5,6,7,8,9],function(e){return a("div",{class:"hole-"+e},[a("img",{attrs:{src:t.configItem.holeUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=5}}})])}),t._v(" "),a("div",{staticClass:"mouse1"},[a("img",{attrs:{src:t.configItem.mouseUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"mouse2"},[a("img",{attrs:{src:t.configItem.mouseUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"mouse3"},[a("img",{attrs:{src:t.configItem.mouseUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"hammer"},[a("img",{attrs:{src:t.configItem.hammerUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=7}}})])],2),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("时间背景:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.clickImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upClickImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("洞口遮照:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.holeUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHoleUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("出现图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.mouseUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upMouseUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 93*93px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("击中图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.mouseCryUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upMouseCryUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("锤子图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hammerUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHammerUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*415px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 156*177px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 102*103px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 213*136px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 93*93px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 130*124px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"265px",width:"100%","font-size":"10px"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"245px",width:"100%","font-size":"14px"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upDrawImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("8Y+z")},"data-v-92fa79c0",null);e.default=r.exports},HuuF:function(t,e){},I3g6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},name:"VirtualPage",data:()=>({listData:[],allBrandsData:[],allSpecisData:[],allareaData:[],selectAllBrands:"",selectSpeciSns:"",selectAllarea:"",id:"1",form:{brandArr:[],snArr:[],cityArr:[],hdCode:"",orderCode:"",etime:"",stime:"",status:"",metraType:2,winnerMobile:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),created(){this.init()},watch:{selectAllBrands(t,e){t&&t!=e&&(this.form.brandArr=[],this.form.brandArr[0]=t,this.id="",this.selectSpeciSns="",this.form.snArr=[],this.allSpecisList(this.form.brandArr[0]))},selectSpeciSns(t,e){t&&t!=e&&(this.form.snArr=[],this.form.snArr.push(t))},selectAllarea(t,e){t&&t!=e&&(this.form.cityArr=[],this.form.cityArr[0]=t)}},methods:{currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},init(){this.allBrandsList(),this.allareaList(),this.getlistData()},allBrandsList(){this.$request.post("/api/saotx/prod/listBrand",{service:"browser"},!0,t=>{"200000"===t.ret&&(this.allBrandsData=t.data.list)})},allSpecisList(t){var e=[];e.push(t),this.$request.post("/api/saotx/prod/listTbc",{brandCodeArr:e},!0,t=>{"200000"===t.ret&&(this.allSpecisData=[],this.allSpecisData=t.data.list)})},allareaList(){let t=this;t.$request.post("/api/saotx/dim/regionByPCode",{brandListArrObj:{parentCode:"",withRegion:!0}},!0,e=>{if("200000"===e.ret){var a=e.data;0!=a.length&&a.forEach(function(e,a){var s={label:e.name,value:e.code,children:[]};t.$request.post("/api/saotx/dim/regionByPCode",{parentCode:e.code},!0,e=>{var a=e.data;null!=a&&0!=a.length&&a.forEach(function(t,e){s.children.push({label:t.name,value:t.code})}),t.allareaData.push(s)})})}})},getlistData(){this.$request.post("/api/saotx/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},initPagination(t){t&&(this.pagination.total=t.count)},queryData:function(t){this.getlistData()},resetData:function(t){this.selectAllBrands="",this.selectSpeciSns="",this.selectAllarea="",this.id="1",this.form={metraFlag:"Object",hdCode:"",orderCode:"",brandArr:[],snArr:[],cityArr:[],metraType:2,status:"",stime:"",etime:"",winnerMobile:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){if(2e5==t.ret){this.$message({type:"success",message:t.data.successMsg});let e={name:t.data.sourceFile,sourceCode:t.data.sourceCode,count:t.data.successCount};this.sourceFiles.push(e)}else this.$message.error(t.message)},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/api/saotx/order/export",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("虚拟领奖明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"活动编号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入活动编号"},model:{value:t.form.hdCode,callback:function(e){t.$set(t.form,"hdCode",e)},expression:"form.hdCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllBrands,callback:function(e){t.selectAllBrands=e},expression:"selectAllBrands"}},t._l(t.allBrandsData,function(t,e){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.id,clearable:!!t.id},model:{value:t.selectSpeciSns,callback:function(e){t.selectSpeciSns=e},expression:"selectSpeciSns"}},t._l(t.allSpecisData,function(t,e){return a("el-option",{key:t.product.sn,attrs:{label:t.product.allName,value:t.product.sn}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"订单号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.form.orderCode,callback:function(e){t.$set(t.form,"orderCode",e)},expression:"form.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖地区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllarea,callback:function(e){t.selectAllarea=e},expression:"selectAllarea"}},t._l(t.allareaData,function(e){return a("el-option-group",{key:e.value,attrs:{label:e.label}},t._l(e.children,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"领奖时段",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.stime,callback:function(e){t.$set(t.form,"stime",e)},expression:"form.stime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.etime,callback:function(e){t.$set(t.form,"etime",e)},expression:"form.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.form.winnerMobile,callback:function(e){t.$set(t.form,"winnerMobile",e)},expression:"form.winnerMobile"}})],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{prop:"orderCode",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prizeName",label:"所领奖项"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awdName",label:"奖项内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"关联规格"}}),t._v(" "),a("el-table-column",{attrs:{label:"领奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.awdProvinceName)+"-"+t._s(e.row.awdCityName)+"-"+t._s(e.row.awdDistrictName))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("8jgc")},"data-v-6655224a",null);e.default=l.exports},J8gb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["data"],data:()=>({selectBrand:[],selectSonBrand:[],brandList:[],brandSonList:[]}),created(){this.getBrandList(),this.handleBrand()},methods:{handleBrand(){0!==this.data.brandArr.length&&(this.selectBrand=this.data.brandArr,this.getBrandSonList()),0!==this.data.snArr.length&&(this.selectSonBrand=this.data.snArr)},getBrandList(){this.$request.post("/api/saotx/prod/listBrand",{pageSize:"-1"},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.brandList=t.data.list})},getBrandSonList(){0==this.brandList.length&&setTimeout(()=>{this.getBrandSonList()},1e3),this.$request.post("/api/saotx/prod/list",{brandCodeArr:this.selectBrand,pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandSonList=t.data.list,void this.done();this.$message.error(t.message)})},done(){this.$emit("done",{selectB:this.selectBrand,selectSB:this.selectSonBrand})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getBrandSonList},model:{value:t.selectBrand,callback:function(e){t.selectBrand=e},expression:"selectBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{attrs:{"no-data-text":"请选择品牌",multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.done},model:{value:t.selectSonBrand,callback:function(e){t.selectSonBrand=e},expression:"selectSonBrand"}},t._l(t.brandSonList,function(t){return a("el-option",{key:t.id,attrs:{label:t.allName,value:t.sn}})}))],1)},staticRenderFns:[]},r=a("VU/8")(s,i,!1,null,null,null).exports,l={props:["data","isDis"],data:()=>({provList:[{code:"000000",name:"全部"}],cityList:[],areaList:[],selectProvList:[],selectCityList:[],selectAreaList:[],oldSlectProvList:["1"],oldSelectCityList:["1"],oldSelectAreaList:["1"],isDisabled:!1}),watch:{isDisabled:function(t){t?(this.cityList=[{code:"000000",name:"全部"}],this.areaList=[{code:"000000",name:"全部"}],this.selectProvList=["000000"],this.selectCityList=["000000"],this.selectAreaList=["000000"],this.done()):(this.selectProvList=[],this.selectCityList=[],this.selectAreaList=[],this.cityList=[],this.areaList=[])}},created(){this.getProvList(),this.handleArea(),this.isDis&&(this.isDisabled=!0)},methods:{handleArea(){0!==this.data.provinceArr.length&&(this.selectProvList=this.data.provinceArr,this.getCityList(this.data.provinceArr)),0!==this.data.cityArr.length&&(this.selectCityList=this.data.cityArr,this.getAreaList(this.data.cityArr)),0!==this.data.districtArr.length&&(this.selectAreaList=this.data.districtArr)},getProvList(){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:[]},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.provList.push(...t.data)})},getCityList(t){if(1==this.provList.length)return void setTimeout(()=>{this.getCityList(t)},1e3);let e=[];for(let t of this.provList)e.push(t.code);const a=1===this.oldSlectProvList.length?[]:this.oldSlectProvList[1];if(t.includes("000000")&&(this.selectProvList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectProvList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectProvList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectProvList=["000000"].concat(t)),this.oldSlectProvList[1]=this.selectProvList,0==this.selectProvList.length)return this.cityList=[],this.selectCityList=[],this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:this.selectProvList},!0,t=>{if("200000"===t.ret&&t.data.length>0)return this.cityList=[{code:"000000",name:"全部"}],this.cityList.push(...t.data),void this.done();this.message.error(t.message)})},getAreaList(t){if(1==this.cityList.length)return void setTimeout(()=>{this.getAreaList(t)},1e3);let e=[];for(let t of this.cityList)e.push(t.code);const a=1===this.oldSelectCityList.length?[]:this.oldSelectCityList[1];if(t.includes("000000")&&(this.selectCityList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectCityList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectCityList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectCityList=["000000"].concat(t)),this.oldSelectCityList[1]=this.selectCityList,0==this.selectCityList.length)return this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:this.selectCityList},!0,t=>{if("200000"===t.ret&&t.data.length>0)return this.areaList=[{code:"000000",name:"全部"}],this.areaList.push(...t.data),void this.done();this.$message.error(t.message)})},selectAll(t){if(1==this.areaList.length)return void setTimeout(()=>{this.selectAll(t)},1e3);let e=[];for(let t of this.areaList)e.push(t.code);const a=1===this.oldSelectAreaList.length?[]:this.oldSelectAreaList[1];if(t.includes("000000")&&(this.selectAreaList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectAreaList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectAreaList=t}a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectAreaList=["000000"].concat(t)),this.oldSelectAreaList[1]=this.selectAreaList,this.done()},done(){this.$emit("done",{selectP:this.selectProvList,selectC:this.selectCityList,selectA:this.selectAreaList})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getCityList},model:{value:t.selectProvList,callback:function(e){t.selectProvList=e},expression:"selectProvList"}},t._l(t.provList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getAreaList},model:{value:t.selectCityList,callback:function(e){t.selectCityList=e},expression:"selectCityList"}},t._l(t.cityList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.selectAll},model:{value:t.selectAreaList,callback:function(e){t.selectAreaList=e},expression:"selectAreaList"}},t._l(t.areaList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-checkbox",{attrs:{label:"全部地区",border:""},model:{value:t.isDisabled,callback:function(e){t.isDisabled=e},expression:"isDisabled"}})],1)},staticRenderFns:[]};var n=a("VU/8")(l,o,!1,function(t){a("HuuF")},"data-v-5eb6726a",null).exports,c={props:["awae","prizeType","isDisable"],data(){var t=(t,e,a)=>{};return{prizeList:this.prizeType,rules:{n:[{required:!0,validator:t}],type:[{required:!0,validator:t}],name:[{required:!0,validator:t}],probability:[{required:!0,validator:t}],redNum:[{required:!0,validator:t}],pool:[{required:!0,validator:t}],putNum:[{required:!0,validator:t}],intTotal:[{required:!0,validator:t}],redTotal:[{required:!0,validator:t}]},typeObj:{checkName:{1:"选择物品:",2:"选择物品:",3:"红包池:：",6:"选择积分:"},titleObj:{1:"选择实物",2:"选择虚拟",3:"选择红包",6:"选择积分"},metraObj:{1:"object",2:"virtual",3:"redpack",6:"integral"}},list:[],params:{metraFlag:"object",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,integralList:[],integralTotal:0,integralVisible:!1,imgStyle:{cursor:"pointer"}}},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return this.awae.redMoney*this.awae.totalNum},set:function(t){}}},created(){},methods:{selectPrize(t){this.awae.awardPic=t.pic,this.awae.poolName=t.name,this.awae.poolId=t.id,this.listVisible=!1},resetPrize(t){this.awae.awardPic="",this.awae.prizeName="",this.awae.poolName="",this.awae.totalNum="",this.awae.probability="",this.awae.redMoney="",this.awae.redTotalMoney="",this.awae.integral="",this.params.metraFlag=this.typeObj.metraObj[t]},handleIsDisable(){if(!this.awae.id)return;new Date(this.time.stimeStr).getTime()-this.nowTime<9e5?this.isDisable=!0:this.isDisable=!1},getList(){this.$request.post("/api/saotx/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})},giveIntegral(){this.$request.post("/api/saotx/metra/list",{metraFlag:"integral",pageNo:1,pageSize:10,status:1},!0,t=>{if("200000"===t.ret)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.message)})},selectIntegral(t){this.awae.integralPool=t.id,this.integralVisible=!1},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},resetScore(t){t?this.awae.giveScore=1:(this.awae.integralPool=null,this.awae.integral="",this.awae.giveScore=0)},countRedTotal(t){const e=this.awae.redMoney,a=this.awae.totalNum;if(0!=e&&0!=a)return this.awae.redTotalMoney=e*a}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pond"},[a("el-form",{ref:"form",attrs:{model:t.awae,"label-width":"100px",rules:t.rules}},[a("el-form-item",{attrs:{label:"奖品类型:",prop:"type"}},[a("el-select",{attrs:{disabled:!!t.isDisable,placeholder:"请选择"},on:{change:t.resetPrize},model:{value:t.awae.awardType,callback:function(e){t.$set(t.awae,"awardType",e)},expression:"awae.awardType"}},t._l(t.prizeList,function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!!t.isDisable,placeholder:"请输入奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),[a("el-form-item",{attrs:{label:t.typeObj.checkName[t.awae.awardType],prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{staticClass:"prize-img",style:t.isDisable?"":t.imgStyle,attrs:{src:t.awae.awardPic,title:t.isDisable?"":"点击更换"},on:{click:function(e){!t.isDisable&&t.getList()}}}):t._e(),t._v(" "),a("span",[t._v(t._s(t.awae.poolName))])],1),t._v(" "),3==t.awae.awardType?a("el-form-item",{attrs:{label:"红包面额:",prop:"redNum"}},[a("el-input-number",{attrs:{disabled:!!t.isDisable,precision:2,min:0,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.redMoney,callback:function(e){t.$set(t.awae,"redMoney",e)},expression:"awae.redMoney"}}),t._v(" 元\n      ")],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.isDisable,min:0,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.isDisable?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n        ")],1):t._e()],1),t._v(" "),3==t.awae.awardType?a("el-form-item",{attrs:{label:"红包金额:",prop:"redTotal"}},[a("el-input-number",{attrs:{disabled:"",min:0,"controls-position":"right"},model:{value:t.totalRed,callback:function(e){t.totalRed=e},expression:"totalRed"}}),t._v(" 元\n      ")],1):t._e(),t._v(" "),6==t.awae.awardType?a("el-form-item",{attrs:{label:"积分面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.isDisable,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n      ")],1):t._e()],t._v(" "),6!==t.awae.awardType?a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.giveScore,"true-label":1,"false-label":0},on:{change:t.resetScore},model:{value:t.awae.giveScore,callback:function(e){t.$set(t.awae,"giveScore",e)},expression:"awae.giveScore"}},[t._v("同时送积分")]),t._v(" "),t.awae.giveScore?a("span",[t.awae.integralPool?a("el-button",{staticClass:"ml20 mr20",attrs:{type:"info"},on:{click:t.giveIntegral}},[t._v("已选择")]):a("el-button",{staticClass:"ml20 mr20",on:{click:t.giveIntegral}},[t._v("选择")]),t._v(" "),a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 积分\n      ")],1):t._e()],1):t._e(),t._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.guideGzh,"true-label":1,"false-label":0},model:{value:t.awae.guideGzh,callback:function(e){t.$set(t.awae,"guideGzh",e)},expression:"awae.guideGzh"}},[t._v("中奖后引导关注公众号")])],1)],2),t._v(" "),a("el-dialog",{attrs:{title:t.typeObj.titleObj[t.awae.awardType],visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"list-img",attrs:{src:t.row.pic}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),t.listTotal>1?a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"选择积分",visible:t.integralVisible,width:"800px"},on:{"update:visible":function(e){t.integralVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.integralList,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.awae.integralPool!==e.row.id?a("el-button",{on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("选择")]):a("el-button",{attrs:{type:"info"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("已选择")])]}}])})],1),t._v(" "),t.integralTotal>1?a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.integralTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,d,!1,function(t){a("cJQP")},"data-v-89c7e274",null).exports,p={props:{data:{type:Object,required:!0}},components:{pondConf:m},data(){return{tabsIndex:null,timeObj:[],statusInfoArr:[],isDisableArr:[],btnDisableArr:[],prizeType:[{name:"实物礼品",type:1},{name:"虚拟礼品",type:2},{name:"红包",type:3},{name:"积分",type:6}],putTabs:[[{title:"常规奖项1",name:"0"}]],putTabsValue:["0"],pickerOptions:{disabledDate:t=>t.getTime()<new Date(this.data.act.stimeStr).getTime()||t.getTime()>new Date(this.data.act.etimeStr).getTime()},defaultAwae:{areas:{cityArr:[],districtArr:[],provinceArr:[]},awardArr:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:"",poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],brandArr:[],snArr:[],tf:{stimeStr:"",etimeStr:""},tfType:"common"},initData:{}}},created(){this.handleTabs()},methods:{initStatus(t,e){let a;this.$request.post("/api/saotx/act/initRedWin",{actCode:t.actCode,tfCode:t.tfCode},!0,t=>{this.initData=JSON.parse(t.data).content,a="200"==this.initData.code?this.initData.data.init?`${this.initData.data.ts}, 初始化成功! 奖品总数：${this.initData.data.rrTfInfo.totalNum}, 剩余：${this.initData.data.rrTfInfo.restNum}`:`${this.initData.data.ts}, 未初始化!`:`${this.initData.data.ts}, ${this.initData.msg}`,this.$set(this.statusInfoArr,e,a)})},handleTabs(){this.data.strategyArr.forEach((t,e)=>{this.handleDisable(t,e),this.handleTime(t),0!==e&&(this.putTabs.push([{title:"常规奖项1",name:"0"}]),this.putTabsValue.push("0")),t.awardArr.forEach((t,a)=>{0!=a&&this.putTabs[e].push({title:"常规奖项"+(a+1),name:a+""})})})},handleTime(t){t.tf.stimeStr&&t.tf.etimeStr&&this.timeObj.push([t.tf.stimeStr,t.tf.etimeStr])},time(t){if(this.timeObj.length>=2){let e=this.timeObj[t];this.timeObj.forEach((a,s)=>{if(s==t)return;if(!a)return;let i=a[0]<=e[0]&&a[1]>=e[0],r=a[0]<=e[1]&&a[1]>=e[1];return i||r?(this.$message.error("场次时间不能重复!"),void this.$set(this.timeObj,t,null)):void 0})}if(!this.timeObj[t])return this.data.strategyArr[t].tf.stimeStr="",void(this.data.strategyArr[t].tf.etimeStr="");this.data.strategyArr[t].tf.stimeStr=this.timeObj[t][0],this.data.strategyArr[t].tf.etimeStr=this.timeObj[t][1]},handleDisable(t,e){let a=t.tf.sysTime,s=new Date(t.tf.stimeStr).getTime(),i=new Date(t.tf.etimeStr).getTime();s-a<9e5?this.isDisableArr.push(!0):this.isDisableArr.push(!1),t.tf.actCode&&t.tf.tfCode&&1==this.data.act.status?a>=i?this.btnDisableArr.push(!0):this.btnDisableArr.push(!1):this.btnDisableArr.push(!0)},putTabsEdit(t,e){let a=this.data.strategyArr[this.tabsIndex].awardArr.length;if("add"===e){if(10==a)return;let t=JSON.parse(JSON.stringify(this.defaultAwae.awardArr[0]));this.data.strategyArr[this.tabsIndex].awardArr.push(t);let e="常规奖项"+(a+1);this.putTabs[this.tabsIndex].push({title:e,name:a+""}),this.putTabsValue[this.tabsIndex]=a+""}if("remove"===e){if(1==a)return;this.putTabs[this.tabsIndex]=[];for(var s=1;s<a;s++)this.putTabs[this.tabsIndex].push({title:"常规奖项"+s,name:s-1+""});this.putTabsValue[this.tabsIndex]="0",this.data.strategyArr[this.tabsIndex].awardArr.splice(t,1)}},add(){let t=JSON.parse(JSON.stringify(this.defaultAwae));this.data.strategyArr.push(t),this.putTabs.push([{title:"常规奖项1",name:"0"}]),this.putTabsValue.push("0"),this.$set(this.btnDisableArr,this.data.strategyArr.length-1,!0)},del(t){0!=t&&this.$confirm("是否删除该场次?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.timeObj.splice(t,1),this.data.strategyArr.splice(t,1),this.putTabs.splice(t,1),this.putTabsValue.splice(t,1),this.statusInfoArr.splice(t,1),this.isDisableArr.splice(t,1),this.btnDisableArr.splice(t,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[t._l(t.data.strategyArr,function(e,s){return a("div",{key:s,staticClass:"content mt20"},[a("el-form-item",{attrs:{label:"场次时间：",prop:"time"}},[a("el-date-picker",{attrs:{disabled:t.isDisableArr[s],"time-arrow-control":!0,"picker-options":t.pickerOptions,"arrow-control":"",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(e){t.time(s)}},model:{value:t.timeObj[s],callback:function(e){t.$set(t.timeObj,s,e)},expression:"timeObj[index]"}}),t._v(" "),0===s||e.tf.id?t._e():a("el-button",{staticClass:"del-btn",attrs:{type:"danger"},on:{click:function(e){t.del(s)}}},[t._v("删除场次")])],1),t._v(" "),a("el-form-item",{attrs:{label:"初始化奖池："}},[a("el-button",{attrs:{plain:"",type:"primary",disabled:t.btnDisableArr[s]},on:{click:function(a){t.initStatus(e.tf,s)}}},[t._v("初始化奖池")]),t._v(" "),a("span",{staticClass:"ml20 info"},[t._v(t._s(t.statusInfoArr[s]))])],1),t._v(" "),a("div",{on:{mouseover:function(e){t.tabsIndex=s}}},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.putTabsEdit},model:{value:t.putTabsValue[s],callback:function(e){t.$set(t.putTabsValue,s,e)},expression:"putTabsValue[index]"}},t._l(t.putTabs[s],function(i,r){return a("el-tab-pane",{key:r,attrs:{label:i.title,name:i.name}},[a("pond-conf",{attrs:{awae:e.awardArr[r],prizeType:t.prizeType,isDisable:t.isDisableArr[s]}})],1)}))],1)],1)}),t._v(" "),a("el-button",{staticClass:"mt20",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.add}},[t._v("新增场次")])],2)},staticRenderFns:[]};var g={props:["id","actCode","form"],components:{selectedArea:n,selectedBrand:r,putConf:a("VU/8")(p,u,!1,function(t){a("SfKy")},"data-v-2f051b07",null).exports},data(){var t=(t,e,a)=>{};return{rules:{brand:[{required:!0,validator:t}],area:[{required:!0,validator:t}],time:[{required:!0,validator:t}]},data:{act:{actCode:"",id:"",status:2},strategyArr:[{areas:{cityArr:[],districtArr:[],provinceArr:[]},awardArr:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:"",poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],brandArr:[],snArr:[],tf:{stimeStr:"",etimeStr:""},tfType:"common"}]},selectedBrandArr:[],selectedSnArr:[],selectedPrevArr:[],selectedCityArr:[],selectedAreaArr:[],isDisabled:!1,isShow:!1,statusDisabled:!1,isChange:!1}},created(){this.getDetail()},methods:{brandDone(t){this.isChange=!0,this.selectedBrandArr=t.selectB,this.selectedSnArr=t.selectSB},areaDone(t){this.isChange=!0,this.selectedPrevArr=t.selectP,this.selectedCityArr=t.selectC,this.selectedAreaArr=t.selectA},getDetail(){this.$request.post("/api/saotx/act/detail",{id:this.id},!0,t=>{"200000"===t.ret&&(this.data.act=t.data.act,0!==t.data.strategyArr.length&&("000000"==t.data.strategyArr[0].areas.provinceArr[0]&&"000000"==t.data.strategyArr[0].areas.cityArr[0]&&(this.isDisabled=!0),1==t.data.act.status&&(this.statusDisabled=!0),this.data=t.data),this.isShow=!0)})},save(){this.isDisabled||(-1!=this.selectedCityArr.indexOf("000000")&&this.selectedCityArr.splice(this.selectedCityArr.indexOf("000000"),1),-1!=this.selectedAreaArr.indexOf("000000")&&this.selectedAreaArr.splice(this.selectedAreaArr.indexOf("000000"),1),-1!=this.selectedPrevArr.indexOf("000000")&&this.selectedPrevArr.splice(this.selectedPrevArr.indexOf("000000"),1)),this.isChange&&this.data.strategyArr.map(t=>{t.areas.provinceArr=this.selectedPrevArr,t.areas.cityArr=this.selectedCityArr,t.areas.districtArr=this.selectedAreaArr,t.brandArr=this.selectedBrandArr,t.snArr=this.selectedSnArr}),this.$request.post("/api/saotx/act/somRedtf",this.data,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",{attrs:{"label-width":"110px",rules:t.rules}},[a("el-form-item",{attrs:{label:"品牌规格：",prop:"brand"}},[t.isShow?a("selected-brand",{attrs:{data:{brandArr:t.data.strategyArr[0].brandArr,snArr:t.data.strategyArr[0].snArr}},on:{done:t.brandDone}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"地区：",prop:"area"}},[t.isShow?a("selected-area",{attrs:{data:{cityArr:t.data.strategyArr[0].areas.cityArr,districtArr:t.data.strategyArr[0].areas.districtArr,provinceArr:t.data.strategyArr[0].areas.provinceArr},isDis:t.isDisabled},on:{done:t.areaDone}}):t._e()],1),t._v(" "),t.isShow?a("put-conf",{attrs:{data:t.data}}):t._e(),t._v(" "),a("el-form-item",{staticClass:"mt20",attrs:{label:"是否立即发布："}},[a("el-switch",{attrs:{disabled:t.statusDisabled,"active-value":1,"inactive-value":2},model:{value:t.data.act.status,callback:function(e){t.$set(t.data.act,"status",e)},expression:"data.act.status"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(e){t.$router.push("/market/actMgr")}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(g,h,!1,function(t){a("5dgq")},"data-v-f44b8922",null);e.default=f.exports},KMp6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data:()=>({activeName:"home",addActParams:{conf:"",form:"act-701",id:"",name:"",note:""},addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},iconUrl:[{key:1,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:378"},{key:2,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:379"},{key:3,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:380"},{key:4,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:381"},{key:5,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:382"},{key:6,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:383"}],configItem:{title:"",description:"",headerImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-title.jpg",bgImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-bkg .png",actTip:"http://qoss.qrmkt.cn/common/niudan/hdjn.png",boxImgUrl:"http://qoss.qrmkt.cn/common/niudan/main.png",btnImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-btn.png",egg1ImgUrl:"http://qoss.qrmkt.cn/common/niudan/ball1.png",egg2ImgUrl:"http://qoss.qrmkt.cn/common/niudan/ball2.png",egg3ImgUrl:"http://qoss.qrmkt.cn/common/niudan/ball3.png",egg1left:"http://qoss.qrmkt.cn/common/niudan/nd-egg1-left.png",egg1right:"http://qoss.qrmkt.cn/common/niudan/nd-egg1-right.png",egg2left:"http://qoss.qrmkt.cn/common/niudan/nd-egg2-left.png",egg2right:"http://qoss.qrmkt.cn/common/niudan/nd-egg2-right.png",egg3left:"http://qoss.qrmkt.cn/common/niudan/nd-egg3-left.png",egg3right:"http://qoss.qrmkt.cn/common/niudan/nd-egg3-right.png",awardUrl:[{imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zhongjiang74@2x.png"}],drawImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-award-bg.png",drawBtnUrl:"http://qoss.qrmkt.cn/common/niudan/niudan-awardBtn.png",cryImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-noaward.png",cryBtnUrl:"http://qoss.qrmkt.cn/common/niudan/nd-zxNoAwardBtn.png"},uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail()},methods:{getActDetail(){this.id?this.$request.post("/api/saotx/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/saotx/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upBtnImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.btnImgUrl=t.data.accessUrl;this.$message.error(t.message)},upBtnImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.btnImgUrl=t.data.accessUrl;this.$message.error(t.message)},upBoxImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.boxImgUrl=t.data.accessUrl;this.$message.error(t.message)},upEgg1ImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.egg1ImgUrl=t.data.accessUrl;this.$message.error(t.message)},upEgg1leftSuccess(t){if("200000"===t.ret)return this.configItem.egg1left=t.data.accessUrl;this.$message.error(t.message)},upEgg1rightSuccess(t){if("200000"===t.ret)return this.configItem.egg1right=t.data.accessUrl;this.$message.error(t.message)},upEgg2ImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.egg2ImgUrl=t.data.accessUrl;this.$message.error(t.message)},upEgg2leftSuccess(t){if("200000"===t.ret)return this.configItem.egg2left=t.data.accessUrl;this.$message.error(t.message)},upEgg2rightSuccess(t){if("200000"===t.ret)return this.configItem.egg2right=t.data.accessUrl;this.$message.error(t.message)},upEgg3ImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.egg3ImgUrl=t.data.accessUrl;this.$message.error(t.message)},upEgg3leftSuccess(t){if("200000"===t.ret)return this.configItem.egg3left=t.data.accessUrl;this.$message.error(t.message)},upEgg3rightSuccess(t){if("200000"===t.ret)return this.configItem.egg3right=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upDrawImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.drawImgUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/saotx/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/saotx/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("img",{staticClass:"egg7",attrs:{src:t.configItem.egg2ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=7}}}),t._v(" "),a("img",{staticClass:"egg8",attrs:{src:t.configItem.egg3ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=8}}}),t._v(" "),a("img",{staticClass:"egg9",attrs:{src:t.configItem.egg1ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=6}}}),t._v(" "),a("img",{staticClass:"egg2",attrs:{src:t.configItem.egg3ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=8}}}),t._v(" "),a("img",{staticClass:"egg4",attrs:{src:t.configItem.egg3ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=8}}}),t._v(" "),a("img",{staticClass:"egg6",attrs:{src:t.configItem.egg2ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=7}}}),t._v(" "),a("img",{staticClass:"egg1",attrs:{src:t.configItem.egg1ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=6}}}),t._v(" "),a("img",{staticClass:"egg3",attrs:{src:t.configItem.egg2ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=7}}}),t._v(" "),a("img",{staticClass:"egg5",attrs:{src:t.configItem.egg1ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=6}}}),t._v(" "),a("div",{staticClass:"box"},[a("img",{attrs:{src:t.configItem.boxImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),a("div",{staticClass:"btn"},[a("img",{attrs:{src:t.configItem.btnImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=5}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋机背景")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.boxImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBoxImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("抽奖按钮")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.btnImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBtnImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋一")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.egg1ImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg1ImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋二")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.egg2ImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg2ImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋三")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg3ImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg3ImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 730*280px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*930px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 128*103px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 371*137px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),8==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋一开奖：左")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg1left,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg1leftSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋一开奖：右")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg1right,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg1rightSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋二开奖：左")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg2left,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg2leftSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋二开奖：右")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg2right,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg2rightSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋三开奖：左")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg3left,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg3leftSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),8==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋三开奖：右")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg3right,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg3rightSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),8==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("h3",{staticStyle:{position:"absolute",top:"126px",width:"100%"}},[t._v("恭喜中奖")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"265px",width:"100%","font-size":"10px"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"245px",width:"100%","font-size":"14px"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,width:"100",alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upDrawImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("h3",{staticStyle:{position:"absolute",top:"126px",width:"100%"}},[t._v("很遗憾，未中奖")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("QUaf")},"data-v-73230e0d",null);e.default=r.exports},"L+KM":function(t,e){},"MCU/":function(t,e){},MYGI:function(t,e){},PLA4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},name:"RedpackPage",data:()=>({listData:[],allBrandsData:[],allSpecisData:[],allareaData:[],selectAllBrands:"",selectSpeciSns:"",selectAllarea:"",id:"1",form:{brandArr:[],snArr:[],cityArr:[],hdCode:"",orderCode:"",etime:"",stime:"",status:"",metraType:3,winnerMobile:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),created(){this.init()},watch:{selectAllBrands(t,e){t&&t!=e&&(this.form.brandArr=[],this.form.brandArr[0]=t,this.id="",this.selectSpeciSns="",this.form.snArr=[],this.allSpecisList(this.form.brandArr[0]))},selectSpeciSns(t,e){t&&t!=e&&(this.form.snArr=[],this.form.snArr.push(t))},selectAllarea(t,e){t&&t!=e&&(this.form.cityArr=[],this.form.cityArr[0]=t)}},methods:{currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},init(){this.allBrandsList(),this.allareaList(),this.getlistData()},allBrandsList(){this.$request.post("/api/saotx/prod/listBrand",{service:"browser"},!0,t=>{"200000"===t.ret&&(this.allBrandsData=t.data.list)})},allSpecisList(t){var e=[];e.push(t),this.$request.post("/api/saotx/prod/listTbc",{brandCodeArr:e},!0,t=>{"200000"===t.ret&&(this.allSpecisData=[],this.allSpecisData=t.data.list)})},allareaList(){let t=this;t.$request.post("/api/saotx/dim/regionByPCode",{brandListArrObj:{parentCode:"",withRegion:!0}},!0,e=>{if("200000"===e.ret){var a=e.data;0!=a.length&&a.forEach(function(e,a){var s={label:e.name,value:e.code,children:[]};t.$request.post("/api/saotx/dim/regionByPCode",{parentCode:e.code},!0,e=>{var a=e.data;null!=a&&0!=a.length&&a.forEach(function(t,e){s.children.push({label:t.name,value:t.code})}),t.allareaData.push(s)})})}})},getlistData(){this.$request.post("/api/saotx/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},initPagination(t){t&&(this.pagination.total=t.count)},queryData:function(t){this.getlistData()},resetData:function(t){this.selectAllBrands="",this.selectSpeciSns="",this.selectAllarea="",this.id="1",this.form={metraFlag:"Object",hdCode:"",orderCode:"",brandArr:[],snArr:[],cityArr:[],metraType:3,status:"",stime:"",etime:"",winnerMobile:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){if(2e5==t.ret){this.$message({type:"success",message:t.data.successMsg});let e={name:t.data.sourceFile,sourceCode:t.data.sourceCode,count:t.data.successCount};this.sourceFiles.push(e)}else this.$message.error(t.message)},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/api/saotx/order/export",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("红包领奖明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"活动编号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入活动编号"},model:{value:t.form.hdCode,callback:function(e){t.$set(t.form,"hdCode",e)},expression:"form.hdCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllBrands,callback:function(e){t.selectAllBrands=e},expression:"selectAllBrands"}},t._l(t.allBrandsData,function(t,e){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.id,clearable:!!t.id},model:{value:t.selectSpeciSns,callback:function(e){t.selectSpeciSns=e},expression:"selectSpeciSns"}},t._l(t.allSpecisData,function(t,e){return a("el-option",{key:t.product.sn,attrs:{label:t.product.allName,value:t.product.sn}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"订单号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.form.orderCode,callback:function(e){t.$set(t.form,"orderCode",e)},expression:"form.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖地区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllarea,callback:function(e){t.selectAllarea=e},expression:"selectAllarea"}},t._l(t.allareaData,function(e){return a("el-option-group",{key:e.value,attrs:{label:e.label}},t._l(e.children,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"领奖时段",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.stime,callback:function(e){t.$set(t.form,"stime",e)},expression:"form.stime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.etime,callback:function(e){t.$set(t.form,"etime",e)},expression:"form.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.form.winnerMobile,callback:function(e){t.$set(t.form,"winnerMobile",e)},expression:"form.winnerMobile"}})],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{prop:"orderCode",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actCode",label:"活动ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"winnerMobile",label:"中奖人手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awdName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"关联规格"}}),t._v(" "),a("el-table-column",{attrs:{label:"领奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.awdProvinceName)+"-"+t._s(e.row.awdCityName)+"-"+t._s(e.row.awdDistrictName))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("MYGI")},"data-v-0d9c1461",null);e.default=l.exports},PeTl:function(t,e){},Pj64:function(t,e){},QUaf:function(t,e){},QjFJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("9ijK"),i={props:["title","titleLength","page","imgData","commonImg","shareConf"],data:()=>({isHover:"",title:""}),created(){},methods:{active(t){this.isHover=void 0!==t?2:1},unActive(){this.isHover=""}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"phone-wrapper"},[a("div",{staticClass:"phone-header"},[a("h4",[t._v(t._s(t.title))])]),t._v(" "),a("div",{staticClass:"phone-body"},[a("div",{directives:[{name:"show",rawName:"v-show",value:2!=t.page&&9!==t.page,expression:"page != 2 && page !== 9"}],staticClass:"page"},[a("img",{staticClass:"bg",attrs:{src:t.imgData.normal.bg.url,title:"点击编辑"},on:{mousemove:function(e){t.active()},mouseout:function(e){t.unActive()}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page == 1"}],staticClass:"num"},[a("p",{staticClass:"total-num"},[t._v("红包总量：10000个")]),t._v(" "),a("p",{staticClass:"residue-num"},[t._v("红包剩余：8000个")])]),t._v(" "),t._l(t.imgData.normal.redPacket.style,function(e,s){return a("img",{key:s,staticClass:"red-packet",style:{width:e.w,height:e.h,top:e.t,left:e.l},attrs:{src:t.imgData.normal.redPacket.url},on:{mousemove:function(e){t.active(s)},mouseout:function(e){t.unActive()}}})}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page == 1"}],staticClass:"prize-list"},[a("p",[t._v("恭喜180****1156  获得88元红包")]),t._v(" "),a("p",[t._v("恭喜180****1156  获得88元红包")])])],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.page,expression:"page == 2"}],staticClass:"page2 page"},[a("img",{staticClass:"bg",attrs:{src:t.imgData.rules.bg.url,title:"点击编辑"},on:{mousemove:function(e){t.active()},mouseout:function(e){t.unActive()}}}),t._v(" "),a("img",{staticClass:"rules-btn",attrs:{src:t.imgData.rules.rulesBtn.url}}),t._v(" "),a("div",{staticClass:"btn",style:{background:"url('"+t.imgData.rules.btnImg.url+"') no-repeat center / 100% 100%"}},[t._v("返回")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.page,expression:"page == 3"}],staticClass:"page3 page"},[a("img",{staticClass:"bg",attrs:{src:t.imgData.downCount.bg.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.downCount.num3.size[0]+"px",height:.4*t.imgData.downCount.num3.size[1]+"px",left:.4*t.imgData.downCount.num3.pos[0]+"px",top:.4*t.imgData.downCount.num3.pos[1]+"px"},attrs:{src:t.imgData.downCount.num3.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:4==t.page,expression:"page == 4"}],staticClass:"page4 page"},[a("img",{staticClass:"bg",attrs:{src:t.commonImg.actNotes.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:5==t.page,expression:"page == 5"}],staticClass:"page5 page"},[a("img",{staticClass:"bg",attrs:{src:t.commonImg.myAward.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:6==t.page,expression:"page == 6"}],staticClass:"page6 page"},[a("img",{style:{width:.4*t.imgData.tips.winningImg.size[0]+"px",height:.4*t.imgData.tips.winningImg.size[1]+"px",left:.4*t.imgData.tips.winningImg.pos[0]+"px",top:.4*t.imgData.tips.winningImg.pos[1]+"px"},attrs:{src:t.imgData.tips.winningImg.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.tips.drawBtn1.size[0]+"px",height:.4*t.imgData.tips.drawBtn1.size[1]+"px",left:.4*t.imgData.tips.drawBtn1.pos[0]+"px",top:.4*t.imgData.tips.drawBtn1.pos[1]+"px"},attrs:{src:t.imgData.tips.drawBtn1.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:7==t.page,expression:"page == 7"}],staticClass:"page7 page"},[a("img",{style:{width:.4*t.imgData.tips.notWinImg.size[0]+"px",height:.4*t.imgData.tips.notWinImg.size[1]+"px",left:.4*t.imgData.tips.notWinImg.pos[0]+"px",top:.4*t.imgData.tips.notWinImg.pos[1]+"px"},attrs:{src:t.imgData.tips.notWinImg.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.tips.drawBtn2.size[0]+"px",height:.4*t.imgData.tips.drawBtn2.size[1]+"px",left:.4*t.imgData.tips.drawBtn2.pos[0]+"px",top:.4*t.imgData.tips.drawBtn2.pos[1]+"px"},attrs:{src:t.imgData.tips.drawBtn2.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8==t.page,expression:"page == 8"}],staticClass:"page8 page"},[a("div",{staticClass:"tipsDialog"},[a("img",{style:{width:.4*t.imgData.tips.tipsImg.size[0]+"px",height:.4*t.imgData.tips.tipsImg.size[1]+"px",left:.4*t.imgData.tips.tipsImg.pos[0]+"px",top:.4*t.imgData.tips.tipsImg.pos[1]+"px"},attrs:{src:t.imgData.tips.tipsImg.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.tips.tipsBtn1.size[0]+"px",height:.4*t.imgData.tips.tipsBtn1.size[1]+"px",left:.4*t.imgData.tips.tipsBtn1.pos[0]+"px",top:.4*t.imgData.tips.tipsBtn1.pos[1]+"px"},attrs:{src:t.imgData.tips.tipsBtn1.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.tips.tipsBtn2.size[0]+"px",height:.4*t.imgData.tips.tipsBtn2.size[1]+"px",left:.4*t.imgData.tips.tipsBtn2.pos[0]+"px",top:.4*t.imgData.tips.tipsBtn2.pos[1]+"px"},attrs:{src:t.imgData.tips.tipsBtn2.url}})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:9==t.page,expression:"page == 9"}],staticClass:"page9 page"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.shareConf.shareTitle?t.shareConf.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.shareConf.shareDesc?t.shareConf.shareDesc:"扫码验真精彩送不停，更多好礼等级拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.imgData.share.icon.url}})])])])]),t._v(" "),a("div",{staticClass:"phone-footer"})])])},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("Pj64")},"data-v-7ed92cca",null).exports,o=a("ifEn"),n=a("UJta"),c=a("ehVw"),d={props:["id","edit"],components:{activityInfo:o.a,activityImageEditor:n.a,phoneModel:l,shareConf:c.a},data:()=>({defaultActive:"1",editData:[],editType:"normal",itemRepeat:!1,page:"1",isPublish:!0,conf:{form:"act-301",id:"",description:"",title:"",img:{},commonImg:s.a.commonImg,conf:{img:"",commonImg:"",title:"",desc:""},name:"",note:"",share:{shareTitle:"",shareDesc:""},actCode:""}}),created(){this.conf.img=JSON.parse(JSON.stringify(s.a.img.ACT_HONGBAOYU)),this.getDetail(),this.editData=[this.conf.img.normal.bg,this.conf.img.normal.redPacket]},methods:{getDetail(){let t;this.id?this.$request.post("/api/saotx/acttpl/detail",{id:this.id},!0,e=>{"200000"===e.ret?(t=JSON.parse(e.data.conf),this.conf.img=JSON.parse(t.img),this.conf.commonImg=JSON.parse(t.commonImg),this.conf.description=e.data.note,this.conf.title=e.data.name,this.conf.id=e.data.id,this.conf.share=JSON.parse(t.share),"未投放"==e.data.statusName?this.isPublish=!1:this.isPublish=!0):this.$message.error(e.message)}):this.edit&&this.$request.post("/api/saotx/act/pubTpl",{actCode:this.edit},!0,e=>{"200000"===e.ret?(t=JSON.parse(e.data.conf),this.conf.actCode=e.data.actCode,this.conf.img=JSON.parse(t.img),this.conf.commonImg=JSON.parse(t.commonImg),this.conf.description=t.desc,this.conf.title=t.title,this.conf.id=e.data.id,this.conf.share=JSON.parse(t.share),"未投放"==e.data.statusName?this.isPublish=!1:this.isPublish=!0):this.$message.error(e.message)})},switchMenu(t,e){switch(this.page=t,t){case"1":this.editData=[this.conf.img.normal.bg,this.conf.img.normal.redPacket];break;case"2":this.editData=[this.conf.img.rules.bg,this.conf.img.rules.rulesBtn,this.conf.img.rules.btnImg];break;case"3":this.editData=[this.conf.img.downCount.bg,this.conf.img.downCount.num1,this.conf.img.downCount.num2,this.conf.img.downCount.num3];break;case"6":this.editData=[this.conf.img.tips.winningImg,this.conf.img.tips.drawBtn1];break;case"7":this.editData=[this.conf.img.tips.notWinImg,this.conf.img.tips.drawBtn2];break;case"8":this.editData=[this.conf.img.tips.tipsImg,this.conf.img.tips.tipsBtn1,this.conf.img.tips.tipsBtn2];break;case"9":this.editData=[this.conf.img.share.icon]}},titleInput(t){let e=t.value;this.conf.title=e||""},descInput(t){let e=t.value;e?this.conf.description=e:this.description=""},editPic(t){let e=t.index||"",a=t.url;if(a)switch(this.page){case"1":this.conf.img.normal[e].url=a;break;case"2":this.conf.img.rules[e].url=a;break;case"3":this.conf.img.downCount[e].url=a;break;case"6":case"7":case"8":this.conf.img.tips[e].url=a;break;case"9":this.conf.img.share.icon.url=a}},saveActTpl(){if(!this.conf.title)return this.$message.warning("请输入模板名称");this.conf.conf.img=JSON.stringify(this.conf.img),this.conf.conf.commonImg=JSON.stringify(this.conf.commonImg),this.conf.conf.title=this.conf.title,this.conf.conf.desc=this.conf.description,this.conf.conf.share=JSON.stringify(this.conf.share),this.conf.conf=JSON.stringify(this.conf.conf),this.conf.name=this.conf.title,this.conf.note=this.conf.description,this.edit?this.$request.post("/api/saotx/act/mpubTpl",this.conf,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/saotx/acttpl/saveOrModify",this.conf,!0,t=>{if("200000"===t.ret)return this.isPublish?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("新建活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-menu",{attrs:{mode:"horizontal","default-active":t.defaultActive},on:{select:t.switchMenu}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("首页")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[t._v("活动预热页")]),t._v(" "),a("el-menu-item",{attrs:{index:"3"}},[t._v("活动倒计时")]),t._v(" "),a("el-menu-item",{attrs:{index:"4"}},[t._v("活动说明")]),t._v(" "),a("el-menu-item",{attrs:{index:"5"}},[t._v("我的奖品")]),t._v(" "),a("el-menu-item",{attrs:{index:"6"}},[t._v("中奖页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"7"}},[t._v("未中奖页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"8"}},[t._v("提示语弹窗")]),t._v(" "),a("el-menu-item",{attrs:{index:"9"}},[t._v("分享")])],1),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"40px"}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("phone-model",{attrs:{title:t.conf.title,commonImg:t.conf.commonImg,shareConf:t.conf.share,titleLength:30,page:t.page,imgData:t.conf.img}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("activity-info",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page == 1"}],attrs:{title:t.conf.title,desc:t.conf.description},on:{titleInput:t.titleInput,descInput:t.descInput}}),t._v(" "),a("activity-image-editor",{directives:[{name:"show",rawName:"v-show",value:4!=t.page&&5!=t.page&&9!=t.page,expression:"page != 4 && page != 5 && page != 9"}],attrs:{editData:t.editData,type:t.editType,itemRepeat:t.itemRepeat},on:{picChange:t.editPic}}),t._v(" "),a("share-conf",{directives:[{name:"show",rawName:"v-show",value:9==t.page,expression:"page == 9"}],attrs:{editData:t.editData,shareConf:t.conf.share},on:{shareChange:t.editPic}})],1)],1),t._v(" "),a("div",{staticClass:"btn mt20"},[a("p",[t._v("\n        是否投放: "),a("el-switch",{model:{value:t.isPublish,callback:function(e){t.isPublish=e},expression:"isPublish"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,m,!1,function(t){a("34yX")},"data-v-355991d2",null);e.default=p.exports},"S+u4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},data:()=>({listData:[],orderStatusData:[],form:{startTime:"",endTime:"",status:"",orderType:3,orderId:"",awardName:"",userName:"",jmcnl:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),name:"ActOrderPage",created(){this.init()},watch:{},methods:{init(){this.orderStatusList(),this.getlistData()},orderStatusList(){this.$request.post("/sc/saotx/mall/ActorderStatusMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.orderStatusData=t.data)})},getlistData(){this.$request.post("/sc/saotx/mall/order/actList",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},queryData:function(t){this.getlistData()},currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},initPagination(t){t&&(this.pagination.total=t.count)},resetData:function(t){this.form={startTime:"",endTime:"",status:"",orderType:3,orderId:"",awardName:"",userName:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){this.$message({type:"success",message:t}),this.getlistData()},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/sc/saotx/mall/order/exportActOrder",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)},ObjectPageDatail(t){this.$router.push({path:"/Orders/mall/ActOrderPageDetail?orderCode="+t})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/积分活动订单")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"订单号:",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:t.form.orderId,callback:function(e){t.$set(t.form,"orderId",e)},expression:"form.orderId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动名称:",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:t.form.jmcnl,callback:function(e){t.$set(t.form,"jmcnl",e)},expression:"form.jmcnl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号:",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"时间段:",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"订单状态:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.orderStatusData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/sc/saotx/mall/order/importActOrders",headers:t.headers,data:t.addPool,"before-upload":t.handlerSourceFileBUpload,"on-success":t.handleSourceFileSuccess,"on-remove":t.handleSourceFileRemove,"file-list":t.sourceFiles,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("导入物流信息")])],1)],1),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s((t.form.pageNo-1)*t.form.pageSize+e.$index+1)+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.physicalOrVirtual?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.ObjectPageDatail(e.row.orderId)}}},[t._v("查看详情")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jmcnl",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lmobile",label:"中奖人手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"中奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.createTime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态\t"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"待发货":2==e.row.status?"已发货":0==e.row.status?"待领取":"已完成"))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("l007")},"data-v-2e8ddc79",null);e.default=l.exports},"S/fb":function(t,e){},SfKy:function(t,e){},"Syx/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("G0J2"),i={props:["form","tplCode","id","clone"],components:{quillEditor:s.quillEditor},data(){return{editorOption:{modules:{toolbar:[[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike",,"blockquote"],[{color:[]},{background:[]},{align:[]}]]},placeholder:"请输入活动说明"},idxSelect:{},confData:{id:"",actCode:"",actDesc:"",actName:"",banner:"",form:this.form,idx:"",note:"",stimeStr:"",etimeStr:"",showStatus:0,tplCode:"",extInfo:"",status:1,selectBrand:[],selectProductList:[],selectProvList:[],selectCityList:[],selectDistrictList:[],link:""},statusDisabled:!1,strategyArr:[],extInfo:{},confRules:{actName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],note:[{required:!0,message:"请输入活动描述",trigger:"blur"}],date:[{required:!0,validator:(t,e,a)=>{this.confData.stimeStr&&this.confData.etimeStr?this.confData.stimeStr>=this.confData.etimeStr?a(new Error("开始时间必须小于结束时间")):a():a(new Error("请选择活动时间"))},trigger:"change"}],idx:[{required:!0,validator:(t,e,a)=>{"0"==e?a(new Error("请选择活动优先级")):a()},trigger:"change"}],banner:[{required:!0,validator:(t,e,a)=>{this.confData.banner?a():a(new Error("请选择活动图片"))}}],desc:[{required:!0,validator:(t,e,a)=>{this.confData.actDesc?a():a(new Error("请输入活动说明"))}}],selectProductList:[{required:!0,validator:(t,e,a)=>{this.confData.selectProductList&&this.confData.selectProductList.length>0?a():a(new Error("请选择品牌规格"))}}],selectCityList:[{required:!0,validator:(t,e,a)=>{this.confData.selectCityList&&this.confData.selectCityList.length>0?a():a(new Error("请选择地区"))}}],link:[{required:!0,message:"请输入活动链接",trigger:"blur"}]},timeDisable:!1,uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token")},stepActive:0,brandList:[],productList:[],provList:[{code:"000000",name:"全国"}],cityList:[],districtList:[],allProv:[],allCity:{},allDistrict:{},initProd:!1,initCity:!1,initDistrict:!1}},created(){this.id&&this.id>0?(this.initProd=!0,this.initCity=!0,this.initDistrict=!0,this.getDetail()):this.initAjax()},methods:{initAjax(){this.getIdxSelect(),this.getBrandList(),this.getAllRegions()},getIdxSelect(){this.$request.post("/api/saotx/act/idxSelect",{},!0,t=>{if("200000"===t.ret)return this.idxSelect=t.data})},getAllRegions(){this.$request.post("/api/saotx/dim/allRegions",{withRight:!0},!0,t=>{if("200000"==t.ret){let e=t.data||{};this.allProv=e.province||[],this.allCity=e.city||{},this.allDistrict=e.district||{},this.provList=this.provList.concat(this.allProv);let a=this.strategyArr[0];a&&(this.confData.selectProvList=a.areas.provinceArr||[]),this.initCity&&this.getCityList()}else this.$message.error(t.messgae)})},getCityList(){if(this.districtList=[],this.confData.selectCityList=[],this.confData.selectDistrictList=[],this.confData.selectProvList.length>0){if("000000"==this.confData.selectProvList[this.confData.selectProvList.length-1])return this.confData.selectProvList=["000000"],this.cityList=[{code:"000000",name:"全国"}],void(this.initCity&&(this.confData.selectCityList=["000000"],this.initCity=!1));this.confData.selectProvList.length>1&&"000000"==this.confData.selectProvList[0]&&this.confData.selectProvList.shift(),this.cityList=[];let t=[];for(let e=0;e<this.confData.selectProvList.length;e++){let a=this.confData.selectProvList[e];t=t.concat(this.allCity[a])}this.cityList=t}else this.cityList=[];if(this.initCity){let t=this.strategyArr[0];t&&(this.confData.selectCityList=t.areas.cityArr||[]),this.initCity=!1}this.initDistrict&&this.getDistrictList()},getDistrictList(){if(this.districtList=[],this.confData.selectDistrictList=[],this.confData.selectProvList.length>0){if("000000"==this.confData.selectCityList[this.confData.selectCityList.length-1])return this.confData.selectCityList=["000000"],void(this.districtList=[{code:"000000",name:"全国"}]);this.districtList=[];let t=[];for(let e=0;e<this.confData.selectCityList.length;e++){let a=this.confData.selectCityList[e];t=t.concat(this.allDistrict[a])}this.districtList=t}else this.districtList=[];if(this.initDistrict){let t=this.strategyArr[0];t&&(this.confData.selectDistrictList=t.areas.districtArr||[]),this.initDistrict=!1}},getBrandList(){this.$request.post("/api/saotx/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"!=t.ret)this.$message.error(t.message);else{this.brandList=t.data.list||[];let e=this.strategyArr[0];e&&(this.confData.selectBrand=e.brandArr||[],this.initProd&&this.getProductList())}})},getProductList(){this.$request.post("/api/saotx/prod/list",{brandCodeArr:this.confData.selectBrand,pageSize:"-1"},!0,t=>{if("200000"!=t.ret)this.$message.error(t.message);else if(this.productList=t.data.list||[],this.initProd){let t=this.strategyArr[0];t&&(this.confData.selectProductList=t.snArr||[]),this.initProd=!1}})},copyDetailAttr(t){1==t.status&&(this.statusDisabled=!0),t.extInfo&&(this.extInfo=JSON.parse(t.extInfo)),this.confData={id:t.id||"",actCode:t.actCode||"",actDesc:t.actDesc||"",actName:t.actName||"",banner:t.banner||"",form:this.form,idx:t.idx+""||"",note:t.note||"",stimeStr:t.stimeStr||"",etimeStr:t.etimeStr||"",showStatus:t.showStatus||1,tplCode:t.tplCode||"",extInfo:t.extInfo||"",status:t.status||2,selectBrand:[],selectProductList:[],selectProvList:[],selectCityList:[],selectDistrictList:[],link:this.extInfo.link||""},"1"==this.clone&&(this.confData.id="",this.confData.actCode=""),t.stimeStr&&t.etimeStr&&this.handleDisableTime()},getDetail(){this.$request.post("/api/saotx/act/detail",{id:this.id},!0,t=>{if("200000"==t.ret)return this.copyDetailAttr(t.data.act),this.strategyArr=t.data.strategyArr,void this.initAjax();this.$message.error(t.messgae)})},handleDisableTime(){(new Date).getTime()>=new Date(this.confData.stimeStr).getTime()&&(this.timeDisable=!0)},upBannerImg(t){if("200000"===t.ret)return this.confData.banner=t.data.accessUrl,void this.$refs.actSetConfRef.validateField("banner",t=>{});this.$message.error(t.message)},onEditorBlur(){this.$refs.actSetConfRef.validateField("desc",t=>{})},confirmSubmit(){this.$refs.actSetConfRef.validate(t=>{if(t){this.extInfo={link:this.confData.link},this.confData.extInfo=JSON.stringify(this.extInfo);let t={};t.act=this.confData;let e={tf:{},tfType:"common",snArr:this.confData.selectProductList,areas:{provinceArr:this.confData.selectProvList,cityArr:this.confData.selectCityList,districtArr:this.confData.selectDistrictList}},a=this.strategyArr[0];a&&(e.tf.id=a.tf.id,e.tf.tfCode=a.tf.tfCode),t.strategyArr=[],t.strategyArr.push(e),this.$request.post("/api/saotx/act/somtfSelf",t,!0,t=>{"200000"==t.ret?(this.$message({type:"success",message:"操作成功!"}),this.$router.push({path:"/market/actMgr"})):this.$message.error(t.message)})}})},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),e&&a}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actSetConf-container"},[a("el-card",[a("el-form",{ref:"actSetConfRef",attrs:{model:t.confData,"label-width":"150px",rules:t.confRules}},[a("el-form-item",{attrs:{label:"活动名称：",prop:"actName"}},[a("el-input",{attrs:{maxLength:"15",placeholder:"请输入活动名称，15字以内"},model:{value:t.confData.actName,callback:function(e){t.$set(t.confData,"actName",e)},expression:"confData.actName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动描述：",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:3,resize:"none",maxLength:"15",placeholder:"请输入活动描述，15字以内"},model:{value:t.confData.note,callback:function(e){t.$set(t.confData,"note",e)},expression:"confData.note"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"优先级：",prop:"idx"}},[a("el-select",{staticClass:"select-one",attrs:{placeholder:"请选择"},model:{value:t.confData.idx,callback:function(e){t.$set(t.confData,"idx",e)},expression:"confData.idx"}},t._l(t.idxSelect,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"活动时间：",prop:"date"}},[a("el-date-picker",{attrs:{disabled:t.timeDisable,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.confData.stimeStr,callback:function(e){t.$set(t.confData,"stimeStr",e)},expression:"confData.stimeStr"}}),t._v("\n        至\n        "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.confData.etimeStr,callback:function(e){t.$set(t.confData,"etimeStr",e)},expression:"confData.etimeStr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动图片：",prop:"banner"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":t.beforeAvatarUpload,action:t.uploadURL,headers:t.headerObj,"on-success":t.upBannerImg,"show-file-list":!1}},[t.confData.banner?a("img",{staticClass:"avatar",attrs:{src:t.confData.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传图片的最佳尺寸：750像素*160像素；格式png、jpg；大小不超过2M")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"活动说明：",prop:"desc"}},[a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption,placeholder:"请输入活动说明，300字以内"},on:{blur:function(e){t.onEditorBlur(e)}},model:{value:t.confData.actDesc,callback:function(e){t.$set(t.confData,"actDesc",e)},expression:"confData.actDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌规格：",prop:"selectProductList"}},[a("el-select",{staticClass:"select-two",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getProductList},model:{value:t.confData.selectBrand,callback:function(e){t.$set(t.confData,"selectBrand",e)},expression:"confData.selectBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{staticClass:"select-two",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.restrictSonBrand},model:{value:t.confData.selectProductList,callback:function(e){t.$set(t.confData,"selectProductList",e)},expression:"confData.selectProductList"}},t._l(t.productList,function(t){return a("el-option",{key:t.id,attrs:{label:t.allName,value:t.sn}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"地区：",prop:"selectCityList"}},[a("el-select",{staticClass:"select-three",attrs:{size:"small",multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getCityList},model:{value:t.confData.selectProvList,callback:function(e){t.$set(t.confData,"selectProvList",e)},expression:"confData.selectProvList"}},t._l(t.provList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{staticClass:"select-three",attrs:{size:"small",multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getDistrictList},model:{value:t.confData.selectCityList,callback:function(e){t.$set(t.confData,"selectCityList",e)},expression:"confData.selectCityList"}},t._l(t.cityList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{staticClass:"select-three",attrs:{size:"small",multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},model:{value:t.confData.selectDistrictList,callback:function(e){t.$set(t.confData,"selectDistrictList",e)},expression:"confData.selectDistrictList"}},t._l(t.districtList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"活动链接：",prop:"link"}},[a("el-input",{attrs:{placeholder:"请输入活动链接"},model:{value:t.confData.link,callback:function(e){t.$set(t.confData,"link",e)},expression:"confData.link"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否在落地页显示："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.confData.showStatus,callback:function(e){t.$set(t.confData,"showStatus",e)},expression:"confData.showStatus"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否立即发布："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":2,disabled:t.statusDisabled},model:{value:t.confData.status,callback:function(e){t.$set(t.confData,"status",e)},expression:"confData.status"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(e){t.$router.push("/market/actMgr")}}},[t._v("返回列表")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("hwnb")},"data-v-da3c795e",null);e.default=l.exports},TKD6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data(){return{defaultConf:{title:null,description:"",ratio:.4,img:this.getAllImage()},activeName:"home",addActParams:{conf:"",form:"act-102",id:"",name:"",note:""},addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}},computed:{},created(){this.getActDetail()},methods:{getImage(t,e){return"http://qoss.qrmkt.cn/new_platform/pc_front/"+t+"."+(e=e||this.suffix)},getStyle(t,e,a,s){var i=t.toString().indexOf("%")>-1,r=e.toString().indexOf("%")>-1;return{style:{"max-width":i?t:Math.floor(.4*t)+"px","max-height":r?e:Math.floor(.4*e)+"px",transform:"translate("+Math.floor(.4*a)+"px,"+Math.floor(.4*s)+"px)"},"c-style":{"max-width":i?t:Math.floor(.5*t)+"px","max-height":r?e:Math.floor(.5*e)+"px",transform:"translate("+Math.floor(.5*a)+"px,"+Math.floor(.5*s)+"px)"}}},getAllImage(){var t={},e=[[111,127],[130,146],[123,124],[125,144],[114,112],[147,144]],a=[[41,614],[207,530],[317,409],[348,615],[484,499],[547,604]];t.kists=[];for(var s=1;s<=e.length;s++){var i=e[s-1][0],r=e[s-1][1],l=a[s-1][0],o=a[s-1][1];t["yuanbao0"+s]={url:this.getImage("yuanbao0"+s,"png"),width:i,height:r,left:l,top:o,style:this.getStyle(i,r,l,o).style,"c-style":this.getStyle(i,r,l,o)["c-style"]},t.kists.push(t["yuanbao0"+s])}return t.bg={url:this.getImage("yuanbao-bg","jpg"),width:"100%",height:"100%",left:0,top:0,style:this.getStyle("100%","100%",0,0)},t.title={url:this.getImage("yuanbao-title","png"),width:586,height:244,left:83,top:57,style:this.getStyle(586,244,83,57).style,"c-style":this.getStyle(586,244,83,57)["c-style"]},t.tips={url:this.getImage("JGG_HDJN","png"),width:120,height:120,left:638,top:38,style:this.getStyle(120,120,638,38).style,"c-style":this.getStyle(120,120,638,38)["c-style"]},t.award={url:"http://qoss.qrmkt.cn/new_platform/yuanbao-award-btn.png"},t.award_bg={url:"http://qoss.qrmkt.cn/new_platform/yuanbao-award-bg.png"},t.noAward={url:"http://qoss.qrmkt.cn/new_platform/yuanbao-no-award-bg.png"},t.zxNoAwardBtn={url:"http://qoss.qrmkt.cn/new_platform/yuanbao-no-award-btn.png"},console.log(t),t},getActDetail(){this.id?this.$request.post("/api/saotx/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/saotx/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.defaultConf.img.bg.url=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.title.url=t.data.accessUrl;this.$message.error(t.message)},upTipsImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.tips.url=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upGameImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img["yuanbao0"+[this.gameIndex+1]].url=t.data.accessUrl,this.defaultConf.img.kists[this.gameIndex].url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.award.url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBg(t){if("200000"===t.ret)return this.defaultConf.img.award_bg.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImg(t){if("200000"===t.ret)return this.defaultConf.img.noAward.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.zxNoAwardBtn.url=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.defaultConf.title=this.addActParams.name,this.defaultConf.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.defaultConf),this.edit?this.$request.post("/api/saotx/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/saotx/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"kits"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),t._l(t.defaultConf.img.kists,function(e){return a("img",{key:e.key,staticClass:"game-con",style:e.style,attrs:{src:e.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=4}}})})],2),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("活动锦囊：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipsImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},t._l(t.defaultConf.img.kists,function(e,s){return a("div",{key:e.key},[a("p",{staticClass:"img-title"},[t._v(t._s("元宝"+(s+1)+":"))]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:e.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upGameImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.getGameIndex(s)}}},[t._v("更换图片")])],1)],1)])})):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 586*244px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 120*120px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 125*125px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con award-con"},[a("img",{staticClass:"award-alert",attrs:{src:t.defaultConf.img.award_bg.url,alt:""}}),t._v(" "),a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:"http://qoss.qrmkt.cn/new_platform/award_img.png",alt:""}}),t._v(" "),a("div",{staticClass:"award-text"},[a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.award.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.award_bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.award.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con award-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"award-alert",attrs:{src:t.defaultConf.img.noAward.url,alt:""}}),t._v(" "),a("div",{staticClass:"award-no-text"},[a("h3",[t._v("很遗憾，未中奖")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖图片：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.noAward.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖按钮：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放:\n\t\t\t\t\t\t"),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("gkOA")},"data-v-1a5cb2a3",null);e.default=r.exports},XIUx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["orderCode"],name:"ZjOrderPageDetail",data:()=>({allProvinceData:[],allCityData:[],allDistrictData:[],selectallPro:"",selectallCity:"",selectallDistrict:"",formDetail:{orderId:"",create_time:"",category:"",awardName:"",score:"",username:"",mobile:"",province:"",city:"",district:"",address:"",status:0,ctime:"",orderStatus:"",orderWLoad:"",waybill:"",finish_time:"",orderFLoad:""}}),created(){this.getObjectPageDetail(this.orderCode),this.init()},watch:{selectallPro(t,e){t&&t!=e&&(this.formDetail.province=t,this.allMoreRightRegionList(t,2))},selectallCity(t,e){t&&t!=e&&(this.formDetail.city=t,this.allMoreRightRegionList(t,3))},selectallDistrict(t,e){t&&t!=e&&(this.formDetail.district=t)}},methods:{init(){this.allRightRegionList()},allRightRegionList(){this.$request.post("/api/saotx/dim/regionByPCode",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allProvinceData=t.data)})},allMoreRightRegionList(t,e){this.$request.post("/api/saotx/dim/regionByPCode",{parentCode:t},!0,t=>{"200000"===t.ret&&(2==e&&(this.allCityData=t.data),3==e&&(this.allDistrictData=t.data))})},submitFormSave(){let t={userName:this.formDetail.username,mobile:this.formDetail.mobile,province:this.formDetail.province,city:this.formDetail.city,district:this.formDetail.district,adddress:this.formDetail.address,orderId:this.formDetail.orderId};this.$request.post("/sc/saotx/mall/order/modifyReceiptInfo",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnObjectPage()):this.$message({message:t.message,type:"warning"})},t=>{})},returnObjectPage(){this.$router.push({path:"/Orders/mall/zj"})},getObjectPageDetail(t){this.$request.post("/sc/saotx/mall/order/selfOrderDetail",{orderId:t},!0,t=>{"200000"==t.ret&&(console.log(t.data),this.formDetail.orderId=t.data.orderInfo.orderid,this.formDetail.create_time=this.formatDateTime(t.data.orderInfo.create_time),this.formDetail.category=t.data.orderInfo.category,this.formDetail.awardName=t.data.orderInfo.awardName,this.formDetail.score=t.data.orderInfo.score,this.formDetail.status=t.data.orderInfo.status,this.formDetail.username=t.data.ReceiptInfo.username,this.formDetail.mobile=t.data.ReceiptInfo.mobile,this.formDetail.province=t.data.ReceiptInfo.province,this.selectallPro=t.data.ReceiptInfo.province+"",this.formDetail.city=t.data.ReceiptInfo.city,this.selectallCity=t.data.ReceiptInfo.city+"",this.formDetail.district=t.data.ReceiptInfo.district,this.selectallDistrict=t.data.ReceiptInfo.district+"",this.formDetail.address=t.data.ReceiptInfo.address,""!=t.data.orderTrackingInfo.ctime&&(this.formDetail.ctime=this.formatDateTime(t.data.orderTrackingInfo.ctime)),this.formDetail.orderStatus=t.data.orderTrackingInfo.orderStatus,this.formDetail.orderWLoad=t.data.orderTrackingInfo.orderWLoad,this.formDetail.waybill=t.data.orderTrackingInfo.waybill,this.formDetail.finish_time=this.formatDateTime(t.data.orderTrackingInfo.finish_time),this.formDetail.orderFLoad=t.data.orderTrackingInfo.orderFLoad)})},formatDateTime(t){if(null!=t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var i=e.getDate();i=i<10?"0"+i:i;var r=e.getHours();r=r<10?"0"+r:r;var l=e.getMinutes(),o=e.getSeconds();return a+"-"+s+"-"+i+" "+r+":"+(l=l<10?"0"+l:l)+":"+(o=o<10?"0"+o:o)}}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/自建订单明细/订单明细查询")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("div",[a("h1",[t._v("订单信息")])]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formDetail}},[a("el-row",[a("el-form-item",{attrs:{size:"small",label:"订单号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderId,callback:function(e){t.$set(t.formDetail,"orderId",e)},expression:"formDetail.orderId"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.create_time,callback:function(e){t.$set(t.formDetail,"create_time",e)},expression:"formDetail.create_time"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"商品名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.awardName,callback:function(e){t.$set(t.formDetail,"awardName",e)},expression:"formDetail.awardName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.category,callback:function(e){t.$set(t.formDetail,"category",e)},expression:"formDetail.category"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"兑换值:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.score,callback:function(e){t.$set(t.formDetail,"score",e)},expression:"formDetail.score"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("收货人信息")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"联系人姓名:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:0!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.username,callback:function(e){t.$set(t.formDetail,"username",e)},expression:"formDetail.username"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"联系人电话:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:0!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.mobile,callback:function(e){t.$set(t.formDetail,"mobile",e)},expression:"formDetail.mobile"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"收货地址:省:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:0!=t.formDetail.status},model:{value:t.selectallPro,callback:function(e){t.selectallPro=e},expression:"selectallPro"}},t._l(t.allProvinceData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"市:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:0!=t.formDetail.status},model:{value:t.selectallCity,callback:function(e){t.selectallCity=e},expression:"selectallCity"}},t._l(t.allCityData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"区:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:0!=t.formDetail.status},model:{value:t.selectallDistrict,callback:function(e){t.selectallDistrict=e},expression:"selectallDistrict"}},t._l(t.allDistrictData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"详细地址:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:0!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.address,callback:function(e){t.$set(t.formDetail,"address",e)},expression:"formDetail.address"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("订单跟踪")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.create_time,callback:function(e){t.$set(t.formDetail,"create_time",e)},expression:"formDetail.create_time"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderStatus,callback:function(e){t.$set(t.formDetail,"orderStatus",e)},expression:"formDetail.orderStatus"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"发货时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.ctime,callback:function(e){t.$set(t.formDetail,"ctime",e)},expression:"formDetail.ctime"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderWLoad,callback:function(e){t.$set(t.formDetail,"orderWLoad",e)},expression:"formDetail.orderWLoad"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"物流号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.waybill,callback:function(e){t.$set(t.formDetail,"waybill",e)},expression:"formDetail.waybill"}})],1)],1),t._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",disabled:0!=t.formDetail.status},on:{click:t.submitFormSave}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.returnObjectPage}},[t._v("返回列表")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("3Oyg")},"data-v-8fe75b76",null);e.default=r.exports},YkGI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data(){return{defaultConf:{title:null,description:"",ratio:.4,img:this.getAllImage()},activeName:"home",addActParams:{conf:"",form:"act-101",id:"",name:"",note:""},addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}},computed:{},created(){this.getActDetail()},methods:{getImage(t,e){return"http://qoss.qrmkt.cn/new_platform/pc_front/"+t+"."+(e=e||this.suffix)},getNewImage:function(t,e){return"http://qoss.qrmkt.cn/new_platform/"+t+"."+(e=e||this.suffix)},getStyle(t,e,a,s){var i=t.toString().indexOf("%")>-1,r=e.toString().indexOf("%")>-1;return{style:{"max-width":i?t:Math.floor(.4*t)+"px","max-height":r?e:Math.floor(.4*e)+"px",transform:"translate("+Math.floor(.4*a)+"px,"+Math.floor(.4*s)+"px)"},"c-style":{"max-width":i?t:Math.floor(.5*t)+"px","max-height":r?e:Math.floor(.5*e)+"px",transform:"translate("+Math.floor(.5*a)+"px,"+Math.floor(.5*s)+"px)"}}},getAllImage(){var t={},e=[[195,162],[130,146],[123,124],[125,144],[114,112],[147,144]],a=[[70,632],[265,632],[460,632],[70,794],[265,794],[460,794],[70,956],[265,956],[460,956]];t.kists=[];for(var s=1;s<=a.length;s++){var i=e[0][0],r=e[0][1],l=a[s-1][0],o=a[s-1][1],n=0;1==s||2==s||3==s||7==s?n=s:6==s?n=4:9==s?n=5:8==s?n=6:4==s?n=8:5==s&&(n=9);5!=s?(t["item0"+s]={url:this.getNewImage("item_bg","png"),width:i,height:r,left:l,top:o,pos:n,style:this.getStyle(i,r,l,o).style,"c-style":this.getStyle(i,r,l,o)["c-style"]},t.kists.push(t["item0"+s])):(t["item0"+s]={url:this.getNewImage("jgg_ljcj","png"),width:i,height:r,left:l,top:o,pos:n,style:this.getStyle(i,r,l,o).style,"c-style":this.getStyle(i,r,l,o)["c-style"]},t.kists.push(t["item0"+s]))}return t.translateStyle={url:this.getNewImage("translateStyle","png"),width:"100%",height:"100%",left:0,top:0,style:this.getStyle("100%","100%",0,0)},t.bg={url:this.getNewImage("jiugongge-bg","png"),width:"100%",height:"100%",left:0,top:0,style:this.getStyle("100%","100%",0,0)},t.title={url:this.getNewImage("jgg-banner","png"),width:690,height:360,left:63,top:130,style:this.getStyle(690,360,63,130).style,"c-style":this.getStyle(690,360,63,130)["c-style"]},t.subTitle={url:this.getImage("JGG_title_text","png"),width:680,height:100,left:80,top:500,style:this.getStyle(550,100,80,500).style,"c-style":this.getStyle(550,100,80,500)["c-style"]},t.tips={url:this.getImage("JGG_HDJN","png"),width:120,height:120,left:638,top:38,style:this.getStyle(120,120,638,38).style,"c-style":this.getStyle(120,120,638,38)["c-style"]},t.yxContentBg={url:this.getImage("content-bg","png"),width:655,height:552,left:35,top:600,style:this.getStyle(655,552,35,600).style,"c-style":this.getStyle(655,552,35,600)["c-style"]},t.award={url:this.getImage("jiugongge_award_btn","png")},t.award_bg={url:this.getImage("jiugongge_award_bg","png")},t.noAward={url:this.getNewImage("no-award-alert","png")},t.zxNoAwardBtn={url:this.getNewImage("no-award-btn","png")},console.log(t),t},getActDetail(){this.id?this.$request.post("/api/saotx/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/saotx/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.defaultConf.img.bg.url=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.title.url=t.data.accessUrl;this.$message.error(t.message)},upTransformImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.translateStyle.url=t.data.accessUrl;this.$message.error(t.message)},upSubTitleImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.subTitle.url=t.data.accessUrl;this.$message.error(t.message)},upTipsImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.tips.url=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upBGridImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.yxContentBg.url=t.data.accessUrl;this.$message.error(t.message)},upGameImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img["item0"+[this.gameIndex+1]].url=t.data.accessUrl,this.defaultConf.img.kists[this.gameIndex].url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.award.url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBg(t){if("200000"===t.ret)return this.defaultConf.img.award_bg.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImg(t){if("200000"===t.ret)return this.defaultConf.img.noAward.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.zxNoAwardBtn.url=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.defaultConf.title=this.addActParams.name,this.defaultConf.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.defaultConf),this.edit?this.$request.post("/api/saotx/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/saotx/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content"},[a("img",{staticClass:"bg",style:t.defaultConf.img.bg.style,attrs:{src:t.defaultConf.img.bg.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}}),t._v(" "),a("img",{staticClass:"top",style:t.defaultConf.img.title.style,attrs:{src:t.defaultConf.img.title.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}}),t._v(" "),a("img",{staticClass:"subTitle",style:t.defaultConf.img.subTitle.style,attrs:{src:t.defaultConf.img.subTitle.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}}),t._v(" "),a("img",{staticClass:"kits",style:t.defaultConf.img.tips.style,attrs:{src:t.defaultConf.img.tips.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=4}}}),t._v(" "),a("img",{staticClass:"game-con",style:t.defaultConf.img.yxContentBg.style,attrs:{src:t.defaultConf.img.yxContentBg.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=5}}}),t._v(" "),t._l(t.defaultConf.img.kists,function(e){return a("img",{key:e.key,staticClass:"game-con",style:e.style,attrs:{src:e.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=6}}})})],2),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-subTitle-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.subTitle.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upSubTitleImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("活动锦囊：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipsImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("操作区背景图：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.yxContentBg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBGridImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("方格反面:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.translateStyle.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTransformImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),t._l(t.defaultConf.img.kists,function(e,s){return a("div",{key:e.key},[a("p",{staticClass:"img-title"},[t._v(t._s(4==s?"抽奖按钮:":"方格"+(s+1)+":"))]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:e.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upGameImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.getGameIndex(s)}}},[t._v("更换图片")])],1)],1)])})],2):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 690*360px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 680*100px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 120*120px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 655x552px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 196*162*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con award-con"},[a("img",{staticClass:"award-alert",attrs:{src:t.defaultConf.img.award_bg.url,alt:""}}),t._v(" "),a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:"http://qoss.qrmkt.cn/new_platform/award_img.png",alt:""}}),t._v(" "),a("div",{staticClass:"award-text"},[a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.award.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con alert-con"},[a("img",{attrs:{src:t.defaultConf.img.award_bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]),t._v(" "),a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.award.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con award-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"award-alert",attrs:{src:t.defaultConf.img.noAward.url,alt:""}}),t._v(" "),a("div",{staticClass:"award-no-text"},[a("h3",[t._v("很遗憾，未中奖")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖图片：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.noAward.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖按钮：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("808d")},"data-v-f17a5e6c",null);e.default=r.exports},Z833:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["awae","prizeType","nWin","isRed","hide"],data(){var t=(t,e,a)=>{};return{prizeList:this.prizeType,rules:{n:[{required:!0,validator:t}],type:[{required:!0,validator:t}],name:[{required:!0,validator:t}],probability:[{required:!0,validator:t}],redNum:[{required:!0,validator:t}],pool:[{required:!0,validator:t}],putNum:[{required:!0,validator:t}],intTotal:[{required:!0,validator:t}],redTotal:[{required:!0,validator:t}]},title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,integralList:[],integralTotal:0,integralVisible:!1}},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return this.awae.redMoney*this.awae.totalNum},set:function(t){}}},created(){},methods:{selectPrize(t){this.awae.awardPic=t.pic,this.awae.poolName=t.name,this.awae.poolId=t.id,this.listVisible=!1},resetPrize(){this.awae.awardPic="",this.awae.prizeName="",this.awae.poolName="",this.awae.totalNum="",this.awae.probability="",this.awae.redMoney="",this.awae.redTotalMoney="",this.awae.integral=""},getList(){"1"==this.awae.awardType?(this.params.metraFlag="object",this.title="选择实物"):"2"==this.awae.awardType?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==this.awae.awardType?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==this.awae.awardType&&(this.params.metraFlag="integral",this.title="选择积分"),this.$request.post("/api/saotx/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})},giveIntegral(){this.$request.post("/api/saotx/metra/list",{metraFlag:"integral",pageNo:1,pageSize:10,status:1},!0,t=>{if("200000"===t.ret)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.message)})},selectIntegral(t){this.awae.integralPool=t.id,this.integralVisible=!1},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},resetScore(t){t?this.awae.giveScore=1:(this.awae.integralPool=null,this.awae.integral="",this.awae.giveScore=0)},resetWarn(t){t||(this.awae.hasWarn=null,this.awae.warnValue="")},resetPdMaxOut(t){t||(this.awae.pdMaxOut="")},countRedTotal(t){const e=this.awae.redMoney,a=this.awae.totalNum;if(0!=e&&0!=a)return this.awae.redTotalMoney=e*a},addRepertory(){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:t})=>{if(0==t)return this.$message.error("数字不能为0");this.$request.post("/api/saotx/act/addNum",{id:this.awae.id,increment:t},!0,e=>{"200000"===e.ret?(this.$message.success("增库成功"),this.awae.totalNum+=Number(t)):this.$message.error(e.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pond"},[a("el-form",{ref:"form",attrs:{model:t.awae,"label-width":"100px",rules:t.rules}},[t.nWin?a("el-form-item",{attrs:{label:"N次必中:",prop:"n"}},[t._v("\n      用户第 "),a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.n,callback:function(e){t.$set(t.awae,"n",e)},expression:"awae.n"}}),t._v(" 个抽奖必中\n    ")],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"奖品类型:",prop:"type"}},[a("el-select",{attrs:{disabled:!!t.awae.id,placeholder:"请选择"},on:{change:t.resetPrize},model:{value:t.awae.awardType,callback:function(e){t.$set(t.awae,"awardType",e)},expression:"awae.awardType"}},t._l(t.prizeList,function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!!t.awae.id,placeholder:"请输入奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),"1"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{staticStyle:{border:"1px dotted #ccc"},attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e(),t._v(" "),a("span",[t._v(t._s(t.awae.poolName))])],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1)]:t._e(),t._v(" "),"2"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){t.awae.id}}}):t._e(),t._v(" "),a("span",[t._v(t._s(t.awae.poolName))])],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1)]:t._e(),t._v(" "),"3"==t.awae.awardType?[a("el-form-item",{attrs:{label:"红包池:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){t.awae.id}}}):t._e(),t._v(" "),a("span",[t._v(t._s(t.awae.poolName))])],1),t._v(" "),a("el-form-item",{attrs:{label:"红包面额:",prop:"redNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:2,min:0,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.redMoney,callback:function(e){t.$set(t.awae,"redMoney",e)},expression:"awae.redMoney"}}),t._v(" 元\n      ")],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"红包金额:",prop:"redTotal"}},[a("el-input-number",{attrs:{disabled:"",min:0,"controls-position":"right"},model:{value:t.totalRed,callback:function(e){t.totalRed=e},expression:"totalRed"}}),t._v(" 元\n      ")],1)]:t._e(),t._v(" "),"6"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择积分:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){t.awae.id}}}):t._e(),t._v(" "),a("span",[t._v(t._s(t.awae.poolName))])],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"积分面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n      ")],1)]:t._e(),t._v(" "),t.hide?t._e():a("el-form-item",{attrs:{label:"中奖概率:",prop:"probability"}},[a("el-input-number",{attrs:{min:0,max:100,"controls-position":"right"},model:{value:t.awae.probability,callback:function(e){t.$set(t.awae,"probability",e)},expression:"awae.probability"}}),t._v(" %\n    ")],1),t._v(" "),a("el-form-item",[a("el-checkbox",{on:{change:t.resetWarn},model:{value:t.awae.hasWarn,callback:function(e){t.$set(t.awae,"hasWarn",e)},expression:"awae.hasWarn"}},[t._v("阈值预警")]),t._v(" "),t.awae.hasWarn?a("span",[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.warnValue,callback:function(e){t.$set(t.awae,"warnValue",e)},expression:"awae.warnValue"}}),t._v(" 个\n      ")],1):t._e()],1),t._v(" "),"6"!==t.awae.awardType?a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.giveScore,"true-label":1,"false-label":0},on:{change:t.resetScore},model:{value:t.awae.giveScore,callback:function(e){t.$set(t.awae,"giveScore",e)},expression:"awae.giveScore"}},[t._v("同时送积分")]),t._v(" "),t.awae.giveScore?a("span",[t.awae.integralPool?a("el-button",{attrs:{size:"mini",type:"info"},on:{click:t.giveIntegral}},[t._v("已选择")]):a("el-button",{staticClass:"ml20 mr20",on:{click:t.giveIntegral}},[t._v("选择")]),t._v(" "),a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 积分\n      ")],1):t._e()],1):t._e(),t._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.guideGzh,"true-label":1,"false-label":0},model:{value:t.awae.guideGzh,callback:function(e){t.$set(t.awae,"guideGzh",e)},expression:"awae.guideGzh"}},[t._v("中奖后引导关注公众号")]),t._v(" "),t.isRed?t._e():a("el-checkbox",{on:{change:t.resetPdMaxOut},model:{value:t.awae.hasPdMaxOut,callback:function(e){t.$set(t.awae,"hasPdMaxOut",e)},expression:"awae.hasPdMaxOut"}},[t._v("每天出奖总次数限制")]),t._v(" "),t.awae.hasPdMaxOut?a("span",[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.pdMaxOut,callback:function(e){t.$set(t.awae,"pdMaxOut",e)},expression:"awae.pdMaxOut"}}),t._v(" 次\n      ")],1):t._e()],1)],2),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"选择积分",visible:t.integralVisible,width:"800px"},on:{"update:visible":function(e){t.integralVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.integralList,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.awae.integralPool!==e.row.id?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("选择")]):a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("已选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.integralTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r={components:{pondConf:a("VU/8")(s,i,!1,function(t){a("GMqS")},"data-v-3f036d93",null).exports},mixins:[{props:["id","actCode","form"],data(){return{stepActive:2,act:{id:null,actCode:"",dwnum:null,status:null},status:!1,statusDisabled:!1,actSTime:"",actETime:"",strategy:{areas:{provinceArr:[],cityArr:[],districtArr:[]},awardArr:[],brandArr:[],snArr:[],tfType:""},specialAreas:{provinceArr:[],cityArr:[],districtArr:[]},specialBrand:{brandArr:[],snArr:[]},normalConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,outNum:"",pdMaxOut:"",poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],normalTfId:"",defaultAwae:{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:"",poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""},firstScanConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:"",poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],firstScanTfId:"",nWinConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,n:"",outNum:"",pdMaxOut:"",poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],nWinTfId:"",fixationPutConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:"",poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],fixationPutTfId:"",normalTabsValue:"1",normalTabs:[{title:"常规奖项1",name:"1"}],firstScanTabsValue:"1",firstScanTabs:[{title:"常规奖项1",name:"1"}],nWinTabsValue:"1",nWinTabs:[{title:"常规奖项1",name:"1"}],fixationPutTabsValue:"1",fixationPutTabs:[{title:"常规奖项1",name:"1"}],tfId:"",tfTimeArr:[],tfDurationArr:[],prizeType:[{name:"实物礼品",type:1},{name:"虚拟礼品",type:2},{name:"红包",type:3},{name:"积分",type:6}],normalIndex:1,firstScanIndex:1,nWinIndex:1,fixationPutIndex:1,selectBrand:[],selectSonBrand:[],selectProvList:[],oldSlectProvList:["1"],selectCityList:[],oldSelectCityList:["1"],selectAreaList:[],oldSelectAreaList:["1"],brandList:[],brandSonList:[],specialBrandList:[],specialBrandSonList:[],provList:[{code:"000000",name:"全部"}],cityList:[{code:"000000",name:"全部"}],areaList:[{code:"000000",name:"全部"}],specialProvList:[],specialCityList:[],specialAreaList:[],regionVisible:!1,brandVisible:!1,specialRuleConfFlag:!1,prizeLimitFlag:!1,firstScanFlag:!1,nWinFlag:!1,fixationPutFlag:!1,isPut:!1,isDisabled:!1,pickerOptions:{disabledDate:t=>t.getTime()<new Date(this.actSTime).getTime()||t.getTime()>new Date(this.actETime).getTime()}}},created(){this.getActDetail(),this.getBrandList(),this.getProvList()},computed:{},watch:{status:function(t){this.act.status=t?1:2},isDisabled:function(t){t?(this.selectProvList=["000000"],this.selectCityList=["000000"],this.selectAreaList=["000000"]):(this.selectProvList=[],this.selectCityList=[],this.selectAreaList=[])},fixationPutFlag:function(t){t?this.restrictArea():(this.selectProvList=[],this.selectCityList=[],this.selectAreaList=[])}},methods:{getActDetail(){this.id?this.$request.post("/api/saotx/act/detail",{id:this.id},!0,t=>{if("200000"!==t.ret)return this.$message.error(t.message);1==t.data.act.status?this.statusDisabled=!0:this.statusDisabled=!1,this.status=1==t.data.act.status,this.prizeLimitFlag=!!t.data.act.dwnum,this.act.dwnum=t.data.act.dwnum,this.actSTime=t.data.act.stimeStr,this.actETime=t.data.act.etimeStr,0!=t.data.strategyArr.length&&t.data.strategyArr.forEach((t,e)=>{if("common"==t.tfType){if(0==t.awardArr.length)return;this.normalTfId=t.tf.id,t.awardArr.forEach((t,e)=>{if(0!=e&&this.normalTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.normalConf[0][e]=t[e];else this.normalConf.push(t)}),"000000"==t.areas.provinceArr[0]&&"000000"==t.areas.cityArr[0]?this.isDisabled=!0:(this.selectProvList=t.areas.provinceArr,this.selectCityList=t.areas.cityArr,this.getCityList(this.selectProvList),this.getAreaList(this.selectCityList),this.selectAreaList=t.areas.districtArr,this.selectAll(this.selectAreaList)),this.selectBrand=t.brandArr,this.getBrandSonList(),this.selectSonBrand=t.snArr}"sn_first"==t.tfType&&(this.firstScanTfId=t.tf.id,t.awardArr.forEach((t,e)=>{if(0!=e&&this.firstScanTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.firstScanConf[0][e]=t[e];else this.firstScanConf.push(t)}),this.specialRuleConfFlag=!0,this.firstScanFlag=!0,this.firstScanConf=t.awardArr),"n_mwin"==t.tfType&&(this.nWinTfId=t.tf.id,t.awardArr.forEach((t,e)=>{if(0!=e&&this.nWinTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.nWinConf[0][e]=t[e];else this.nWinConf.push(t)}),this.specialRuleConfFlag=!0,this.nWinFlag=!0,this.nWinConf=t.awardArr),"special"==t.tfType&&(this.fixationPutTfId=t.tf.id,t.awardArr.forEach((t,e)=>{if(0!=e&&this.fixationPutTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.fixationPutConf[0][e]=t[e];else this.fixationPutConf.push(t)}),this.specialRuleConfFlag=!0,this.fixationPutFlag=!0,this.fixationPutConf=t.awardArr,this.specialAreas=t.areas,this.specialBrand.brandArr=t.brandArr,this.specialBrand.snArr=t.snArr,this.tfDurationArr.push(t.tf.sduration),this.tfDurationArr.push(t.tf.eduration),this.tfTimeArr.push(t.tf.stimeStr),this.tfTimeArr.push(t.tf.etimeStr))})}):this.$router.push("/market/actMgr")},getBrandList(){this.$request.post("/api/saotx/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandList=t.data.list,void this.restrictBrand();this.$message.error(t.message)})},getBrandSonList(){this.restrictBrand(),this.$request.post("/api/saotx/prod/list",{brandCodeArr:this.selectBrand,pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandSonList=t.data.list,void this.restrictSonBrand();this.$message.error(t.message)})},getProvList(){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:[]},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.provList.push(...t.data)})},getCityList(t){if(1==this.provList.length)return void setTimeout(()=>{this.getCityList(t)},1e3);let e=[];for(let t of this.provList)e.push(t.code);const a=1===this.oldSlectProvList.length?[]:this.oldSlectProvList[1];if(t.includes("000000")&&(this.selectProvList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectProvList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectProvList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectProvList=["000000"].concat(t)),this.oldSlectProvList[1]=this.selectProvList,0==this.selectProvList.length)return this.cityList=[],this.selectCityList=[],this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:this.selectProvList},!0,t=>{if("200000"===t.ret)return this.cityList=[{code:"000000",name:"全部"}],this.cityList.push(...t.data),void this.restrictProv();this.message.error(t.message)})},getAreaList(t){if(1==this.cityList.length)return void setTimeout(()=>{this.getAreaList(t)},1e3);let e=[];for(let t of this.cityList)e.push(t.code);const a=1===this.oldSelectCityList.length?[]:this.oldSelectCityList[1];if(t.includes("000000")&&(this.selectCityList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectCityList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectCityList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectCityList=["000000"].concat(t)),this.oldSelectCityList[1]=this.selectCityList,0==this.selectCityList.length)return this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:this.selectCityList},!0,t=>{if("200000"===t.ret)return this.areaList=[{code:"000000",name:"全部"}],this.areaList.push(...t.data),void this.restrictCity();this.$message.error(t.message)})},selectAll(t){if(1==this.areaList.length)return void setTimeout(()=>{this.selectAll(t)},1e3);this.restrictArea();let e=[];for(let t of this.areaList)e.push(t.code);const a=1===this.oldSelectAreaList.length?[]:this.oldSelectAreaList[1];if(t.includes("000000")&&(this.selectAreaList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectAreaList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectAreaList=t}a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectAreaList=["000000"].concat(t)),this.oldSelectAreaList[1]=this.selectAreaList},save(){if(0==this.selectBrand.length||0==this.selectSonBrand.length)return this.$message.error("请选择品牌规格");if(0==this.selectProvList.length||0==this.selectCityList.length)return this.$message.error("请选择地区");this.isDisabled||(-1!=this.selectCityList.indexOf("000000")&&this.selectCityList.splice(this.selectCityList.indexOf("000000"),1),-1!=this.selectAreaList.indexOf("000000")&&this.selectAreaList.splice(this.selectAreaList.indexOf("000000"),1),-1!=this.selectProvList.indexOf("000000")&&this.selectProvList.splice(this.selectProvList.indexOf("000000"),1)),this.act.id=this.id,this.act.actCode=this.actCode;let t={act:{},strategyArr:[]};t.act=this.act,t.strategyArr.push(JSON.parse(JSON.stringify(this.strategy))),t.strategyArr[0].awardArr=this.normalConf,t.strategyArr[0].areas.cityArr=this.selectCityList,t.strategyArr[0].areas.districtArr=this.selectAreaList,t.strategyArr[0].areas.provinceArr=this.selectProvList,t.strategyArr[0].brandArr=this.selectBrand,t.strategyArr[0].snArr=this.selectSonBrand,t.strategyArr[0].tfType="common",t.strategyArr[0].tf={id:this.normalTfId};let e=0;this.firstScanFlag&&(t.strategyArr.push(JSON.parse(JSON.stringify(this.strategy))),e=t.strategyArr.length,t.strategyArr[e-1].awardArr=this.firstScanConf,t.strategyArr[e-1].confOpen=!0,t.strategyArr[e-1].tfType="sn_first",t.strategyArr[e-1].tf={id:this.firstScanTfId}),this.nWinFlag&&(t.strategyArr.push(JSON.parse(JSON.stringify(this.strategy))),e=t.strategyArr.length,t.strategyArr[e-1].awardArr=this.nWinConf,t.strategyArr[e-1].confOpen=!0,t.strategyArr[e-1].tfType="n_mwin",t.strategyArr[e-1].tf={id:this.nWinTfId}),this.fixationPutFlag&&(t.strategyArr.push(JSON.parse(JSON.stringify(this.strategy))),e=t.strategyArr.length,t.strategyArr[e-1].areas=this.specialAreas,t.strategyArr[e-1].awardArr=this.fixationPutConf,t.strategyArr[e-1].confOpen=!0,t.strategyArr[e-1].brandArr=this.specialBrand.brandArr,t.strategyArr[e-1].snArr=this.specialBrand.snArr,t.strategyArr[e-1].tf={sduration:this.tfDurationArr[0],eduration:this.tfDurationArr[1],stimeStr:this.tfTimeArr[0],etimeStr:this.tfTimeArr[1],id:this.fixationPutTfId},t.strategyArr[e-1].tfType="special"),this.$request.post("/api/saotx/act/somtf",t,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)})},normalTabsEdit(t,e){this.addOrRemove("normal",t,e)},firstScanTabsEdit(t,e){this.addOrRemove("firstScan",t,e)},nWinTabsEdit(t,e){this.addOrRemove("nWin",t,e)},fixationPutTabsEdit(t,e){this.addOrRemove("fixationPut",t,e)},addOrRemove(t,e,a){if("add"===a){if(10==this[t+"Conf"].length)return;let e=JSON.parse(JSON.stringify(this.defaultAwae));this[t+"Conf"].push(e);let a="常规奖项"+this[t+"Conf"].length;this[t+"Tabs"].push({title:a,name:this[t+"Conf"].length+""}),this[t+"TabsValue"]=this[t+"Conf"].length+""}if("remove"===a){if(1==this[t+"Conf"].length)return;this[t+"Tabs"];this[t+"Conf"].splice(e-1,1),this[t+"Tabs"]=[];for(var s=1;s<=this[t+"Conf"].length;s++)this[t+"Tabs"].push({title:"常规奖项"+s,name:s+""});this[t+"TabsValue"]="1"}},restrictProv(){this.specialProvList=JSON.parse(JSON.stringify(this.provList)),this.specialProvList.forEach(t=>{t.disabled=!0,this.selectProvList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictCity(){this.specialCityList=JSON.parse(JSON.stringify(this.cityList)),this.specialCityList.forEach(t=>{t.disabled=!0,this.selectCityList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictArea(){this.specialAreaList=JSON.parse(JSON.stringify(this.areaList)),this.specialAreaList.forEach(t=>{t.disabled=!0,this.selectAreaList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictBrand(){this.specialBrandList=JSON.parse(JSON.stringify(this.brandList)),this.specialBrandList.forEach(t=>{t.disabled=!0,this.selectBrand.forEach(e=>{t.brandCode==e&&(t.disabled=!1)})})},restrictSonBrand(){this.specialBrandSonList=JSON.parse(JSON.stringify(this.brandSonList)),this.specialBrandSonList.forEach(t=>{t.disabled=!0,this.selectSonBrand.forEach(e=>{t.sn==e&&(t.disabled=!1)})})}}}]},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actPutConf-container"},[a("el-breadcrumb",{directives:[{name:"show",rawName:"v-show",value:"act-501"!=t.form,expression:'form!="act-501"'}],attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("投放设置")])],1),t._v(" "),a("el-card",[a("el-steps",{directives:[{name:"show",rawName:"v-show",value:"act-501"==t.form,expression:'form=="act-501"'}],staticClass:"step-style",attrs:{active:t.stepActive,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基础设置"}}),t._v(" "),a("el-step",{attrs:{title:"题目设置"}}),t._v(" "),a("el-step",{attrs:{title:"投放设置"}})],1),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.strategy,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品牌规格："}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getBrandSonList},model:{value:t.selectBrand,callback:function(e){t.selectBrand=e},expression:"selectBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.restrictSonBrand},model:{value:t.selectSonBrand,callback:function(e){t.selectSonBrand=e},expression:"selectSonBrand"}},t._l(t.brandSonList,function(t){return a("el-option",{key:t.id,attrs:{label:t.allName,value:t.sn}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"地区："}},[a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getCityList},model:{value:t.selectProvList,callback:function(e){t.selectProvList=e},expression:"selectProvList"}},t._l(t.provList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getAreaList},model:{value:t.selectCityList,callback:function(e){t.selectCityList=e},expression:"selectCityList"}},t._l(t.cityList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.selectAll},model:{value:t.selectAreaList,callback:function(e){t.selectAreaList=e},expression:"selectAreaList"}},t._l(t.areaList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-checkbox",{attrs:{label:"全部地区",border:""},model:{value:t.isDisabled,callback:function(e){t.isDisabled=e},expression:"isDisabled"}})],1),t._v(" "),a("el-form-item",[a("div",{staticClass:"prize-conf"},[a("div",{staticClass:"title"},[t._v("常规奖池")]),t._v(" "),a("el-tabs",{staticClass:"put-conf",attrs:{type:"card",editable:""},on:{edit:t.normalTabsEdit},model:{value:t.normalTabsValue,callback:function(e){t.normalTabsValue=e},expression:"normalTabsValue"}},t._l(t.normalTabs,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{awae:t.normalConf[s],prizeType:t.prizeType}})],1)}))],1)]),t._v(" "),a("el-form-item",[a("div",{staticClass:"special-rule-conf"},[a("div",{staticClass:"title"},[a("span",[t._v("特殊规则设置")]),t._v(" "),a("el-switch",{model:{value:t.specialRuleConfFlag,callback:function(e){t.specialRuleConfFlag=e},expression:"specialRuleConfFlag"}})],1),t._v(" "),t.specialRuleConfFlag?a("div",{staticClass:"con"},[a("el-row",[a("el-checkbox",{model:{value:t.firstScanFlag,callback:function(e){t.firstScanFlag=e},expression:"firstScanFlag"}},[t._v("首扫必中奖")]),t._v(" "),t.firstScanFlag?a("div",{staticClass:"conf"},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.firstScanTabsEdit},model:{value:t.firstScanTabsValue,callback:function(e){t.firstScanTabsValue=e},expression:"firstScanTabsValue"}},t._l(t.firstScanTabs,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{awae:t.firstScanConf[s],hide:!0,prizeType:t.prizeType}})],1)}))],1):t._e()],1),t._v(" "),a("el-row",[a("el-checkbox",{model:{value:t.nWinFlag,callback:function(e){t.nWinFlag=e},expression:"nWinFlag"}},[t._v("N次必中奖")]),t._v(" "),t.nWinFlag?a("div",{staticClass:"conf"},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.nWinTabsEdit},model:{value:t.nWinTabsValue,callback:function(e){t.nWinTabsValue=e},expression:"nWinTabsValue"}},t._l(t.nWinTabs,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{awae:t.nWinConf[s],hide:!0,prizeType:t.prizeType,nWin:!0}})],1)}))],1):t._e()],1),t._v(" "),a("el-row",[a("el-checkbox",{model:{value:t.fixationPutFlag,callback:function(e){t.fixationPutFlag=e},expression:"fixationPutFlag"}},[t._v("定点投放奖")]),t._v(" "),t.fixationPutFlag?a("div",{staticClass:"conf mb20"},[a("el-form",{staticClass:"mb20 mt20",attrs:{model:t.specialAreas,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品牌规格："}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.specialBrand.brandArr,callback:function(e){t.$set(t.specialBrand,"brandArr",e)},expression:"specialBrand.brandArr"}},t._l(t.specialBrandList,function(t){return a("el-option",{key:t.id,attrs:{disabled:t.disabled,label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.specialBrand.snArr,callback:function(e){t.$set(t.specialBrand,"snArr",e)},expression:"specialBrand.snArr"}},t._l(t.specialBrandSonList,function(t){return a("el-option",{key:t.id,attrs:{disabled:t.disabled,label:t.name,value:t.sn}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"地区："}},[a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},model:{value:t.specialAreas.provinceArr,callback:function(e){t.$set(t.specialAreas,"provinceArr",e)},expression:"specialAreas.provinceArr"}},t._l(t.specialProvList,function(t){return a("el-option",{key:t.code,attrs:{disabled:t.disabled,label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},model:{value:t.specialAreas.cityArr,callback:function(e){t.$set(t.specialAreas,"cityArr",e)},expression:"specialAreas.cityArr"}},t._l(t.specialCityList,function(t){return a("el-option",{key:t.code,attrs:{disabled:t.disabled,label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},model:{value:t.specialAreas.districtArr,callback:function(e){t.$set(t.specialAreas,"districtArr",e)},expression:"specialAreas.districtArr"}},t._l(t.specialAreaList,function(t){return a("el-option",{key:t.code,attrs:{disabled:t.disabled,label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"投放时间:"}},[a("el-date-picker",{attrs:{"picker-options":t.pickerOptions,format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.tfTimeArr,callback:function(e){t.tfTimeArr=e},expression:"tfTimeArr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发放时间:"}},[a("el-time-picker",{attrs:{"is-range":"",format:"HH:mm","value-format":"HH:mm","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.tfDurationArr,callback:function(e){t.tfDurationArr=e},expression:"tfDurationArr"}})],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.fixationPutTabsEdit},model:{value:t.fixationPutTabsValue,callback:function(e){t.fixationPutTabsValue=e},expression:"fixationPutTabsValue"}},t._l(t.fixationPutTabs,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{awae:t.fixationPutConf[s],prizeType:t.prizeType}})],1)}))],1):t._e()],1)],1):t._e()])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"prize-limit"},[a("div",{staticClass:"title"},[a("span",[t._v("抽奖限制")]),t._v(" "),a("el-switch",{model:{value:t.prizeLimitFlag,callback:function(e){t.prizeLimitFlag=e},expression:"prizeLimitFlag"}})],1),t._v(" "),t.prizeLimitFlag?a("div",{staticClass:"con"},[a("el-row",[a("el-col",{staticClass:"label",attrs:{span:6}},[t._v("每日中奖机会限制:")]),t._v("\n                每人每日"),a("el-input-number",{attrs:{size:"small",min:0,"controls-position":"right"},model:{value:t.act.dwnum,callback:function(e){t.$set(t.act,"dwnum",e)},expression:"act.dwnum"}}),t._v("\n                次抽奖后，不再有中奖机会\n              ")],1)],1):t._e()])]),t._v(" "),a("el-form-item",[t._v("\n          是否立即发布\n          "),a("el-switch",{staticClass:"ml20",attrs:{disabled:t.statusDisabled},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),t._v(" "),a("el-row",{staticClass:"mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.$router.push("/market/actMgr")}}},[t._v("返回列表")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"选择的品牌及对应的规格",visible:t.brandVisible,width:"500px"},on:{"update:visible":function(e){t.brandVisible=e}}},[a("span",[t._v("暂时不做")])]),t._v(" "),a("el-dialog",{attrs:{title:"常规奖池选择的地区明细",visible:t.regionVisible,width:"500px"},on:{"update:visible":function(e){t.regionVisible=e}}},[a("span",[t._v("暂时不做")])])],1)},staticRenderFns:[]};var o=a("VU/8")(r,l,!1,function(t){a("L+KM")},"data-v-322ff1b3",null);e.default=o.exports},byF6:function(t,e){},cJQP:function(t,e){},dJ1n:function(t,e){},dRqP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},data:()=>({listData:[],orderStatusData:[],allKeyWordData:[],allGiftTypeData:[],allOneCateData:[],allTwoCateData:[],allThrCateData:[],allFroCateData:[],selectallKyeType:"",selectallOneCate:"",selectallTwoCate:"",selectallThrCate:"",selectallFroCate:"",idtwo:"1",idthr:"1",idfro:"1",form:{kyeName:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:"",startTime:"",endTime:"",status:"",orderType:1,giftType:"",orderId:"",awardName:"",userName:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),name:"ZjOrderPage",created(){this.init()},watch:{selectallKyeType(t,e){t&&t!=e&&(1==t&&(this.form.orderId=this.form.kyeName,this.form.awardName="",this.form.userName=""),2==t&&(this.form.orderId="",this.form.awardName=this.form.kyeName,this.form.userName=""),3==t&&(this.form.orderId="",this.form.awardName="",this.form.userName=this.form.kyeName))},selectallOneCate(t,e){t&&t!=e&&(this.idtwo="",this.form.cateLvl1=t,this.allMoreCateList(t,2))},selectallTwoCate(t,e){t&&t!=e&&(this.idthr="",this.form.cateLvl2=t,this.allMoreCateList(t,3))},selectallThrCate(t,e){t&&t!=e&&(this.idfro="",this.form.cateLvl3=t,this.allMoreCateList(t,4))},selectallForCate(t,e){t&&t!=e&&(this.form.cateLvl4=t)}},methods:{init(){this.orderStatusList(),this.allKeyWordList(),this.allGiftTypeList(),this.allOneCateList(),this.getlistData()},changek(){1==this.selectallKyeType&&(this.form.orderId=this.form.kyeName,this.form.awardName="",this.form.userName=""),2==this.selectallKyeType&&(this.form.orderId="",this.form.awardName=this.form.kyeName,this.form.userName=""),3==this.selectallKyeType&&(this.form.orderId="",this.form.awardName="",this.form.userName=this.form.kyeName)},orderStatusList(){this.$request.post("/sc/saotx/mall/orderStatusMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.orderStatusData=t.data)})},allKeyWordList(){this.$request.post("/sc/saotx/mall/keyWordMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allKeyWordData=t.data)})},allGiftTypeList(){this.$request.post("/sc/saotx/mall/giftTypeMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allGiftTypeData=t.data)})},allOneCateList(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allOneCateData=t.data)})},allMoreCateList(t,e){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:t},!0,t=>{console.log(t.data),"200000"===t.ret&&(2==e&&(this.selectallTwoCate="",this.selectallThrCate="",this.selectallFroCate="",this.allTwoCateData=t.data),3==e&&(this.selectallThrCate="",this.selectallFroCate="",this.allThrCateData=t.data),4==e&&(this.selectallFroCate="",this.allFroCateData=t.data))})},getlistData(){this.$request.post("/sc/saotx/mall/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},queryData:function(t){this.getlistData()},currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},initPagination(t){t&&(this.pagination.total=t.count)},resetData:function(t){this.selectallKyeType="",this.selectallOneCate="",this.selectallTwoCate="",this.selectallThrCate="",this.selectallFroCate="",this.idtwo="1",this.idthr="1",this.idfro="1",this.form={kyeName:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:"",startTime:"",endTime:"",status:"",orderType:1,giftType:"",orderId:"",awardName:"",userName:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){this.$message({type:"success",message:t}),this.getlistData()},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/sc/saotx/mall/order/exportOrder",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)},ObjectPageDatail(t){this.$router.push({path:"/Orders/mall/zjOrderPageDetail?orderCode="+t})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/自建订单明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"订单状态:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.orderStatusData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"时间段:",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"关键字:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectallKyeType,callback:function(e){t.selectallKyeType=e},expression:"selectallKyeType"}},t._l(t.allKeyWordData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},on:{input:function(e){t.changek()}},model:{value:t.form.kyeName,callback:function(e){t.$set(t.form,"kyeName",e)},expression:"form.kyeName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品状态:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.giftType,callback:function(e){t.$set(t.form,"giftType",e)},expression:"form.giftType"}},t._l(t.allGiftTypeData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"分类",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectallOneCate,callback:function(e){t.selectallOneCate=e},expression:"selectallOneCate"}},t._l(t.allOneCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idtwo,clearable:!!t.idtwo},model:{value:t.selectallTwoCate,callback:function(e){t.selectallTwoCate=e},expression:"selectallTwoCate"}},t._l(t.allTwoCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idthr,clearable:!!t.idthr},model:{value:t.selectallThrCate,callback:function(e){t.selectallThrCate=e},expression:"selectallThrCate"}},t._l(t.allThrCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idfro,clearable:!!t.idfro},model:{value:t.selectallFroCate,callback:function(e){t.selectallFroCate=e},expression:"selectallFroCate"}},t._l(t.allFroCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/sc/saotx/mall/order/importZJOrders",headers:t.headers,data:t.addPool,"before-upload":t.handlerSourceFileBUpload,"on-success":t.handleSourceFileSuccess,"on-remove":t.handleSourceFileRemove,"file-list":t.sourceFiles,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("导入物流信息")])],1)],1),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s((t.form.pageNo-1)*t.form.pageSize+e.$index+1)+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.ObjectPageDatail(e.row.orderId)}}},[t._v("查看详情")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"商品名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(2==e.row.giftType?"实物礼品":"虚拟礼品"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate4Name",label:"四级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"score",label:"兑换币"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"联系人姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系人电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"收货地址"}}),t._v(" "),a("el-table-column",{attrs:{label:"下单时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.createTime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态\t"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"待收货":2==e.row.status?"已收货":0==e.row.status?"待发货":""))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("zSTB")},"data-v-6f357fc1",null);e.default=l.exports},"eV/g":function(t,e){},ehVw:function(t,e,a){"use strict";var s={props:["editData","shareConf"],data:()=>({uploadApi:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")}}),created(){},methods:{uploadSuccess(t,e,a){let s=t.data.accessUrl;this.editData[0].url=s,this.$emit("shareChange",{url:s})},uploadError(t){alert("图片上传失败")},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type||"image/bmp"===t.type||"image/gif"===t.type;return e||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),e}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-share"},[a("el-card",{staticClass:"card"},[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("h3",[t._v("编辑图片")])]),t._v(" "),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分享标题："}},[a("el-input",{attrs:{type:"text",maxlength:15},model:{value:t.shareConf.shareTitle,callback:function(e){t.$set(t.shareConf,"shareTitle",e)},expression:"shareConf.shareTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分享说明："}},[a("el-input",{staticStyle:{width:"70%"},attrs:{maxlength:"30",type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.shareConf.shareDesc,callback:function(e){t.$set(t.shareConf,"shareDesc",e)},expression:"shareConf.shareDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分享图标："}},[a("div",[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.editData[0].url}})]),t._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:t.uploadApi,headers:t.headerObj,"show-file-list":!1,"on-success":t.uploadSuccess,"before-upload":t.beforeAvatarUpload,"on-error":t.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("更换图片")])],1),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("* 图片建议尺寸为 91*91px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1)])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("rd4F")},"data-v-297e7a84",null);e.a=r.exports},eheO:function(t,e){},fDLt:function(t,e){},gQgQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7w9a"),i=a("ifEn"),r=a("UJta"),l=a("9ijK"),o={props:["id","edit"],data:()=>({defaultActive:"1",editData:[l.a.img.ACT_QUESTION.normal.bg],editType:"normal",itemRepeat:!1,page:1,isPublish:!1,conf:{form:"act-501",id:"",description:"",title:"",img:JSON.parse(JSON.stringify(l.a.img.ACT_QUESTION)),commonImg:JSON.parse(JSON.stringify(l.a.commonImg)),conf:{img:"",commonImg:"",title:"",desc:""},name:"",note:""}}),components:{phoneModel:s.a,activityInfo:i.a,activityImageEditor:r.a},created(){this.getActDetail()},mounted(){console.log(this)},computed:{},methods:{switchMenu(t,e){let a=this;a.page=t,4==t?(a.editData=[a.conf.commonImg.getAwardBg,a.conf.commonImg.getBtn],a.editType="common"):1==t?(a.editData=[a.conf.img.normal.bg],a.editType="normal"):5==t?(a.editData=[a.conf.commonImg.noAward,a.conf.commonImg.knowBtn],a.editType="common"):6==t?(a.editData=[a.conf.img.question.Quesbg],a.editType="normal"):7==t&&(a.editData=[a.conf.commonImg.errorTip,a.conf.commonImg.errorBtn],a.editType="common")},titleInput(t){let e=t.value;this.conf.title=e||""},descInput(t){let e=t.value;e?this.conf.description=e:this.description=""},editTpl(t){console.log(t);let e=this,a=t.index,s=a.indexOf("item")>-1?"item":"normal";e.editType=s,6!=e.page?e.editData="item"==s?e.itemRepeat?[this.conf.img[s].item0]:this.conf.img[s]:[this.conf.img[s][a]]:(console.log(e.page),e.editData=[this.conf.img.question[a]])},editPic(t){let e=t.type,a=t.index,s=t.url,i=t.itemRepeat,r=this.conf;if(s)if("item"==e&&i)for(let t in r.img[e])r.img[e][t].url=s;else"item"==e&&!i||"normal"==e&&1==this.page?r.img[e][a].url=s:"common"==e?(console.log(a),r.commonImg[a].url=s):"normal"==e&&6==this.page&&(console.log(r.img.question),r.img.question[a].url=s)},getActDetail(){let t=this,e=null;this.edit?this.$request.post("/api/saotx/act/pubTpl",{actCode:this.edit},!0,a=>{"200000"===a.ret?(this.conf.actCode=a.data.actCode,e=JSON.parse(a.data.conf),t.conf.img=JSON.parse(e.img),t.conf.commonImg=JSON.parse(e.commonImg),t.conf.description=e.desc,t.conf.title=e.title,t.conf.id=a.data.id,"未投放"==a.data.statusName?t.isPublish=!1:t.isPublish=!0):this.$message.error(a.message)}):t.id&&t.$request.post("/api/saotx/acttpl/detail",{id:t.id},!0,a=>{"200000"===a.ret?(e=JSON.parse(a.data.conf),t.conf.img=JSON.parse(e.img),t.conf.commonImg=JSON.parse(e.commonImg),t.conf.description=a.data.note,t.conf.title=a.data.name,t.conf.id=a.data.id,"未投放"==a.data.statusName?t.isPublish=!1:t.isPublish=!0):this.$message.error(a.message)})},save(){let t=this;if(!t.conf.title)return this.$message.warning("请输入模板名称");t.conf.conf.img=JSON.stringify(t.conf.img),t.conf.conf.commonImg=JSON.stringify(t.conf.commonImg),t.conf.conf.title=t.conf.title,t.conf.conf.desc=t.conf.description,t.conf.conf=JSON.stringify(t.conf.conf),t.conf.name=t.conf.title,t.conf.note=t.conf.description,this.edit?this.$request.post("/api/saotx/act/mpubTpl",t.conf,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):t.$request.post("/api/saotx/acttpl/saveOrModify",t.conf,!0,e=>{if("200000"===e.ret)return t.isPublish?t.$router.push("/market/actTpl/actSetConf?form="+e.data.form+"&tplCode="+e.data.tplCode):t.$router.push("/market/actTpl"),void t.$message.success("保存成功!");t.$message.error(e.message)})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"root"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("新建活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-menu",{attrs:{mode:"horizontal","default-active":t.defaultActive},on:{select:t.switchMenu}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("首页")]),t._v(" "),a("el-menu-item",{attrs:{index:"6"}},[t._v("答题页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[t._v("活动说明页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"3"}},[t._v("我的奖品页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"4"}},[t._v("中奖页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"5"}},[t._v("未中奖页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"7"}},[t._v("异常处理页面")])],1),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"40px"}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("phone-model",{attrs:{title:t.conf.title,titleLength:30,page:t.page,imgKey:"ACT_QUESTION",imgData:t.conf.img,commonImg:t.conf.commonImg,flag:"ques"},on:{edit:t.editTpl}})],1),t._v(" "),a("el-col",{attrs:{span:14}},[a("activity-info",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page == 1"}],attrs:{title:t.conf.title,desc:t.conf.description},on:{titleInput:t.titleInput,descInput:t.descInput}}),t._v(" "),2!=t.page&&3!=t.page?a("activity-image-editor",{attrs:{editData:t.editData,type:t.editType,itemRepeat:t.itemRepeat},on:{picChange:t.editPic}}):t._e()],1)],1),t._v(" "),a("el-row",{staticClass:"tool-bar",staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{height:"100px"}})]),t._v(" "),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"publish"},[a("label",{attrs:{for:""}},[t._v("是否投放：")]),t._v(" "),a("el-switch",{model:{value:t.isPublish,callback:function(e){t.isPublish=e},expression:"isPublish"}})],1),t._v(" "),a("div",{staticClass:"save"},[a("el-button",{attrs:{type:"primary",size:"medium",width:"100"},on:{click:t.save}},[t._v("保存")])],1)])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,n,!1,function(t){a("6Jfi")},null,null);e.default=c.exports},gYd8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({queryActParams:{allFormCode:"",brandCodeArr:[],cityCodeArr:[],etime:"",form:"",hdCode:"",keywords:"",pageNo:1,pageSize:10,provinceCodeArr:[],snArr:[],status:"",stime:""},actListTotal:0,addActDialogVisible:!1,actFormName:[{name:"全部",code:""}],actParams:{pageNo:1,pageSize:4,pcode:""},actForms:[],actTotal:0,nowActiveIndex:0,actList:[],actStatusObj:{},brandList:[],sonBrandList:[],provList:[],selectProvList:[],cityList:[],selectCityList:[],isDisabled:!1,value:"",actTime:"",nowActCode:"",putLogVisible:!1,putTimeList:[],putLogTime:"",normalLogList:[],firstScanLogList:[],nWinLogList:[],fixationLogList:[],loading:!0,formPath:{"act-101":"/market/actTpl/AddActSudoku?edit=","act-102":"/market/actTpl/AddWingAct?edit=","act-103":"/market/actTpl/addActEgg?edit=","act-104":"/market/actTpl/addActFanpaizi?edit=","act-501":"/market/actTpl/addActQuestion?edit=","act-301":"/market/actTpl/addActRedPacked?edit=","act-105":"/market/actTpl/addRound?edit=","act-100":"/market/actTpl/addAct?edit="}}),created(){this.init()},watch:{isDisabled:function(t,e){t?(this.selectProvList=[],this.selectCityList=[],this.queryActParams.provinceCodeArr=["000000"],this.queryActParams.cityCodeArr=["000000"]):(this.queryActParams.provinceCodeArr=[],this.queryActParams.cityCodeArr=[])},actTime:function(t){t&&2===t.length?(this.queryActParams.stime=this.actTime[0],this.queryActParams.etime=this.actTime[1]):(this.queryActParams.stime="",this.queryActParams.etime="")}},methods:{init(){this.getActList(),this.getProvList(),this.getActStatus(),this.getBrandList(),this.getActCodeList()},getActList(){this.$request.post("/api/saotx/act/list",this.queryActParams,!0,t=>{if("200000"===t.ret)return this.actList=t.data.list,this.actListTotal=t.data.page.count,void(this.loading=!1);this.$message.error(t.message)})},getActStatus(){this.$request.post("/api/saotx/act/statusSelect",{},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.actStatusObj=t.data})},selectArea(){this.queryActParams.provinceCodeArr=this.selectProvList,this.queryActParams.cityCodeArr=this.selectCityList},getBrandList(){this.$request.post("/api/saotx/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandList=t.data.list})},getSonBrandList(){if(0===this.queryActParams.brandCodeArr.length)return this.sonBrandList=[],void(this.queryActParams.snArr=[]);this.$request.post("/api/saotx/prod/list",{brandCodeArr:this.queryActParams.brandCodeArr,pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.sonBrandList=t.data.list;this.$message.error(t.message)})},getProvList(){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:[]},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.provList=t.data})},getCityList(){if(0==this.selectProvList.length)return this.cityList=[],void(this.selectCityList=[]);this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:this.selectProvList},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.cityList=t.data})},addAct(){this.addActDialogVisible=!0,this.actParams.pcode="",this.actParams.pageNo=1,this.nowActiveIndex=0,this.getAct()},getCheckedAct(t,e){this.nowActiveIndex=e,this.actParams.pcode=t.code,this.actParams.pageNo=1,this.getAct()},getActCodeList(){this.$request.post("/api/saotx/act/formByPCode",{pCode:"",pageNo:1,pageSize:-1},!0,t=>{"200000"==t.ret?this.actFormName.push(...t.data.list):this.$message.error(t.message)})},getAct(){this.$request.post("/api/saotx/acttpl/list",this.actParams,!0,t=>{"200000"==t.ret?(this.actForms=t.data.list||[],this.actForms&&0!=this.actForms.length||"form-cate6"!=this.actParams.pcode?this.actTotal=t.data.page.count:(this.actForms=[{extUrl:"http://qoss.qrmkt.cn/saas_platform/common/act_tpl/act-tpl-104.png",form:"act-601",tplCode:"",name:"自定义活动",note:"",id:""}],this.actTotal=1)):this.$message.error(t.message)},t=>{console.log(t)})},queryActList(){this.queryActParams.pageNo=1,this.getActList()},resetForm(){this.queryActParams.keywords="",this.queryActParams.brandCodeArr=[],this.queryActParams.snArr=[],this.queryActParams.status="",this.queryActParams.stime="",this.queryActParams.etime="",this.selectProvList=[],this.selectCityList=[],this.queryActParams.provinceCodeArr=[],this.queryActParams.cityCodeArr=[],this.actTime=[],this.queryActParams.pageNo=1,this.getActList()},getLogList(t){this.$request.post("/api/saotx/act/hisVers",{actCode:t},!0,e=>{if("200000"==e.ret)return this.putLogVisible=!0,this.normalLogList=[],this.firstScanLogList=[],this.nWinLogList=[],this.fixationLogList=[],this.putTimeList=[],this.putLogTime="",void(e.data.length>0&&(this.nowActCode=t,this.putTimeList=e.data,this.putLogTime=e.data[0].version,this.logDetail(t,this.putLogTime)));this.$message.error(e.message)})},logDetail(t,e){this.$request.post("/api/saotx/act/hisDetail",{actCode:t,version:e},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):t.data.strategyArr.forEach(t=>{"common"==t.tfType&&(this.normalLogList=t.awardArr),"sn_first"==t.tfType&&(this.firstScanLogList=t.awardArr),"n_mwin"==t.tfType&&(this.nWinLogList=t.awardArr),"special"==t.tfType&&(this.fixationLogList=t.awardArr)})})},handleSizeChange(t){this.queryActParams.pageSize=t,this.getActList()},handleCurrentChange(t){this.queryActParams.pageNo=t,this.getActList()},actHandleSizeChange(t){this.actParams.pageSize=t,this.getAct()},actHandleCurrentChange(t){this.actParams.pageNo=t,this.getAct()},goPut(t){let e=null;e="act-601"==t.form?"/market/actTpl/actSetConfSelf":"/market/actTpl/actSetConf",e+="?form="+t.form+"&tplCode="+t.tplCode,this.$router.push(e)},edit(t,e){let a=null;a="act-601"==e?"/market/actTpl/actSetConfSelf":"/market/actTpl/actSetConf",a+="?form="+e+"&id="+t,this.$router.push(a)},clone(t,e){this.$router.push("/market/actTpl/actSetConf?id="+t+"&clone=1&form="+e)},async post(t){if("confirm"!==await this.$confirm("确定发布此活动吗？","发布提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消发布"});this.$request.post("/api/saotx/act/modifyStatus",{id:t,status:1},!0,t=>{if("200000"==t.ret)return this.$message.success("发布成功"),void this.getActList();this.$message.error(t.message)})},async over(t){if("confirm"!==await this.$confirm("确定要结束此活动吗？结束后活动将会下线哦！","结束提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消"});this.$request.post("/api/saotx/act/modifyStatus",{id:t,status:4},!0,t=>{if("200000"==t.ret)return this.$message.success("已结束"),void this.getActList();this.$message.error(t.message)})},async stop(t){if("confirm"!==await this.$confirm("确定要暂停此活动吗？暂停后活动将会下线哦！","暂停提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消"});this.$request.post("/api/saotx/act/modifyStatus",{id:t,status:3},!0,t=>{if("200000"==t.ret)return this.$message.success("已暂停"),void this.getActList();this.$message.error(t.message)})},async del(t){if("confirm"!==await this.$confirm("您确定删除这些模板？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消删除"});this.$request.post("/api/saotx/act/remBatch",{idArr:[t]},!0,t=>{if("200000"==t.ret)return this.$message.success("删除成功"),void this.getActList();this.$message.error(t.message)})},editTpl(t,e){this.$router.push(this.formPath[t]+e)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actMgr-container"},[a("el-card",[a("el-button",{staticClass:"ml20",attrs:{type:"primary",size:"small"},on:{click:t.addAct}},[t._v("新建活动")]),t._v(" "),a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"选择品牌:"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},on:{change:t.getSonBrandList},model:{value:t.queryActParams.brandCodeArr,callback:function(e){t.$set(t.queryActParams,"brandCodeArr",e)},expression:"queryActParams.brandCodeArr"}},t._l(t.brandList,function(t){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"选择规格:"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},model:{value:t.queryActParams.snArr,callback:function(e){t.$set(t.queryActParams,"snArr",e)},expression:"queryActParams.snArr"}},t._l(t.sonBrandList,function(t){return a("el-option",{key:t.sn,attrs:{label:t.allName,value:t.sn}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"活动状态:"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.queryActParams.status,callback:function(e){t.$set(t.queryActParams,"status",e)},expression:"queryActParams.status"}},t._l(t.actStatusObj,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"关键词:"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入关键词"},model:{value:t.queryActParams.keywords,callback:function(e){t.$set(t.queryActParams,"keywords",e)},expression:"queryActParams.keywords"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:16,offset:2}},[a("el-form-item",{attrs:{label:"地区:"}},[a("el-select",{attrs:{size:"small",disabled:t.isDisabled,multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getCityList},model:{value:t.selectProvList,callback:function(e){t.selectProvList=e},expression:"selectProvList"}},t._l(t.provList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{size:"small",disabled:t.isDisabled,multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.selectArea},model:{value:t.selectCityList,callback:function(e){t.selectCityList=e},expression:"selectCityList"}},t._l(t.cityList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-checkbox",{attrs:{size:"small",label:"全部地区",border:""},model:{value:t.isDisabled,callback:function(e){t.isDisabled=e},expression:"isDisabled"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"时间段:"}},[a("el-date-picker",{attrs:{size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.actTime,callback:function(e){t.actTime=e},expression:"actTime"}})],1)],1),t._v(" "),a("el-col",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.queryActList}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.resetForm}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-card",{staticClass:"mt20"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.actList,border:"",stripe:!0}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"hdCode",label:"活动编号",align:"center",width:"180px"}}),t._v(" "),a("el-table-column",{attrs:{property:"actName",label:"活动名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"活动时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.stimeStr)+"至"+t._s(e.row.etimeStr)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"statusName",label:"状态",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"260px"},scopedSlots:t._u([{key:"default",fn:function(e){return[4!=e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.edit(e.row.id,e.row.form)}}},[t._v("编辑")]):t._e(),t._v(" "),2==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.post(e.row.id)}}},[t._v("发布")]):t._e(),t._v(" "),3==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.post(e.row.id)}}},[t._v("发布")]):t._e(),t._v(" "),a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.clone(e.row.id,e.row.form)}}},[t._v("复制")]),t._v(" "),a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.getLogList(e.row.actCode)}}},[t._v("投放日志")]),t._v(" "),1==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.stop(e.row.id)}}},[t._v("暂停")]):t._e(),t._v(" "),1==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.over(e.row.id)}}},[t._v("结束")]):t._e(),t._v(" "),4==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.del(e.row.id)}}},[t._v("删除")]):t._e(),t._v(" "),4!=e.row.status&&0!=e.row.status&&-1==e.row.form.indexOf("act-6")?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.editTpl(e.row.form,e.row.actCode)}}},[t._v("活动模板")]):t._e()]}}])})],1),t._v(" "),t.actForms?a("el-pagination",{attrs:{background:"","current-page":t.queryActParams.pageNo,"page-size":t.queryActParams.pageSize,layout:"total, prev, pager, next, jumper",total:t.actListTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{visible:t.addActDialogVisible,width:"900px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addActDialogVisible=e}}},[a("div",{staticClass:"act-wrap"},[a("div",{staticClass:"title"},[a("ul",t._l(t.actFormName,function(e,s){return a("li",{key:s,class:s==t.nowActiveIndex?"active":"",on:{click:function(a){t.getCheckedAct(e,s)}}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticStyle:{clear:"both"}})]),t._v(" "),0!==t.actForms.length?a("div",t._l(t.actForms,function(e){return a("div",{key:e.id,staticClass:"act-item"},[a("img",{staticStyle:{height:"282px"},attrs:{src:e.extUrl,alt:e.name}}),t._v(" "),a("p",{staticClass:"act-name"},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"desc"},[t._v(t._s(e.note?e.note:"暂无活动说明~"))]),t._v(" "),a("div",{staticClass:"btn"},["act-601"!=e.form?a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("预览")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.goPut(e)}}},[t._v("投放")])],1)])})):a("div",{staticStyle:{"margin-top":"200px",height:"224px",width:"100%","text-align":"center"}},[t._v("暂无")])]),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.actForms,expression:"actForms"}],attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.actParams.pageNo,"page-size":t.actParams.pageSize,layout:"total, prev, pager, next, jumper",total:t.actTotal},on:{"size-change":t.actHandleSizeChange,"current-change":t.actHandleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.putLogVisible,width:"900px","close-on-click-modal":!1},on:{"update:visible":function(e){t.putLogVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:8}},[t._v("\n        投放时间\n        "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){t.logDetail(t.nowActCode,t.putLogTime)}},model:{value:t.putLogTime,callback:function(e){t.putLogTime=e},expression:"putLogTime"}},t._l(t.putTimeList,function(t,e){return a("el-option",{key:e,attrs:{label:new Date(t.time).Format("yyyy-MM-dd hh:mm:ss"),value:t.version}})}))],1),t._v(" "),a("el-col",{attrs:{span:12,offset:3}},[t._v("\n        投放日志\n      ")])],1),t._v(" "),a("div",[a("div",{staticClass:"mt20"},[t._v("常规奖池")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.normalLogList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"奖品数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outNum",label:"已发数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"剩余数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.totalNum-e.row.outNum)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖概率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.probability+"%")+"\n          ")]}}])})],1)],1),t._v(" "),0!=t.firstScanLogList.length?a("div",[a("div",{staticClass:"mt20"},[t._v("首扫奖池")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.normalLogList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"奖品数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outNum",label:"已发数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"剩余数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.totalNum-e.row.outNum)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖概率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.probability+"%")+"\n          ")]}}])})],1)],1):t._e(),t._v(" "),0!=t.nWinLogList.length?a("div",[a("div",{staticClass:"mt20"},[t._v("n次必中奖池")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.normalLogList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"奖品数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outNum",label:"已发数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"剩余数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.totalNum-e.row.outNum)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖概率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.probability+"%")+"\n          ")]}}])})],1)],1):t._e(),t._v(" "),0!=t.fixationLogList.length?a("div",[a("div",{staticClass:"mt20"},[t._v("定投奖池")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.normalLogList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"奖品数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outNum",label:"已发数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"剩余数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.totalNum-e.row.outNum)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖概率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.probability+"%")+"\n          ")]}}])})],1)],1):t._e()],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("CAHD")},"data-v-0ea62251",null);e.default=r.exports},gkOA:function(t,e){},hqvV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["orderCode"],name:"ActOrderPageDetail",data:()=>({allProvinceData:[],allCityData:[],allDistrictData:[],selectallPro:"",selectallCity:"",selectallDistrict:"",formDetail:{orderId:"",create_time:"",category:"",awardName:"",score:"",username:"",mobile:"",province:"",city:"",district:"",address:"",status:1,ctime:"",lmobile:"",jmcnl:"",nickName:"",orderStatus:"",orderWLoad:"",waybill:"",finish_time:"",orderFLoad:""}}),created(){this.getObjectPageDetail(this.orderCode),this.init()},watch:{selectallPro(t,e){t&&t!=e&&(this.formDetail.province=t,this.allMoreRightRegionList(t,2))},selectallCity(t,e){t&&t!=e&&(this.formDetail.city=t,this.allMoreRightRegionList(t,3))},selectallDistrict(t,e){t&&t!=e&&(this.formDetail.district=t)}},methods:{init(){this.allRightRegionList()},allRightRegionList(){this.$request.post("/api/saotx/dim/regionByPCode",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allProvinceData=t.data)})},allMoreRightRegionList(t,e){this.$request.post("/api/saotx/dim/regionByPCode",{parentCode:t},!0,t=>{"200000"===t.ret&&(2==e&&(this.allCityData=t.data),3==e&&(this.allDistrictData=t.data))})},submitFormSave(){let t={userName:this.formDetail.username,mobile:this.formDetail.lmobile,province:this.formDetail.province,city:this.formDetail.city,district:this.formDetail.district,adddress:this.formDetail.address,orderId:this.formDetail.orderId};this.$request.post("/sc/saotx/mall/order/actModifyReceiptInfo",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnObjectPage()):this.$message({message:t.message,type:"warning"})},t=>{})},returnObjectPage(){this.$router.push({path:"/Orders/mall/act"})},getObjectPageDetail(t){this.$request.post("/sc/saotx/mall/order/selfActOrderDetail",{orderId:t},!0,t=>{"200000"==t.ret&&(console.log(t.data),this.formDetail.orderId=t.data.orderInfo.orderid,this.formDetail.create_time=this.formatDateTime(t.data.orderInfo.create_time),this.formDetail.category=t.data.orderInfo.category,this.formDetail.awardName=t.data.orderInfo.awardName,this.formDetail.score=t.data.orderInfo.score,this.formDetail.status=t.data.orderInfo.status,this.formDetail.mobile=t.data.orderInfo.mobile,this.formDetail.jmcnl=t.data.orderInfo.jmcnl,this.formDetail.nickName=t.data.orderInfo.nickName,this.formDetail.lmobile=t.data.ReceiptInfo.lmobile,this.formDetail.username=t.data.ReceiptInfo.username,this.formDetail.province=t.data.ReceiptInfo.province,this.selectallPro=t.data.ReceiptInfo.province+"",this.formDetail.city=t.data.ReceiptInfo.city,this.selectallCity=t.data.ReceiptInfo.city+"",this.formDetail.district=t.data.ReceiptInfo.district,this.selectallDistrict=t.data.ReceiptInfo.district+"",this.formDetail.address=t.data.ReceiptInfo.address,""!=t.data.orderTrackingInfo.ctime&&(this.formDetail.ctime=this.formatDateTime(t.data.orderTrackingInfo.ctime)),this.formDetail.orderStatus=t.data.orderTrackingInfo.orderStatus,this.formDetail.orderWLoad=t.data.orderTrackingInfo.orderWLoad,this.formDetail.waybill=t.data.orderTrackingInfo.waybill,this.formDetail.finish_time=this.formatDateTime(t.data.orderTrackingInfo.finish_time),this.formDetail.orderFLoad=t.data.orderTrackingInfo.orderFLoad)})},formatDateTime(t){if(null!=t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var i=e.getDate();i=i<10?"0"+i:i;var r=e.getHours();r=r<10?"0"+r:r;var l=e.getMinutes(),o=e.getSeconds();return a+"-"+s+"-"+i+" "+r+":"+(l=l<10?"0"+l:l)+":"+(o=o<10?"0"+o:o)}}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/自建订单明细/订单明细查询")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("div",[a("h1",[t._v("订单信息")])]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formDetail}},[a("el-row",[a("el-form-item",{attrs:{size:"small",label:"订单号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderId,callback:function(e){t.$set(t.formDetail,"orderId",e)},expression:"formDetail.orderId"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.create_time,callback:function(e){t.$set(t.formDetail,"create_time",e)},expression:"formDetail.create_time"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"活动名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.jmcnl,callback:function(e){t.$set(t.formDetail,"jmcnl",e)},expression:"formDetail.jmcnl"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"中奖人:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.nickName,callback:function(e){t.$set(t.formDetail,"nickName",e)},expression:"formDetail.nickName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"中奖人手机号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.mobile,callback:function(e){t.$set(t.formDetail,"mobile",e)},expression:"formDetail.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"奖项名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.awardName,callback:function(e){t.$set(t.formDetail,"awardName",e)},expression:"formDetail.awardName"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("收货人信息")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"联系人姓名:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:1!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.username,callback:function(e){t.$set(t.formDetail,"username",e)},expression:"formDetail.username"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"联系人电话:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:1!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.lmobile,callback:function(e){t.$set(t.formDetail,"lmobile",e)},expression:"formDetail.lmobile"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"收货地址:省:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:1!=t.formDetail.status},model:{value:t.selectallPro,callback:function(e){t.selectallPro=e},expression:"selectallPro"}},t._l(t.allProvinceData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"市:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:1!=t.formDetail.status},model:{value:t.selectallCity,callback:function(e){t.selectallCity=e},expression:"selectallCity"}},t._l(t.allCityData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"区:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:1!=t.formDetail.status},model:{value:t.selectallDistrict,callback:function(e){t.selectallDistrict=e},expression:"selectallDistrict"}},t._l(t.allDistrictData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"详细地址:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:1!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.address,callback:function(e){t.$set(t.formDetail,"address",e)},expression:"formDetail.address"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("订单跟踪")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.create_time,callback:function(e){t.$set(t.formDetail,"create_time",e)},expression:"formDetail.create_time"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderStatus,callback:function(e){t.$set(t.formDetail,"orderStatus",e)},expression:"formDetail.orderStatus"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"发货时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.ctime,callback:function(e){t.$set(t.formDetail,"ctime",e)},expression:"formDetail.ctime"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderWLoad,callback:function(e){t.$set(t.formDetail,"orderWLoad",e)},expression:"formDetail.orderWLoad"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"物流号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.waybill,callback:function(e){t.$set(t.formDetail,"waybill",e)},expression:"formDetail.waybill"}})],1)],1),t._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",disabled:1!=t.formDetail.status},on:{click:t.submitFormSave}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.returnObjectPage}},[t._v("返回列表")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("dJ1n")},"data-v-0d4e1d3d",null);e.default=r.exports},hwnb:function(t,e){},jvRN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data:()=>({activeName:"home",addActParams:{conf:"",form:"act-103",id:"",name:"",note:""},addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},iconUrl:[{key:1,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:378"},{key:2,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:379"},{key:3,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:380"},{key:4,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:381"},{key:5,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:382"},{key:6,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:383"}],configItem:{title:"",description:"",headerImgUrl:"http://qoss.qrmkt.cn/new_platform/egg-title.png",bgImgUrl:"http://qoss.qrmkt.cn/new_platform/eggBg.png",actTip:"http://qoss.qrmkt.cn/new_platform/egg-top.png",awardUrl:[{imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zhongjiang74@2x.png"}],drawBgUrl:"http://qoss.qrmkt.cn/new_platform/egg-award-bg.png",drawImgUrl:"http://qoss.qrmkt.cn/new_platform/award_img.png",drawBtnUrl:"http://qoss.qrmkt.cn/new_platform/egg-award-btn.png",cryImgUrl:"http://qoss.qrmkt.cn/new_platform/egg-no-award-bg.png",cryBtnUrl:"http://qoss.qrmkt.cn/new_platform/egg-no-award-btn.png"},uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail()},methods:{getActDetail(){this.id?this.$request.post("/api/saotx/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/saotx/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBgSuccess(t){if("200000"===t.ret)return this.configItem.drawBgUrl=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/saotx/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/saotx/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"game-con"},t._l(t.iconUrl,function(t){return a("div",{key:t.key,staticClass:"game-item"},[a("img",{attrs:{src:t.imgUrl,alt:""}})])})),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,alt:""},on:{click:function(e){t.showEditConIndex=3}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 580*266px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 74*90px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con award-con"},[a("img",{staticClass:"award-alert",attrs:{src:t.configItem.drawBgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"award-text"},[a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.drawBgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px,格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px,格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con award-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"award-alert",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"award-no-text"},[a("h3",[t._v("很遗憾，未中奖")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放:\n\t\t\t\t\t\t"),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("S/fb")},"data-v-3d3b4dd2",null);e.default=r.exports},kqyw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},data:()=>({listData:[],allKeyWordData:[],allGiftTypeData:[],allOneCateData:[],allTwoCateData:[],allThrCateData:[],allFroCateData:[],selectallKyeType:"",selectallOneCate:"",selectallTwoCate:"",selectallThrCate:"",selectallFroCate:"",idtwo:"1",idthr:"1",idfro:"1",form:{kyeName:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:"",startTime:"",endTime:"",status:"",orderType:2,giftType:"",orderId:"",awardName:"",userName:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")}}),name:"JdOrderPage",created(){this.init()},watch:{selectallKyeType(t,e){t&&t!=e&&(1==t&&(this.form.orderId=this.form.kyeName,this.form.awardName="",this.form.userName=""),2==t&&(this.form.orderId="",this.form.awardName=this.form.kyeName,this.form.userName=""),3==t&&(this.form.orderId="",this.form.awardName="",this.form.userName=this.form.kyeName))},selectallOneCate(t,e){t&&t!=e&&(this.idtwo="",this.form.cateLvl1=t,this.allMoreCateList(t,2))},selectallTwoCate(t,e){t&&t!=e&&(this.idthr="",this.form.cateLvl2=t,this.allMoreCateList(t,3))},selectallThrCate(t,e){t&&t!=e&&(this.idfro="",this.form.cateLvl3=t,this.allMoreCateList(t,4))},selectallForCate(t,e){t&&t!=e&&(this.form.cateLvl4=t)}},methods:{init(){this.allKeyWordList(),this.allGiftTypeList(),this.allOneCateList(),this.getlistData()},changek(){1==this.selectallKyeType&&(this.form.orderId=this.form.kyeName,this.form.awardName="",this.form.userName=""),2==this.selectallKyeType&&(this.form.orderId="",this.form.awardName=this.form.kyeName,this.form.userName=""),3==this.selectallKyeType&&(this.form.orderId="",this.form.awardName="",this.form.userName=this.form.kyeName)},allKeyWordList(){this.$request.post("/sc/saotx/mall/keyWordMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allKeyWordData=t.data)})},allGiftTypeList(){this.$request.post("/sc/saotx/mall/giftTypeMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allGiftTypeData=t.data)})},allOneCateList(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allOneCateData=t.data)})},allMoreCateList(t,e){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:t},!0,t=>{console.log(t.data),"200000"===t.ret&&(2==e&&(this.selectallTwoCate="",this.selectallThrCate="",this.selectallFroCate="",this.allTwoCateData=t.data),3==e&&(this.selectallThrCate="",this.selectallFroCate="",this.allThrCateData=t.data),4==e&&(this.selectallFroCate="",this.allFroCateData=t.data))})},getlistData(){this.$request.post("/sc/saotx/mall/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},queryData:function(t){this.getlistData()},currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},initPagination(t){t&&(this.pagination.total=t.count)},resetData:function(t){this.selectallKyeType="",this.selectallOneCate="",this.selectallTwoCate="",this.selectallThrCate="",this.selectallFroCate="",this.idtwo="1",this.idthr="1",this.idfro="1",this.form={kyeName:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:"",startTime:"",endTime:"",status:"",orderType:2,giftType:"",orderId:"",awardName:"",userName:"",pageNo:1,pageSize:10},this.getlistData()},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/sc/saotx/mall/order/exportOrder",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/京东订单明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"商品类型:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.giftType,callback:function(e){t.$set(t.form,"giftType",e)},expression:"form.giftType"}},t._l(t.allGiftTypeData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"时间段:",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"关键字:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectallKyeType,callback:function(e){t.selectallKyeType=e},expression:"selectallKyeType"}},t._l(t.allKeyWordData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入关键词"},on:{input:function(e){t.changek()}},model:{value:t.form.kyeName,callback:function(e){t.$set(t.form,"kyeName",e)},expression:"form.kyeName"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"分类",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectallOneCate,callback:function(e){t.selectallOneCate=e},expression:"selectallOneCate"}},t._l(t.allOneCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idtwo,clearable:!!t.idtwo},model:{value:t.selectallTwoCate,callback:function(e){t.selectallTwoCate=e},expression:"selectallTwoCate"}},t._l(t.allTwoCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idthr,clearable:!!t.idthr},model:{value:t.selectallThrCate,callback:function(e){t.selectallThrCate=e},expression:"selectallThrCate"}},t._l(t.allThrCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idfro,clearable:!!t.idfro},model:{value:t.selectallFroCate,callback:function(e){t.selectallFroCate=e},expression:"selectallFroCate"}},t._l(t.allFroCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s((t.form.pageNo-1)*t.form.pageSize+e.$index+1)+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"商品名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(2==e.row.giftType?"实物礼品":"虚拟礼品"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate4Name",label:"四级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deliveryFee",label:"运费"}}),t._v(" "),a("el-table-column",{attrs:{prop:"score",label:"兑换币"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"联系人姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系人电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"收货地址"}}),t._v(" "),a("el-table-column",{attrs:{label:"下单时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.createTime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态\t"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"待收货":2==e.row.status?"已收货":0==e.row.status?"待发货":""))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("MCU/")},"data-v-296f115b",null);e.default=l.exports},l007:function(t,e){},"p+AY":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={components:{addAct:a("xvlj").default},data:()=>({selectOption:[],keywords:"",actListParams:{ctime:"",form:"",keywords:"",pageNo:1,pageSize:10},batchRemoveIdList:[],flag:{},total:null,actList:[],addActDialogVisible:!1,delDialogVisible:!1,actFormName:[{name:"全部",code:""}],nowActiveIndex:0,actParams:{pageNo:1,pageSize:4,pcode:""},actTotal:null,actForms:[],loading:!0,formPath:{"act-101":"/market/actTpl/AddActSudoku?id=","act-102":"/market/actTpl/AddWingAct?id=","act-103":"/market/actTpl/addActEgg?id=","act-104":"/market/actTpl/addActFanpaizi?id=","act-501":"/market/actTpl/addActQuestion?id=","act-301":"/market/actTpl/addActRedPacked?id=","act-105":"/market/actTpl/addRound?id=","act-100":"/market/actTpl/addAct?id=","act-701":"/market/actTpl/addCapsuleToys?id=","act-702":"/market/actTpl/addDadishu?id="}}),created(){this.getActList(),this.getActType(),this.getActCodeList()},beforeRouteEnter(t,e,a){a()},beforeRouteLeave(t,e,a){a()},methods:{getActList(){this.$request.post("/api/saotx/acttpl/list",this.actListParams,!0,t=>{"200000"===t.ret?(this.actList=t.data.list,this.total=t.data.page.count,this.loading=!1):this.$message.error(t.message)},t=>{console.log(t)})},getActType(){this.$request.post("/api/saotx/act/allForms",this.actParams,!0,t=>{"200000"==t.ret?(this.selectOption=t.data.list,this.selectOption.unshift({name:"全部",form:""})):this.$message.error(t.message)},t=>{console.log(t)})},addAct(){this.addActDialogVisible=!0,this.actParams.pcode="",this.actParams.pageNo=1,this.nowActiveIndex=0,this.getAct()},getAct(){this.$request.post("/api/saotx/act/allForms",this.actParams,!0,t=>{"200000"==t.ret?(this.actForms=[],this.actForms=t.data.list,this.actTotal=t.data.page.count):this.$message.error(t.message)},t=>{console.log(t)})},getActCodeList(){this.$request.post("/api/saotx/act/formByPCode",{pCode:"",pageNo:1,pageSize:-1},!0,t=>{"200000"==t.ret?t.data.list.forEach(t=>{"form-cate6"!=t.code&&this.actFormName.push(t)}):this.$message.error(t.message)})},getCheckedAct(t,e){this.nowActiveIndex=e,this.actParams.pcode=t.code,this.actParams.pageNo=1,this.getAct()},queryActList(){this.actListParams.pageNo=1,this.getActList()},resetSearch(){this.actListParams.ctime="",this.actListParams.form="",this.actListParams.keywords="",this.actListParams.pageNo=1,this.getActList()},async delAct(t){let e=[];if(Array.isArray(t)?e=t:e.push(t),"confirm"!==await this.$confirm("您确定删除此模板？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消删除"});this.$request.post("/api/saotx/acttpl/remBatch",{idArr:e},!0,t=>{"200000"===t.ret?(this.$message.success("删除成功"),this.getActList()):this.$message.error(t.message)},t=>{console.log(t)})},async batchDel(){if(0==this.batchRemoveIdList.length)return;if("confirm"!==await this.$confirm("您确定删除"+this.batchRemoveIdList.length+"条模板？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消删除"});this.$request.post("/api/saotx/acttpl/remBatch",{idArr:this.batchRemoveIdList},!0,t=>{"200000"===t.ret?(this.$message.success("删除成功"),this.actListParams.ctime="",this.actListParams.form="",this.actListParams.keywords="",this.actListParams.pageNo=1,this.actListParams.pageSize=10,this.getActList()):this.$message.error(t.message)},t=>{console.log(t)})},handleSelectionChange(t){this.batchRemoveIdList=[],t.forEach(t=>{this.batchRemoveIdList.push(t.id)})},handleSelectionAllChange(t){this.batchRemoveIdList=[],t.forEach(t=>{this.batchRemoveIdList.push(t.id)})},handleSizeChange(t){this.actListParams.pageSize=t,this.getActList()},handleCurrentChange(t){this.actListParams.pageNo=t,this.getActList()},actHandleSizeChange(t){this.actParams.pageSize=t,this.getAct()},actHandleCurrentChange(t){this.actParams.pageNo=t,this.getAct()},goAddActTpl(t,e){this.$router.push(this.formPath[t]+e)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actTpl-container"},[a("el-card",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addAct()}}},[t._v("新建活动模板")]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.actListParams,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"模板类型"}},[a("el-select",{attrs:{size:"small"},model:{value:t.actListParams.form,callback:function(e){t.$set(t.actListParams,"form",e)},expression:"actListParams.form"}},t._l(t.selectOption,function(t){return a("el-option",{key:t.form,attrs:{label:t.name,value:t.form}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-col",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",type:"date",placeholder:"开始时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.actListParams.ctime,callback:function(e){t.$set(t.actListParams,"ctime",e)},expression:"actListParams.ctime"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入关键词"},model:{value:t.actListParams.keywords,callback:function(e){t.$set(t.actListParams,"keywords",e)},expression:"actListParams.keywords"}})],1)],1),t._v(" "),a("el-col",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.queryActList()}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.resetSearch()}}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-card",{staticClass:"mt20"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20",staticStyle:{width:"100%"},attrs:{border:"",data:t.actList},on:{"select-all":t.handleSelectionAllChange,select:t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tplCode",label:"模板编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"模板名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"note",label:"模板说明",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"创建时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"creatorName",label:"创建人",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"statusName",label:"状态",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.goAddActTpl(e.row.form,e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.$router.push("/market/actTpl/actSetConf?form="+e.row.form+"&tplCode="+e.row.tplCode)}}},[t._v("投放")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.delAct(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-button",{staticClass:"mt20",attrs:{type:"danger"},on:{click:t.batchDel}},[t._v("批量删除")]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.actListParams.pageNo,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.addActDialogVisible,width:"900px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addActDialogVisible=e}}},[a("div",{staticClass:"act-wrap"},[a("div",{staticClass:"title"},[a("ul",t._l(t.actFormName,function(e,s){return a("li",{key:s,class:s==t.nowActiveIndex?"active":"",on:{click:function(a){t.getCheckedAct(e,s)}}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticStyle:{clear:"both"}})]),t._v(" "),0!==t.actForms.length?a("div",t._l(t.actForms,function(e){return a("div",{key:e.id,staticClass:"act-item"},[a("img",{staticStyle:{height:"282px"},attrs:{src:e.extUrl,alt:e.name}}),t._v(" "),a("p",[t._v(t._s(e.name)),a("i",{staticClass:"el-icon-circle-plus",on:{click:function(a){t.goAddActTpl(e.code,"")}}})])])})):a("div",[t._v("暂无")]),t._v(" "),t.actForms?a("el-col",{attrs:{span:24}},[a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":t.actParams.pageNo,"page-size":t.actParams.pageSize,layout:"total, prev, pager, next, jumper",total:t.actTotal},on:{"size-change":t.actHandleSizeChange,"current-change":t.actHandleCurrentChange}})],1):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("byF6")},"data-v-5715c616",null);e.default=r.exports},pNFW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","actCode","form"],data(){return{stepActive:1,keywords:"",tableData:[],loading:!1,max:5,total:10,headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},uploadURL:"/api/saotx/actquest/import?actCode="+this.actCode}},watch:{},created(){this.getList()},methods:{myCallback(t){this.page=t,this.getList()},addQues(){this.$router.push("/market/actTpl/quesEdit?id="+this.id+"&actCode="+this.actCode+"&form="+this.form)},reset(){this.page=1,this.keywords="",this.search()},addBatch(t){if("200000"===t.ret)return this.page=1,this.keywords="",this.getList(),this.$message.success("导入成功!");this.$message.error(t.message)},editItem(t){this.$router.push("/market/actTpl/quesEdit?quesId="+t.id+"&id="+this.id+"&actCode="+this.actCode+"&form="+this.form)},search(){this.getList()},removeItem(t){var e=this;this.$confirm("确定要删除该问题？").then(a=>{e.deleteQues(t)}).catch(t=>{})},deleteQues(t){this.$request.post("/api/saotx/actquest/delete",{actQuest:{id:t.id,quesId:t.quesId,actCode:t.actCode,quesTitle:t.quesTitle,quesType:t.quesType},actAnsw:t.actAnsw},!0,t=>{if("200000"==t.ret)return this.$message.success("删除成功!"),void this.getList();this.$message.error(t.messgae)})},getList(){this.$request.post("/api/saotx/actquest/list",{pageNo:this.page,pageSize:this.max,keywords:this.keywords,actCode:this.actCode},!0,t=>{if("200000"==t.ret)return this.total=t.data.page.count,void(this.tableData=t.data.list);this.$message.error(t.messgae)})},getDetail(){this.id&&this.$request.post("/api/saotx/act/detail",{id:this.id},!0,t=>{if("200000"==t.ret){if("1"==this.clone){for(let e in this.confData)this.confData[e]=t.data.act[e];console.log(this.confData)}else this.confData=t.data.act;return this.confData.idx=this.confData.idx+"",this.actTime.push(this.confData.stimeStr),void this.actTime.push(this.confData.etimeStr)}this.$message.error(t.messgae)})},nextStep(){this.$router.push("/market/actTpl/actPutConf?id="+this.id+"&actCode="+this.actCode+"&form="+this.form)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ques-list-root"},[a("el-card",[a("el-steps",{staticClass:"step-style",attrs:{active:t.stepActive,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基础设置"}}),t._v(" "),a("el-step",{attrs:{title:"题目设置"}}),t._v(" "),a("el-step",{attrs:{title:"投放设置"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addQues()}}},[t._v("新增题目")]),t._v(" "),a("el-upload",{staticClass:"upload-txt",attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.addBatch,accept:".xlsx","show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("批量导入")])],1),t._v(" "),a("br"),t._v("\n           \t 关键字："),a("el-input",{staticClass:"keywords",attrs:{size:"small",placeholder:"请输入关键词"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._v(" "),a("el-button",{staticClass:"search",attrs:{type:"primary",size:"small"},on:{click:function(e){t.search()}}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"search",attrs:{type:"primary",size:"small"},on:{click:function(e){t.reset()}}},[t._v("重置")])],1),t._v(" "),a("el-card",{staticClass:"table-part"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"quesTitle",label:"题目名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"expand",label:"答案"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"题目名称："}},[a("span",[t._v(t._s(e.row.quesTitle))])]),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"题目答案："}}),t._v(" "),a("ul",{staticClass:"aws-part"},t._l(e.row.actAnsw,function(e,s){return a("li",{key:s},[t._v(t._s(e.answName)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.answFlag,expression:"item.answFlag==1"}]})])}))],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.editItem(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeItem(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{staticClass:"pagination-css",attrs:{layout:"total,prev, pager, next,jumper",background:"",total:t.total,"page-size":t.max},on:{"current-change":t.myCallback}}),t._v(" "),a("div",{staticClass:"next-div"},[a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("Byf1")},"data-v-2d9f42af",null);e.default=r.exports},rd4F:function(t,e){},u14k:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("G0J2"),i={props:["form","tplCode","id","clone"],components:{quillEditor:s.quillEditor},data(){return{editorOption:{modules:{toolbar:[[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike",,"blockquote"],[{color:[]},{background:[]},{align:[]}]]},placeholder:"请输入活动说明"},extInfo:{limited:1,time:60},idxSelect:{},confData:{actDesc:"",actName:"",banner:"",form:"",idx:"1",note:"",stimeStr:"",etimeStr:"",showStatus:1,tplCode:"",extInfo:"",number:""},redConf:{joinNum:1,share:0},confRules:{actName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],note:[{required:!0,message:"请输入活动描述",trigger:"blur"}],date:[{required:!0,validator:(t,e,a)=>{this.confData.stimeStr&&this.confData.etimeStr?this.confData.stimeStr>=this.confData.etimeStr?a(new Error("开始时间必须小于结束时间")):a():a(new Error("请选择活动时间"))},trigger:"change"}],idx:[{required:!0,validator:(t,e,a)=>{"0"==e?a(new Error("请选择活动优先级")):a()},trigger:"change"}],banner:[{required:!0,validator:(t,e,a)=>{this.confData.banner?a():a(new Error("请选择活动图片"))}}],desc:[{required:!0,validator:(t,e,a)=>{this.confData.actDesc?a():a(new Error("请输入活动说明"))}}],number:[{required:!0,validator:(t,e,a)=>{this.redConf.joinNum?a():a(new Error("请输入参与次数"))}}],isShare:[{required:!0,validator:(t,e,a)=>{a()}}]},timeDisable:!1,uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},stepActive:0}},created(){this.getDetail(),this.getIdxSelect()},methods:{limitNum(){if(this.extInfo.time.length>4){var t=this.extInfo.time.slice(0,4);this.extInfo.time=parseInt(t)}},getDetail(){this.id&&this.$request.post("/api/saotx/act/detail",{id:this.id},!0,t=>{if("200000"==t.ret){if("1"==this.clone)for(let e in this.confData)this.confData[e]=t.data.act[e];else this.confData=t.data.act;return"act-301"==this.form&&(this.redConf=JSON.parse(this.confData.extInfo)),this.confData.idx=this.confData.idx+"",this.redConf.extInfo&&(this.extInfo=JSON.parse(this.confData.extInfo)),void(this.confData.stimeStr&&this.confData.etimeStr&&this.handleDisableTime())}this.$message.error(t.messgae)})},handleDisableTime(){(new Date).getTime()>=new Date(this.confData.stimeStr).getTime()&&(this.timeDisable=!0)},getIdxSelect(){this.$request.post("/api/saotx/act/idxSelect",{},!0,t=>{if("200000"===t.ret)return this.idxSelect=t.data})},upBannerImg(t){if("200000"===t.ret)return this.confData.banner=t.data.accessUrl,void this.$refs.actSetConfRef.validateField("banner",t=>{});this.$message.error(t.message)},onEditorBlur(){this.$refs.actSetConfRef.validateField("desc",t=>{})},nextStep(){this.$refs.actSetConfRef.validate(t=>t?"act-501"==this.form&&1==this.extInfo.limited&&(this.extInfo.time<=0||!this.extInfo.time)?this.$message.error("请填写时间限制的具体值!"):(this.id?"act-501"==this.form&&(this.confData.extInfo=JSON.stringify(this.extInfo)):(this.confData.form=this.form,"act-501"==this.form&&(this.confData.extInfo=JSON.stringify(this.extInfo)),this.confData.tplCode=this.tplCode),"act-301"==this.form&&(this.confData.extInfo=JSON.stringify(this.redConf)),void this.$request.post("/api/saotx/act/saveOrModify",this.confData,!0,t=>{if("200000"===t.ret)return"act-501"==this.form?this.$router.push("/market/actTpl/quesActSetConf?id="+t.data.id+"&actCode="+t.data.actCode+"&form="+this.form):"act-301"==this.form?this.$router.push(`/market/actTpl/redPut?id=${t.data.id}&actCode=${t.data.actCode}`):this.$router.push("/market/actTpl/actPutConf?id="+t.data.id+"&actCode="+t.data.actCode);this.$message.error(t.message)})):this.$message.error("请完善表单数据!"))},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),e&&a}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actSetConf-container"},[a("el-breadcrumb",{directives:[{name:"show",rawName:"v-show",value:"act-501"!=t.form,expression:'form!="act-501"'}],attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("基础设置")])],1),t._v(" "),a("el-card",[a("el-steps",{directives:[{name:"show",rawName:"v-show",value:"act-501"==t.form,expression:'form=="act-501"'}],staticClass:"step-style",attrs:{active:t.stepActive,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基础设置"}}),t._v(" "),a("el-step",{attrs:{title:"题目设置"}}),t._v(" "),a("el-step",{attrs:{title:"投放设置"}})],1),t._v(" "),a("el-form",{ref:"actSetConfRef",attrs:{model:t.confData,"label-width":"150px",rules:t.confRules}},[a("el-form-item",{attrs:{label:"活动名称：",prop:"actName"}},[a("el-input",{attrs:{maxLength:"15",placeholder:"请输入活动名称，15字以内"},model:{value:t.confData.actName,callback:function(e){t.$set(t.confData,"actName",e)},expression:"confData.actName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动描述：",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:3,resize:"none",maxLength:"15",placeholder:"请输入活动描述，15字以内"},model:{value:t.confData.note,callback:function(e){t.$set(t.confData,"note",e)},expression:"confData.note"}})],1),t._v(" "),"act-301"!=t.form?a("el-form-item",{attrs:{label:"优先级：",prop:"idx"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.confData.idx,callback:function(e){t.$set(t.confData,"idx",e)},expression:"confData.idx"}},t._l(t.idxSelect,function(t,e,s){return a("el-option",{key:s,attrs:{label:t,value:e}})}))],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"活动时间：",prop:"date"}},[a("el-date-picker",{attrs:{disabled:t.timeDisable,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.confData.stimeStr,callback:function(e){t.$set(t.confData,"stimeStr",e)},expression:"confData.stimeStr"}}),t._v("\n          至\n          "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.confData.etimeStr,callback:function(e){t.$set(t.confData,"etimeStr",e)},expression:"confData.etimeStr"}})],1),t._v(" "),"act-301"!==t.form?a("el-form-item",{attrs:{label:"活动图片：",prop:"banner"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":t.beforeAvatarUpload,action:t.uploadURL,headers:t.headerObj,"on-success":t.upBannerImg,"show-file-list":!1}},[t.confData.banner?a("img",{staticClass:"avatar",attrs:{src:t.confData.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传图片的最佳尺寸：750像素*160像素；格式png、jpg；大小不超过2M")])])],1):a("el-form-item",{attrs:{label:"活动图片：",prop:"banner"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":t.beforeAvatarUpload,action:t.uploadURL,headers:t.headerObj,"on-success":t.upBannerImg,"show-file-list":!1}},[t.confData.banner?a("img",{staticClass:"avatar red-packet",attrs:{src:t.confData.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon red-packet"}),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传图片的最佳尺寸：200像素*200像素；格式png、jpg；大小不超过2M")])])],1),t._v(" "),"act-301"==t.form?a("el-form-item",{attrs:{label:"参与次数：",prop:"number"}},[t._v("\n          每人每场可参与\n          "),a("el-input-number",{attrs:{precision:0,min:1,"controls-position":"right"},model:{value:t.redConf.joinNum,callback:function(e){t.$set(t.redConf,"joinNum",e)},expression:"redConf.joinNum"}}),t._v("\n          次\n        ")],1):t._e(),t._v(" "),"act-301"==t.form?a("el-form-item",{attrs:{label:"分享设置：",prop:"isShare"}},[a("el-radio",{attrs:{label:1},model:{value:t.redConf.share,callback:function(e){t.$set(t.redConf,"share",e)},expression:"redConf.share"}},[t._v("开启分享")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.redConf.share,callback:function(e){t.$set(t.redConf,"share",e)},expression:"redConf.share"}},[t._v("关闭分享")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"活动说明：",prop:"desc"}},[a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption,placeholder:"请输入活动说明，300字以内"},on:{blur:function(e){t.onEditorBlur(e)}},model:{value:t.confData.actDesc,callback:function(e){t.$set(t.confData,"actDesc",e)},expression:"confData.actDesc"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"act-501"==t.form,expression:'form=="act-501"'}],attrs:{label:"答题时间：",prop:"quesTime"}},[a("el-radio",{attrs:{label:1},model:{value:t.extInfo.limited,callback:function(e){t.$set(t.extInfo,"limited",e)},expression:"extInfo.limited"}},[t._v("不限")]),t._v(" "),a("el-radio",{attrs:{label:2},model:{value:t.extInfo.limited,callback:function(e){t.$set(t.extInfo,"limited",e)},expression:"extInfo.limited"}},[t._v("总时间限"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.extInfo.time,expression:"extInfo.time"}],staticClass:"limited-time",attrs:{type:"number"},domProps:{value:t.extInfo.time},on:{input:[function(e){e.target.composing||t.$set(t.extInfo,"time",e.target.value)},t.limitNum]}}),t._v("秒")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否在落地页显示："}},[a("el-radio",{attrs:{label:1},model:{value:t.confData.showStatus,callback:function(e){t.$set(t.confData,"showStatus",e)},expression:"confData.showStatus"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.confData.showStatus,callback:function(e){t.$set(t.confData,"showStatus",e)},expression:"confData.showStatus"}},[t._v("否")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("保存并进入下一步")]),t._v(" "),a("el-button",{on:{click:function(e){t.$router.push("/market/actTpl")}}},[t._v("返回列表")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("x8+d")},"data-v-1f792916",null);e.default=l.exports},v3hH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},name:"IntegralPage",data:()=>({listData:[],allBrandsData:[],allSpecisData:[],allareaData:[],selectAllBrands:"",selectSpeciSns:"",selectAllarea:"",id:"1",form:{brandArr:[],snArr:[],cityArr:[],hdCode:"",orderCode:"",etime:"",stime:"",status:"",metraType:6,winnerMobile:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),created(){this.init()},watch:{selectAllBrands(t,e){t&&t!=e&&(this.form.brandArr=[],this.form.brandArr[0]=t,this.id="",this.selectSpeciSns="",this.form.snArr=[],this.allSpecisList(this.form.brandArr[0]))},selectSpeciSns(t,e){t&&t!=e&&(this.form.snArr=[],this.form.snArr.push(t))},selectAllarea(t,e){t&&t!=e&&(this.form.cityArr=[],this.form.cityArr[0]=t)}},methods:{currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},init(){this.allBrandsList(),this.allareaList(),this.getlistData()},allBrandsList(){this.$request.post("/api/saotx/prod/listBrand",{service:"browser"},!0,t=>{"200000"===t.ret&&(this.allBrandsData=t.data.list)})},allSpecisList(t){var e=[];e.push(t),this.$request.post("/api/saotx/prod/listTbc",{brandCodeArr:e},!0,t=>{"200000"===t.ret&&(this.allSpecisData=[],this.allSpecisData=t.data.list)})},allareaList(){let t=this;t.$request.post("/api/saotx/dim/regionByPCode",{brandListArrObj:{parentCode:"",withRegion:!0}},!0,e=>{if("200000"===e.ret){var a=e.data;0!=a.length&&a.forEach(function(e,a){var s={label:e.name,value:e.code,children:[]};t.$request.post("/api/saotx/dim/regionByPCode",{parentCode:e.code},!0,e=>{var a=e.data;null!=a&&0!=a.length&&a.forEach(function(t,e){s.children.push({label:t.name,value:t.code})}),t.allareaData.push(s)})})}})},getlistData(){this.$request.post("/api/saotx/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},initPagination(t){t&&(this.pagination.total=t.count)},queryData:function(t){this.getlistData()},resetData:function(t){this.selectAllBrands="",this.selectSpeciSns="",this.selectAllarea="",this.id="1",this.form={metraFlag:"Object",hdCode:"",orderCode:"",brandArr:[],snArr:[],cityArr:[],metraType:6,status:"",stime:"",etime:"",winnerMobile:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){if(2e5==t.ret){this.$message({type:"success",message:t.data.successMsg});let e={name:t.data.sourceFile,sourceCode:t.data.sourceCode,count:t.data.successCount};this.sourceFiles.push(e)}else this.$message.error(t.message)},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/api/saotx/order/export",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分领奖明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"活动编号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入活动编号"},model:{value:t.form.hdCode,callback:function(e){t.$set(t.form,"hdCode",e)},expression:"form.hdCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllBrands,callback:function(e){t.selectAllBrands=e},expression:"selectAllBrands"}},t._l(t.allBrandsData,function(t,e){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.id,clearable:!!t.id},model:{value:t.selectSpeciSns,callback:function(e){t.selectSpeciSns=e},expression:"selectSpeciSns"}},t._l(t.allSpecisData,function(t,e){return a("el-option",{key:t.product.sn,attrs:{label:t.product.allName,value:t.product.sn}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"订单号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.form.orderCode,callback:function(e){t.$set(t.form,"orderCode",e)},expression:"form.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖地区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllarea,callback:function(e){t.selectAllarea=e},expression:"selectAllarea"}},t._l(t.allareaData,function(e){return a("el-option-group",{key:e.value,attrs:{label:e.label}},t._l(e.children,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"领奖时段",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.stime,callback:function(e){t.$set(t.form,"stime",e)},expression:"form.stime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.etime,callback:function(e){t.$set(t.form,"etime",e)},expression:"form.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.form.winnerMobile,callback:function(e){t.$set(t.form,"winnerMobile",e)},expression:"form.winnerMobile"}})],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{prop:"orderCode",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actCode",label:"活动ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"winnerMobile",label:"中奖人手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awdName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"关联规格"}}),t._v(" "),a("el-table-column",{attrs:{label:"领奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.awdProvinceName)+"-"+t._s(e.row.awdCityName)+"-"+t._s(e.row.awdDistrictName))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("9/1V")},"data-v-eb1c25b0",null);e.default=l.exports},"x8+d":function(t,e){},xvlj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data:()=>({activeName:"home",addActParams:{conf:"",form:"act-100",id:"",name:"",note:""},addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},configItem:{title:"",description:"",getBtn:"http://qoss.qrmkt.cn/new_platform/zuan_award_btn.png",award_bg:"http://qoss.qrmkt.cn/new_platform/zuan_award_bg.png",knowBtn:"http://qoss.qrmkt.cn/new_platform/zuan_no_award_btn.png",headerImgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi-header.png",bgImgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi-bg.png",kitsUrl:"http://qoss.qrmkt.cn/new_platform/fanzuanshi-tips.png",iconUrl:[{key:1,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:378"},{key:2,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:379"},{key:3,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:380"},{key:4,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:381"},{key:5,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:382"},{key:6,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:383"},{key:7,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:384"},{key:8,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:385"}],iconAwardImg:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",awardUrl:[{imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zhongjiang74@2x.png"}],drawImgUrl:"http://qoss.qrmkt.cn/new_platform/award_img.png",cryImgUrl:"http://qoss.qrmkt.cn/new_platform/zuan_no_award_bg.png"},uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail()},methods:{getActDetail(){this.id?this.$request.post("/api/saotx/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),console.log(this.configItem),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/saotx/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if("200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTipsImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.tips.url=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},upKitsImgSuccess(t){if("200000"===t.ret)return this.configItem.kitsUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upKnowBtnImgSuccess(t){if("200000"===t.ret)return this.configItem.knowBtn=t.data.accessUrl;this.$message.error(t.message)},upGetBtnImgSuccess(t){if("200000"===t.ret)return this.configItem.getBtn=t.data.accessUrl;this.$message.error(t.message)},upAwardBgSuccess(t){if("200000"===t.ret)return this.configItem.award_bg=t.data.accessUrl;this.$message.error(t.message)},upGameImgSuccess(t){if("200000"===t.ret)return this.configItem.iconUrl[this.gameIndex].imgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type||"image/bmp"===t.type||"image/gif"===t.type;return e||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/saotx/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/saotx/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"kits"},[a("img",{attrs:{src:t.configItem.kitsUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"game-con"},t._l(t.configItem.iconUrl,function(e){return a("div",{key:e.key,staticClass:"game-item",on:{click:function(e){t.showEditConIndex=4}}},[a("img",{attrs:{src:e.imgUrl,alt:""}})])}))]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("活动锦囊:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.kitsUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upKitsImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},t._l(t.configItem.iconUrl,function(e,s){return a("div",{key:e.key},[a("p",{staticClass:"img-title"},[t._v(t._s("钻石"+(s+1)+":"))]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:e.imgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upGameImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.getGameIndex(s)}}},[t._v("更换图片")])],1)],1)])})):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 700*350px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 120*120px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 186*162px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con award-con"},[a("img",{staticClass:"award-alert",attrs:{src:t.configItem.award_bg,alt:""}}),t._v(" "),a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"award-text"},[a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.getBtn,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.award_bg,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upAwardBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]),t._v(" "),a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.getBtn,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upGetBtnImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con award-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"award-alert",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"award-no-text"},[a("h3",[t._v("很遗憾，未中奖")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.knowBtn,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.knowBtn,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upKnowBtnImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("PeTl")},"data-v-17a6bfc7",null);e.default=r.exports},zSTB:function(t,e){}});
//# sourceMappingURL=1.a3ede619f94507bd2a41.js.map