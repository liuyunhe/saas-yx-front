webpackJsonp([11],{"7BTO":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({actList:[],actTable:[]}),created(){this.getTaskList()},methods:{getTaskList(){this.$request.post("/sc/saotx/act/findList",{},!0,e=>{if("200000"===e.ret)return this.actList=e.data})},goToDetail(e){this.$router.push(`/customer/task/sign?code=${e.taskCode}&id=${e.id}`)},openOrClose(e,t){e?this.switchAPI(e,t):this.$confirm("是否关闭签到活动?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.switchAPI(e,t)}).catch(()=>{this.getTaskList(),this.$message({type:"info",message:"已取消关闭"})})},switchAPI(e,t){this.$request.post("/sc/saotx/act/update",{id:t,status:e},!0,t=>{"200000"===t.ret?this.$message.success(e?"开启成功":"关闭成功"):this.$message.error(t.msg)})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("div",{staticClass:"conf-act-list"},[a("ul",e._l(e.actList,function(t,s){return a("li",{key:s},[a("div",{staticClass:"img",style:{background:"url("+t.taskImg+") no-repeat center / 100% 100%"},on:{click:function(a){e.goToDetail(t)}}}),e._v(" "),a("div",{staticClass:"con"},[a("div",{staticClass:"text"},[a("div",{staticClass:"title"},[e._v(e._s(t.taskName))]),e._v(" "),a("div",{staticClass:"switch"},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){e.openOrClose(t.status,t.id)}},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}})],1)]),e._v(" "),a("div",{staticClass:"desc"},[e._v(e._s(t.taskDetail))])])])}))]),e._v(" "),a("el-table",{staticClass:"mt20",staticStyle:{width:"100%"},attrs:{border:"",data:e.actTable}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"任务名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"获得积分数",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"获得成长值",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"更新时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text"}},[e._v("查看明细")])]}}])})],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(e){a("uaGN")},"data-v-ba830152",null);t.default=n.exports},"8cTO":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("VU/8")(null,null,!1,null,null,null);t.default=s.exports},"99ZA":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("el-card",[t("div",{staticClass:"item"})])],1)},staticRenderFns:[]};var i=a("VU/8")(null,s,!1,function(e){a("Asjf")},"data-v-71748614",null);t.default=i.exports},Asjf:function(e,t){},ICao:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={props:{menuArr:{type:[Object,Array],required:!0},page:{type:[String,Number],required:!0}},data:()=>({defaultActive:1}),methods:{switchMenu(e){this.$emit("updataPage",e)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-menu",{attrs:{mode:"horizontal","default-active":e.defaultActive},on:{select:e.switchMenu}},e._l(e.menuArr,function(t,s){return a("el-menu-item",{key:s,attrs:{index:s+1}},[e._v(e._s(t))])}))],1)},staticRenderFns:[]},n=a("VU/8")(s,i,!1,null,null,null).exports,r={props:{conf:{type:Object,required:!0},page:{}},data:()=>({nowMonth:`${(new Date).getFullYear()}.${(new Date).getMonth()+1}`,weekArr:["日","一","二","三","四","五","六"],dayArr:[],days:null,activeStyle:{background:"#F0CB28",color:"#FCF8F8"},signDayArr:[1,2,4,5,6,7,10,20]}),watch:{},created(){this.days=new Date(this.nowMonth+".1").getDay(),this.handleDayNum()},methods:{handleDayNum(){let e=(new Date).getMonth()+1,t=(new Date).getFullYear(),a=0;switch(e){case 2:a=t%4!=0||t%100==0&&t%400!=0||t%3200==0?28:29;break;case 1:case 3:case 5:case 7:case 8:case 10:case 12:a=31;break;case 4:case 6:case 9:case 11:a=30}this.forDay(a)},forDay(e){this.dayArr=[];for(let t=1;t<=e;t++)this.dayArr.push(t)},handleImg(){},sendImgType(e){8!=this.page&&this.$emit("changeImg",e)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e.conf.imgObj?a("div",{staticClass:"phone-wrapper"},[a("div",{staticClass:"phone-header"},[a("h4",[e._v(e._s(e.conf.title))])]),e._v(" "),a("div",{staticClass:"phone-body"},[1==e.page||8==e.page?a("div",[a("img",{staticClass:"bg page1-bg",style:{width:.4*e.conf.imgObj.page1.bg.size[0]+"px",height:.4*e.conf.imgObj.page1.bg.size[1]+"px",left:.4*e.conf.imgObj.page1.bg.pos[0]+"px",top:.4*e.conf.imgObj.page1.bg.pos[1]+"px"},attrs:{src:e.conf.imgObj.page1.bg.url},on:{click:function(t){e.sendImgType(e.conf.imgObj.page1.bg.type)}}}),e._v(" "),a("img",{staticClass:"rules-btn",style:{width:.4*e.conf.imgObj.page1.rulesBtn.size[0]+"px",height:.4*e.conf.imgObj.page1.rulesBtn.size[1]+"px",left:.4*e.conf.imgObj.page1.rulesBtn.pos[0]+"px",top:.4*e.conf.imgObj.page1.rulesBtn.pos[1]+"px"},attrs:{src:e.conf.imgObj.page1.rulesBtn.url},on:{click:function(t){e.sendImgType(e.conf.imgObj.page1.rulesBtn.type)}}}),e._v(" "),a("img",{staticClass:"draw-btn",style:{width:.4*e.conf.imgObj.page1.drawBtn.size[0]+"px",height:.4*e.conf.imgObj.page1.drawBtn.size[1]+"px",left:.4*e.conf.imgObj.page1.drawBtn.pos[0]+"px",top:.4*e.conf.imgObj.page1.drawBtn.pos[1]+"px"},attrs:{src:e.conf.imgObj.page1.drawBtn.url,alt:""},on:{click:function(t){e.sendImgType(e.conf.imgObj.page1.drawBtn.type)}}}),e._v(" "),a("div",{staticClass:"calendar",on:{click:function(t){e.sendImgType(e.conf.imgObj.page1.calendarHeader.type)}}},[a("div",{staticClass:"header",style:{width:.4*e.conf.imgObj.page1.calendarHeader.size[0]+"px",height:.4*e.conf.imgObj.page1.calendarHeader.size[1]+"px",left:.4*e.conf.imgObj.page1.calendarHeader.pos[0]+"px",top:.4*e.conf.imgObj.page1.calendarHeader.pos[1]+"px",background:"url("+e.conf.imgObj.page1.calendarHeader.url+") no-repeat center / 100% 100%","line-height":.4*e.conf.imgObj.page1.calendarHeader.size[1]+"px"}},[e._v("\n            您已经连续签到 "),a("span",[e._v("3")]),e._v(" 天\n          ")]),e._v(" "),a("div",{staticClass:"con",style:{width:.4*e.conf.imgObj.page1.calendarCon.size[0]+"px",height:.4*e.conf.imgObj.page1.calendarCon.size[1]+"px",left:.4*e.conf.imgObj.page1.calendarCon.pos[0]+"px",top:.4*e.conf.imgObj.page1.calendarCon.pos[1]+"px",background:"url("+e.conf.imgObj.page1.calendarCon.url+") no-repeat center / 100% 100%"}},[a("div",{staticClass:"data-module"},[a("div",{staticClass:"header"},[e._v(e._s(e.nowMonth))]),e._v(" "),a("div",{staticClass:"body"},[e._l(e.weekArr,function(t,s){return a("div",{key:s,staticClass:"item"},[e._v("\n                  "+e._s(t)+"\n                ")])}),e._v(" "),e._l(e.days,function(e,t){return a("div",{key:t,staticClass:"item"})}),e._v(" "),e._l(e.dayArr,function(t,s){return a("div",{key:s,staticClass:"item",style:e.signDayArr.includes(s+1)?e.conf.activeStyle:{}},[e._v("\n                  "+e._s(t)+"\n                ")])})],2)])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8==e.page,expression:"page == 8"}],staticClass:"mask"})]):e._e(),e._v(" "),1!==e.page&&e.page<7?a("div",[a("div",{staticClass:"bg",style:{width:"300px",height:"484px",background:"rgba(0, 0, 0, 0.8)"}},e._l(e.conf.imgObj["page"+e.page],function(e,t){return a("img",{key:t,style:{width:.4*e.size[0]+"px",height:.4*e.size[1]+"px",left:.4*e.pos[0]+"px",top:.4*e.pos[1]+"px"},attrs:{src:e.url}})}))]):e._e(),e._v(" "),7==e.page?a("div",[a("div",{staticClass:"share-bg"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:e._s(e.conf.share.shareTitle?e.conf.share.shareTitle:"扫码验真")}}),e._v(" "),a("p",{staticClass:"desc",domProps:{innerHTML:e._s(e.conf.share.shareDesc?e.conf.share.shareDesc:"扫码验真精彩送不停，更多好礼等级拿！")}}),e._v(" "),a("dic",{staticClass:"img"},[a("img",{attrs:{src:e.conf.imgObj.page7.icon.url+"?"+(new Date).getTime()}})])],1)])]):e._e()]),e._v(" "),a("div",{staticClass:"phone-footer"})]):e._e()])},staticRenderFns:[]};var o=a("VU/8")(r,l,!1,function(e){a("RiV/")},"data-v-1abf2207",null).exports,c=a("ifEn"),d=a("UJta"),u=a("9ijK"),p=a("ehVw"),g={props:["data"],data:()=>({num:1,imgURL:"http://weiopn.oss-cn-beijing.aliyuncs.com/saas_platform/test/55C8950F6B444C8887925C80B3B97B03.png"}),methods:{del(e){this.$confirm("是否删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.data.splice(e,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},sync(e){this.data[e].quantity=this.data[e].allquantity},addRepertory(e){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:t})=>{if(0==t)return this.$message.error("数字不能为0");this.$request.post("/sc/saotx/game/addQuality",{id:this.data[e].id,shopQuantity:t},!0,a=>{200==a.code?(this.$message.success("增库成功"),this.data[e].allquantity+=Number(t),this.data[e].quantity+=Number(t)):this.$message.error(a.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-form",{staticClass:"mb20"},e._l(e.data,function(t,s){return a("el-form-item",{key:s},[a("img",{attrs:{src:t.image,width:"40px"}}),e._v(" "),a("p",[e._v(e._s(t.productName))]),e._v("\n      奖品数量：\n      "),a("el-input-number",{attrs:{disabled:!!t.id,controls:!1,min:0,precision:0},on:{change:function(t){e.sync(s)}},model:{value:t.allquantity,callback:function(a){e.$set(t,"allquantity",a)},expression:"item.allquantity"}}),e._v("\n      个\n      "),a("span",[e._v("*")]),e._v("\n      中奖概率\n      "),a("el-input-number",{attrs:{controls:!1,min:0,max:100},model:{value:t.probability,callback:function(a){e.$set(t,"probability",a)},expression:"item.probability"}}),e._v("\n      %\n      "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.del(s)}}},[e._v("删除")]),e._v(" "),t.id?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addRepertory(s)}}},[e._v("增库")]):e._e(),e._v(" "),0!=t.quantity?a("span",{staticClass:"residual"},[e._v("剩余"+e._s(t.quantity)+"个")]):e._e()],1)}))],1)},staticRenderFns:[]};var h=a("VU/8")(g,m,!1,function(e){a("Pv3z")},"data-v-0e110f32",null).exports,f={props:{data:{type:Object,required:!0}},data:()=>({}),created(){},methods:{noRepeat(e,t){this.data.forEach((a,s)=>{t!=s&&a.continuSignDay==e&&this.$message.error("连续签到天数不能重复!")})},add(e){if(this.data.length>=10)return this.$message.error("连续签到设置不能超过10项!");this.data.push({continuSignDay:0,extraScore:0,extraGrowth:0})},del(e){this.$confirm("是否删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.data.splice(e,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("ul",e._l(e.data,function(t,s){return a("li",{key:s},[e._v("\n      连续签到\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},on:{change:function(a){e.noRepeat(t.continuSignDay,s)}},model:{value:t.continuSignDay,callback:function(a){e.$set(t,"continuSignDay",a)},expression:"item.continuSignDay"}}),e._v("\n      天，额外可获得\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},model:{value:t.extraScore,callback:function(a){e.$set(t,"extraScore",a)},expression:"item.extraScore"}}),e._v("\n      积分\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},model:{value:t.extraGrowth,callback:function(a){e.$set(t,"extraGrowth",a)},expression:"item.extraGrowth"}}),e._v("\n      成长值\n      "),a("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:function(t){e.add(s)}}}),e._v(" "),0!==s?a("el-button",{attrs:{icon:"el-icon-minus",circle:""},on:{click:function(t){e.del(s)}}}):e._e()],1)}))])},staticRenderFns:[]};var b=a("VU/8")(f,v,!1,function(e){a("a9sw")},"data-v-758bf4b4",null).exports,_=a("G0J2"),y={components:{prizeConf:h,signItem:b,quillEditor:_.quillEditor},props:{conf:{type:Object,required:!0}},data(){var e=(e,t,a)=>{};return{rules:{actName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],signNote:[{required:!0,validator:(e,t,a)=>{this.conf.sactBset.signNote?a():a(new Error("请输入活动说明"))}}],signImg:[{required:!0,validator:e}],share:[{required:!0,validator:e}]},signRules:{awards:[{required:!0,validator:e}],signAwards:[{required:!0,validator:e}]},draw:{draw:[{required:!0,validator:e}],drawChanceFlg:[{required:!0,validator:e}],drawSignDay:[{required:!0,validator:e}]},prize:{selected:[{required:!0,validator:e}]},editorOption:{modules:{toolbar:[[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike",,"blockquote"],[{color:[]},{background:[]},{align:[]}]]},placeholder:"请输入活动说明"},uploadApi:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},imgIndex:0,showFile:!1}},created(){},methods:{getPrize(){this.$emit("getPrize")},onEditorBlur(){},updataImg(e){},uploadSuccess(e,t,a){let s=e.data.accessUrl;1==this.imgIndex?this.conf.sactBset.initBtImage=s:this.conf.sactBset.pressBtImage=s},uploadError(e){console.log(e),this.$message.error("图片上传失败")},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type||"image/bmp"===e.type||"image/gif"===e.type;return t||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),t}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"title ml20 mb20"},[e._v("基础设置")]),e._v(" "),a("el-form",{attrs:{"label-width":"100px",model:e.conf.sactBset,rules:e.rules}},[a("el-form-item",{attrs:{label:"活动名称：",prop:"actName"}},[a("el-input",{attrs:{max:15,min:1},model:{value:e.conf.sactBset.actName,callback:function(t){e.$set(e.conf.sactBset,"actName",t)},expression:"conf.sactBset.actName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签到入口：",prop:"signImg"}},[a("div",{staticClass:"start ml20"},[a("p",[e._v("初始状态")]),e._v(" "),a("div",{staticClass:"con"},[a("img",{attrs:{src:e.conf.sactBset.initBtImage,title:"初始状态"}})]),e._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:e.uploadApi,headers:e.headerObj,"show-file-list":!1,"on-success":e.uploadSuccess,"before-upload":e.beforeAvatarUpload,"on-error":e.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.imgIndex=1}}},[e._v("更换图片")])],1)],1),e._v(" "),a("div",{staticClass:"line"}),e._v(" "),a("div",{staticClass:"end"},[a("p",[e._v("按下效果")]),e._v(" "),a("div",{staticClass:"con"},[a("img",{attrs:{src:e.conf.sactBset.pressBtImage,title:"按下效果"}})]),e._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:e.uploadApi,headers:e.headerObj,"show-file-list":!1,"on-success":e.uploadSuccess,"before-upload":e.beforeAvatarUpload,"on-error":e.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.imgIndex=2}}},[e._v("更换图片")])],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"签到规则：",prop:"signNote"}},[a("quill-editor",{ref:"myTextEditor",attrs:{options:e.editorOption,placeholder:"请输入活动说明，300字以内"},on:{blur:function(t){e.onEditorBlur(t)}},model:{value:e.conf.sactBset.signNote,callback:function(t){e.$set(e.conf.sactBset,"signNote",t)},expression:"conf.sactBset.signNote"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分享设置：",prop:"share"}},[a("el-radio",{attrs:{label:1},model:{value:e.conf.sactBset.share,callback:function(t){e.$set(e.conf.sactBset,"share",t)},expression:"conf.sactBset.share"}},[e._v("开启分享")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.conf.sactBset.share,callback:function(t){e.$set(e.conf.sactBset,"share",t)},expression:"conf.sactBset.share"}},[e._v("关闭分享")])],1)],1),e._v(" "),a("div",{staticClass:"title ml20 mb20"},[e._v("签到设置")]),e._v(" "),a("el-form",{attrs:{"label-width":"130px",rules:e.signRules}},[a("el-form-item",{attrs:{label:"常规签到奖励：",prop:"awards"}},[e._v("\n      每日签到获得\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},model:{value:e.conf.sactBset.score,callback:function(t){e.$set(e.conf.sactBset,"score",t)},expression:"conf.sactBset.score"}}),e._v("\n      积分\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},model:{value:e.conf.sactBset.growth,callback:function(t){e.$set(e.conf.sactBset,"growth",t)},expression:"conf.sactBset.growth"}}),e._v("\n      成长值\n    ")],1),e._v(" "),a("el-form-item",{attrs:{label:"连续签到奖励：",prop:"signAwards"}},[a("el-radio",{attrs:{disabled:e.conf.sactBset.status,label:0},model:{value:e.conf.sactBset.continuSignFlg,callback:function(t){e.$set(e.conf.sactBset,"continuSignFlg",t)},expression:"conf.sactBset.continuSignFlg"}},[e._v("关闭")]),e._v(" "),a("el-radio",{attrs:{disabled:e.conf.sactBset.status,label:1},model:{value:e.conf.sactBset.continuSignFlg,callback:function(t){e.$set(e.conf.sactBset,"continuSignFlg",t)},expression:"conf.sactBset.continuSignFlg"}},[e._v("开启")]),e._v(" "),a("sign-item",{directives:[{name:"show",rawName:"v-show",value:1===e.conf.sactBset.continuSignFlg,expression:"conf.sactBset.continuSignFlg === 1"}],attrs:{data:e.conf.contItems}}),e._v(" "),a("div",{staticClass:"tips"},[e._v("发布后不可切换")])],1)],1),e._v(" "),a("div",{staticClass:"title ml20 mb20"},[e._v("抽奖设置")]),e._v(" "),a("el-form",{attrs:{"label-width":"130px",rules:e.draw}},[a("el-form-item",{attrs:{label:"是否关联抽奖：",prop:"drawChanceFlg"}},[a("el-radio",{attrs:{label:0},model:{value:e.conf.sactBset.drawChanceFlg,callback:function(t){e.$set(e.conf.sactBset,"drawChanceFlg",t)},expression:"conf.sactBset.drawChanceFlg"}},[e._v("不关联")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.conf.sactBset.drawChanceFlg,callback:function(t){e.$set(e.conf.sactBset,"drawChanceFlg",t)},expression:"conf.sactBset.drawChanceFlg"}},[e._v("关联")])],1),e._v(" "),a("el-form-item",{attrs:{label:"抽奖要求：",prop:"drawSignDay"}},[e._v("\n        累计签到\n        "),a("el-input-number",{attrs:{controls:!1,min:1,precision:0},model:{value:e.conf.sactBset.drawSignDay,callback:function(t){e.$set(e.conf.sactBset,"drawSignDay",t)},expression:"conf.sactBset.drawSignDay"}}),e._v("\n        天，可参与抽奖\n      ")],1)],1),e._v(" "),a("div",{staticClass:"title ml20 mb20"},[e._v("奖项设置")]),e._v(" "),a("el-form",{attrs:{"label-width":"100px",rules:e.prize}},[a("el-form-item",{attrs:{label:"选择奖品：",prop:"selected"}},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.getPrize}})],1)],1),e._v(" "),a("p",{staticClass:"ml20"},[e._v("所选礼品：")]),e._v(" "),e.conf.gameItems?a("prize-conf",{staticClass:"ml20",attrs:{data:e.conf.gameItems}}):e._e()],1)},staticRenderFns:[]};var x=a("VU/8")(y,C,!1,function(e){a("Wp2k")},"data-v-7907f269",null).exports,w={data:()=>({queryParmes:{pageNo:1,pageSize:5,productId:null,productName:"",giftType:null},queryStr:"",optionArr:[{name:"礼品名称",id:1},{name:"礼品id",id:2}],giftTypeArr:[{name:"虚拟",code:1},{name:"实物",code:2},{name:"红包",code:3},{name:"积分",code:4}],selectedNum:1,selectedTotalGoods:0,selectedGoodsArr:[],dataObj:[{id:1,name:"123",pic:"http://weiopn.oss-cn-beijing.aliyuncs.com/saas_platform/test/55C8950F6B444C8887925C80B3B97B03.png",type:"活动奖品",sort:"实物",stock:123},{id:1,name:"123",pic:"http://weiopn.oss-cn-beijing.aliyuncs.com/saas_platform/test/55C8950F6B444C8887925C80B3B97B03.png",type:"活动奖品",sort:"实物",stock:123},{id:1,name:"123",pic:"http://weiopn.oss-cn-beijing.aliyuncs.com/saas_platform/test/55C8950F6B444C8887925C80B3B97B03.png",type:"活动奖品",sort:"实物",stock:123}],total:3,prizeList:[],giftType:{1:"虚拟",2:"实物",3:"红包",4:"积分"},loading:!0}),created(){this.getPrize()},methods:{getPrize(){this.loading=!0,1==this.selectedNum?(this.queryParmes.productName=this.queryStr,this.queryParmes.productId=""):(this.queryParmes.productId=this.queryStr,this.queryParmes.productName=""),this.$request.post("/sc/saotx/mall/product/listActs",this.queryParmes,!0,e=>{"200000"===e.ret&&(this.loading=!1,this.prizeList=e.data.list,this.total=e.data.page.count)})},confirm(){this.$emit("getSelectedGoodsArr",this.selectedGoodsArr)},close(){this.$emit("close")},selected(e){this.selectedTotalGoods=e.length,this.selectedGoodsArr=e},handleCurrentChange(e){this.queryParmes.pageNo=e,this.getPrize()}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-select",{model:{value:e.selectedNum,callback:function(t){e.selectedNum=t},expression:"selectedNum"}},e._l(e.optionArr,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-input",{model:{value:e.queryStr,callback:function(t){e.queryStr=t},expression:"queryStr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"礼品类型"}},[a("el-select",{staticClass:"type",attrs:{placeholder:"请选择礼品类型",clearable:""},model:{value:e.queryParmes.giftType,callback:function(t){e.$set(e.queryParmes,"giftType",t)},expression:"queryParmes.giftType"}},e._l(e.giftType,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}))],1)],1),e._v(" "),a("el-button",{staticClass:"mb20",attrs:{type:"primary"},on:{click:e.getPrize}},[e._v("查询")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:!0,data:e.prizeList,"tooltip-effect":"dark"},on:{select:e.selected,"select-all":e.selected}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"礼品ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"礼品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.image,height:"40px",alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"礼品类型",align:"center"}},[[e._v("\n        活动奖品\n      ")]],2),e._v(" "),a("el-table-column",{attrs:{label:"礼品分类",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.giftType[t.row.giftType])+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"shopQuantity",label:"库存",align:"center"}})],1),e._v(" "),a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":e.queryParmes.pageNo,"page-size":e.queryParmes.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("div",{staticClass:"selectedText"},[a("p",[e._v("当前已选"+e._s(e.selectedTotalGoods)+"个商品")])]),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.close}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var I=a("VU/8")(w,k,!1,function(e){a("y794")},"data-v-2c88cb8c",null).exports,S={props:{imgObj:{type:Object,required:!0},type:{default:1},color:{required:!0}},data:()=>({uploadApi:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},showFile:!1,editIndex:""}),methods:{uploadSuccess(e,t,a){let s=e.data.accessUrl;this.$emit("picChange",{url:s,index:this.editIndex})},uploadError(e){console.log(e),alert("图片上传失败")},onUploadClick(e){this.editIndex=e},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type||"image/bmp"===e.type||"image/gif"===e.type;return t||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),t}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e.imgObj?a("el-card",{staticClass:"card"},[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("h3",[e._v("编辑图片")])]),e._v(" "),a("div",{staticClass:"edit"},[e._l(e.imgObj,function(t,s){return a("div",{key:s,staticClass:"edit-container"},[t.type==e.type?a("div",[a("h4",[e._v("编辑"+e._s(t.name)+"：")]),e._v(" "),a("div",{staticClass:"img-container"},[a("img",{attrs:{src:t.url,alt:""}})]),e._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:e.uploadApi,headers:e.headerObj,"show-file-list":e.showFile,"on-success":e.uploadSuccess,"before-upload":e.beforeAvatarUpload,"on-error":e.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.onUploadClick(t.index)}}},[e._v("点击上传")])],1),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("* 图片建议尺寸为 "+e._s(t.size[0])+"*"+e._s(t.size[1])+"px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1):e._e()])}),e._v(" "),3==e.type?a("div",{staticClass:"edit-container"},[a("h4",[e._v("编辑日期背景：")]),e._v(" "),a("div",{staticClass:"img-container"},[a("el-color-picker",{attrs:{"show-alpha":""},model:{value:e.color.background,callback:function(t){e.$set(e.color,"background",t)},expression:"color.background"}})],1)]):e._e()],2)]):e._e()],1)},staticRenderFns:[]};var $=a("VU/8")(S,B,!1,function(e){a("sVek")},"data-v-ab993068",null).exports,O={props:["code","id"],components:{menuConf:n,phoneModule:o,activityInfo:c.a,activityImageEditor:d.a,shareConf:p.a,signConf:x,dialogModule:I,activityImgPage1:$},data:()=>({menuArr:["首页","活动说明页","我的奖品页面","中奖页面","未中奖页面","签到成功弹窗","分享","活动设置"],nowMonth:`${(new Date).getFullYear()}.${(new Date).getMonth()+1}`,weekArr:["日","一","二","三","四","五","六"],page:1,days:null,dayArr:[],signDayArr:[1,2,4,5,6,7,10,20],conf:{description:"",title:"",imgObj:{},share:{shareTitle:"",shareDesc:""},actCode:"",activeStyle:{background:"rgba(240,203,40,1)",color:"#fff"}},dialogVisible:!1,imgType:1,editData:[],selectedGoodsArr:[],data:{},sactBset:{taskCode:"",actName:"",signNote:"",share:null,score:null,growth:null,drawChanceFlg:null,continuSignFlg:null,initBtImage:"http://qrmkt.oss-cn-beijing.aliyuncs.com/common/qd/center-sign-btn.png",pressBtImage:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/qd/center-signEnd-btn.png",drawSignDay:null,pageInfo:""},contItems:[{continuSignDay:null,extraScore:null,extraGrowth:null}],isShow:!1}),watch:{},created(){this.handleDayNum(),this.days=new Date(this.nowMonth+".1").getDay(),this.getPutDetail()},methods:{getPutDetail(){this.$request.post("/sc/saotx/act/bsDetail",{id:this.id},!0,e=>{"200000"===e.ret&&(this.data=e.data,this.data.contItems||(this.data.contItems=[],this.data.contItems.push({continuSignDay:0,extraScore:0,extraGrowth:0})),this.data.sactBset||this.$set(this.data,"sactBset",JSON.parse(JSON.stringify(this.sactBset))),e.data.sactBset.pageInfo&&(this.conf=JSON.parse(e.data.sactBset.pageInfo)),this.conf||(this.conf.imgObj=JSON.parse(JSON.stringify(u.a.img.ACT_SIGN))),this.editData.push(this.conf.imgObj.page7.icon),this.isShow=!0)})},editPic(e){let t=e.index||"",a=e.url;this.page<=6?this.conf.imgObj["page"+this.page][t].url=a:7==this.page&&(this.conf.imgObj.page7.icon.url=a)},getPrize(){this.dialogVisible=!0},updataPage(e){this.page=e},a(){this.signDayArr.push(21)},getSelectedGoodsArr(e){this.selectedGoodsArr=e,this.dialogVisible=!1;let t=[];this.data.gameItems&&this.data.gameItems.length>0&&this.data.gameItems.forEach(e=>{t.push(e.id)}),this.selectedGoodsArr.map(e=>{if(-1!=t.indexOf(e.id))return this.$message.warning("请不要选择重复的奖品");this.data.gameItems||this.$set(this.data,"gameItems",[]),this.data.gameItems.push({orgId:e.orgId,gameId:this.code,gameName:"",productId:e.productId,productName:e.productName,image:e.image,status:e.status,probability:0,type:e.giftType,score:e.score,bingo_image:e.image,shopQuantity:e.shopQuantity,quantity:null,allquantity:0})})},close(){this.dialogVisible=!1},handleDayNum(){let e=(new Date).getMonth()+1,t=(new Date).getFullYear(),a=0;switch(e){case 2:a=t%4!=0||t%100==0&&t%400!=0||t%3200==0?28:29;break;case 1:case 3:case 5:case 7:case 8:case 10:case 12:a=31;break;case 4:case 6:case 9:case 11:a=30}this.forDay(a)},changeImg(e){this.imgType=e},forDay(e){this.dayArr=[];for(let t=1;t<=e;t++)this.dayArr.push(t)},titleInput(e){let t=e.value;this.conf.title=t||""},descInput(e){let t=e.value;t?this.conf.description=t:this.description=""},save(){if(""==this.conf.description||""==this.conf.title)return this.$message.error("首页/模板名称或描述不能为空!");if(this.isRepeat(this.data.contItems,"continuSignDay"))return this.$message.error("连续签到天数不能重复!");let e=JSON.stringify(this.conf);this.data.sactBset.pageInfo=e,this.$request.post("/sc/saotx/act/saveBSet",this.data,!0,e=>{"200000"===e.ret&&(this.$message.success("保存成功"),setTimeout(()=>{this.$router.push("/customer/task")},1e3))})},isRepeat(e,t){let a=[],s=!1;return e.forEach((e,i)=>{-1==a.indexOf(e[t])?a.push(e[t]):s=!0}),s}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("menu-conf",{attrs:{menuArr:e.menuArr,page:e.page},on:{updataPage:e.updataPage}}),e._v(" "),a("el-card",{attrs:{"body-style":{padding:"40px"}}},[a("el-row",[a("el-col",{attrs:{span:8}},[e.isShow?a("phone-module",{attrs:{conf:e.conf,page:e.page},on:{changeImg:e.changeImg}}):e._e()],1),e._v(" "),a("el-col",{staticClass:"ml20",attrs:{span:15}},[e.page<7?a("div",[1==e.page&&e.isShow?a("activity-info",{attrs:{title:e.conf.title,desc:e.conf.description},on:{titleInput:e.titleInput,descInput:e.descInput}}):e._e(),e._v(" "),e.page>3&&e.isShow?a("activity-image-editor",{attrs:{editData:e.conf.imgObj["page"+e.page],type:"normal",itemRepeat:!1},on:{picChange:e.editPic}}):e._e(),e._v(" "),1==e.page&&e.isShow?a("activity-img-page1",{attrs:{imgObj:e.conf.imgObj.page1,color:e.conf.activeStyle,type:e.imgType},on:{picChange:e.editPic}}):e._e()],1):e._e(),e._v(" "),7==e.page?a("div",[e.editData?a("share-conf",{attrs:{shareConf:e.conf.share,editData:e.editData},on:{shareChange:e.editPic}}):e._e()],1):e._e(),e._v(" "),8==e.page?a("div",[e.data.sactBset?a("sign-conf",{attrs:{conf:e.data},on:{getPrize:e.getPrize}}):e._e()],1):e._e()])],1),e._v(" "),a("div",{staticClass:"btn mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"800px","close-on-click-modal":!1,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("dialog-module",{on:{getSelectedGoodsArr:e.getSelectedGoodsArr,close:e.close}})],1)],1)},staticRenderFns:[]};var D=a("VU/8")(O,j,!1,function(e){a("rvNk")},"data-v-30aaaf6f",null);t.default=D.exports},Pv3z:function(e,t){},"RiV/":function(e,t){},U4iu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({currentPage4:10,total:100,load:!0}),methods:{handleCurrentChange(){}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"昵称："}},[a("el-input")],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号："}},[a("el-input-number",{attrs:{controls:!1}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户等级："}},[a("el-input")],1)],1),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{plain:""}},[e._v("重置")])],1)],1),e._v(" "),a("el-button",{staticClass:"mt20 mb20",attrs:{plain:""}},[e._v("导出")]),e._v(" "),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.load,expression:"load"}],attrs:{border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"头像",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"性别",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"等级",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"积分",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"成长值",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"地区",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"注册时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"}})],1),e._v(" "),a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":e.currentPage4,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(e){a("zbD4")},"data-v-da63dcea",null);t.default=n.exports},Wp2k:function(e,t){},a9sw:function(e,t){},ehVw:function(e,t,a){"use strict";var s={props:["editData","shareConf"],data:()=>({uploadApi:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")}}),created(){},methods:{uploadSuccess(e,t,a){let s=e.data.accessUrl;this.editData[0].url=s,this.$emit("shareChange",{url:s})},uploadError(e){alert("图片上传失败")},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type||"image/bmp"===e.type||"image/gif"===e.type;return t||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),t}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-share"},[a("el-card",{staticClass:"card"},[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("h3",[e._v("编辑图片")])]),e._v(" "),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分享标题："}},[a("el-input",{attrs:{type:"text",maxlength:15},model:{value:e.shareConf.shareTitle,callback:function(t){e.$set(e.shareConf,"shareTitle",t)},expression:"shareConf.shareTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分享说明："}},[a("el-input",{staticStyle:{width:"70%"},attrs:{maxlength:"30",type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.shareConf.shareDesc,callback:function(t){e.$set(e.shareConf,"shareDesc",t)},expression:"shareConf.shareDesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分享图标："}},[a("div",[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.editData[0].url}})]),e._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:e.uploadApi,headers:e.headerObj,"show-file-list":!1,"on-success":e.uploadSuccess,"before-upload":e.beforeAvatarUpload,"on-error":e.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"}},[e._v("更换图片")])],1),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("* 图片建议尺寸为 91*91px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1)])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(e){a("pyUZ")},"data-v-51731b7f",null);t.a=n.exports},pyUZ:function(e,t){},rvNk:function(e,t){},sVek:function(e,t){},uaGN:function(e,t){},y794:function(e,t){},zbD4:function(e,t){}});
//# sourceMappingURL=11.eb420b8667cf14b2d54e.js.map