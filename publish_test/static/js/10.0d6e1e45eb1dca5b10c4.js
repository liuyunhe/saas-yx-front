webpackJsonp([10],{"06Bw":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:()=>({loading:!1,types:[],pickerOptions:{disabledDate:e=>e.getTime()>Date.now(),onPick(e){}},form:{pageNo:1,pageSize:10,operType:"",time:[],stime:"",etime:"",userName:""},tableList:[],pagination:{total:0}}),created(){let e=new Date;this.form.time=[e.Format("yyyy-MM-dd")+" 00:00:00",e],this.getTypes(),this.list()},methods:{currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},getTypes(){this.$request.post("/api/saotx/log/types",{pageSize:-1},!0,e=>{"200000"==e.ret&&(this.types=e.data||{})})},resetForm(){this.form={pageNo:1,pageSize:10,operType:"",stime:"",etime:"",userName:""};let e=new Date;this.form.time=[e.Format("yyyy-MM-dd")+" 00:00:00",e],this.list()},initPagination(e){e&&(this.pagination.total=e.count)},list(e,t,s){this.form.pageNo=t||1,this.form.pageSize=s||10,this.loading=!0,this.form.time&&2==this.form.time.length?(this.form.stime=new Date(this.form.time[0]).Format("yyyy-MM-dd hh:mm:ss"),this.form.etime=new Date(this.form.time[1]).Format("yyyy-MM-dd hh:mm:ss")):this.form.stime=this.form.etime="",this.$request.post("/api/saotx/log/list",this.form,!0,e=>{this.loading=!1,"200000"==e.ret?(this.tableList=e.data.list||[],this.initPagination(e.data.page||{})):this.$message.error(e.message)})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[s("el-form-item",{attrs:{label:"操作类型"}},[s("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.form.operType,callback:function(t){e.$set(e.form,"operType",t)},expression:"form.operType"}},[s("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.types,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})})],2)],1),e._v(" "),s("el-form-item",{attrs:{label:"时间"}},[s("div",{staticClass:"block"},[s("el-date-picker",{attrs:{size:"small",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1)]),e._v(" "),s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{size:"small"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),s("div"),e._v(" "),s("el-form-item",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-card",{staticClass:"box-card"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableList}},[s("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((e.form.pageNo-1)*e.form.pageSize+t.$index+1)+"\n          ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"operUsername",label:"用户名",align:"center",width:"140"}}),e._v(" "),s("el-table-column",{attrs:{label:"时间",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(new Date(t.row.operTime).Format("yyyy-MM-dd hh:mm:ss"))+"\n          ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"clientIp",label:"IP",align:"center",width:"130"}}),e._v(" "),s("el-table-column",{attrs:{prop:"operName",label:"操作类型",align:"center",width:"80"}}),e._v(" "),s("el-table-column",{attrs:{prop:"operBusiness",label:"模块",align:"center",width:"120"}}),e._v(" "),s("el-table-column",{attrs:{prop:"operContent",label:"操作详情",align:"center"}})],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(e){s("bnJB")},"data-v-2e0b9b2c",null);t.default=o.exports},A9B7:function(e,t){},H8XT:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:()=>({statusList:[],form:{pageNo:1,pageSize:10,keywords:"",status:""},pagination:{total:0},tableList:[],roleForm:{show:!1,id:"",roleCode:"",roleName:"",menus:""},menus:{datas:[],defaultExpanded:[],defaultChecked:[],props:{children:"children",label:"label"}}}),created(){this.getStatus(),this.list()},methods:{currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},getStatus(){this.$request.post("/api/saotx/dim/dataStatus",{},!1,e=>{"200000"==e.ret&&(this.statusList=e.data||[])})},resetForm(){this.form={pageNo:1,pageSize:10,keywords:"",status:""},this.list()},list(e,t,s){this.form.pageNo=t||1,this.form.pageSize=s||10,this.$request.post("/api/saotx/role/list",this.form,!0,e=>{"200000"==e.ret&&(this.tableList=e.data.list||[],this.initPagination(e.data.page||{}))})},initPagination(e){e&&(this.pagination.total=e.count)},handleDelete(e,t){this.$confirm("停用后，会影响用户的权限，确认操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{this.modifyData(t.id,0)}).catch(()=>{})},modifyData(e,t){let s={id:e,status:t};this.$request.post("/api/saotx/role/mstatus",s,!0,e=>{"200000"==e.ret?(this.list(),this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.message)})},roleFormInit(){this.roleForm={show:!1,id:"",roleCode:"",roleName:"",menus:[]},this.menus={datas:[],defaultExpanded:[],defaultChecked:[],props:{children:"children",label:"label"}}},mgrForm(e,t){t&&t.id?(this.roleForm.id=t.id,this.roleForm.roleCode=t.roleCode,this.roleForm.roleName=t.roleName):this.roleFormInit(),this.$request.post("/api/saotx/role/queryByCode",this.roleForm,!0,e=>{if("200000"==e.ret){this.roleForm.id=e.data.id||"",this.roleForm.roleCode=e.data.roleCode||"",this.roleForm.roleName=e.data.roleName||"";let t=e.data.nodes||[],s=[];for(let e=0;e<t.length;e++){let a=t[e];if(!a.pId){let e={id:a.id,label:a.name,checked:a.checked};this.recursiveMenu(t,e),s.push(e)}}this.menus.datas=s,this.roleForm.show=!0}else this.$message.error(e.message)})},recursiveMenu(e,t){let s=[];for(let a=0;a<e.length;a++){let r=e[a];if(t.id==r.pId){let t={id:r.id,label:r.name,checked:r.checked};this.recursiveMenu(e,t),s.push(t)}}t.children=s,0==t.children.length&&t.checked&&this.menus.defaultChecked.push(t.id)},roleFormOk(){if(!this.roleForm.roleName)return this.$message.error("角色名称不能为空！"),!1;let e=this.$refs.menuTree.getHalfCheckedKeys()||[],t=this.$refs.menuTree.getCheckedKeys()||[];e&&e.length>0&&(e=e.concat(t)),this.roleForm.menus=e.join(",")||"",this.$request.post("/api/saotx/role/saveOrModify",this.roleForm,!0,e=>{"200000"==e.ret?(this.$message({type:"success",message:"操作成功!"}),this.roleForm.show=!1,this.list()):this.$message.error(e.message)})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card"},[s("el-row",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.mgrForm}},[e._v("新建角色")])],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-form",{attrs:{inline:!0,model:e.form}},[s("el-form-item",{attrs:{label:"角色名称"}},[s("el-input",{attrs:{size:"small",placeholder:"模糊查询角色名称"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"状态"}},[s("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[s("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.statusList,function(e){return s("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})],2)],1),e._v(" "),s("div"),e._v(" "),s("el-form-item",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-card",{staticClass:"box-card"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[s("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.form.pageNo-1)*e.form.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"roleName",label:"角色",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.status?"已启用":"已停用")+"\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.mgrForm(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),1==t.row.status?s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.handleDelete(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),0==t.row.status?s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.modifyData(t.row.id,1)}}},[e._v("启用")]):e._e()]}}])})],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),s("el-dialog",{attrs:{title:"角色管理",width:"550px",center:"",visible:e.roleForm.show},on:{"update:visible":function(t){e.$set(e.roleForm,"show",t)}}},[s("el-form",{staticClass:"form",attrs:{model:e.roleForm}},[s("el-form-item",{attrs:{label:"角色名称"}},[s("el-input",{attrs:{size:"small",placeholder:"角色名称",disabled:!!e.roleForm.id},model:{value:e.roleForm.roleName,callback:function(t){e.$set(e.roleForm,"roleName",t)},expression:"roleForm.roleName"}})],1),e._v(" "),s("el-form-item",[s("div",{staticClass:"label"},[e._v("权限菜单")]),e._v(" "),s("div",{staticClass:"menu-tree"},[s("el-tree",{ref:"menuTree",attrs:{data:e.menus.datas,"show-checkbox":"","node-key":"id","default-expanded-keys":e.menus.defaultExpanded,"default-checked-keys":e.menus.defaultChecked,props:e.menus.props}})],1)])],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.roleForm.show=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.roleFormOk}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(e){s("A9B7")},"data-v-b9d20cd0",null);t.default=o.exports},IHoF:function(e,t){},KkD4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:()=>({headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},loading:!1,form:{menuName:"",status:""},tableList:[],tableOriList:[],filterText:"",treeDatas:[],defaultProps:{children:"nodeList",label:"menuName"},menuProps:{value:"menuCode",label:"menuName",children:"nodeList"},menuParentDatas:[],menuForm:{show:!1,id:"",menuCode:"",menuName:"",parents:[],oldParentCode:"",parentCode:"",menuUrl:"",icon:"",activeIcon:"",note:"",status:""},menuFormRules:{menuCode:[{required:!1,validator:(e,t,s)=>{t.length>30?s(new Error("菜单编码不能超过30个字符！")):s()},trigger:"blur"}],menuName:[{required:!0,validator:(e,t,s)=>{""===t?s(new Error("菜单名称不能为空！")):t.length>10?s(new Error("菜单名称不能超过10个字符！")):s()},trigger:"blur"}],menuUrl:[{required:!0,validator:(e,t,s)=>{""===t?s(new Error("菜单链接地址不能为空！")):t.length>100?s(new Error("菜单链接地址不能超过100个字符！")):s()},trigger:"blur"}],status:[{required:!0,message:"状态不能为空！",trigger:"blur"}]},menuClickNode:null}),watch:{filterText(e){this.$refs.treeDatas.filter(e)}},created(){this.initTree()},mounted(){},methods:{filterNode:(e,t)=>!e||-1!==t.menuName.indexOf(e),initTree(){this.$request.post("/api/saotx/menu/alldata",{service:"saas"},!0,e=>{"200000"==e.ret&&(this.treeDatas=e.data||[],this.tableList=e.data||[],this.tableOriList=e.data||[],this.initFormParent())})},initFormParent(){this.menuParentDatas=[];for(let e=0;e<this.treeDatas.length;e++){let t=this.treeDatas[e],s={menuCode:t.menuCode,menuName:t.menuName,parent:t.parentCode,nodeList:[]},a=t.nodeList;if(a&&a.length>0)for(let e=0;e<a.length;e++){let r=a[e],o={menuCode:r.menuCode,menuName:r.menuName,parent:t.menuCode};s.nodeList.push(o)}this.menuParentDatas.push(s)}},treeNodeClick(e,t){if(this.tableOriList=[],this.tableOriList.push(e),e.nodeList&&e.nodeList.length>0)for(let t=0;t<e.nodeList.length;t++)this.tableOriList.push(e.nodeList[t]);this.tableList=this.tableOriList,this.menuClickNode=e},currentChange(e){this.search(event,e)},sizeChange(e){this.search(event,null,e)},search(){if(this.form.menuName||this.form.status){this.tableList=[];for(let e=0;e<this.tableOriList.length;e++){let t=this.tableOriList[e];this.form.menuName&&this.form.status?-1!=t.menuName.indexOf(this.form.menuName)&&this.form.status==t.status&&this.tableList.push(t):this.form.menuName&&-1!=t.menuName.indexOf(this.form.menuName)?this.tableList.push(t):this.form.status&&this.form.status==t.status&&this.tableList.push(t)}}else this.tableList=this.tableOriList},resetForm(){this.form={menuName:"",status:""},this.search()},createMenu(){this.menuForm.show=!0},edit(e,t){let s=t.parentCode;if(this.menuForm={show:!0,id:t.id,menuCode:t.menuCode,menuName:t.menuName,oldParentCode:s,parentCode:s,menuUrl:t.menuUrl,icon:t.icon,activeIcon:t.activeIcon,note:t.note,status:t.status},s){this.menuForm.parents=[];for(let e=0;e<this.menuParentDatas.length;e++){let t=this.menuParentDatas[e];if(s==t.menuCode)return this.menuForm.parents.push(t.parent),void this.menuForm.parents.push(s);for(let e=0;e<t.nodeList.length;e++){let a=t.nodeList[e];if(s==a.menuCode)return this.menuForm.parents.push(a.parent),void this.menuForm.parents.push(s)}}}},remove(e,t){this.$confirm("删除后，此菜单将从所有组织公司中去除，确认操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{let e={};e.id=t.id,e.status=0,e.service="saas",this.$request.post("/api/saotx/menu/modifyStatus",e,!0,e=>{"200000"==e.ret?(this.initTree(),this.menuFormCancel("menuForm"),this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.message)})}).catch(()=>{})},menuFormCancel(e){this.menuForm={show:!1,id:"",menuCode:"",menuName:"",parents:[],oldParentCode:"",parentCode:"",menuUrl:"",icon:"",activeIcon:"",note:"",status:""},this.$refs[e].clearValidate()},menuFormOk(e){this.$refs[e].validate(e=>{e&&(this.menuForm.parents&&this.menuForm.parents.length>0?this.menuForm.parentCode=this.menuForm.parents[this.menuForm.parents.length-1]:this.menuForm.parentCode="",this.$request.post("/api/saotx/menu/somsys",this.menuForm,!0,e=>{"200000"==e.ret?(this.initTree(),this.menuFormCancel("menuForm"),this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.message)}))})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"menu-container"},[s("div",{staticClass:"lcontent"},[s("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-tree",{ref:"treeDatas",staticClass:"filter-tree",attrs:{data:e.treeDatas,props:e.defaultProps,"filter-node-method":e.filterNode,"expand-on-click-node":!1},on:{"node-click":e.treeNodeClick}})],1),e._v(" "),s("div",{staticClass:"rcontent"},[s("el-card",[s("el-row",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.createMenu}},[e._v("新建")])],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-form",{staticClass:"search-block",attrs:{inline:!0,model:e.form}},[s("el-form-item",{attrs:{label:"菜单名称"}},[s("el-input",{attrs:{size:"small",placeholder:"请输入菜单名称"},model:{value:e.form.menuName,callback:function(t){e.$set(e.form,"menuName",t)},expression:"form.menuName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"状态"}},[s("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[s("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),s("el-option",{attrs:{label:"可见",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"不可见",value:"2"}})],1)],1),e._v(" "),s("div"),e._v(" "),s("el-form-item",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-card",{staticClass:"table-card"},[s("el-table",{staticClass:"table-data",attrs:{data:e.tableList}},[s("el-table-column",{attrs:{prop:"menuName",label:"菜单姓名",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"parent.menuName",label:"上级菜单",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"menuUrl",label:"链接地址",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"statusName",label:"状态",align:"center",width:"100px"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(new Date(t.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n              ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.edit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.remove(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("div",{staticClass:"space"})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"菜单资源管理",width:"550px",center:"",visible:e.menuForm.show},on:{"update:visible":function(t){e.$set(e.menuForm,"show",t)},closed:function(t){e.menuFormCancel("menuForm")}}},[s("el-form",{ref:"menuForm",staticClass:"form",attrs:{model:e.menuForm,rules:e.menuFormRules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"菜单编码",prop:"menuCode"}},[s("el-input",{attrs:{size:"small",placeholder:"请输入不超过30个字符",disabled:!!e.menuForm.id},model:{value:e.menuForm.menuCode,callback:function(t){e.$set(e.menuForm,"menuCode",t)},expression:"menuForm.menuCode"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[s("el-input",{attrs:{size:"small",placeholder:"请输入不超过10个字符"},model:{value:e.menuForm.menuName,callback:function(t){e.$set(e.menuForm,"menuName",t)},expression:"menuForm.menuName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上级菜单",prop:"parentCode"}},[s("el-cascader",{attrs:{size:"small",placeholder:"请选择",props:e.menuProps,options:e.menuParentDatas,clearable:"","change-on-select":"",filterable:""},model:{value:e.menuForm.parents,callback:function(t){e.$set(e.menuForm,"parents",t)},expression:"menuForm.parents"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"链接地址",prop:"menuUrl"}},[s("el-input",{attrs:{size:"small",placeholder:"请输入页面访问url，不能超过100个字符"},model:{value:e.menuForm.menuUrl,callback:function(t){e.$set(e.menuForm,"menuUrl",t)},expression:"menuForm.menuUrl"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"默认图标"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"/api/saotx/attach/commonAliUpload",headers:e.headers,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.menuForm.icon?s("img",{staticClass:"avatar",attrs:{src:e.menuForm.icon}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),s("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("图片建议尺寸为14*14px")])])],1),e._v(" "),s("el-form-item",{attrs:{label:"选中图标"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"/api/saotx/attach/commonAliUpload",headers:e.headers,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.menuForm.activeIcon?s("img",{staticClass:"avatar",attrs:{src:e.menuForm.activeIcon}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),s("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("图片建议尺寸为14*14px")])])],1),e._v(" "),s("el-form-item",{attrs:{label:"备注描述"}},[s("el-input",{attrs:{size:"small",type:"textarea",rows:2,placeholder:""},model:{value:e.menuForm.note,callback:function(t){e.$set(e.menuForm,"note",t)},expression:"menuForm.note"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"状态",prop:"status"}},[s("el-radio",{attrs:{label:1},model:{value:e.menuForm.status,callback:function(t){e.$set(e.menuForm,"status",t)},expression:"menuForm.status"}},[e._v("启用")]),e._v(" "),s("el-radio",{attrs:{label:2},model:{value:e.menuForm.status,callback:function(t){e.$set(e.menuForm,"status",t)},expression:"menuForm.status"}},[e._v("禁用")])],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.menuFormCancel("menuForm")}}},[e._v("取消")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.menuFormOk("menuForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(e){s("XIU9")},"data-v-0a6bd1ec",null);t.default=o.exports},KxUm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:()=>({cluser:{account:"",orgName:""},roleList:[],statusList:[],form:{pageNo:1,pageSize:10,keywords:"",roleCode:"",status:""},pagination:{total:0},tableList:[],userForm:{showClose:!1,show:!1,orgName:"",id:"",account:"",name:"",mobile:"",email:"",pwd:"",roleCode:""},userFormRules:{account:[{required:!0,message:"账号不能为空",trigger:"blur"}],name:[{required:!0,message:"账号昵称不能为空",trigger:"blur"}],mobile:[{required:!0,validator:(e,t,s)=>{""===t?s(new Error("手机号不能为空")):/^1[0-9]{2}\d{8}$/.test(t)?s():s(new Error("手机号格式错误！"))},trigger:"blur"}],email:[{required:!0,validator:(e,t,s)=>{""===t?s(new Error("邮箱不能为空")):/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(t)?s():s(new Error("邮箱格式错误！"))},trigger:"blur"}],pwd:[{required:!0,validator:(e,t,s)=>{""===t?s(new Error("密码不能为空")):/(?!^(\d+|[a-zA-Z]+|[~!@#$%^&*?]+)$)^[\w~!@#$%\^&*?]{8,16}$/.test(t)?s():s(new Error("8-16位字符(至少包含字母、数字、符号中的两种形式)"))},trigger:"blur"}],roleCode:[{required:!0,message:"角色不能为空",trigger:"blur"}]}}),created(){if(this.cluser=this.$store.state.cluser,!this.cluser||!this.cluser.account)return this.clearLoginSession(),!1;this.getRoleList(),this.list()},methods:{clearLoginSession(){sessionStorage.removeItem("access_token"),sessionStorage.removeItem("access_loginId")},currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},getRoleList(){this.$request.post("/api/saotx/role/list",{pageSize:-1},!0,e=>{"200000"==e.ret&&(this.roleList=e.data.list||[])})},resetForm(){this.form={pageNo:1,pageSize:10,keywords:"",roleCode:"",status:""},this.list()},list(e,t,s){this.form.pageNo=t||1,this.form.pageSize=s||10,this.$request.post("/api/saotx/user/list",this.form,!0,e=>{"200000"==e.ret&&(this.tableList=e.data.list||[],this.initPagination(e.data.page||{}))})},initPagination(e){e&&(this.pagination.total=e.count)},handleDelete(e,t){this.$confirm("停用后，此用户将无法登陆平台系统，确认操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{this.modifyData(t.id,0)}).catch(()=>{})},modifyData(e,t){let s={id:e,status:t};this.$request.post("/api/saotx/user/mstatus",s,!0,e=>{"200000"==e.ret?(this.list(),this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.message)})},mgrForm(e,t){t&&(this.userForm=Object.assign({},this.userForm,t)),this.userForm.show=!0},userFormCancel(e){this.userForm={showClose:!1,show:!1,orgName:"",id:"",account:"",name:"",mobile:"",email:"",pwd:"",roleCode:""},this.$refs[e].clearValidate()},userFormOk(e){this.$refs[e].validate(e=>{if(e){let e=this.userForm.pwd;e&&(this.userForm.pwd=this.$md5(e)),this.$request.post("/api/saotx/user/saveOrModify",this.userForm,!0,t=>{"200000"==t.ret?(this.list(),this.userFormCancel("userForm"),this.$message({type:"success",message:"操作成功!"})):(this.userForm.pwd=e,this.$message.error(t.message))})}})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card"},[s("el-row",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.mgrForm}},[e._v("新建成员")])],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-form",{attrs:{inline:!0,model:e.form}},[s("el-form-item",{attrs:{label:"成员筛选"}},[s("el-input",{attrs:{size:"small",placeholder:"姓名/手机号"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色"}},[s("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.form.roleCode,callback:function(t){e.$set(e.form,"roleCode",t)},expression:"form.roleCode"}},[s("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.roleList,function(e){return s("el-option",{key:e.roleCode,attrs:{label:e.roleName,value:e.roleCode}})})],2)],1),e._v(" "),s("el-form-item",{attrs:{label:"状态"}},[s("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[s("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),s("el-option",{attrs:{label:"已启用",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"已停用",value:"0"}}),e._v(" "),s("el-option",{attrs:{label:"已锁定",value:"2"}})],1)],1),e._v(" "),s("div"),e._v(" "),s("el-form-item",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-card",{staticClass:"box-card"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[s("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.form.pageNo-1)*e.form.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"roleName",label:"角色",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"orgName",label:"单位",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.status?"已启用":2==t.row.status?"已锁定":"已停用")+"\n        ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.mgrForm(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),1==t.row.status?s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.handleDelete(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),0==t.row.status?s("el-button",{attrs:{size:"mini"},on:{click:function(s){e.modifyData(t.row.id,1)}}},[e._v("启用")]):e._e()]}}])})],1),e._v(" "),s("div",{staticClass:"space"}),e._v(" "),s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),s("el-dialog",{attrs:{title:"成员管理",width:"550px",center:"",visible:e.userForm.show,"show-close":e.userForm.showClose},on:{"update:visible":function(t){e.$set(e.userForm,"show",t)}}},[s("el-form",{ref:"userForm",staticClass:"form",attrs:{model:e.userForm,rules:e.userFormRules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"公司"}},[s("el-input",{attrs:{size:"small",disabled:""},model:{value:e.cluser.orgName,callback:function(t){e.$set(e.cluser,"orgName",t)},expression:"cluser.orgName"}})],1),e._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"账号id",prop:"id"}},[s("el-input",{attrs:{size:"small"},model:{value:e.userForm.id,callback:function(t){e.$set(e.userForm,"id",t)},expression:"userForm.id"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"账号",prop:"account"}},[s("el-input",{attrs:{size:"small",placeholder:"登录账号",disabled:!!e.userForm.id},model:{value:e.userForm.account,callback:function(t){e.$set(e.userForm,"account",t)},expression:"userForm.account"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"昵称",prop:"name"}},[s("el-input",{attrs:{size:"small",placeholder:"账号昵称",disabled:!!e.userForm.id},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[s("el-input",{attrs:{size:"small",placeholder:"账号绑定手机号"},model:{value:e.userForm.mobile,callback:function(t){e.$set(e.userForm,"mobile",t)},expression:"userForm.mobile"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{attrs:{size:"small",placeholder:"常用邮箱"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),e.userForm.id?e._e():s("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[s("el-input",{attrs:{size:"small",type:"password",placeholder:"8-16位字符(至少包含字母、数字、符号中的两种形式)"},model:{value:e.userForm.pwd,callback:function(t){e.$set(e.userForm,"pwd",t)},expression:"userForm.pwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色",prop:"roleCode"}},[s("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.userForm.roleCode,callback:function(t){e.$set(e.userForm,"roleCode",t)},expression:"userForm.roleCode"}},[s("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.roleList,function(e){return s("el-option",{key:e.roleCode,attrs:{label:e.roleName,value:e.roleCode}})})],2)],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.userFormCancel("userForm")}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.userFormOk("userForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(e){s("IHoF")},"data-v-62030134",null);t.default=o.exports},Sgts:function(e,t){},XIU9:function(e,t){},YSTz:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:()=>({form:{time:!1,timeText:"",showGetQr:!1,printQr:!1,printMoney:"",auditingMoney:""}}),created(){this.initSettings()},methods:{initSettings(){this.$request.post("/lsh/seller-manager/setting/querySysSetting",{},!0,e=>{if(e.ok){let t=e.data||{};this.form.time=1==t.SELLER_CONSUMER_ISSET,this.form.timeText=t.SELLER_CONSUMER_THRESHOLD||"",this.form.showGetQr=1==t.SELLER_QRPRINT_SHOW_ISSET,this.form.printQr=1==t.SELLER_QRPRINT_CHARGE_ISSET,this.form.printMoney=t.SELLER_QRPRINT_CHARGE_STANDARD||"",this.form.auditingMoney=t.SELLER_TX_AMOUNT_AUTH||""}})},save(){let e={SELLER_CONSUMER_ISSET:0,SELLER_CONSUMER_THRESHOLD:"",SELLER_QRPRINT_SHOW_ISSET:0,SELLER_QRPRINT_CHARGE_ISSET:0,SELLER_QRPRINT_CHARGE_STANDARD:"",SELLER_TX_AMOUNT_AUTH:this.form.auditingMoney};if(this.form.time){if(e.SELLER_CONSUMER_ISSET=1,!this.form.timeText)return this.$message.error("店铺与消费者关联时间不能为空，并且必须大于0！"),!1;e.SELLER_CONSUMER_THRESHOLD=this.form.timeText}this.form.showGetQr&&(e.SELLER_QRPRINT_SHOW_ISSET=1),this.form.printQr&&(e.SELLER_QRPRINT_CHARGE_ISSET=1,e.SELLER_QRPRINT_CHARGE_STANDARD=this.form.printMoney),this.$request.post("/lsh/seller-manager/setting/sellerSysSetting",{settings:e},!0,e=>{e.ok?this.$message({type:"success",message:"保存成功!"}):this.$message.error("保存失败，请稍候再试或联系管理员！")})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"zxwm-setting"},[s("el-card",{staticClass:"setting-card"},[s("ul",{},[s("li",[s("p",{staticClass:"title"},[e._v("店铺与消费者关联时间设置：")]),e._v(" "),s("div",[e._v("\n                    是否开启：\n                    "),s("el-switch",{attrs:{size:"small","active-color":"#13ce66","inactive-color":"#eeeeee"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}}),e._v(" "),s("el-input-number",{directives:[{name:"show",rawName:"v-show",value:e.form.time,expression:"form.time"}],attrs:{size:"small","controls-position":"right",min:1,max:2147483647},model:{value:e.form.timeText,callback:function(t){e.$set(e.form,"timeText",t)},expression:"form.timeText"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.form.time,expression:"form.time"}],staticClass:"unit-info"},[e._v("单位：分钟")])],1)]),e._v(" "),s("li",[s("p",{staticClass:"title"},[e._v("零售户首页是否显示领取店码标牌设置：")]),e._v(" "),s("div",[e._v("\n                    是否显示：\n                    "),s("el-switch",{attrs:{size:"small","active-color":"#13ce66","inactive-color":"#eeeeee"},model:{value:e.form.showGetQr,callback:function(t){e.$set(e.form,"showGetQr",t)},expression:"form.showGetQr"}})],1)]),e._v(" "),s("li",[s("p",{staticClass:"title"},[e._v("店码二维码打印设置：")]),e._v(" "),s("div",[e._v("\n                    是否收费（含运费和税费）：\n                    "),s("el-switch",{attrs:{size:"small","active-color":"#13ce66","inactive-color":"#eeeeee"},model:{value:e.form.printQr,callback:function(t){e.$set(e.form,"printQr",t)},expression:"form.printQr"}}),e._v(" "),s("el-input-number",{directives:[{name:"show",rawName:"v-show",value:e.form.printQr,expression:"form.printQr"}],attrs:{size:"small","controls-position":"right",min:0,max:2147483647},model:{value:e.form.printMoney,callback:function(t){e.$set(e.form,"printMoney",t)},expression:"form.printMoney"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.form.printQr,expression:"form.printQr"}],staticClass:"unit-info"},[e._v("单位：元")])],1)]),e._v(" "),s("li",{staticClass:"last"},[s("p",{staticClass:"title"},[e._v("提现申请阀值设置：")]),e._v(" "),s("div",[e._v("\n                    提现需申请阀值金额：\n                    "),s("el-input-number",{attrs:{size:"small","controls-position":"right",min:0,max:2147483647},model:{value:e.form.auditingMoney,callback:function(t){e.$set(e.form,"auditingMoney",t)},expression:"form.auditingMoney"}}),e._v(" "),s("span",{staticClass:"unit-info"},[e._v("单位：元")])],1)])]),e._v(" "),s("div",{staticClass:"oper-block"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")])],1)])],1)},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(e){s("Sgts")},"data-v-28b1474e",null);t.default=o.exports},"ab+u":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data(){return{cluser:{},form:{oldPwd:"",newPwd:"",checkPass:""},rules:{oldPwd:[{required:!0,message:"原密码不能为空",trigger:"blur"}],newPwd:[{required:!0,validator:(e,t,s)=>{""===t?s(new Error("请输入密码")):/(?!^(\d+|[a-zA-Z]+|[~!@#$%^&*?]+)$)^[\w~!@#$%\^&*?]{8,16}$/.test(t)?(""!==this.form.checkPass&&this.$refs.form.validateField("checkPass"),s()):s(new Error("8-16位字符(至少包含字母、数字、符号中的两种形式)"))},trigger:"blur"}],checkPass:[{required:!0,validator:(e,t,s)=>{""===t?s(new Error("请输入确认密码")):t!==this.form.newPwd?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]}}},created(){if(this.cluser=this.$store.state.cluser,!this.cluser||!this.cluser.account)return this.clearLoginSession(),!1},methods:{clearLoginSession(){sessionStorage.removeItem("access_token"),sessionStorage.removeItem("access_loginId")},submitForm(e){this.$refs[e].validate(e=>{if(e){let e={};e.account=this.cluser.account,e.oldPwd=this.form.oldPwd,e.newPwd=this.$md5(this.form.newPwd),this.$request.post("/api/saotx/user/modifyPwd",e,!0,e=>{"200000"==e.ret?(this.clearLoginSession(),this.$router.push({path:"/login"})):this.$message.error(e.message)})}})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card"},[s("el-form",{ref:"form",staticClass:"mod-pwd",attrs:{model:e.form,rules:e.rules,"label-width":"120px","status-icon":""}},[s("el-form-item",{attrs:{label:"原密码",prop:"oldPwd"}},[s("el-input",{attrs:{size:"small",type:"password"},model:{value:e.form.oldPwd,callback:function(t){e.$set(e.form,"oldPwd",t)},expression:"form.oldPwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"newPwd"}},[s("el-input",{attrs:{size:"small",type:"password"},model:{value:e.form.newPwd,callback:function(t){e.$set(e.form,"newPwd",t)},expression:"form.newPwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[s("el-input",{attrs:{size:"small",type:"password"},model:{value:e.form.checkPass,callback:function(t){e.$set(e.form,"checkPass",t)},expression:"form.checkPass"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确认")])],1)],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,r,!1,function(e){s("bk4u")},"data-v-c8c7cf3c",null);t.default=o.exports},bk4u:function(e,t){},bnJB:function(e,t){}});
//# sourceMappingURL=10.0d6e1e45eb1dca5b10c4.js.map