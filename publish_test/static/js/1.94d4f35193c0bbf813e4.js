webpackJsonp([1],{"//E4":function(t,e){},"08yd":function(t,e){},"0Jpu":function(t,e){},"0hcv":function(t,e){},"0pST":function(t,e){},"36Dd":function(t,e){},"55q8":function(t,e){},"5bo5":function(t,e){},"5odS":function(t,e){},"6CG1":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"AddActProduct",data:()=>({allGiftTypeActData:[],allEchangeTypeData:[{id:4,name:"卡券"},{id:5,name:"外链"}],allCardTypeData:[{id:1,name:"折扣卡"},{id:2,name:"翻倍卡"}],seletGiftType:2,seletExchangeType:4,seletCardType:1,giftTypeDisPlay:2,cardTypeDisplay:1,cardTypeNameDisplay:1,headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},filters:{giftType:"",memo:"",image:"",price:"",score:0,cardType:1,shopQuantity:"",quantity:"",exchangeType:4,exchangeUrl:"",afterService:"",abc:0},rules:{giftType:[{required:!0,message:"请选择礼物类型",trigger:"change"}],memo:[{required:!0,message:"请输入礼物名称",trigger:"change"}],price:[{required:!0,message:"请输入市面价值",trigger:"change"}],image:[{required:!0,message:"请输入礼品图片",trigger:"change"}],exchangeType:[{required:!0,message:"请输入礼品分类",trigger:"change"}],score:[{required:!0,message:"请输入市面价值",trigger:"change"}]}}),created(){this.init()},watch:{seletGiftType(t,e){t&&t!=e&&(1==t&&(this.giftTypeDisPlay=t,this.filters.giftType=t,this.clearData()),2==t&&(this.giftTypeDisPlay=t,this.filters.giftType=t,this.clearData()),3==t&&(this.giftTypeDisPlay=t,this.filters.giftType=t,this.clearData()),4==t&&(this.giftTypeDisPlay=t,this.filters.giftType=t,this.clearData()))},seletExchangeType(t,e){t&&t!=e&&(4==t&&(this.cardTypeDisplay=1,this.filters.exchangeType=t),5==t&&(this.cardTypeDisplay=2,this.filters.exchangeType=t))},seletCardType(t,e){t&&t!=e&&(1==t&&(this.cardTypeNameDisplay=1,this.filters.cardType=t),2==t&&(this.cardTypeNameDisplay=2,this.filters.cardType=t))}},methods:{init(){this.allGiftTypeActList()},checkOn3(t){t&&(t>9999999?this.filters.price="":this.giftTypeDisPlay)},checkOn4(t){t&&t>9999999&&(this.filters.score="")},allGiftTypeActList(){this.$request.post("/sc/saotx/mall/giftTypeActMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allGiftTypeActData=t.data)})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={giftType:this.filters.giftType,memo:this.filters.memo,image:this.filters.image,score:this.filters.score,price:this.filters.price,cardType:this.filters.cardType,exchangeType:this.filters.exchangeType,exchangeUrl:this.filters.exchangeUrl,afterService:this.filters.afterService};this.$request.post("/sc/saotx/mall/product/saveOrModifyAct",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnTobaccoMgr()):this.$message({message:t.message,type:"warning"})},t=>{})}})},returnTobaccoMgr(){this.$router.push({path:"/mall/product/act"})},clearData(){this.filters.memo="",this.filters.image="",this.filters.price="",this.filters.score="",this.filters.cardType=1,this.filters.exchangeType=4,this.filters.exchangeUrl="",this.filters.afterService=""},handleRemove(t,e){console.log(t,e)},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleAvatarSuccess(t,e){var a=t.data||{},s=a&&a.accessUrl;this.filters.image=s}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-tobaccomgr-container clearfix"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{ref:"ruleForm",attrs:{inline:!0,rules:t.rules,model:t.filters,"label-width":"110px"}},[a("div",{staticClass:"add-tobaccomgr-form-container"},[a("el-row",[a("el-form-item",{attrs:{size:"small",label:"礼品类型：",prop:"giftType"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:t.seletGiftType,callback:function(e){t.seletGiftType=e},expression:"seletGiftType"}},t._l(t.allGiftTypeActData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"礼品名称：",prop:"memo"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容",maxlength:"100"},model:{value:t.filters.memo,callback:function(e){t.$set(t.filters,"memo",e)},expression:"filters.memo"}})],1)],1),t._v(" "),a("el-row",[1==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:"礼品分类：",prop:"exchangeType"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:t.seletExchangeType,callback:function(e){t.seletExchangeType=e},expression:"seletExchangeType"}},t._l(t.allEchangeTypeData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),1==t.giftTypeDisPlay&&1==t.cardTypeDisplay?a("el-form-item",{attrs:{size:"small",label:""}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:t.seletCardType,callback:function(e){t.seletCardType=e},expression:"seletCardType"}},t._l(t.allCardTypeData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e()],1),t._v(" "),a("el-row",[1==t.giftTypeDisPlay||2==t.giftTypeDisPlay||3==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:3==t.giftTypeDisPlay?"红包面值：":2==t.giftTypeDisPlay?"市面价值（元）：":2==t.cardTypeDisplay?"市面价值（元）：":1==t.cardTypeNameDisplay?"折扣值（折）：":"翻倍值（倍）：",prop:"price"}},[a("el-input",{staticClass:"tobacco-input",attrs:{type:"number",placeholder:"请输入内容",min:"0",max:"9999999"},on:{input:function(e){t.checkOn3(t.filters.price)}},model:{value:t.filters.price,callback:function(e){t.$set(t.filters,"price",e)},expression:"filters.price"}})],1):t._e()],1),t._v(" "),a("el-row",[4==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:"积分面值：",prop:"score"}},[a("el-input",{staticClass:"tobacco-input",attrs:{type:"number",placeholder:"请输入内容",min:"0",max:"9999999"},on:{input:function(e){t.checkOn4(t.filters.score)}},model:{value:t.filters.score,callback:function(e){t.$set(t.filters,"score",e)},expression:"filters.score"}})],1):t._e()],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"礼品图片：",prop:"image",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.filters.image,callback:function(e){t.$set(t.filters,"image",e)},expression:"filters.image"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.filters.image?a("img",{staticClass:"avatar",attrs:{width:"100",height:"74",src:t.filters.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 380*280px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1)],1),t._v(" "),a("el-row",[1==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:"链接URL："}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容",maxlength:"200"},model:{value:t.filters.exchangeUrl,callback:function(e){t.$set(t.filters,"exchangeUrl",e)},expression:"filters.exchangeUrl"}})],1):t._e()],1),t._v(" "),a("el-row",[1==t.giftTypeDisPlay||2==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:"礼品描述："}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容",type:"textarea",rows:3,maxlength:"200"},model:{value:t.filters.afterService,callback:function(e){t.$set(t.filters,"afterService",e)},expression:"filters.afterService"}})],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.returnTobaccoMgr}},[t._v("取消")])],1)],1)])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("T9oU"),a("L751")},"data-v-297af0ce",null);e.default=r.exports},"6wDu":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"BuildProduct",data:()=>({listLoading:!1,productList:[{name:"全部",id:""}],productTypeList:[{name:"全部",id:""}],cateLvl1List:[{name:"全部",id:""}],cateLvl2List:[{name:"全部",id:""}],cateLvl3List:[{name:"全部",id:""}],cateLvl4List:[{name:"全部",id:""}],filters:{status:"",giftType:"",keywords:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:""},listZJ:[],sort:0,ids:"",pageSize:10,pageNo:1,currentPage:1,total:0,batchDelete:!0}),created(){this.getProductList(),this.getProductType(),this.getOneCategory(),this.getListZJ()},methods:{getProductList(){this.$request.post("/sc/saotx/mall/statusMap",{},!0,t=>{"200000"==t.ret&&(this.productList=[...this.productList,...t.data])})},getProductType(){this.$request.post("/sc/saotx/mall/giftTypeMap",{},!0,t=>{"200000"==t.ret&&(this.productTypeList=[...this.productTypeList,...t.data])})},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.filters.cateLvl2="",this.cateLvl2List=[{name:"全部",id:""}],this.filters.cateLvl3="",this.cateLvl3List=[{name:"全部",id:""}],this.filters.cateLvl4="",this.cateLvl4List=[{name:"全部",id:""}],this.getTwoCategory()},getTwoCategory(){""!=this.filters.cateLvl1&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl1},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},selectBrand2(){this.filters.cateLvl3="",this.cateLvl3List=[{name:"全部",id:""}],this.filters.cateLvl4="",this.cateLvl4List=[{name:"全部",id:""}],this.getThreeCategory()},getThreeCategory(){""!=this.filters.cateLvl2&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl2},!0,t=>{"200000"==t.ret&&(this.cateLvl3List=[...this.cateLvl3List,...t.data])})},selectBrand3(){this.filters.cateLvl4="",this.cateLvl4List=[{name:"全部",id:""}],this.getFourCategory()},getFourCategory(){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl3},!0,t=>{"200000"==t.ret&&(this.cateLvl4List=[...this.cateLvl4List,...t.data])})},modiifySort(){1==this.sort?this.sort=0:this.sort=1},getListZJ(t){let e={status:this.filters.status,giftType:this.filters.giftType,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,cateLvl3:this.filters.cateLvl3,cateLvl4:this.filters.cateLvl4,pageSize:this.pageSize,currentPageNumber:this.pageNo};"bySales"==t?(e.order=1,e.sort=this.sort,this.modiifySort()):"byScore"==t?(e.order=2,e.sort=this.sort,this.modiifySort()):"byTime"==t&&(e.order=3,e.sort=this.sort,this.modiifySort()),this.postSearch(e)},postSearch(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listZJ",t,!0,t=>{"200000"==t.ret&&(console.log(t.data),this.listLoading=!1,this.listZJ=t.data.list,this.total=t.data.page.count,this.pageNo=t.data.page.pageNo)})},getStatus(){this.filters.status="",this.filters.giftType="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.cateLvl3="",this.filters.cateLvl4="",this.pageNo=1,this.currentPage=1,this.getListZJ()},commitForm(){this.pageNo=1,this.currentPage=1,this.getListZJ()},sortBySales(){this.getListZJ("bySales")},sortByScore(){this.getListZJ("byScore")},sortByTime(){this.getListZJ("byTime")},addProduct(){this.$router.push({path:"/mall/product/zj/addProduct"})},deleteProduct(t){let e={id:t};this.$confirm("您确定刪除此商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/sc/saotx/mall/product/remove",e,!0,t=>{"200000"==t.ret?(this.$message({message:"操作成功！",type:"success"}),this.getListZJ()):this.$message({message:t.message,type:"warning"})})})},editProduct(t){this.$router.push({path:"/mall/product/zj/editProduct?id="+t})},productOnline(t){let e={id:t};this.$request.post("/sc/saotx/mall/product/online",e,!0,t=>{"200000"==t.ret?(this.$message({message:"操作成功！",type:"success"}),this.getListZJ()):this.$message({message:t.message,type:"warning"})})},productOffline(t){let e={id:t};this.$request.post("/sc/saotx/mall/product/offline",e,!0,t=>{"200000"==t.ret?(this.$message({message:"操作成功！",type:"success"}),this.getListZJ()):this.$message({message:t.message,type:"warning"})})},handleSelectionChange(t){let e=t;console.log(e);let a=[];e.length>0?(this.batchDelete=!1,e.map((t,e)=>{a.push(t.id)}),this.ids=a.join(",")):(this.ids="",this.batchDelete=!0)},removeBatch(){this.$confirm("您确定批量刪除商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/sc/saotx/mall/product/removeBatch",{ids:this.ids},!0,t=>{"200000"==t.ret?(this.$message({message:"操作成功！",type:"success"}),this.getListZJ()):this.$message({message:t.message,type:"warning"})})})},jumpTo(){this.$emit("current-change")},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getListZJ()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"build-product-container"},[a("div",{staticClass:"box-container"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addProduct}},[t._v("新建商品")])],1),t._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"商品状态"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}},t._l(t.productList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"商品类型"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.giftType,callback:function(e){t.$set(t.filters,"giftType",e)},expression:"filters.giftType"}},t._l(t.productTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键词"},model:{value:t.filters.keywords,callback:function(e){t.$set(t.filters,"keywords",e)},expression:"filters.keywords"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.cateLvl1,callback:function(e){t.$set(t.filters,"cateLvl1",e)},expression:"filters.cateLvl1"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.filters.cateLvl2,callback:function(e){t.$set(t.filters,"cateLvl2",e)},expression:"filters.cateLvl2"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand3},model:{value:t.filters.cateLvl3,callback:function(e){t.$set(t.filters,"cateLvl3",e)},expression:"filters.cateLvl3"}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.cateLvl4,callback:function(e){t.$set(t.filters,"cateLvl4",e)},expression:"filters.cateLvl4"}},t._l(t.cateLvl4List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sortBySales}},[t._v("按销量排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sortByScore}},[t._v("按兑换值排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sortByTime}},[t._v("按创建时间排序")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listZJ},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"商品名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"giftType",label:"商品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("1"==e.row.giftType?"虚拟商品":"实物商品"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cate1Name",label:"一级分类",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate2Name",label:"二级分类",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate3Name",label:"三级分类",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate4Name",label:"四级分类",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"score",label:"兑换值"}}),t._v(" "),a("el-table-column",{attrs:{prop:"shopQuantity",label:"库存"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(new Date(e.row.createTime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"商品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("1"==e.row.status?"上架中":"下架中"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.editProduct(e.row.id)}}},[t._v("编辑")]),t._v(" "),"1"==e.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.productOffline(e.row.id)}}},[t._v("下架")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.productOnline(e.row.id)}}},[t._v("上架")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteProduct(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"small",disabled:t.batchDelete},on:{click:function(e){t.removeBatch(t.ids)}}},[t._v("批量删除")]),t._v(" "),a("el-button",{staticClass:"btn-jump-to",attrs:{type:"primary"},on:{click:t.jumpTo}},[t._v("跳转")]),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("0hcv"),a("LBbT")},"data-v-594660ad",null);e.default=r.exports},"7Zou":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:()=>({headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},bannerTypeList:[],productIdList:[],productIdShow:!1,linkShow:!1,cateLvlShow:!1,cateLvl1List:[{name:"全部",id:""}],cateLvl2List:[{name:"全部",id:""}],cateLvl3List:[{name:"全部",id:""}],cateLvl4List:[{name:"全部",id:""}],ruleForm:{type:"",productId:"",link:"",cateLvl1Id:"",cateLvl2Id:"",cateLvl3Id:"",cateLvl4Id:"",typeVal:"",idx:"",image:""},rules:{type:[{required:!0,message:"请选择链接类型",trigger:"change"}],productId:[{required:!0,message:"请选择商品ID",trigger:"change"}],link:[{required:!0,message:"请输入链接地址",trigger:"blur"}],cateLvl1Id:[{required:!0,message:"请选择一级分类",trigger:"change"}],cateLvl2Id:[{required:!0,message:"请选择二级分类",trigger:"change"}],cateLvl3Id:[{required:!0,message:"请选择三级分类",trigger:"change"}],cateLvl4Id:[{required:!0,message:"请选择四级分类",trigger:"change"}],idx:[{required:!0,message:"请输入排序值",trigger:"blur"}],image:[{required:!0,message:"请上传主图",trigger:"change"}]}}),created(){this.getBannerTypeList(),this.getProductIdList(),this.getOneCategory()},methods:{getBannerTypeList(){this.$request.post("/sc/saotx/mall/bannerTypeMap",{},!0,t=>{"200000"==t.ret&&(this.bannerTypeList=[...this.bannerTypeList,...t.data])})},getProductIdList(){this.$request.post("/sc/saotx/mall/product/downBox",{},!0,t=>{"200000"==t.ret&&(this.productIdList=[...this.productIdList,...t.data])})},selectType(t){console.log(t),1==t?(this.productIdShow=!0,this.rules.productId=[{required:!0,message:"请选择商品ID",trigger:"change"}],this.linkShow=!1,this.rules.link=[],this.cateLvlShow=!1,this.rules.cateLvl1Id=[],this.rules.cateLvl2Id=[],this.rules.cateLvl3Id=[],this.rules.cateLvl4Id=[]):2==t?(this.productIdShow=!1,this.rules.productId=[],this.linkShow=!0,this.rules.link=[{required:!0,message:"请输入链接地址",trigger:"blur"}],this.cateLvlShow=!1,this.rules.cateLvl1Id=[],this.rules.cateLvl2Id=[],this.rules.cateLvl3Id=[],this.rules.cateLvl4Id=[]):3==t&&(this.productIdShow=!1,this.rules.productId=[],this.linkShow=!1,this.rules.link=[],this.cateLvlShow=!0,this.rules.cateLvl1Id=[{required:!0,message:"请选择一级分类",trigger:"change"}],this.rules.cateLvl2Id=[{required:!0,message:"请选择二级分类",trigger:"change"}],this.rules.cateLvl3Id=[{required:!0,message:"请选择三级分类",trigger:"change"}],this.rules.cateLvl4Id=[{required:!0,message:"请选择四级分类",trigger:"change"}])},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.ruleForm.cateLvl2Id="-1",this.cateLvl2List=[{name:"全部",id:"-1"}],this.ruleForm.cateLvl3Id="-1",this.cateLvl3List=[{name:"全部",id:"-1"}],this.ruleForm.cateLvl4Id="-1",this.cateLvl4List=[{name:"全部",id:"-1"}],this.getTwoCategory()},getTwoCategory(){"-1"!=this.ruleForm.cateLvl1Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl1Id},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},selectBrand2(){this.ruleForm.cateLvl3Id="-1",this.cateLvl3List=[{name:"全部",id:"-1"}],this.ruleForm.cateLvl4Id="-1",this.cateLvl4List=[{name:"全部",id:"-1"}],this.getThreeCategory()},getThreeCategory(){"-1"!=this.ruleForm.cateLvl2Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl2Id},!0,t=>{"200000"==t.ret&&(this.cateLvl3List=[...this.cateLvl3List,...t.data])})},selectBrand3(){this.ruleForm.cateLvl4Id="-1",this.cateLvl4List=[{name:"全部",id:"-1"}],this.getFourCategory()},getFourCategory(){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl3Id},!0,t=>{"200000"==t.ret&&(this.cateLvl4List=[...this.cateLvl4List,...t.data])})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={type:this.ruleForm.type,idx:this.ruleForm.idx,image:this.ruleForm.image};if(1==this.ruleForm.type)t.typeVal=this.ruleForm.productId;else if(2==this.ruleForm.type)t.typeVal=this.ruleForm.link;else if(3==this.ruleForm.type){t.cate1Id=this.ruleForm.cateLvl1Id,t.cate2Id=this.ruleForm.cateLvl2Id,t.cate3Id=this.ruleForm.cateLvl3Id,t.cate4Id=this.ruleForm.cateLvl4Id;let e=[this.ruleForm.cateLvl1Id,this.ruleForm.cateLvl2Id,this.ruleForm.cateLvl3Id,this.ruleForm.cateLvl4Id].filter((t,e)=>""!==t||null);t.typeVal=e.join("@")}this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/banner/saveOrModify",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnBannerMannage()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image=s},returnBannerMannage(){this.$router.push({path:"/mall/banner"})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-banner-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{size:"small",label:"链接类型：",prop:"type"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:t.selectType},model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},t._l(t.bannerTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.productIdShow,expression:"productIdShow"}],attrs:{size:"small",label:"商品ID：",prop:"type"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.productId,callback:function(e){t.$set(t.ruleForm,"productId",e)},expression:"ruleForm.productId"}},t._l(t.productIdList,function(t){return a("el-option",{key:t.productId,attrs:{label:t.memo,value:t.productId}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.linkShow,expression:"linkShow"}],attrs:{label:"链接地址：",prop:"link",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.link,callback:function(e){t.$set(t.ruleForm,"link",e)},expression:"ruleForm.link"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.cateLvlShow,expression:"cateLvlShow"}],attrs:{size:"small",label:"分类：",prop:"cateLvl1Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.ruleForm.cateLvl1Id,callback:function(e){t.$set(t.ruleForm,"cateLvl1Id",e)},expression:"ruleForm.cateLvl1Id"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),t.cateLvlShow?a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl2Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.ruleForm.cateLvl2Id,callback:function(e){t.$set(t.ruleForm,"cateLvl2Id",e)},expression:"ruleForm.cateLvl2Id"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),t.cateLvlShow?a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl3Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand3},model:{value:t.ruleForm.cateLvl3Id,callback:function(e){t.$set(t.ruleForm,"cateLvl3Id",e)},expression:"ruleForm.cateLvl3Id "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),t.cateLvlShow?a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl4Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.cateLvl4Id,callback:function(e){t.$set(t.ruleForm,"cateLvl4Id",e)},expression:"ruleForm.cateLvl4Id"}},t._l(t.cateLvl4List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"排序值：",prop:"idx",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.idx,callback:function(e){t.$set(t.ruleForm,"idx",e)},expression:"ruleForm.idx"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"主图：",prop:"image",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image,callback:function(e){t.$set(t.ruleForm,"image",e)},expression:"ruleForm.image"}}),t._v(" "),a("el-upload",{staticClass:"banner-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.ruleForm.image?a("img",{staticClass:"avatar",attrs:{width:"100",height:"100",src:t.ruleForm.image}}):t._e(),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("* 图片建议尺寸为 750*420px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"add-banner-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("立即创建")]),t._v(" "),a("el-button",{on:{click:t.returnBannerMannage}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("Z+Fw"),a("yuqM")},"data-v-03ea2ab0",null);e.default=r.exports},"83S4":function(t,e){},"8r6X":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},name:"ActProduct",data:()=>({dialogFormBtn:!0,dialogFormVisible:!1,dialogFormVisible2:!1,formLabelWidth:"120px",selectallKyeType:1,allKeyWordActData:[],allGiftTypeActData:[{name:"全部",id:""}],allStatusData:[{name:"全部",id:""}],listData:[],form2:{delivery:!1,shopQuantity:""},form3:{delivery:!1,id:"",status:""},form:{kyeName:"",giftType:"",status:"",productId:"",productName:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")}}),created(){this.init()},watch:{selectallKyeType(t,e){t&&t!=e&&(1==t&&(this.form.productId=this.form.kyeName,this.form.productName=""),2==t&&(this.form.productId="",this.form.productName=this.form.kyeName))}},methods:{init(){this.allKeyWordActList(),this.allGiftTypeActList(),this.allStatusList(),this.getlistData()},checkOn(t){t?t>999999||0==new RegExp(/^\+?[1-9][0-9]*$/).test(t)?(this.dialogFormBtn=!0,this.form2.shopQuantity=""):this.dialogFormBtn=!1:this.dialogFormBtn=!0},allKeyWordActList(){this.$request.post("/sc/saotx/mall/KeyWordActMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allKeyWordActData=t.data)})},allGiftTypeActList(){this.$request.post("/sc/saotx/mall/giftTypeActMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allGiftTypeActData=[...this.allGiftTypeActData,...t.data])})},allStatusList(){this.$request.post("/sc/saotx/mall/statusOnOffMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allStatusData=[...this.allStatusData,...t.data])})},getlistData(){this.$request.post("/sc/saotx/mall/product/listAct",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},addQuanTity(t){this.form2.id=t,this.form2.shopQuantity=0,this.dialogFormVisible=!0},submitAddQuanTity(){this.$request.post("/sc/saotx/mall/product/addQuantity",this.form2,!0,t=>{"200000"==t.ret?(this.dialogFormVisible=!1,this.getlistData(),this.$message({message:"增加成功！",type:"success"})):this.$message({message:t.message,type:"warning"})},t=>{})},edit(t){this.$router.push({path:"/mall/product/act/editActProduct?pid="+t})},subEditSatus(){let t={id:this.form3.id,status:this.form3.status};this.$request.post("/sc/saotx/mall/product/onOffline",t,!0,t=>{"200000"==t.ret?(this.dialogFormVisible2=!1,this.getlistData(),this.$message({message:"停用成功！",type:"success"})):this.$message({message:t.message,type:"warning"})},t=>{})},editSatus(t,e){this.form3.id=t,this.form3.status=e,this.dialogFormVisible2=!0},editSatusOn(t,e){let a={id:t,status:e};this.$request.post("/sc/saotx/mall/product/onOffline",a,!0,t=>{"200000"==t.ret?(this.dialogFormVisible2=!1,this.getlistData(),this.$message({message:"启用成功！",type:"success"})):this.$message({message:t.message,type:"warning"})},t=>{})},queryData(){1==this.selectallKyeType?(this.form.productId=this.form.kyeName,this.form.productName=""):2==this.selectallKyeType?(this.form.productId="",this.form.productName=this.form.kyeName):(this.form.productId="",this.form.productName=""),this.getlistData()},resetData(){this.selectallKyeType="",this.form.kyeName="",this.form.giftType="",this.form.status="",this.form.productId="",this.form.productName="",this.form.pageNo=1,this.form.pageSize=10,this.getlistData()},currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},initPagination(t){t&&(this.pagination.total=t.count)},addProduct(){this.$router.push({path:"/mall/product/act/addActProduct"})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/活动物料管理")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addProduct}},[t._v("新建礼品")])],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"关键字:",size:"small"}},[a("el-select",{attrs:{placeholder:"全部"},model:{value:t.selectallKyeType,callback:function(e){t.selectallKyeType=e},expression:"selectallKyeType"}},t._l(t.allKeyWordActData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:t.form.kyeName,callback:function(e){t.$set(t.form,"kyeName",e)},expression:"form.kyeName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"礼品类型:",size:"small"}},[a("el-select",{attrs:{placeholder:"全部"},model:{value:t.form.giftType,callback:function(e){t.$set(t.form,"giftType",e)},expression:"form.giftType"}},t._l(t.allGiftTypeActData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"使用状态:",size:"small"}},[a("el-select",{attrs:{placeholder:"全部"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.allStatusData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s((t.form.pageNo-1)*t.form.pageSize+e.$index+1)+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"productId",label:"礼品ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"礼品名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.image?a("img",{staticStyle:{width:"90px",height:"50px"},attrs:{src:e.row.image}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"礼品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(3==e.row.sourceType?"活动奖品":"其他")+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"礼品分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(1==e.row.giftType?"虚拟":2==e.row.giftType?"实物":3==e.row.giftType?"红包":"积分")+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"shopQuantity",label:"剩余库存"}}),t._v(" "),a("el-table-column",{attrs:{label:"使用状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(1==e.row.status?"已启用":-1==e.row.status?"已停用":"未知")+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.addQuanTity(e.row.id)}}},[t._v("增库")]),t._v(" "),1==e.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.editSatus(e.row.id,-1)}}},[t._v("停用")]):t._e(),t._v(" "),-1==e.row.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editSatusOn(e.row.id,1)}}},[t._v("启用")]):t._e()]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"增加库存",visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form2}},[a("el-form-item",{attrs:{label:"增加库存","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.form2.id,callback:function(e){t.$set(t.form2,"id",e)},expression:"form2.id"}}),t._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{type:"number",minlength:"0",min:"0"},on:{input:function(e){t.checkOn(t.form2.shopQuantity)}},model:{value:t.form2.shopQuantity,callback:function(e){t.$set(t.form2,"shopQuantity",e)},expression:"form2.shopQuantity"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:t.dialogFormBtn},on:{click:function(e){t.submitAddQuanTity()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"礼品提示",visible:t.dialogFormVisible2,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[a("el-form",{attrs:{model:t.form3}},[a("el-row",[a("div",{attrs:{align:"center"}},[t._v("停用后，新增活动将不能使用该礼品")])]),t._v(" "),a("el-form-item",{attrs:{label:"","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.form3.id,callback:function(e){t.$set(t.form3,"id",e)},expression:"form3.id"}}),t._v(" "),a("el-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.form3.status,callback:function(e){t.$set(t.form3,"status",e)},expression:"form3.status"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.subEditSatus()}}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("XN0F")},"data-v-d744014c",null);e.default=l.exports},"8u2C":function(t,e){},AvWX:function(t,e){},DjI5:function(t,e){},Dkz9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:()=>({listLoading:!1,dialogTableVisible:!1,listType:"JD",listJD:[],listZJ:[],ProductIndex:"",headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},cateLvl1List:[{name:"全部",id:""}],cateLvl2List:[{name:"全部",id:""}],ruleForm:{type:"3",name:"",idx:"",product1Id:"",product1Name:"",image1:"",product2Id:"",product2Name:"",image2:"",product3Id:"",product3Name:"",image3:"",product4Id:"",product4Name:"",image4:"",product5Id:"",product5Name:"",image5:""},rules:{name:[{required:!0,message:"请输入推荐位名称",trigger:"blur"}],idx:[{required:!0,message:"请输入排序值",trigger:"blur"}],product1Name:[{required:!0,message:"请选择商品",trigger:"change"}],image1:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product3Name:[{required:!0,message:"请选择商品",trigger:"change"}],image3:[{required:!0,message:"请上传图片",trigger:"change"}],product4Name:[{required:!0,message:"请选择商品",trigger:"change"}],image4:[{required:!0,message:"请上传图片",trigger:"change"}],product5Name:[{required:!0,message:"请选择商品",trigger:"change"}],image5:[{required:!0,message:"请上传图片",trigger:"change"}]},filters:{inputWithSelect:"",select:"",status:1,giftType:"",hasDelivery:"",keywords:"",cateLvl1:"",cateLvl2:"",productId:"",pageSize:5,pageNo:1,total:0},currentPage:1,selectProduct:{productId:"",productName:""}}),created(){this.getOneCategory(),this.getListJD(),this.getListZJ()},methods:{getListJD(){let t={status:this.filters.status,giftType:this.filters.giftType,hasDelivery:this.filters.hasDelivery,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchJD(t)},postSearchJD(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listJD",t,!0,t=>{"200000"==t.ret&&(this.listLoading=!1,this.listJD=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},getListZJ(){let t={status:this.filters.status,giftType:this.filters.giftType,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchZJ(t)},postSearchZJ(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listZJ",t,!0,t=>{"200000"==t.ret&&(console.log(t.data),this.listLoading=!1,this.listZJ=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},commitForm(){this.handleClick()},inputWithSelectChange(t){this.filters.keywords="",this.filters.productId=""},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.filters.cateLvl2="",this.cateLvl2List=[{name:"全部",id:""}],this.getTwoCategory()},getTwoCategory(){""!=this.filters.cateLvl1&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl1},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},chooseProduct(t){this.dialogTableVisible=!0,this.ProductIndex=t},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={type:3,name:this.ruleForm.name,idx:this.ruleForm.idx,recommendProducts:[{productId:this.ruleForm.product1Id,productName:this.ruleForm.product1Name,productImage:this.ruleForm.image1,idx:1},{productId:this.ruleForm.product2Id,productName:this.ruleForm.product2Name,productImage:this.ruleForm.image2,idx:2},{productId:this.ruleForm.product3Id,productName:this.ruleForm.product3Name,productImage:this.ruleForm.image3,idx:3},{productId:this.ruleForm.product4Id,productName:this.ruleForm.product4Name,productImage:this.ruleForm.image4,idx:4},{productId:this.ruleForm.product5Id,productName:this.ruleForm.product5Name,productImage:this.ruleForm.image5,idx:5}]};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/recommend/saveOrModify",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnRecommend()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess1(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image1=s},handleAvatarSuccess2(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image2=s},handleAvatarSuccess3(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image3=s},handleAvatarSuccess4(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image4=s},handleAvatarSuccess5(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image5=s},returnRecommend(){this.$router.push({path:"/mall/recommend"})},handleSelectProduct(t){if(console.log(t),t){let e=t;this.selectProduct.productId=e.productId,this.selectProduct.productName=e.memo}},handleClick(t,e){this.filters.pageNo=1,this.currentPage=1,"JD"==this.listType?this.getListJD():"ZJ"==this.listType&&this.getListZJ()},jumpTo(){this.$emit("current-change")},handleCurrentChangeZJ(t){this.filters.pageNo=t,this.currentPage=t,this.getListZJ()},handleCurrentChangeJD(t){this.filters.pageNo=t,this.currentPage=t,this.getListJD()},confirmDialog(){this.ruleForm.product1Id==this.selectProduct.productId||this.ruleForm.product2Id==this.selectProduct.productId||this.ruleForm.product3Id==this.selectProduct.productId||this.ruleForm.product4Id==this.selectProduct.productId?this.$message({message:"已选择当前商品",type:"warning"}):(this.ruleForm["product"+this.ProductIndex+"Id"]=this.selectProduct.productId,this.ruleForm["product"+this.ProductIndex+"Name"]=this.selectProduct.productName,this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="")},cancelDialog(){this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="",this.dialogTableVisible=!1}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-commend-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"120px"}},[a("div",{staticClass:"add-commend-form-container"},[a("el-form-item",{attrs:{label:"推荐位名称：",prop:"name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"排序值：",prop:"idx",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.idx,callback:function(e){t.$set(t.ruleForm,"idx",e)},expression:"ruleForm.idx"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"选择商品：",prop:"product1Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product1Name,callback:function(e){t.$set(t.ruleForm,"product1Name",e)},expression:"ruleForm.product1Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("1")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图1：",prop:"image1",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image1,callback:function(e){t.$set(t.ruleForm,"image1",e)},expression:"ruleForm.image1"}}),t._v(" "),a("el-upload",{staticClass:"main-product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess1}},[t.ruleForm.image1?a("img",{staticClass:"avatar",attrs:{width:"100",height:"49",src:t.ruleForm.image1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 490*240px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品2：",prop:"product2Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product2Name,callback:function(e){t.$set(t.ruleForm,"product2Name",e)},expression:"ruleForm.product2Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("2")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图2：",prop:"image2",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image2,callback:function(e){t.$set(t.ruleForm,"image2",e)},expression:"ruleForm.image2"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess2}},[t.ruleForm.image2?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品3：",prop:"product3Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product3Name,callback:function(e){t.$set(t.ruleForm,"product3Name",e)},expression:"ruleForm.product3Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("3")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图3：",prop:"image3",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image3,callback:function(e){t.$set(t.ruleForm,"image3",e)},expression:"ruleForm.image3"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess3}},[t.ruleForm.image3?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image3}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品4：",prop:"product4Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product4Name,callback:function(e){t.$set(t.ruleForm,"product4Name",e)},expression:"ruleForm.product4Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("4")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图4：",prop:"image4",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image4,callback:function(e){t.$set(t.ruleForm,"image4",e)},expression:"ruleForm.image4"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess4}},[t.ruleForm.image4?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image4}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品5：",prop:"product5Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product5Name,callback:function(e){t.$set(t.ruleForm,"product5Name",e)},expression:"ruleForm.product5Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("5")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图5：",prop:"image5",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image5,callback:function(e){t.$set(t.ruleForm,"image5",e)},expression:"ruleForm.image5"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess5}},[t.ruleForm.image5?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image5}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"add-commend-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("立即创建")]),t._v(" "),a("el-button",{on:{click:t.returnRecommend}},[t._v("取消")])],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择商品",visible:t.dialogTableVisible,width:"850px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.filters[t.filters.select],callback:function(e){t.$set(t.filters,t.filters.select,e)},expression:"filters[filters.select]"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.inputWithSelectChange},slot:"prepend",model:{value:t.filters.select,callback:function(e){t.$set(t.filters,"select",e)},expression:"filters.select"}},[a("el-option",{attrs:{label:"商品名称",value:"keywords"}}),t._v(" "),a("el-option",{attrs:{label:"商品ID",value:"productId"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.cateLvl1,callback:function(e){t.$set(t.filters,"cateLvl1",e)},expression:"filters.cateLvl1"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.filters.cateLvl2,callback:function(e){t.$set(t.filters,"cateLvl2",e)},expression:"filters.cateLvl2"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")])],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.listType,callback:function(e){t.listType=e},expression:"listType"}},[a("el-tab-pane",{attrs:{label:"京东商品",name:"JD"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"JDTable",attrs:{data:t.listJD,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeJD}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"自建商品",name:"ZJ"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"ZJTable",attrs:{data:t.listZJ,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeZJ}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmDialog}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("5bo5"),a("08yd")},"data-v-23198923",null);e.default=r.exports},Dw1q:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",[a("div",{staticClass:"left"},[a("p",[t._v("启用会员积分")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("启用后，会员将在个人中心看到积分入口")])]),t._v(" "),a("div",{staticClass:"right"})]),t._v(" "),a("el-card",{staticClass:"mt20"},[a("div",{staticClass:"left"},[a("p",[t._v("启用成长值")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("启用后，会员等级随成长值变化，可针对单个会员手动调整和锁定等级")])])])],1)},staticRenderFns:[]};var i=a("VU/8")(null,s,!1,function(t){a("WK0P")},"data-v-34b28a0e",null);e.default=i.exports},HV1u:function(t,e){},HluZ:function(t,e){},HtvP:function(t,e){},IL7I:function(t,e){},"IMF+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:{menuArr:{type:[Object,Array],required:!0},page:{type:[String,Number],required:!0}},data:()=>({defaultActive:1}),methods:{switchMenu(t){this.$emit("updataPage",t)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("el-menu",{attrs:{mode:"horizontal","default-active":t.defaultActive},on:{select:t.switchMenu}},t._l(t.menuArr,function(e,s){return a("el-menu-item",{key:s,attrs:{index:s+1}},[t._v(t._s(e))])}))],1)},staticRenderFns:[]},r=a("VU/8")(s,i,!1,null,null,null).exports,l={props:{conf:{type:Object,required:!0},page:{}},data:()=>({nowMonth:`${(new Date).getFullYear()}.${(new Date).getMonth()+1}`,weekArr:["日","一","二","三","四","五","六"],dayArr:[],days:null,activeStyle:{background:"#F0CB28",color:"#FCF8F8"},signDayArr:[1,2,4,5,6,7,10,20]}),watch:{},created(){this.days=new Date(this.nowMonth+".1").getDay(),this.handleDayNum()},methods:{handleDayNum(){let t=(new Date).getMonth()+1,e=(new Date).getFullYear(),a=0;switch(t){case 2:a=e%4!=0||e%100==0&&e%400!=0||e%3200==0?28:29;break;case 1:case 3:case 5:case 7:case 8:case 10:case 12:a=31;break;case 4:case 6:case 9:case 11:a=30}this.forDay(a)},forDay(t){this.dayArr=[];for(let e=1;e<=t;e++)this.dayArr.push(e)},handleImg(){},sendImgType(t){8!=this.page&&this.$emit("changeImg",t)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t.conf.imgObj?a("div",{staticClass:"phone-wrapper"},[a("div",{staticClass:"phone-header"},[a("h4",[t._v(t._s(t.conf.title))])]),t._v(" "),a("div",{staticClass:"phone-body"},[1==t.page||8==t.page?a("div",[a("img",{staticClass:"bg page1-bg",style:{width:.4*t.conf.imgObj.page1.bg.size[0]+"px",height:.4*t.conf.imgObj.page1.bg.size[1]+"px",left:.4*t.conf.imgObj.page1.bg.pos[0]+"px",top:.4*t.conf.imgObj.page1.bg.pos[1]+"px"},attrs:{src:t.conf.imgObj.page1.bg.url},on:{click:function(e){t.sendImgType(t.conf.imgObj.page1.bg.type)}}}),t._v(" "),a("img",{staticClass:"rules-btn",style:{width:.4*t.conf.imgObj.page1.rulesBtn.size[0]+"px",height:.4*t.conf.imgObj.page1.rulesBtn.size[1]+"px",left:.4*t.conf.imgObj.page1.rulesBtn.pos[0]+"px",top:.4*t.conf.imgObj.page1.rulesBtn.pos[1]+"px"},attrs:{src:t.conf.imgObj.page1.rulesBtn.url},on:{click:function(e){t.sendImgType(t.conf.imgObj.page1.rulesBtn.type)}}}),t._v(" "),a("img",{staticClass:"draw-btn",style:{width:.4*t.conf.imgObj.page1.drawBtn.size[0]+"px",height:.4*t.conf.imgObj.page1.drawBtn.size[1]+"px",left:.4*t.conf.imgObj.page1.drawBtn.pos[0]+"px",top:.4*t.conf.imgObj.page1.drawBtn.pos[1]+"px"},attrs:{src:t.conf.imgObj.page1.drawBtn.url,alt:""},on:{click:function(e){t.sendImgType(t.conf.imgObj.page1.drawBtn.type)}}}),t._v(" "),a("div",{staticClass:"calendar",on:{click:function(e){t.sendImgType(t.conf.imgObj.page1.calendarHeader.type)}}},[a("div",{staticClass:"header",style:{width:.4*t.conf.imgObj.page1.calendarHeader.size[0]+"px",height:.4*t.conf.imgObj.page1.calendarHeader.size[1]+"px",left:.4*t.conf.imgObj.page1.calendarHeader.pos[0]+"px",top:.4*t.conf.imgObj.page1.calendarHeader.pos[1]+"px",background:"url("+t.conf.imgObj.page1.calendarHeader.url+") no-repeat center / 100% 100%","line-height":.4*t.conf.imgObj.page1.calendarHeader.size[1]+"px"}},[t._v("\n            您已经连续签到 "),a("span",[t._v("3")]),t._v(" 天\n          ")]),t._v(" "),a("div",{staticClass:"con",style:{width:.4*t.conf.imgObj.page1.calendarCon.size[0]+"px",height:.4*t.conf.imgObj.page1.calendarCon.size[1]+"px",left:.4*t.conf.imgObj.page1.calendarCon.pos[0]+"px",top:.4*t.conf.imgObj.page1.calendarCon.pos[1]+"px",background:"url("+t.conf.imgObj.page1.calendarCon.url+") no-repeat center / 100% 100%"}},[a("div",{staticClass:"data-module"},[a("div",{staticClass:"header"},[t._v(t._s(t.nowMonth))]),t._v(" "),a("div",{staticClass:"body"},[t._l(t.weekArr,function(e,s){return a("div",{key:s,staticClass:"item"},[t._v("\n                  "+t._s(e)+"\n                ")])}),t._v(" "),t._l(t.days,function(t,e){return a("div",{key:e,staticClass:"item"})}),t._v(" "),t._l(t.dayArr,function(e,s){return a("div",{key:s,staticClass:"item",style:t.signDayArr.includes(s+1)?t.conf.activeStyle:{}},[t._v("\n                  "+t._s(e)+"\n                ")])})],2)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8==t.page,expression:"page == 8"}],staticClass:"mask"})]):t._e(),t._v(" "),1!==t.page&&t.page<7?a("div",[a("div",{staticClass:"bg",style:{width:"300px",height:"484px",background:"rgba(0, 0, 0, 0.8)"}},t._l(t.conf.imgObj["page"+t.page],function(t,e){return a("img",{key:e,style:{width:.4*t.size[0]+"px",height:.4*t.size[1]+"px",left:.4*t.pos[0]+"px",top:.4*t.pos[1]+"px"},attrs:{src:t.url}})}))]):t._e(),t._v(" "),7==t.page?a("div",[a("div",{staticClass:"share-bg"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.conf.share.shareTitle?t.conf.share.shareTitle:"扫码验真")}}),t._v(" "),a("p",{staticClass:"desc",domProps:{innerHTML:t._s(t.conf.share.shareDesc?t.conf.share.shareDesc:"扫码验真精彩送不停，更多好礼等级拿！")}}),t._v(" "),a("dic",{staticClass:"img"},[a("img",{attrs:{src:t.conf.imgObj.page7.icon.url}})])],1)])]):t._e()]),t._v(" "),a("div",{staticClass:"phone-footer"})]):t._e()])},staticRenderFns:[]};var c=a("VU/8")(l,o,!1,function(t){a("zK8t")},"data-v-01b170ac",null).exports,n=a("ifEn"),d=a("UJta"),m=a("9ijK"),u=a("ehVw"),p={props:["data"],data:()=>({num:1,imgURL:"http://weiopn.oss-cn-beijing.aliyuncs.com/saas_platform/test/55C8950F6B444C8887925C80B3B97B03.png"}),methods:{del(t){this.$confirm("是否删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.data.splice(t,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},sync(t){this.data[t].quantity=this.data[t].allquantity},addRepertory(t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:e})=>{if(0==e)return this.$message.error("数字不能为0");this.$request.post("/sc/saotx/game/addQuality",{id:this.data[t].id,shopQuantity:e},!0,a=>{200==a.code?(this.$message.success("增库成功"),this.data[t].allquantity+=Number(e),this.data[t].quantity+=Number(e)):this.$message.error(a.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("el-form",{staticClass:"mb20"},t._l(t.data,function(e,s){return a("el-form-item",{key:s},[a("img",{attrs:{src:e.image,width:"40px"}}),t._v(" "),a("p",[t._v(t._s(e.productName))]),t._v("\n      奖品数量：\n      "),a("el-input-number",{attrs:{disabled:!!e.id,controls:!1,min:0,precision:0},on:{change:function(e){t.sync(s)}},model:{value:e.allquantity,callback:function(a){t.$set(e,"allquantity",a)},expression:"item.allquantity"}}),t._v("\n      个\n      "),a("span",[t._v("*")]),t._v("\n      中奖概率\n      "),a("el-input-number",{attrs:{controls:!1,min:0,max:100},model:{value:e.probability,callback:function(a){t.$set(e,"probability",a)},expression:"item.probability"}}),t._v("\n      %\n      "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.del(s)}}},[t._v("删除")]),t._v(" "),e.id?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addRepertory(s)}}},[t._v("增库")]):t._e(),t._v(" "),0!=e.quantity?a("span",{staticClass:"residual"},[t._v("剩余"+t._s(e.quantity)+"个")]):t._e()],1)}))],1)},staticRenderFns:[]};var g=a("VU/8")(p,h,!1,function(t){a("HtvP")},"data-v-771163f8",null).exports,v={props:{data:{type:Object,required:!0}},data:()=>({}),created(){},methods:{noRepeat(t,e){this.data.forEach((a,s)=>{e!=s&&a.continuSignDay==t&&this.$message.error("连续签到天数不能重复!")})},add(t){if(this.data.length>=10)return this.$message.error("连续签到设置不能超过10项!");this.data.push({continuSignDay:0,extraScore:0,extraGrowth:0})},del(t){this.$confirm("是否删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.data.splice(t,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("ul",t._l(t.data,function(e,s){return a("li",{key:s},[t._v("\n      连续签到\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},on:{change:function(a){t.noRepeat(e.continuSignDay,s)}},model:{value:e.continuSignDay,callback:function(a){t.$set(e,"continuSignDay",a)},expression:"item.continuSignDay"}}),t._v("\n      天，额外可获得\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},model:{value:e.extraScore,callback:function(a){t.$set(e,"extraScore",a)},expression:"item.extraScore"}}),t._v("\n      积分\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},model:{value:e.extraGrowth,callback:function(a){t.$set(e,"extraGrowth",a)},expression:"item.extraGrowth"}}),t._v("\n      成长值\n      "),a("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:function(e){t.add(s)}}}),t._v(" "),0!==s?a("el-button",{attrs:{icon:"el-icon-minus",circle:""},on:{click:function(e){t.del(s)}}}):t._e()],1)}))])},staticRenderFns:[]};var y=a("VU/8")(v,f,!1,function(t){a("HV1u")},"data-v-365026ec",null).exports,b=a("G0J2"),_={components:{prizeConf:g,signItem:y,quillEditor:b.quillEditor},props:{conf:{type:Object,required:!0}},data(){var t=(t,e,a)=>{};return{rules:{actName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],signNote:[{required:!0,validator:(t,e,a)=>{this.conf.sactBset.signNote?a():a(new Error("请输入活动说明"))}}],signImg:[{required:!0,validator:t}],share:[{required:!0,validator:t}]},signRules:{awards:[{required:!0,validator:t}],signAwards:[{required:!0,validator:t}]},draw:{draw:[{required:!0,validator:t}],drawChanceFlg:[{required:!0,validator:t}],drawSignDay:[{required:!0,validator:t}]},prize:{selected:[{required:!0,validator:t}]},editorOption:{modules:{toolbar:[[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike",,"blockquote"],[{color:[]},{background:[]},{align:[]}]]},placeholder:"请输入活动说明"},uploadApi:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},imgIndex:0,showFile:!1}},created(){},methods:{getPrize(){this.$emit("getPrize")},onEditorBlur(){},updataImg(t){},uploadSuccess(t,e,a){let s=t.data.accessUrl;1==this.imgIndex?this.conf.sactBset.initBtImage=s:this.conf.sactBset.pressBtImage=s},uploadError(t){console.log(t),this.$message.error("图片上传失败")},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type||"image/bmp"===t.type||"image/gif"===t.type;return e||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),e}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"title ml20 mb20"},[t._v("基础设置")]),t._v(" "),a("el-form",{attrs:{"label-width":"100px",rules:t.rules}},[a("el-form-item",{attrs:{label:"活动名称：",prop:"actName"}},[a("el-input",{attrs:{max:15,min:1},model:{value:t.conf.sactBset.actName,callback:function(e){t.$set(t.conf.sactBset,"actName",e)},expression:"conf.sactBset.actName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"签到入口：",prop:"signImg"}},[a("div",{staticClass:"start ml20"},[a("p",[t._v("初始状态")]),t._v(" "),a("div",{staticClass:"con"},[a("img",{attrs:{src:t.conf.sactBset.initBtImage,title:"初始状态"}})]),t._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:t.uploadApi,headers:t.headerObj,"show-file-list":!1,"on-success":t.uploadSuccess,"before-upload":t.beforeAvatarUpload,"on-error":t.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.imgIndex=1}}},[t._v("更换图片")])],1)],1),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),a("div",{staticClass:"end"},[a("p",[t._v("按下效果")]),t._v(" "),a("div",{staticClass:"con"},[a("img",{attrs:{src:t.conf.sactBset.pressBtImage,title:"按下效果"}})]),t._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:t.uploadApi,headers:t.headerObj,"show-file-list":!1,"on-success":t.uploadSuccess,"before-upload":t.beforeAvatarUpload,"on-error":t.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.imgIndex=2}}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("el-form-item",{attrs:{label:"签到规则：",prop:"signNote"}},[a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption,placeholder:"请输入活动说明，300字以内"},on:{blur:function(e){t.onEditorBlur(e)}},model:{value:t.conf.sactBset.signNote,callback:function(e){t.$set(t.conf.sactBset,"signNote",e)},expression:"conf.sactBset.signNote"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分享设置：",prop:"share"}},[a("el-radio",{attrs:{label:1},model:{value:t.conf.sactBset.share,callback:function(e){t.$set(t.conf.sactBset,"share",e)},expression:"conf.sactBset.share"}},[t._v("开启分享")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.conf.sactBset.share,callback:function(e){t.$set(t.conf.sactBset,"share",e)},expression:"conf.sactBset.share"}},[t._v("关闭分享")])],1)],1),t._v(" "),a("div",{staticClass:"title ml20 mb20"},[t._v("签到设置")]),t._v(" "),a("el-form",{attrs:{"label-width":"130px",rules:t.signRules}},[a("el-form-item",{attrs:{label:"常规签到奖励：",prop:"awards"}},[t._v("\n      每日签到获得\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},model:{value:t.conf.sactBset.score,callback:function(e){t.$set(t.conf.sactBset,"score",e)},expression:"conf.sactBset.score"}}),t._v("\n      积分\n      "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},model:{value:t.conf.sactBset.growth,callback:function(e){t.$set(t.conf.sactBset,"growth",e)},expression:"conf.sactBset.growth"}}),t._v("\n      成长值\n    ")],1),t._v(" "),a("el-form-item",{attrs:{label:"连续签到奖励：",prop:"signAwards"}},[a("el-radio",{attrs:{label:0},model:{value:t.conf.sactBset.continuSignFlg,callback:function(e){t.$set(t.conf.sactBset,"continuSignFlg",e)},expression:"conf.sactBset.continuSignFlg"}},[t._v("关闭")]),t._v(" "),a("el-radio",{attrs:{label:1},model:{value:t.conf.sactBset.continuSignFlg,callback:function(e){t.$set(t.conf.sactBset,"continuSignFlg",e)},expression:"conf.sactBset.continuSignFlg"}},[t._v("开启")]),t._v(" "),a("sign-item",{directives:[{name:"show",rawName:"v-show",value:1===t.conf.sactBset.continuSignFlg,expression:"conf.sactBset.continuSignFlg === 1"}],attrs:{data:t.conf.contItems}}),t._v(" "),a("div",{staticClass:"tips"},[t._v("发布后不可切换")])],1)],1),t._v(" "),a("div",{staticClass:"title ml20 mb20"},[t._v("抽奖设置")]),t._v(" "),a("el-form",{attrs:{"label-width":"130px",rules:t.draw}},[a("el-form-item",{attrs:{label:"是否关联抽奖：",prop:"drawChanceFlg"}},[a("el-radio",{attrs:{label:0},model:{value:t.conf.sactBset.drawChanceFlg,callback:function(e){t.$set(t.conf.sactBset,"drawChanceFlg",e)},expression:"conf.sactBset.drawChanceFlg"}},[t._v("不关联")]),t._v(" "),a("el-radio",{attrs:{label:1},model:{value:t.conf.sactBset.drawChanceFlg,callback:function(e){t.$set(t.conf.sactBset,"drawChanceFlg",e)},expression:"conf.sactBset.drawChanceFlg"}},[t._v("关联")])],1),t._v(" "),a("el-form-item",{attrs:{label:"抽奖要求：",prop:"drawSignDay"}},[t._v("\n        累计签到\n        "),a("el-input-number",{attrs:{controls:!1,min:0,precision:0},model:{value:t.conf.sactBset.drawSignDay,callback:function(e){t.$set(t.conf.sactBset,"drawSignDay",e)},expression:"conf.sactBset.drawSignDay"}}),t._v("\n        天，可参与抽奖\n      ")],1)],1),t._v(" "),a("div",{staticClass:"title ml20 mb20"},[t._v("奖项设置")]),t._v(" "),a("el-form",{attrs:{"label-width":"100px",rules:t.prize}},[a("el-form-item",{attrs:{label:"选择奖品：",prop:"selected"}},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:t.getPrize}})],1)],1),t._v(" "),a("p",{staticClass:"ml20"},[t._v("所选礼品：")]),t._v(" "),t.conf.gameItems?a("prize-conf",{staticClass:"ml20",attrs:{data:t.conf.gameItems}}):t._e()],1)},staticRenderFns:[]};var x=a("VU/8")(_,L,!1,function(t){a("NZIE")},"data-v-2a50192f",null).exports,F={data:()=>({queryParmes:{pageNo:1,pageSize:5,productId:null,productName:"",giftType:null},queryStr:"",optionArr:[{name:"礼品名称",id:1},{name:"礼品id",id:2}],giftTypeArr:[{name:"虚拟",code:1},{name:"实物",code:2},{name:"红包",code:3},{name:"积分",code:4}],selectedNum:1,selectedTotalGoods:0,selectedGoodsArr:[],dataObj:[{id:1,name:"123",pic:"http://weiopn.oss-cn-beijing.aliyuncs.com/saas_platform/test/55C8950F6B444C8887925C80B3B97B03.png",type:"活动奖品",sort:"实物",stock:123},{id:1,name:"123",pic:"http://weiopn.oss-cn-beijing.aliyuncs.com/saas_platform/test/55C8950F6B444C8887925C80B3B97B03.png",type:"活动奖品",sort:"实物",stock:123},{id:1,name:"123",pic:"http://weiopn.oss-cn-beijing.aliyuncs.com/saas_platform/test/55C8950F6B444C8887925C80B3B97B03.png",type:"活动奖品",sort:"实物",stock:123}],total:3,prizeList:[],giftType:{1:"虚拟",2:"实物",3:"红包",4:"积分"},loading:!0}),created(){this.getPrize()},methods:{getPrize(){this.loading=!0,1==this.selectedNum?(this.queryParmes.productName=this.queryStr,this.queryParmes.productId=""):(this.queryParmes.productId=this.queryStr,this.queryParmes.productName=""),this.$request.post("/sc/saotx/mall/product/listActs",this.queryParmes,!0,t=>{"200000"===t.ret&&(this.loading=!1,this.prizeList=t.data.list,this.total=t.data.page.count)})},confirm(){this.$emit("getSelectedGoodsArr",this.selectedGoodsArr)},close(){this.$emit("close")},selected(t){this.selectedTotalGoods=t.length,this.selectedGoodsArr=t},handleCurrentChange(t){this.queryParmes.pageNo=t,this.getPrize()}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"关键词"}},[a("el-select",{model:{value:t.selectedNum,callback:function(e){t.selectedNum=e},expression:"selectedNum"}},t._l(t.optionArr,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-input",{model:{value:t.queryStr,callback:function(e){t.queryStr=e},expression:"queryStr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"礼品类型"}},[a("el-select",{staticClass:"type",attrs:{placeholder:"请选择礼品类型",clearable:""},model:{value:t.queryParmes.giftType,callback:function(e){t.$set(t.queryParmes,"giftType",e)},expression:"queryParmes.giftType"}},t._l(t.giftType,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1)],1),t._v(" "),a("el-button",{staticClass:"mb20",attrs:{type:"primary"},on:{click:t.getPrize}},[t._v("查询")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:!0,data:t.prizeList,"tooltip-effect":"dark"},on:{select:t.selected,"select-all":t.selected}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"礼品ID",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.image,height:"40px",alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"礼品类型",align:"center"}},[[t._v("\n        活动奖品\n      ")]],2),t._v(" "),a("el-table-column",{attrs:{label:"礼品分类",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t.giftType[e.row.giftType])+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"shopQuantity",label:"库存",align:"center"}})],1),t._v(" "),a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":t.queryParmes.pageNo,"page-size":t.queryParmes.pageSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("div",{staticClass:"selectedText"},[a("p",[t._v("当前已选"+t._s(t.selectedTotalGoods)+"个商品")])]),t._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.close}},[t._v("取消")])],1)],1)},staticRenderFns:[]};var C=a("VU/8")(F,I,!1,function(t){a("yLAt")},"data-v-6acebb17",null).exports,w={props:{imgObj:{type:Object,required:!0},type:{default:1},color:{required:!0}},data:()=>({uploadApi:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},showFile:!1,editIndex:""}),methods:{uploadSuccess(t,e,a){let s=t.data.accessUrl;this.$emit("picChange",{url:s,index:this.editIndex})},uploadError(t){console.log(t),alert("图片上传失败")},onUploadClick(t){this.editIndex=t},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type||"image/bmp"===t.type||"image/gif"===t.type;return e||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),e}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t.imgObj?a("el-card",{staticClass:"card"},[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("h3",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit"},[t._l(t.imgObj,function(e,s){return a("div",{key:s,staticClass:"edit-container"},[e.type==t.type?a("div",[a("h4",[t._v("编辑"+t._s(e.name)+"：")]),t._v(" "),a("div",{staticClass:"img-container"},[a("img",{attrs:{src:e.url,alt:""}})]),t._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:t.uploadApi,headers:t.headerObj,"show-file-list":t.showFile,"on-success":t.uploadSuccess,"before-upload":t.beforeAvatarUpload,"on-error":t.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.onUploadClick(e.index)}}},[t._v("点击上传")])],1),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("* 图片建议尺寸为 "+t._s(e.size[0])+"*"+t._s(e.size[1])+"px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1):t._e()])}),t._v(" "),3==t.type?a("div",{staticClass:"edit-container"},[a("h4",[t._v("编辑日期背景：")]),t._v(" "),a("div",{staticClass:"img-container"},[a("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.color.background,callback:function(e){t.$set(t.color,"background",e)},expression:"color.background"}})],1)]):t._e()],2)]):t._e()],1)},staticRenderFns:[]};var S=a("VU/8")(w,k,!1,function(t){a("AvWX")},"data-v-5f830d12",null).exports,T={props:["code","id"],components:{menuConf:r,phoneModule:c,activityInfo:n.a,activityImageEditor:d.a,shareConf:u.a,signConf:x,dialogModule:C,activityImgPage1:S},data:()=>({menuArr:["首页","活动说明页","我的奖品页面","中奖页面","未中奖页面","签到成功弹窗","分享","活动设置"],nowMonth:`${(new Date).getFullYear()}.${(new Date).getMonth()+1}`,weekArr:["日","一","二","三","四","五","六"],page:1,days:null,dayArr:[],signDayArr:[1,2,4,5,6,7,10,20],conf:{description:"",title:"",imgObj:{},share:{shareTitle:"",shareDesc:""},actCode:"",activeStyle:{background:"rgba(240,203,40,1)",color:"#fff"}},dialogVisible:!1,imgType:1,editData:[],selectedGoodsArr:[],data:{},sactBset:{taskCode:"",actName:"",signNote:"",share:null,score:null,growth:null,drawChanceFlg:null,continuSignFlg:null,initBtImage:"http://qrmkt.oss-cn-beijing.aliyuncs.com/common/qd/center-sign-btn.png",pressBtImage:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/qd/center-signEnd-btn.png",drawSignDay:null,pageInfo:""},contItems:[{continuSignDay:null,extraScore:null,extraGrowth:null}]}),watch:{},created(){this.handleDayNum(),this.days=new Date(this.nowMonth+".1").getDay(),this.conf.imgObj=JSON.parse(JSON.stringify(m.a.img.ACT_SIGN)),this.editData.push(this.conf.imgObj.page7.icon),this.getPutDetail()},methods:{getPutDetail(){this.$request.post("/sc/saotx/act/bsDetail",{id:this.id},!0,t=>{"200000"===t.ret&&(this.data=t.data,this.data.contItems||(this.data.contItems=[],this.data.contItems.push({continuSignDay:0,extraScore:0,extraGrowth:0})),this.data.sactBset||this.$set(this.data,"sactBset",JSON.parse(JSON.stringify(this.sactBset))),t.data.sactBset.pageInfo&&(this.conf=JSON.parse(t.data.sactBset.pageInfo)),console.log(this.data))})},editPic(t){let e=t.index||"",a=t.url;this.page<=6?this.conf.imgObj["page"+this.page][e].url=a:7==this.page&&(this.conf.imgObj.page7.icon.url=a)},getPrize(){this.dialogVisible=!0},updataPage(t){this.page=t},a(){this.signDayArr.push(21)},getSelectedGoodsArr(t){this.selectedGoodsArr=t,this.dialogVisible=!1;let e=[];this.data.gameItems&&this.data.gameItems.length>0&&this.data.gameItems.forEach(t=>{e.push(t.id)}),this.selectedGoodsArr.map(t=>{if(-1!=e.indexOf(t.id))return this.$message.warning("请不要选择重复的奖品");this.data.gameItems||this.$set(this.data,"gameItems",[]),this.data.gameItems.push({orgId:t.orgId,gameId:this.code,gameName:"",productId:t.productId,productName:t.productName,image:t.image,status:t.status,probability:0,type:t.giftType,score:t.score,bingo_image:t.image,shopQuantity:t.shopQuantity,quantity:null,allquantity:0})})},close(){this.dialogVisible=!1},handleDayNum(){let t=(new Date).getMonth()+1,e=(new Date).getFullYear(),a=0;switch(t){case 2:a=e%4!=0||e%100==0&&e%400!=0||e%3200==0?28:29;break;case 1:case 3:case 5:case 7:case 8:case 10:case 12:a=31;break;case 4:case 6:case 9:case 11:a=30}this.forDay(a)},changeImg(t){this.imgType=t},forDay(t){this.dayArr=[];for(let e=1;e<=t;e++)this.dayArr.push(e)},titleInput(t){let e=t.value;this.conf.title=e||""},descInput(t){let e=t.value;e?this.conf.description=e:this.description=""},save(){if(""==this.conf.description||""==this.conf.title)return this.$message.error("首页/模板名称或描述不能为空!");if(this.isRepeat(this.data.contItems,"continuSignDay"))return this.$message.error("连续签到天数不能重复!");let t=JSON.stringify(this.conf);this.data.sactBset.pageInfo=t,this.$request.post("/sc/saotx/act/saveBSet",this.data,!0,t=>{"200000"===t.ret&&(this.$message.success("保存成功"),setTimeout(()=>{this.$router.push("/setting/memberConf/task")},1e3))})},isRepeat(t,e){let a=[],s=!1;return t.forEach((t,i)=>{-1==a.indexOf(t[e])?a.push(t[e]):s=!0}),s}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("menu-conf",{attrs:{menuArr:t.menuArr,page:t.page},on:{updataPage:t.updataPage}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"40px"}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("phone-module",{attrs:{conf:t.conf,page:t.page},on:{changeImg:t.changeImg}})],1),t._v(" "),a("el-col",{staticClass:"ml20",attrs:{span:15}},[t.page<7?a("div",[1==t.page?a("activity-info",{attrs:{title:t.conf.title,desc:t.conf.description},on:{titleInput:t.titleInput,descInput:t.descInput}}):t._e(),t._v(" "),t.page>3?a("activity-image-editor",{attrs:{editData:t.conf.imgObj["page"+t.page],type:"normal",itemRepeat:!1},on:{picChange:t.editPic}}):t._e(),t._v(" "),1==t.page?a("activity-img-page1",{attrs:{imgObj:t.conf.imgObj.page1,color:t.conf.activeStyle,type:t.imgType},on:{picChange:t.editPic}}):t._e()],1):t._e(),t._v(" "),7==t.page?a("div",[a("share-conf",{attrs:{shareConf:t.conf.share,editData:t.editData},on:{shareChange:t.editPic}})],1):t._e(),t._v(" "),8==t.page?a("div",[t.data.sactBset?a("sign-conf",{attrs:{conf:t.data},on:{getPrize:t.getPrize}}):t._e()],1):t._e()])],1),t._v(" "),a("div",{staticClass:"btn mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1)],1),t._v(" "),a("el-dialog",{attrs:{width:"800px","close-on-click-modal":!1,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("dialog-module",{on:{getSelectedGoodsArr:t.getSelectedGoodsArr,close:t.close}})],1)],1)},staticRenderFns:[]};var N=a("VU/8")(T,$,!1,function(t){a("e53A")},"data-v-05aded76",null);e.default=N.exports},"JO+z":function(t,e){},L751:function(t,e){},L8De:function(t,e){},LBbT:function(t,e){},"Lc/a":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",props:["id"],data:()=>({listLoading:!1,dialogTableVisible:!1,listType:"JD",listJD:[],listZJ:[],ProductIndex:"",headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},cateLvl1List:[{name:"全部",id:""}],cateLvl2List:[{name:"全部",id:""}],ruleForm:{type:"3",name:"",idx:"",product1Id:"",product1Name:"",image1:"",product2Id:"",product2Name:"",image2:"",product3Id:"",product3Name:"",image3:"",product4Id:"",product4Name:"",image4:"",product5Id:"",product5Name:"",image5:""},rules:{name:[{required:!0,message:"请输入推荐位名称",trigger:"blur"}],idx:[{required:!0,message:"请输入排序值",trigger:"blur"}],product1Name:[{required:!0,message:"请选择商品",trigger:"change"}],image1:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product3Name:[{required:!0,message:"请选择商品",trigger:"change"}],image3:[{required:!0,message:"请上传图片",trigger:"change"}],product4Name:[{required:!0,message:"请选择商品",trigger:"change"}],image4:[{required:!0,message:"请上传图片",trigger:"change"}],product5Name:[{required:!0,message:"请选择商品",trigger:"change"}],image5:[{required:!0,message:"请上传图片",trigger:"change"}]},filters:{inputWithSelect:"",select:"",status:1,giftType:"",hasDelivery:"",keywords:"",cateLvl1:"",cateLvl2:"",productId:"",pageSize:5,pageNo:1,total:0},currentPage:1,selectProduct:{productId:"",productName:""}}),created(){this.getOneCategory(),this.getListJD(),this.getListZJ(),this.getRecommendDetail()},methods:{getRecommendDetail(){this.$request.post("/sc/saotx/mall/recommend/detail",{id:this.id},!0,t=>{if("200000"==t.ret){this.ruleForm.name=t.data.name,this.ruleForm.idx=t.data.idx,t.data.recommendProducts.map((t,e)=>{this.ruleForm["product"+t.idx+"Id"]=t.productId,this.ruleForm["product"+t.idx+"Name"]=t.productName,this.ruleForm["image"+t.idx]=t.productImage})}})},getListJD(){let t={status:this.filters.status,giftType:this.filters.giftType,hasDelivery:this.filters.hasDelivery,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchJD(t)},postSearchJD(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listJD",t,!0,t=>{"200000"==t.ret&&(this.listLoading=!1,this.listJD=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},getListZJ(){let t={status:this.filters.status,giftType:this.filters.giftType,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchZJ(t)},postSearchZJ(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listZJ",t,!0,t=>{"200000"==t.ret&&(console.log(t.data),this.listLoading=!1,this.listZJ=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},commitForm(){this.handleClick()},inputWithSelectChange(t){this.filters.keywords="",this.filters.productId=""},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.filters.cateLvl2="",this.cateLvl2List=[{name:"全部",id:""}],this.getTwoCategory()},getTwoCategory(){""!=this.filters.cateLvl1&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl1},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},chooseProduct(t){this.dialogTableVisible=!0,this.ProductIndex=t},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={id:this.id,type:3,name:this.ruleForm.name,idx:this.ruleForm.idx,recommendProducts:[{productId:this.ruleForm.product1Id,productName:this.ruleForm.product1Name,productImage:this.ruleForm.image1,idx:1},{productId:this.ruleForm.product2Id,productName:this.ruleForm.product2Name,productImage:this.ruleForm.image2,idx:2},{productId:this.ruleForm.product3Id,productName:this.ruleForm.product3Name,productImage:this.ruleForm.image3,idx:3},{productId:this.ruleForm.product4Id,productName:this.ruleForm.product4Name,productImage:this.ruleForm.image4,idx:4},{productId:this.ruleForm.product5Id,productName:this.ruleForm.product5Name,productImage:this.ruleForm.image5,idx:5}]};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/recommend/saveOrModify",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnRecommend()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess1(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image1=s},handleAvatarSuccess2(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image2=s},handleAvatarSuccess3(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image3=s},handleAvatarSuccess4(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image4=s},handleAvatarSuccess5(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image5=s},returnRecommend(){this.$router.push({path:"/mall/recommend"})},handleSelectProduct(t){if(console.log(t),t){let e=t;this.selectProduct.productId=e.productId,this.selectProduct.productName=e.memo}},handleClick(t,e){this.filters.pageNo=1,this.currentPage=1,"JD"==this.listType?this.getListJD():"ZJ"==this.listType&&this.getListZJ()},jumpTo(){this.$emit("current-change")},handleCurrentChangeZJ(t){this.filters.pageNo=t,this.currentPage=t,this.getListZJ()},handleCurrentChangeJD(t){this.filters.pageNo=t,this.currentPage=t,this.getListJD()},confirmDialog(){this.ruleForm.product1Id==this.selectProduct.productId||this.ruleForm.product2Id==this.selectProduct.productId||this.ruleForm.product3Id==this.selectProduct.productId||this.ruleForm.product4Id==this.selectProduct.productId?this.$message({message:"已选择当前商品",type:"warning"}):(this.ruleForm["product"+this.ProductIndex+"Id"]=this.selectProduct.productId,this.ruleForm["product"+this.ProductIndex+"Name"]=this.selectProduct.productName,this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="")},cancelDialog(){this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="",this.dialogTableVisible=!1}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-commend-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"120px"}},[a("div",{staticClass:"add-commend-form-container"},[a("el-form-item",{attrs:{label:"推荐位名称：",prop:"name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"排序值：",prop:"idx",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.idx,callback:function(e){t.$set(t.ruleForm,"idx",e)},expression:"ruleForm.idx"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"选择商品：",prop:"product1Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product1Name,callback:function(e){t.$set(t.ruleForm,"product1Name",e)},expression:"ruleForm.product1Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("1")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图1：",prop:"image1",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image1,callback:function(e){t.$set(t.ruleForm,"image1",e)},expression:"ruleForm.image1"}}),t._v(" "),a("el-upload",{staticClass:"main-product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess1}},[t.ruleForm.image1?a("img",{staticClass:"avatar",attrs:{width:"100",height:"49",src:t.ruleForm.image1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 490*240px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品2：",prop:"product2Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product2Name,callback:function(e){t.$set(t.ruleForm,"product2Name",e)},expression:"ruleForm.product2Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("2")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图2：",prop:"image2",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image2,callback:function(e){t.$set(t.ruleForm,"image2",e)},expression:"ruleForm.image2"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess2}},[t.ruleForm.image2?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品3：",prop:"product3Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product3Name,callback:function(e){t.$set(t.ruleForm,"product3Name",e)},expression:"ruleForm.product3Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("3")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图3：",prop:"image3",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image3,callback:function(e){t.$set(t.ruleForm,"image3",e)},expression:"ruleForm.image3"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess3}},[t.ruleForm.image3?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image3}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品4：",prop:"product4Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product4Name,callback:function(e){t.$set(t.ruleForm,"product4Name",e)},expression:"ruleForm.product4Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("4")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图4：",prop:"image4",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image4,callback:function(e){t.$set(t.ruleForm,"image4",e)},expression:"ruleForm.image4"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess4}},[t.ruleForm.image4?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image4}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品5：",prop:"product5Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product5Name,callback:function(e){t.$set(t.ruleForm,"product5Name",e)},expression:"ruleForm.product5Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("5")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图5：",prop:"image5",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image5,callback:function(e){t.$set(t.ruleForm,"image5",e)},expression:"ruleForm.image5"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess5}},[t.ruleForm.image5?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image5}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"add-commend-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("立即创建")]),t._v(" "),a("el-button",{on:{click:t.returnRecommend}},[t._v("取消")])],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择商品",visible:t.dialogTableVisible,width:"850px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.filters[t.filters.select],callback:function(e){t.$set(t.filters,t.filters.select,e)},expression:"filters[filters.select]"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.inputWithSelectChange},slot:"prepend",model:{value:t.filters.select,callback:function(e){t.$set(t.filters,"select",e)},expression:"filters.select"}},[a("el-option",{attrs:{label:"商品名称",value:"keywords"}}),t._v(" "),a("el-option",{attrs:{label:"商品ID",value:"productId"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.cateLvl1,callback:function(e){t.$set(t.filters,"cateLvl1",e)},expression:"filters.cateLvl1"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.filters.cateLvl2,callback:function(e){t.$set(t.filters,"cateLvl2",e)},expression:"filters.cateLvl2"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")])],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.listType,callback:function(e){t.listType=e},expression:"listType"}},[a("el-tab-pane",{attrs:{label:"京东商品",name:"JD"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"JDTable",attrs:{data:t.listJD,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeJD}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"自建商品",name:"ZJ"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"ZJTable",attrs:{data:t.listZJ,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeZJ}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmDialog}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("5odS"),a("HluZ")},"data-v-e5ea91aa",null);e.default=r.exports},Le5s:function(t,e){},MGLV:function(t,e){},NZIE:function(t,e){},Nzs5:function(t,e){},O6o9:function(t,e){},OCzX:function(t,e){},PSNe:function(t,e){},"R/B1":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"SortManage",data:()=>({listLoading:!1,headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},queryListTree:[],dialogFormVisible:!1,ruleForm:{name:"",idx:"",icon:"",statusType:"1",pid:"",id:""},rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],idx:[{required:!0,message:"请输入排序值",trigger:"blur"}],icon:[{required:!0,message:"请上传图标",trigger:"change"}],statusType:[{required:!0,message:"请选择状态",trigger:"blur"}]},dialogLevel:""}),created(){this.getQueryListTree()},methods:{getQueryListTree(){this.listLoading=!0,this.$request.post("/sc/saotx/mall/cate/queryListTree",{},!0,t=>{"200000"==t.ret?(this.queryListTree=[...t.data],this.listLoading=!1):(this.listLoading=!1,this.$message({message:t.message,type:"warning"}))})},modifyForm(){this.ruleForm.name="",this.ruleForm.idx="",this.ruleForm.icon="",this.ruleForm.statusType="1",this.ruleForm.pid="",this.ruleForm.id=""},addCategory(t,e){1==t&&(this.dialogLevel="新建一级分类",this.rules.icon=[{required:!0,message:"请上传图标",trigger:"change"}]),2==t&&(this.dialogLevel="新建二级分类",this.rules.icon=[]),3==t&&(this.dialogLevel="新建三级分类",this.rules.icon=[]),4==t&&(this.dialogLevel="新建四级分类",this.rules.icon=[]),this.dialogFormVisible=!0,this.ruleForm.pid=e},editCategory(t,e,a){1==t&&(this.dialogLevel="编辑一级分类",this.rules.icon=[{required:!0,message:"请上传图标",trigger:"change"}],this.ruleForm.icon=a.icon),2==t&&(this.dialogLevel="编辑二级分类",this.rules.icon=[]),3==t&&(this.dialogLevel="编辑三级分类",this.rules.icon=[]),4==t&&(this.dialogLevel="编辑四级分类",this.rules.icon=[]),this.dialogFormVisible=!0,this.ruleForm.pid=a.pId,this.ruleForm.name=a.name,this.ruleForm.idx=a.idx,this.ruleForm.statusType=a.statusType+"",this.ruleForm.id=e},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={name:this.ruleForm.name,idx:this.ruleForm.idx,pid:this.ruleForm.pid,statusType:this.ruleForm.statusType,id:this.ruleForm.id};"新建一级分类"!=this.dialogLevel&&"编辑一级分类"!=this.dialogLevel||(t.icon=this.ruleForm.icon),this.$request.post("/sc/saotx/mall/cate/saveOrModify",t,!0,t=>{"200000"==t.ret?(this.resetForm("ruleForm"),this.modifyForm(),this.dialogFormVisible=!1,this.getQueryListTree()):this.$message({message:t.message,type:"warning"})})}})},disableCategory(t){this.$confirm("您确定禁用此分类？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let e={id:t};this.$request.post("/sc/saotx/mall/cate/disable",e,!0,t=>{"200000"==t.ret?(this.$message({message:"已禁用",type:"warning"}),this.getQueryListTree()):(this.$message({message:t.message,type:"warning"}),this.getQueryListTree())})}).catch(()=>{})},enableCategory(t){this.$confirm("您确定启用此分类？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let e={id:t};this.$request.post("/sc/saotx/mall/cate/used",e,!0,t=>{"200000"==t.ret?(this.$message({message:"已启用",type:"success"}),this.getQueryListTree()):(this.$message({message:t.message,type:"warning"}),this.getQueryListTree())})}).catch(()=>{})},removeCategory(t){this.$confirm("您确定删除此分类？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let e={id:t};this.$request.post("/sc/saotx/mall/cate/remove",e,!0,t=>{"200000"==t.ret?(this.$message({message:"已删除",type:"success"}),this.getQueryListTree()):(this.$message({message:t.message,type:"warning"}),this.getQueryListTree())})}).catch(()=>{})},cancelForm(){this.dialogFormVisible=!1,this.resetForm("ruleForm"),this.modifyForm()},resetForm(t){this.$refs[t].resetFields()},handleAvatarSuccessUrl(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.icon=s}},mounted(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"sort-manage-container"},[a("div",{staticClass:"add-new-category"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addCategory("1","0")}}},[t._v("新建一级分类")])],1),t._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{"default-expand-all":"",data:t.queryListTree,"node-key":"id","expand-on-click-node":!1},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node;return e.data,a("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[1==s.level?a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:s.data.icon,width:"40",height:"40"}}):t._e(),t._v(" "),a("span",{staticStyle:{"line-height":"40px","margin-left":"15px"}},[t._v(t._s(s.data.name))]),t._v(" "),a("span",{staticStyle:{float:"right"}},[4!==s.level?a("el-button",{attrs:{type:"text"},on:{click:function(e){t.addCategory(s.level+1,s.data.id)}}},[t._v("新增子分类")]):t._e(),t._v(" "),1==s.data.statusType?a("el-button",{attrs:{type:"text"},on:{click:function(e){t.disableCategory(s.data.id)}}},[t._v("禁用")]):t._e(),t._v(" "),0==s.data.statusType?a("el-button",{attrs:{type:"text"},on:{click:function(e){t.enableCategory(s.data.id)}}},[t._v("启用")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.editCategory(s.level,s.data.id,s.data)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.removeCategory(s.data.id)}}},[t._v("删除")])],1)])}}])}),t._v(" "),a("el-dialog",{attrs:{title:t.dialogLevel,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称：",prop:"name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序值：",prop:"idx",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.idx,callback:function(e){t.$set(t.ruleForm,"idx",e)},expression:"ruleForm.idx"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"新建一级分类"==t.dialogLevel||"编辑一级分类"==t.dialogLevel,expression:"dialogLevel == '新建一级分类'||dialogLevel == '编辑一级分类'"}],attrs:{label:"图标：",prop:"icon",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.icon,callback:function(e){t.$set(t.ruleForm,"icon",e)},expression:"ruleForm.icon"}}),t._v(" "),a("el-upload",{staticClass:"cateory-icon",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccessUrl}},[t.ruleForm.icon?a("img",{staticClass:"avatar",attrs:{width:"118",height:"118",src:t.ruleForm.icon}}):t._e()]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("提示：建议尺寸：118像素*118像素；格式png，jpg；大小不超过2M；")])],1),t._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"statusType",size:"small"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.statusType,callback:function(e){t.$set(t.ruleForm,"statusType",e)},expression:"ruleForm.statusType"}},[t._v("启用")]),t._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:t.ruleForm.statusType,callback:function(e){t.$set(t.ruleForm,"statusType",e)},expression:"ruleForm.statusType"}},[t._v("禁用")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelForm}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("pbX/")},"data-v-37736c14",null);e.default=r.exports},Slki:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["pid"],name:"EditActProduct",data:()=>({allGiftTypeActData:[],allEchangeTypeData:[{id:4,name:"卡券"},{id:5,name:"外链"}],allCardTypeData:[{id:1,name:"折扣卡"},{id:2,name:"翻倍卡"}],seletGiftType:"",seletExchangeType:"",seletCardType:"",giftTypeDisPlay:2,cardTypeDisplay:1,cardTypeNameDisplay:1,headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},gitTypek:"",filters:{id:"",giftType:"",memo:"",image:"",price:"",cardType:1,exchangeType:4,exchangeUrl:"",afterService:"",score:"",abc:0},rules:{giftType:[{required:!0,message:"请选择礼物类型",trigger:"change"}],memo:[{required:!0,message:"请输入礼物名称",trigger:"change"}],price:[{required:!0,message:"请输入市面价值",trigger:"change"}],image:[{required:!0,message:"请输入礼品图片",trigger:"change"}],exchangeType:[{required:!0,message:"请输入礼品分类",trigger:"change"}],score:[{required:!0,message:"请输入市面价值",trigger:"change"}]}}),created(){this.init(),this.editDeatil(this.pid)},watch:{seletGiftType(t,e){t&&t!=e&&(1==t&&(this.giftTypeDisPlay=t,this.filters.giftType=t,this.gitTypek!=t?this.clearData():this.editDeatil(this.pid)),2==t&&(this.giftTypeDisPlay=t,this.filters.giftType=t,this.gitTypek!=t?this.clearData():this.editDeatil(this.pid)),3==t&&(this.giftTypeDisPlay=t,this.filters.giftType=t,this.gitTypek!=t?this.clearData():this.editDeatil(this.pid)),4==t&&(this.giftTypeDisPlay=t,this.filters.giftType=t,this.gitTypek!=t?this.clearData():this.editDeatil(this.pid)))},seletExchangeType(t,e){t&&t!=e&&(4==t&&(this.cardTypeDisplay=1,this.filters.exchangeType=t),5==t&&(this.cardTypeDisplay=2,this.filters.exchangeType=t))},seletCardType(t,e){t&&t!=e&&(1==t&&(this.cardTypeNameDisplay=1,this.filters.cardType=t),2==t&&(this.cardTypeNameDisplay=2,this.filters.cardType=t))}},methods:{init(){this.allGiftTypeActList()},checkOn3(t){t&&(t>9999999?this.filters.price="":this.giftTypeDisPlay)},checkOn4(t){t&&t>9999999&&(this.filters.score="")},editDeatil(t){this.$request.post("/sc/saotx/mall/product/detail",{id:t},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.filters.id=t.data.id,this.filters.giftType=t.data.giftType,this.filters.memo=t.data.memo,this.filters.image=t.data.image,this.filters.price=t.data.price,this.filters.score=t.data.score,this.filters.cardType=t.data.cardType,this.filters.shopQuantity=t.data.shopQuantity,this.filters.quantity=t.data.quantity,this.filters.echangeType=t.data.exchangeType,this.filters.exchangeUrl=t.data.exchangeUrl,this.filters.afterService=t.data.afterService,this.gitTypek=t.data.giftType,this.seletGiftType=t.data.giftType,this.seletExchangeType=t.data.exchangeType,this.seletCardType=t.data.cardType)})},allGiftTypeActList(){this.$request.post("/sc/saotx/mall/giftTypeActMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allGiftTypeActData=t.data)})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={id:this.pid,giftType:this.filters.giftType,memo:this.filters.memo,image:this.filters.image,score:this.filters.score,price:this.filters.price,cardType:this.filters.cardType,exchangeType:this.filters.exchangeType,exchangeUrl:this.filters.exchangeUrl,afterService:this.filters.afterService};this.$request.post("/sc/saotx/mall/product/saveOrModifyAct",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnTobaccoMgr()):this.$message({message:t.message,type:"warning"})},t=>{})}})},returnTobaccoMgr(){this.$router.push({path:"/mall/product/act"})},clearData(){this.filters.memo="",this.filters.image="",this.filters.price="",this.filters.score="",this.filters.cardType=1,this.filters.abc="",this.filters.echangeType=4,this.filters.exchangeUrl="",this.filters.afterService=""},handleRemove(t,e){console.log(t,e)},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleAvatarSuccess(t,e){var a=t.data||{},s=a&&a.accessUrl;this.filters.image=s}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-tobaccomgr-container clearfix"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{ref:"ruleForm",attrs:{inline:!0,rules:t.rules,model:t.filters,"label-width":"110px"}},[a("div",{staticClass:"add-tobaccomgr-form-container"},[a("el-row",[a("el-form-item",{attrs:{size:"small",label:"礼品类型：",prop:"giftType"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:t.seletGiftType,callback:function(e){t.seletGiftType=e},expression:"seletGiftType"}},t._l(t.allGiftTypeActData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"礼品名称：",prop:"memo"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:t.filters.memo,callback:function(e){t.$set(t.filters,"memo",e)},expression:"filters.memo"}})],1)],1),t._v(" "),a("el-row",[1==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:"礼品分类：",prop:"exchangeType"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:t.seletExchangeType,callback:function(e){t.seletExchangeType=e},expression:"seletExchangeType"}},t._l(t.allEchangeTypeData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),1==t.giftTypeDisPlay&&1==t.cardTypeDisplay?a("el-form-item",{attrs:{size:"small",label:""}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:t.seletCardType,callback:function(e){t.seletCardType=e},expression:"seletCardType"}},t._l(t.allCardTypeData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e()],1),t._v(" "),a("el-row",[1==t.giftTypeDisPlay||2==t.giftTypeDisPlay||3==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:3==t.giftTypeDisPlay?"红包面值：":2==t.giftTypeDisPlay?"市面价值（元）：":2==t.cardTypeDisplay?"市面价值（元）：":1==t.cardTypeNameDisplay?"折扣值（折）：":"翻倍值（倍）：",prop:"price"}},[a("el-input",{staticClass:"tobacco-input",attrs:{type:"number",placeholder:"请输入内容",min:"0",max:"9999999"},on:{input:function(e){t.checkOn3(t.filters.price)}},model:{value:t.filters.price,callback:function(e){t.$set(t.filters,"price",e)},expression:"filters.price"}})],1):t._e()],1),t._v(" "),a("el-row",[4==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:"积分面值：",prop:"score"}},[a("el-input",{staticClass:"tobacco-input",attrs:{type:"number",placeholder:"请输入内容",min:"0",max:"9999999"},on:{input:function(e){t.checkOn4(t.filters.score)}},model:{value:t.filters.score,callback:function(e){t.$set(t.filters,"score",e)},expression:"filters.score"}})],1):t._e()],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"礼品图片：",prop:"image",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.filters.image,callback:function(e){t.$set(t.filters,"image",e)},expression:"filters.image"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.filters.image?a("img",{staticClass:"avatar",attrs:{width:"100",height:"74",src:t.filters.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 380*280px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1)],1),t._v(" "),a("el-row",[1==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:"链接URL："}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容",maxlength:"200"},model:{value:t.filters.exchangeUrl,callback:function(e){t.$set(t.filters,"exchangeUrl",e)},expression:"filters.exchangeUrl"}})],1):t._e()],1),t._v(" "),a("el-row",[1==t.giftTypeDisPlay||2==t.giftTypeDisPlay?a("el-form-item",{attrs:{size:"small",label:"礼品描述："}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容",type:"textarea",rows:3,maxlength:"200"},model:{value:t.filters.afterService,callback:function(e){t.$set(t.filters,"afterService",e)},expression:"filters.afterService"}})],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.returnTobaccoMgr}},[t._v("取消")])],1)],1)])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("0Jpu"),a("qR49")},"data-v-edf19142",null);e.default=r.exports},SrBZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({state:!0,actList:[]}),created(){this.init()},methods:{init(){this.$request.post("/sc/saotx/game/getGames",{},!0,t=>{200===t.code&&(this.actList=t.context)})},getDetail(t){1==this.actList[t].type&&this.$router.push({path:"/mall/score/edit",query:{id:this.actList[t].id}})},toggle(t){var e=this.actList[t].id;0==this.actList[t].status?this.$confirm("确定要启用该活动？").then(a=>{this.$set(this.actList[t],"status",1),this.$request.post("/sc/saotx/game/changeGameState",{id:e,status:1},!0,t=>{200===t.code&&this.init()})}).catch(t=>{}):this.$confirm("确定要禁用该活动？").then(a=>{this.$set(this.actList[t],"status",0),this.$request.post("/sc/saotx/game/changeGameState",{id:e,status:0},!0,t=>{200===t.code&&this.init()})}).catch(t=>{})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"act-list-root"},[a("ul",[t._l(t.actList,function(e,s){return a("li",{key:s},[a("div",{staticClass:"con"},[a("img",{attrs:{src:e.gameImg,alt:""},on:{click:function(e){t.getDetail(s)}}}),t._v(" "),a("div",{staticClass:"act-info"},[a("div",{staticClass:"act-left"},[a("p",[t._v(t._s(e.gameName))]),t._v(" "),a("p",[t._v("精彩送不停")])]),t._v(" "),a("div",{staticClass:"act-right"},[a("el-switch",{on:{change:function(e){t.toggle(s)}},model:{value:1==e.status,callback:function(a){t.$set(e,"status==1?true:false",a)},expression:"item.status==1?true:false"}})],1)])])])}),t._v(" "),a("li"),t._v(" "),a("li"),t._v(" "),a("li")],2)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("0pST")},"data-v-a3768a5e",null);e.default=r.exports},T1kr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:()=>({showSkuQuery:!0,sku:"",productList:[{name:"全部",id:""}],productTypeList:[],cateLvl1List:[{name:"全部",id:"-1"}],cateLvl2List:[{name:"全部",id:"-1"}],cateLvl3List:[{name:"全部",id:"-1"}],cateLvl4List:[{name:"全部",id:"-1"}],basicMsg:{imagePath:"",name:"",sku:"",state:"",brandName:"",productArea:"",saleUnit:"",category:"",jdPrice:"",price:""},ruleForm:{memo:"",giftType:"",cateLvl1Id:"",cateLvl2Id:"",cateLvl3Id:"",cateLvl4Id:"",score:"",deliveryScore:"",status:"1",isHostGood:"0"},rules:{memo:[{required:!0,message:"请输入商品名称",trigger:"blur"}],giftType:[{required:!0,message:"请选择商品类型",trigger:"change"}],cateLvl1Id:[{required:!0,message:"请选择一级分类",trigger:"change"}],cateLvl2Id:[{required:!0,message:"请选择二级分类",trigger:"change"}],cateLvl3Id:[{required:!0,message:"请选择三级分类",trigger:"change"}],cateLvl4Id:[{required:!0,message:"请选择四级分类",trigger:"change"}],score:[{required:!0,message:"请输入兑换值",trigger:"blur"}],deliveryScore:[{required:!0,message:"请输入运费",trigger:"blur"}]}}),created(){this.getProductType(),this.getOneCategory()},methods:{queryJDSKU(){this.$request.post("/sc/saotx/mall/product/queryJDSKU",{sku:this.sku},!0,t=>{"200000"==t.ret?(this.basicMsg.imagePath=t.data.propertiesObject.imagePath,this.basicMsg.name=t.data.propertiesObject.name,this.basicMsg.sku=t.data.propertiesObject.sku,this.basicMsg.state=t.data.propertiesObject.state,this.basicMsg.brandName=t.data.propertiesObject.brandName,this.basicMsg.productArea=t.data.propertiesObject.productArea,this.basicMsg.saleUnit=t.data.propertiesObject.saleUnit,this.basicMsg.category=t.data.propertiesObject.category,this.basicMsg.jdPrice=t.data.propertiesObject.jdPrice,this.basicMsg.price=t.data.propertiesObject.price,this.ruleForm.score=t.data.propertiesObject.score,this.showSkuQuery=!this.showSkuQuery):this.$message({message:t.message,type:"warning"})})},getProductList(){this.$request.post("/sc/saotx/mall/statusMap",{},!0,t=>{"200000"==t.ret&&(this.productList=[...this.productList,...t.data])})},getProductType(){this.$request.post("/sc/saotx/mall/giftTypeMap",{},!0,t=>{"200000"==t.ret&&(this.productTypeList=[...this.productTypeList,...t.data])})},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.ruleForm.cateLvl2Id="-1",this.cateLvl2List=[{name:"全部",id:"-1"}],this.ruleForm.cateLvl3Id="-1",this.cateLvl3List=[{name:"全部",id:"-1"}],this.ruleForm.cateLvl4Id="-1",this.cateLvl4List=[{name:"全部",id:"-1"}],this.getTwoCategory()},getTwoCategory(){"-1"!=this.ruleForm.cateLvl1Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl1Id},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},selectBrand2(){this.ruleForm.cateLvl3Id="-1",this.cateLvl3List=[{name:"全部",id:"-1"}],this.ruleForm.cateLvl4Id="-1",this.cateLvl4List=[{name:"全部",id:"-1"}],this.getThreeCategory()},getThreeCategory(){"-1"!=this.ruleForm.cateLvl2Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl2Id},!0,t=>{"200000"==t.ret&&(this.cateLvl3List=[...this.cateLvl3List,...t.data])})},selectBrand3(){this.ruleForm.cateLvl4Id="-1",this.cateLvl4List=[{name:"全部",id:"-1"}],this.getFourCategory()},getFourCategory(){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl3Id},!0,t=>{"200000"==t.ret&&(this.cateLvl4List=[...this.cateLvl4List,...t.data])})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={cateLvl1Id:this.ruleForm.cateLvl1Id,cateLvl2Id:this.ruleForm.cateLvl2Id,cateLvl3Id:this.ruleForm.cateLvl3Id,cateLvl4Id:this.ruleForm.cateLvl4Id,deliveryScore:this.ruleForm.deliveryScore,giftType:this.ruleForm.giftType,image:this.basicMsg.imagePath,memo:this.ruleForm.memo,outSourceId:this.basicMsg.sku,price:this.basicMsg.price,score:this.ruleForm.score,status:this.ruleForm.status,isHostGood:this.ruleForm.isHostGood};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/product/saveOrModifyJD",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnJDProduct()):this.$message({message:t.message,type:"warning"})},t=>{})},returnJDProduct(){this.$router.push({path:"/mall/product/jd"})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-jd-product-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showSkuQuery,expression:"showSkuQuery"}],staticClass:"add-jd-product-msg-container",staticStyle:{background:"#fff","text-align":"center"}},[a("span",{staticClass:"imp"},[t._v("*")]),a("span",{staticStyle:{"margin-right":"30px"}},[t._v("SKU：")]),t._v(" "),a("el-input",{staticStyle:{width:"200px","margin-right":"30px"},attrs:{size:"small"},model:{value:t.sku,callback:function(e){t.sku=e},expression:"sku"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.queryJDSKU}},[t._v("查询")]),t._v(" "),a("div",{staticClass:"add-jd-product-form-bt"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.returnJDProduct}},[t._v("返回列表")])],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showSkuQuery,expression:"!showSkuQuery"}]},[a("div",{staticClass:"add-jd-product-msg-container"},[a("div",{staticClass:"title"},[t._v("基本信息：")]),t._v(" "),a("div",{staticClass:"add-jd-product-msg"},[a("div",{staticClass:"left-side"},[t._m(0),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.basicMsg.imagePath,width:"200",height:"200",alt:""}})])]),t._v(" "),a("div",{staticClass:"right-side"},[a("div",{staticClass:"line",staticStyle:{width:"100%"}},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("商品名称："+t._s(t.basicMsg.name))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("SKU："+t._s(t.basicMsg.sku))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("上下架状态："+t._s(1==t.basicMsg.state?"上架中":"下架中"))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("品牌："+t._s(t.basicMsg.brandName))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("产地： "+t._s(t.basicMsg.productArea)+" ")]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("销售单位： "+t._s(t.basicMsg.saleUnit)+" ")]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("类别："+t._s(t.basicMsg.category))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("京东价格："+t._s(t.basicMsg.jdPrice))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("内部价格："+t._s(t.basicMsg.price))])])])]),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"100px"}},[a("div",{staticClass:"add-jd-product-form-container"},[a("el-form-item",{attrs:{label:"商品名称：",prop:"memo",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.memo,callback:function(e){t.$set(t.ruleForm,"memo",e)},expression:"ruleForm.memo"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"商品类型：",prop:"giftType"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.giftType,callback:function(e){t.$set(t.ruleForm,"giftType",e)},expression:"ruleForm.giftType"}},t._l(t.productTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类：",prop:"cateLvl1Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.ruleForm.cateLvl1Id,callback:function(e){t.$set(t.ruleForm,"cateLvl1Id",e)},expression:"ruleForm.cateLvl1Id"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl2Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.ruleForm.cateLvl2Id,callback:function(e){t.$set(t.ruleForm,"cateLvl2Id",e)},expression:"ruleForm.cateLvl2Id"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl3Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand3},model:{value:t.ruleForm.cateLvl3Id,callback:function(e){t.$set(t.ruleForm,"cateLvl3Id",e)},expression:"ruleForm.cateLvl3Id "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl4Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.cateLvl4Id,callback:function(e){t.$set(t.ruleForm,"cateLvl4Id",e)},expression:"ruleForm.cateLvl4Id"}},t._l(t.cateLvl4List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"兑换值：",prop:"score",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",disabled:""},model:{value:t.ruleForm.score,callback:function(e){t.$set(t.ruleForm,"score",e)},expression:"ruleForm.score"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"运费：",prop:"deliveryScore",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.deliveryScore,callback:function(e){t.$set(t.ruleForm,"deliveryScore",e)},expression:"ruleForm.deliveryScore"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status",size:"small"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("上架")]),t._v(" "),a("el-radio",{attrs:{label:"-1"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("下架")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"是否热门：",prop:"isHostGood",size:"small"}},[a("el-radio",{attrs:{label:"0"},model:{value:t.ruleForm.isHostGood,callback:function(e){t.$set(t.ruleForm,"isHostGood",e)},expression:"ruleForm.isHostGood"}},[t._v("否")]),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.isHostGood,callback:function(e){t.$set(t.ruleForm,"isHostGood",e)},expression:"ruleForm.isHostGood"}},[t._v("是")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"add-jd-product-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("立即创建")]),t._v(" "),a("el-button",{on:{click:t.returnJDProduct}},[t._v("取消")])],1)],1)],1)])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line"},[e("span",{staticClass:"imp"},[this._v("*")]),this._v("主图：")])}]};var r=a("VU/8")(s,i,!1,function(t){a("36Dd"),a("55q8")},"data-v-451b33e0",null);e.default=r.exports},T9oU:function(t,e){},TJWz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",props:["id"],data:()=>({listLoading:!1,dialogTableVisible:!1,listType:"JD",listJD:[],listZJ:[],ProductIndex:"",headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},cateLvl1List:[{name:"全部",id:""}],cateLvl2List:[{name:"全部",id:""}],ruleForm:{type:"1",name:"",idx:"",product1Id:"",product1Name:"",image1:"",product2Id:"",product2Name:"",image2:"",product3Id:"",product3Name:"",image3:"",product4Id:"",product4Name:"",image4:""},rules:{name:[{required:!0,message:"请输入推荐位名称",trigger:"blur"}],idx:[{required:!0,message:"请输入排序值",trigger:"blur"}],product1Name:[{required:!0,message:"请选择商品",trigger:"change"}],image1:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product3Name:[{required:!0,message:"请选择商品",trigger:"change"}],image3:[{required:!0,message:"请上传图片",trigger:"change"}],product4Name:[{required:!0,message:"请选择商品",trigger:"change"}],image4:[{required:!0,message:"请上传图片",trigger:"change"}]},filters:{inputWithSelect:"",select:"",status:1,giftType:"",hasDelivery:"",keywords:"",cateLvl1:"",cateLvl2:"",productId:"",pageSize:5,pageNo:1,total:0},currentPage:1,selectProduct:{productId:"",productName:""}}),created(){this.getOneCategory(),this.getListJD(),this.getListZJ(),this.getRecommendDetail()},methods:{getRecommendDetail(){this.$request.post("/sc/saotx/mall/recommend/detail",{id:this.id},!0,t=>{if("200000"==t.ret){this.ruleForm.name=t.data.name,this.ruleForm.idx=t.data.idx,t.data.recommendProducts.map((t,e)=>{this.ruleForm["product"+t.idx+"Id"]=t.productId,this.ruleForm["product"+t.idx+"Name"]=t.productName,this.ruleForm["image"+t.idx]=t.productImage})}})},getListJD(){let t={status:this.filters.status,giftType:this.filters.giftType,hasDelivery:this.filters.hasDelivery,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchJD(t)},postSearchJD(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listJD",t,!0,t=>{"200000"==t.ret&&(this.listLoading=!1,this.listJD=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},getListZJ(){let t={status:this.filters.status,giftType:this.filters.giftType,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchZJ(t)},postSearchZJ(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listZJ",t,!0,t=>{"200000"==t.ret&&(console.log(t.data),this.listLoading=!1,this.listZJ=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},commitForm(){this.handleClick()},inputWithSelectChange(t){this.filters.keywords="",this.filters.productId=""},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.filters.cateLvl2="",this.cateLvl2List=[{name:"全部",id:""}],this.getTwoCategory()},getTwoCategory(){""!=this.filters.cateLvl1&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl1},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},chooseProduct(t){this.dialogTableVisible=!0,this.ProductIndex=t},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={id:this.id,type:1,name:this.ruleForm.name,idx:this.ruleForm.idx,recommendProducts:[{productId:this.ruleForm.product1Id,productName:this.ruleForm.product1Name,productImage:this.ruleForm.image1,idx:1},{productId:this.ruleForm.product2Id,productName:this.ruleForm.product2Name,productImage:this.ruleForm.image2,idx:2},{productId:this.ruleForm.product3Id,productName:this.ruleForm.product3Name,productImage:this.ruleForm.image3,idx:3},{productId:this.ruleForm.product4Id,productName:this.ruleForm.product4Name,productImage:this.ruleForm.image4,idx:4}]};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/recommend/saveOrModify",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnRecommend()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess1(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image1=s},handleAvatarSuccess2(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image2=s},handleAvatarSuccess3(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image3=s},handleAvatarSuccess4(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image4=s},returnRecommend(){this.$router.push({path:"/mall/recommend"})},handleSelectProduct(t){if(console.log(t),t){let e=t;this.selectProduct.productId=e.productId,this.selectProduct.productName=e.memo}},handleClick(t,e){this.filters.pageNo=1,this.currentPage=1,"JD"==this.listType?this.getListJD():"ZJ"==this.listType&&this.getListZJ()},jumpTo(){this.$emit("current-change")},handleCurrentChangeZJ(t){this.filters.pageNo=t,this.currentPage=t,this.getListZJ()},handleCurrentChangeJD(t){this.filters.pageNo=t,this.currentPage=t,this.getListJD()},confirmDialog(){this.ruleForm.product1Id==this.selectProduct.productId||this.ruleForm.product2Id==this.selectProduct.productId||this.ruleForm.product3Id==this.selectProduct.productId||this.ruleForm.product4Id==this.selectProduct.productId?this.$message({message:"已选择当前商品",type:"warning"}):(this.ruleForm["product"+this.ProductIndex+"Id"]=this.selectProduct.productId,this.ruleForm["product"+this.ProductIndex+"Name"]=this.selectProduct.productName,this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="")},cancelDialog(){this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="",this.dialogTableVisible=!1}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"edit-commend-form-bt"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"120px"}},[a("div",{staticClass:"edit-commend-form-container"},[a("el-form-item",{attrs:{label:"推荐位名称：",prop:"name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"排序值：",prop:"idx",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.idx,callback:function(e){t.$set(t.ruleForm,"idx",e)},expression:"ruleForm.idx"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"选择商品：",prop:"product1Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product1Name,callback:function(e){t.$set(t.ruleForm,"product1Name",e)},expression:"ruleForm.product1Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("1")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图1：",prop:"image1",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image1,callback:function(e){t.$set(t.ruleForm,"image1",e)},expression:"ruleForm.image1"}}),t._v(" "),a("el-upload",{staticClass:"main-product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess1}},[t.ruleForm.image1?a("img",{staticClass:"avatar",attrs:{width:"100",height:"34",src:t.ruleForm.image1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 710*240px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品2：",prop:"product2Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product2Name,callback:function(e){t.$set(t.ruleForm,"product2Name",e)},expression:"ruleForm.product2Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("2")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图2：",prop:"image2",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image2,callback:function(e){t.$set(t.ruleForm,"image2",e)},expression:"ruleForm.image2"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess2}},[t.ruleForm.image2?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("上传图片的最佳尺寸：230像素*144像素;格式png，jpg;大小不超过2M")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品3：",prop:"product3Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product3Name,callback:function(e){t.$set(t.ruleForm,"product3Name",e)},expression:"ruleForm.product3Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("3")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图3：",prop:"image3",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image3,callback:function(e){t.$set(t.ruleForm,"image3",e)},expression:"ruleForm.image3"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess3}},[t.ruleForm.image3?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image3}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("上传图片的最佳尺寸：230像素*144像素;格式png，jpg;大小不超过2M")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品4：",prop:"product4Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product4Name,callback:function(e){t.$set(t.ruleForm,"product4Name",e)},expression:"ruleForm.product4Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("4")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图4：",prop:"image4",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image4,callback:function(e){t.$set(t.ruleForm,"image4",e)},expression:"ruleForm.image4"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess4}},[t.ruleForm.image4?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image4}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("上传图片的最佳尺寸：230像素*144像素;格式png，jpg;大小不超过2M")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"edit-commend-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.returnRecommend}},[t._v("取消")])],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择商品",visible:t.dialogTableVisible,width:"850px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.filters[t.filters.select],callback:function(e){t.$set(t.filters,t.filters.select,e)},expression:"filters[filters.select]"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.inputWithSelectChange},slot:"prepend",model:{value:t.filters.select,callback:function(e){t.$set(t.filters,"select",e)},expression:"filters.select"}},[a("el-option",{attrs:{label:"商品名称",value:"keywords"}}),t._v(" "),a("el-option",{attrs:{label:"商品ID",value:"productId"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.cateLvl1,callback:function(e){t.$set(t.filters,"cateLvl1",e)},expression:"filters.cateLvl1"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.filters.cateLvl2,callback:function(e){t.$set(t.filters,"cateLvl2",e)},expression:"filters.cateLvl2"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")])],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.listType,callback:function(e){t.listType=e},expression:"listType"}},[a("el-tab-pane",{attrs:{label:"京东商品",name:"JD"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"JDTable",attrs:{data:t.listJD,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeJD}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"自建商品",name:"ZJ"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"ZJTable",attrs:{data:t.listZJ,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeZJ}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmDialog}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("Nzs5"),a("oDas")},"data-v-5b06ca16",null);e.default=r.exports},Tj3O:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"RecommendManage",data:()=>({listLoading:!1,recommendList:[],total:0,currentPage:1,pageNo:1,pageSize:10,landingPage:!1}),methods:{addRecommend(){this.landingPage=!0},getRecommendList(){let t={pageNo:this.pageNo,pageSize:this.pageSize};this.postSearch(t)},postSearch(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/recommend/list",t,!0,t=>{"200000"==t.ret&&(this.recommendList=t.data.list,this.total=t.data.page.count,this.pageSize=t.data.page.pageSize,this.pageNo=t.data.page.pageNo,this.listLoading=!1)})},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getRecommendList()},jumpTo(){this.$emit("current-change")},editRecommend(t,e){1==e?this.$router.push({path:"/mall/recommend/editCommendTpmA?id="+t}):2==e?this.$router.push({path:"/mall/recommend/editCommendTpmB?id="+t}):3==e&&this.$router.push({path:"/mall/recommend/editCommendTpmC?id="+t})},deleteRecommend(t){this.$confirm("您确定删除此推荐位？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let e={id:t};this.$request.post("/sc/saotx/mall/recommend/remove",e,!0,t=>{"200000"==t.ret?(this.$message({message:"已删除",type:"warning"}),this.getRecommendList()):(this.$message({message:t.message,type:"warning"}),this.getRecommendList())})}).catch(()=>{})},handleClose(){this.landingPage=!1},templateLink(t){this.landingPage=!1,this.$router.push("/mall/recommend/addCommendTpm"+t)}},created(){this.getRecommendList()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"recommend-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addRecommend}},[t._v("新增推荐位")])],1),t._v(" "),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.recommendList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"推荐位名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"idx",label:"排序值"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.editRecommend(e.row.id,e.row.type)}}},[t._v("\n              编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteRecommend(e.row.id)}}},[t._v("\n              删除")])]}}])})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-button",{staticClass:"btn-jump-to",attrs:{type:"primary"},on:{click:t.jumpTo}},[t._v("跳转")]),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("div",{staticClass:"newLandingPage"},[a("el-dialog",{attrs:{title:"推荐位模板选择",visible:t.landingPage,"before-close":t.handleClose,width:"694px"},on:{"update:visible":function(e){t.landingPage=e}}},[a("div",{staticClass:"tpm-img clearfix",staticStyle:{display:"flex"}},[a("div",{staticClass:"left",on:{click:function(e){t.templateLink("A")}}},[a("div",{staticClass:"img"},[a("img",{attrs:{src:"https://qrmkt.oss-cn-beijing.aliyuncs.com/scoremall/template1.png",alt:"A模板"}})]),t._v(" "),a("p",[t._v("A模板")])]),t._v(" "),a("div",{staticClass:"left"},[a("div",{staticClass:"img",on:{click:function(e){t.templateLink("B")}}},[a("img",{attrs:{src:"https://qrmkt.oss-cn-beijing.aliyuncs.com/scoremall/template3.png",alt:"B模板"}})]),t._v(" "),a("p",[t._v("B模板")])]),t._v(" "),a("div",{staticClass:"left"},[a("div",{staticClass:"img",on:{click:function(e){t.templateLink("C")}}},[a("img",{attrs:{src:"https://qrmkt.oss-cn-beijing.aliyuncs.com/scoremall/template2.png",alt:"C模板"}})]),t._v(" "),a("p",[t._v("C模板")])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{width:"79px",height:"32px","line-height":"8px"},on:{click:function(e){t.landingPage=!1}}},[t._v("取 消")])],1)])],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("lXSJ"),a("cBop")},"data-v-02fb0916",null);e.default=r.exports},U6qu:function(t,e){},U71v:function(t,e){},Uv2I:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:()=>({listLoading:!1,dialogTableVisible:!1,listType:"JD",listJD:[],listZJ:[],ProductIndex:"",headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},cateLvl1List:[{name:"全部",id:""}],cateLvl2List:[{name:"全部",id:""}],ruleForm:{type:"2",name:"",idx:"",product1Id:"",product1Name:"",image1:"",product2Id:"",product2Name:"",image2:"",product3Id:"",product3Name:"",image3:"",product4Id:"",product4Name:"",image4:""},rules:{name:[{required:!0,message:"请输入推荐位名称",trigger:"blur"}],idx:[{required:!0,message:"请输入排序值",trigger:"blur"}],product1Name:[{required:!0,message:"请选择商品",trigger:"change"}],image1:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product3Name:[{required:!0,message:"请选择商品",trigger:"change"}],image3:[{required:!0,message:"请上传图片",trigger:"change"}],product4Name:[{required:!0,message:"请选择商品",trigger:"change"}],image4:[{required:!0,message:"请上传图片",trigger:"change"}]},filters:{inputWithSelect:"",select:"",status:1,giftType:"",hasDelivery:"",keywords:"",cateLvl1:"",cateLvl2:"",productId:"",pageSize:5,pageNo:1,total:0},currentPage:1,selectProduct:{productId:"",productName:""}}),created(){this.getOneCategory(),this.getListJD(),this.getListZJ()},methods:{getListJD(){let t={status:this.filters.status,giftType:this.filters.giftType,hasDelivery:this.filters.hasDelivery,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchJD(t)},postSearchJD(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listJD",t,!0,t=>{"200000"==t.ret&&(this.listLoading=!1,this.listJD=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},getListZJ(){let t={status:this.filters.status,giftType:this.filters.giftType,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchZJ(t)},postSearchZJ(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listZJ",t,!0,t=>{"200000"==t.ret&&(console.log(t.data),this.listLoading=!1,this.listZJ=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},commitForm(){this.handleClick()},inputWithSelectChange(t){this.filters.keywords="",this.filters.productId=""},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.filters.cateLvl2="",this.cateLvl2List=[{name:"全部",id:""}],this.getTwoCategory()},getTwoCategory(){""!=this.filters.cateLvl1&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl1},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},chooseProduct(t){this.dialogTableVisible=!0,this.ProductIndex=t},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={type:2,name:this.ruleForm.name,idx:this.ruleForm.idx,recommendProducts:[{productId:this.ruleForm.product1Id,productName:this.ruleForm.product1Name,productImage:this.ruleForm.image1,idx:1},{productId:this.ruleForm.product2Id,productName:this.ruleForm.product2Name,productImage:this.ruleForm.image2,idx:2},{productId:this.ruleForm.product3Id,productName:this.ruleForm.product3Name,productImage:this.ruleForm.image3,idx:3},{productId:this.ruleForm.product4Id,productName:this.ruleForm.product4Name,productImage:this.ruleForm.image4,idx:4}]};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/recommend/saveOrModify",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnRecommend()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess1(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image1=s},handleAvatarSuccess2(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image2=s},handleAvatarSuccess3(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image3=s},handleAvatarSuccess4(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image4=s},returnRecommend(){this.$router.push({path:"/mall/recommend"})},handleSelectProduct(t){if(console.log(t),t){let e=t;this.selectProduct.productId=e.productId,this.selectProduct.productName=e.memo}},handleClick(t,e){this.filters.pageNo=1,this.currentPage=1,"JD"==this.listType?this.getListJD():"ZJ"==this.listType&&this.getListZJ()},jumpTo(){this.$emit("current-change")},handleCurrentChangeZJ(t){this.filters.pageNo=t,this.currentPage=t,this.getListZJ()},handleCurrentChangeJD(t){this.filters.pageNo=t,this.currentPage=t,this.getListJD()},confirmDialog(){this.ruleForm.product1Id==this.selectProduct.productId||this.ruleForm.product2Id==this.selectProduct.productId||this.ruleForm.product3Id==this.selectProduct.productId||this.ruleForm.product4Id==this.selectProduct.productId?this.$message({message:"已选择当前商品",type:"warning"}):(this.ruleForm["product"+this.ProductIndex+"Id"]=this.selectProduct.productId,this.ruleForm["product"+this.ProductIndex+"Name"]=this.selectProduct.productName,this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="")},cancelDialog(){this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="",this.dialogTableVisible=!1}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-commend-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"120px"}},[a("div",{staticClass:"add-commend-form-container"},[a("el-form-item",{attrs:{label:"推荐位名称：",prop:"name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"排序值：",prop:"idx",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.idx,callback:function(e){t.$set(t.ruleForm,"idx",e)},expression:"ruleForm.idx"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"选择商品：",prop:"product1Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product1Name,callback:function(e){t.$set(t.ruleForm,"product1Name",e)},expression:"ruleForm.product1Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("1")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图1：",prop:"image1",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image1,callback:function(e){t.$set(t.ruleForm,"image1",e)},expression:"ruleForm.image1"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess1}},[t.ruleForm.image1?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品2：",prop:"product2Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product2Name,callback:function(e){t.$set(t.ruleForm,"product2Name",e)},expression:"ruleForm.product2Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("2")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图2：",prop:"image2",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image2,callback:function(e){t.$set(t.ruleForm,"image2",e)},expression:"ruleForm.image2"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess2}},[t.ruleForm.image2?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品3：",prop:"product3Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product3Name,callback:function(e){t.$set(t.ruleForm,"product3Name",e)},expression:"ruleForm.product3Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("3")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图3：",prop:"image3",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image3,callback:function(e){t.$set(t.ruleForm,"image3",e)},expression:"ruleForm.image3"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess3}},[t.ruleForm.image3?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image3}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品4：",prop:"product4Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product4Name,callback:function(e){t.$set(t.ruleForm,"product4Name",e)},expression:"ruleForm.product4Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("4")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图4：",prop:"image4",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image4,callback:function(e){t.$set(t.ruleForm,"image4",e)},expression:"ruleForm.image4"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess4}},[t.ruleForm.image4?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image4}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"add-commend-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("立即创建")]),t._v(" "),a("el-button",{on:{click:t.returnRecommend}},[t._v("取消")])],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择商品",visible:t.dialogTableVisible,width:"850px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.filters[t.filters.select],callback:function(e){t.$set(t.filters,t.filters.select,e)},expression:"filters[filters.select]"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.inputWithSelectChange},slot:"prepend",model:{value:t.filters.select,callback:function(e){t.$set(t.filters,"select",e)},expression:"filters.select"}},[a("el-option",{attrs:{label:"商品名称",value:"keywords"}}),t._v(" "),a("el-option",{attrs:{label:"商品ID",value:"productId"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.cateLvl1,callback:function(e){t.$set(t.filters,"cateLvl1",e)},expression:"filters.cateLvl1"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.filters.cateLvl2,callback:function(e){t.$set(t.filters,"cateLvl2",e)},expression:"filters.cateLvl2"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")])],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.listType,callback:function(e){t.listType=e},expression:"listType"}},[a("el-tab-pane",{attrs:{label:"京东商品",name:"JD"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"JDTable",attrs:{data:t.listJD,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeJD}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"自建商品",name:"ZJ"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"ZJTable",attrs:{data:t.listZJ,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeZJ}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmDialog}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("lf89"),a("aem/")},"data-v-faf8ea16",null);e.default=r.exports},V8Fs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"SystemLayout",data:()=>({filters:{integral:""},money:"",rules:{integral:[{required:!0,message:"金叶币值配置",trigger:"change"}]}}),created(){this.queryIntegralMoney()},methods:{queryIntegralMoney(){this.$request.post("/sc/saotx/mall/queryIntegralMoney",{},!0,t=>{"200000"==t.ret?(this.filters.integral=t.data.integral,this.money=t.data.money):this.$message({message:t.message,type:"warning"})},t=>{})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={integral:this.filters.integral,money:this.money};this.$request.post("/sc/saotx/mall/setIntegralMoney",t,!0,t=>{"200000"==t.ret?this.$message({message:"保存成功！",type:"success"}):this.$message({message:t.message,type:"warning"})},t=>{})}})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"system-layout-container"},[a("div",{staticClass:"box-container"},[a("el-form",{ref:"ruleForm",attrs:{inline:!0,rules:t.rules,model:t.filters,"label-width":"150px"}},[a("div",{staticClass:"system-layout-form-title"},[t._v("金叶币值配置：")]),t._v(" "),a("div",{staticClass:"system-layout-form-container"},[a("el-form-item",{attrs:{size:"small",label:"金叶币值配置：",prop:"integral"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:t.filters.integral,callback:function(e){t.$set(t.filters,"integral",e)},expression:"filters.integral"}})],1),t._v(" "),a("span",{staticStyle:{color:"#111","line-height":"32px"}},[t._v("金叶币=￥"+t._s(Number(t.money).toFixed(2)))])],1),t._v(" "),a("div",{staticClass:"system-layout-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")])],1)],1)])],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("YhAe")},"data-v-6e610fe2",null);e.default=r.exports},Vsp3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id"],name:"",data:()=>({listLoading:!1,dialogTableVisible:!1,listType:"JD",listJD:[],listZJ:[],ProductIndex:"",headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},cateLvl1List:[{name:"全部",id:""}],cateLvl2List:[{name:"全部",id:""}],ruleForm:{type:"2",name:"",idx:"",product1Id:"",product1Name:"",image1:"",product2Id:"",product2Name:"",image2:"",product3Id:"",product3Name:"",image3:"",product4Id:"",product4Name:"",image4:""},rules:{name:[{required:!0,message:"请输入推荐位名称",trigger:"blur"}],idx:[{required:!0,message:"请输入排序值",trigger:"blur"}],product1Name:[{required:!0,message:"请选择商品",trigger:"change"}],image1:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product3Name:[{required:!0,message:"请选择商品",trigger:"change"}],image3:[{required:!0,message:"请上传图片",trigger:"change"}],product4Name:[{required:!0,message:"请选择商品",trigger:"change"}],image4:[{required:!0,message:"请上传图片",trigger:"change"}]},filters:{inputWithSelect:"",select:"",status:1,giftType:"",hasDelivery:"",keywords:"",cateLvl1:"",cateLvl2:"",productId:"",pageSize:5,pageNo:1,total:0},currentPage:1,selectProduct:{productId:"",productName:""}}),created(){this.getOneCategory(),this.getListJD(),this.getListZJ(),this.getRecommendDetail()},methods:{getRecommendDetail(){this.$request.post("/sc/saotx/mall/recommend/detail",{id:this.id},!0,t=>{if("200000"==t.ret){this.ruleForm.name=t.data.name,this.ruleForm.idx=t.data.idx,t.data.recommendProducts.map((t,e)=>{this.ruleForm["product"+t.idx+"Id"]=t.productId,this.ruleForm["product"+t.idx+"Name"]=t.productName,this.ruleForm["image"+t.idx]=t.productImage})}})},getListJD(){let t={status:this.filters.status,giftType:this.filters.giftType,hasDelivery:this.filters.hasDelivery,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchJD(t)},postSearchJD(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listJD",t,!0,t=>{"200000"==t.ret&&(this.listLoading=!1,this.listJD=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},getListZJ(){let t={status:this.filters.status,giftType:this.filters.giftType,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchZJ(t)},postSearchZJ(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listZJ",t,!0,t=>{"200000"==t.ret&&(console.log(t.data),this.listLoading=!1,this.listZJ=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},commitForm(){this.handleClick()},inputWithSelectChange(t){this.filters.keywords="",this.filters.productId=""},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.filters.cateLvl2="",this.cateLvl2List=[{name:"全部",id:""}],this.getTwoCategory()},getTwoCategory(){""!=this.filters.cateLvl1&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl1},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},chooseProduct(t){this.dialogTableVisible=!0,this.ProductIndex=t},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={id:this.id,type:2,name:this.ruleForm.name,idx:this.ruleForm.idx,recommendProducts:[{productId:this.ruleForm.product1Id,productName:this.ruleForm.product1Name,productImage:this.ruleForm.image1,idx:1},{productId:this.ruleForm.product2Id,productName:this.ruleForm.product2Name,productImage:this.ruleForm.image2,idx:2},{productId:this.ruleForm.product3Id,productName:this.ruleForm.product3Name,productImage:this.ruleForm.image3,idx:3},{productId:this.ruleForm.product4Id,productName:this.ruleForm.product4Name,productImage:this.ruleForm.image4,idx:4}]};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/recommend/saveOrModify",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnRecommend()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess1(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image1=s},handleAvatarSuccess2(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image2=s},handleAvatarSuccess3(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image3=s},handleAvatarSuccess4(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image4=s},returnRecommend(){this.$router.push({path:"/mall/recommend"})},handleSelectProduct(t){if(console.log(t),t){let e=t;this.selectProduct.productId=e.productId,this.selectProduct.productName=e.memo}},handleClick(t,e){this.filters.pageNo=1,this.currentPage=1,"JD"==this.listType?this.getListJD():"ZJ"==this.listType&&this.getListZJ()},jumpTo(){this.$emit("current-change")},handleCurrentChangeZJ(t){this.filters.pageNo=t,this.currentPage=t,this.getListZJ()},handleCurrentChangeJD(t){this.filters.pageNo=t,this.currentPage=t,this.getListJD()},confirmDialog(){this.ruleForm.product1Id==this.selectProduct.productId||this.ruleForm.product2Id==this.selectProduct.productId||this.ruleForm.product3Id==this.selectProduct.productId||this.ruleForm.product4Id==this.selectProduct.productId?this.$message({message:"已选择当前商品",type:"warning"}):(this.ruleForm["product"+this.ProductIndex+"Id"]=this.selectProduct.productId,this.ruleForm["product"+this.ProductIndex+"Name"]=this.selectProduct.productName,this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="")},cancelDialog(){this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="",this.dialogTableVisible=!1}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-commend-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"120px"}},[a("div",{staticClass:"add-commend-form-container"},[a("el-form-item",{attrs:{label:"推荐位名称：",prop:"name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"排序值：",prop:"idx",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.idx,callback:function(e){t.$set(t.ruleForm,"idx",e)},expression:"ruleForm.idx"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"选择商品：",prop:"product1Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product1Name,callback:function(e){t.$set(t.ruleForm,"product1Name",e)},expression:"ruleForm.product1Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("1")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图1：",prop:"image1",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image1,callback:function(e){t.$set(t.ruleForm,"image1",e)},expression:"ruleForm.image1"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess1}},[t.ruleForm.image1?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品2：",prop:"product2Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product2Name,callback:function(e){t.$set(t.ruleForm,"product2Name",e)},expression:"ruleForm.product2Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("2")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图2：",prop:"image2",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image2,callback:function(e){t.$set(t.ruleForm,"image2",e)},expression:"ruleForm.image2"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess2}},[t.ruleForm.image2?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品3：",prop:"product3Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product3Name,callback:function(e){t.$set(t.ruleForm,"product3Name",e)},expression:"ruleForm.product3Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("3")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图3：",prop:"image3",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image3,callback:function(e){t.$set(t.ruleForm,"image3",e)},expression:"ruleForm.image3"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess3}},[t.ruleForm.image3?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image3}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品4：",prop:"product4Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product4Name,callback:function(e){t.$set(t.ruleForm,"product4Name",e)},expression:"ruleForm.product4Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("4")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图4：",prop:"image4",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image4,callback:function(e){t.$set(t.ruleForm,"image4",e)},expression:"ruleForm.image4"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess4}},[t.ruleForm.image4?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image4}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"add-commend-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.returnRecommend}},[t._v("取消")])],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择商品",visible:t.dialogTableVisible,width:"850px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.filters[t.filters.select],callback:function(e){t.$set(t.filters,t.filters.select,e)},expression:"filters[filters.select]"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.inputWithSelectChange},slot:"prepend",model:{value:t.filters.select,callback:function(e){t.$set(t.filters,"select",e)},expression:"filters.select"}},[a("el-option",{attrs:{label:"商品名称",value:"keywords"}}),t._v(" "),a("el-option",{attrs:{label:"商品ID",value:"productId"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.cateLvl1,callback:function(e){t.$set(t.filters,"cateLvl1",e)},expression:"filters.cateLvl1"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.filters.cateLvl2,callback:function(e){t.$set(t.filters,"cateLvl2",e)},expression:"filters.cateLvl2"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")])],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.listType,callback:function(e){t.listType=e},expression:"listType"}},[a("el-tab-pane",{attrs:{label:"京东商品",name:"JD"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"JDTable",attrs:{data:t.listJD,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeJD}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"自建商品",name:"ZJ"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"ZJTable",attrs:{data:t.listZJ,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeZJ}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmDialog}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("//E4"),a("wi7m")},"data-v-66a0615e",null);e.default=r.exports},"W9i/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({listLoading:!1,batchOperations:!0,ids:"",jdOrderStatusList:[{code:"",name:"全部"},{code:"0",name:"待审核"},{code:"1",name:"审核通过"},{code:"2",name:"审核不通过"}],filters:{jdOrderStatus:"0",startTime:"",endTime:""},authList:[],pageSize:10,pageNo:1,currentPage:1,total:0}),methods:{getAuthList(){let t={jdOrderStatus:this.filters.jdOrderStatus,startTime:this.filters.startTime,endTime:this.filters.endTime,pageNo:this.pageNo,pageSize:this.pageSize};this.postSearch(t)},postSearch(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/order/authList",t,!0,t=>{"200000"==t.ret&&(console.log(t.data),this.listLoading=!1,this.authList=t.data.list,this.total=t.data.page.count,this.pageNo=t.data.page.pageNo)})},commitForm(){this.pageNo=1,this.currentPage=1,this.getAuthList()},getStatus(){this.filters.jdOrderStatus="",this.filters.startTime="",this.filters.endTime="",this.pageNo=1,this.currentPage=1,this.getAuthList()},handleEdit(t,e){this.$router.push({path:"/product/editSupplier?id="+e.id})},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getAuthList()},jumpTo(){this.$emit("current-change")},modifyAuthOrder(t,e,a){let s={ids:t,jdOrderStatus:e},i="";"2"==e&&(i="不");let r="";a&&(r="批量"),this.$confirm(`您确定审核${i}通过此${r}订单？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/sc/saotx/mall/order/authOrder",s,!0,t=>{"200000"==t.ret?(this.$message({message:"操作成功！",type:"success"}),this.getStatus()):this.$message({message:t.message,type:"warning"})})})},handleSelectionChange(t){let e=t;console.log(e);let a=[];e.length>0&&"0"==this.filters.jdOrderStatus?(this.batchOperations=!1,e.map((t,e)=>{a.push(t.id)}),this.ids=a.join(",")):(this.ids="",this.batchOperations=!0)}},created(){this.getAuthList()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"audit-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"审核状态"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.jdOrderStatus,callback:function(e){t.$set(t.filters,"jdOrderStatus",e)},expression:"filters.jdOrderStatus"}},t._l(t.jdOrderStatusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"时间区间"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.filters.startTime,callback:function(e){t.$set(t.filters,"startTime",e)},expression:"filters.startTime"}})],1),t._v(" "),a("el-form-item",{staticClass:"mini",attrs:{size:"small",label:"至"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.filters.endTime,callback:function(e){t.$set(t.filters,"endTime",e)},expression:"filters.endTime"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.authList},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jdOrderStatus",label:"审核状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.jdOrderStatus?a("span",[t._v(t._s("待审核"))]):1==e.row.jdOrderStatus?a("span",[t._v(t._s("审核通过"))]):a("span",[t._v(t._s("审核不通过"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"商品名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"score",label:"兑换币"}}),t._v(" "),a("el-table-column",{attrs:{prop:"openId",label:"下单人opid",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"收货人姓名",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"收货地址",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.provinceName+e.row.cityName+e.row.countryName+e.row.address))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"下单时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(new Date(e.row.createTime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.jdOrderStatus?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.modifyAuthOrder(e.row.id,"1")}}},[t._v("审核通过")]):t._e(),t._v(" "),0==e.row.jdOrderStatus?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.modifyAuthOrder(e.row.id,"2")}}},[t._v("审核不通过")]):a("span",[t._v("无")])]}}])})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"small",disabled:t.batchOperations},on:{click:function(e){t.modifyAuthOrder(t.ids,"1",!0)}}},[t._v("批量通过")]),t._v(" "),a("el-button",{staticClass:"btn-jump-to",attrs:{type:"primary"},on:{click:t.jumpTo}},[t._v("跳转")]),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("DjI5"),a("gFgq")},"data-v-68010e7c",null);e.default=r.exports},WK0P:function(t,e){},XN0F:function(t,e){},YhAe:function(t,e){},"Z+Fw":function(t,e){},"Zh/2":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:()=>({listLoading:!1,dialogTableVisible:!1,listType:"JD",listJD:[],listZJ:[],ProductIndex:"",headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},cateLvl1List:[{name:"全部",id:""}],cateLvl2List:[{name:"全部",id:""}],ruleForm:{type:"1",name:"",idx:"",product1Id:"",product1Name:"",image1:"",product2Id:"",product2Name:"",image2:"",product3Id:"",product3Name:"",image3:"",product4Id:"",product4Name:"",image4:""},rules:{name:[{required:!0,message:"请输入推荐位名称",trigger:"blur"}],idx:[{required:!0,message:"请输入排序值",trigger:"blur"}],product1Name:[{required:!0,message:"请选择商品",trigger:"change"}],image1:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product2Name:[{required:!0,message:"请选择商品",trigger:"change"}],image2:[{required:!0,message:"请上传图片",trigger:"change"}],product3Name:[{required:!0,message:"请选择商品",trigger:"change"}],image3:[{required:!0,message:"请上传图片",trigger:"change"}],product4Name:[{required:!0,message:"请选择商品",trigger:"change"}],image4:[{required:!0,message:"请上传图片",trigger:"change"}]},filters:{inputWithSelect:"",select:"",status:1,giftType:"",hasDelivery:"",keywords:"",cateLvl1:"",cateLvl2:"",productId:"",pageSize:5,pageNo:1,total:0},currentPage:1,selectProduct:{productId:"",productName:""}}),created(){this.getOneCategory(),this.getListJD(),this.getListZJ()},methods:{getListJD(){let t={status:this.filters.status,giftType:this.filters.giftType,hasDelivery:this.filters.hasDelivery,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchJD(t)},postSearchJD(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listJD",t,!0,t=>{"200000"==t.ret&&(this.listLoading=!1,this.listJD=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},getListZJ(){let t={status:this.filters.status,giftType:this.filters.giftType,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,productId:this.filters.productId,pageSize:this.filters.pageSize,currentPageNumber:this.filters.pageNo};this.postSearchZJ(t)},postSearchZJ(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listZJ",t,!0,t=>{"200000"==t.ret&&(console.log(t.data),this.listLoading=!1,this.listZJ=t.data.list,this.filters.total=t.data.page.count,this.filters.pageNo=t.data.page.pageNo)})},commitForm(){this.handleClick()},inputWithSelectChange(t){this.filters.keywords="",this.filters.productId=""},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.filters.cateLvl2="",this.cateLvl2List=[{name:"全部",id:""}],this.getTwoCategory()},getTwoCategory(){""!=this.filters.cateLvl1&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl1},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},chooseProduct(t){this.dialogTableVisible=!0,this.ProductIndex=t},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={type:1,name:this.ruleForm.name,idx:this.ruleForm.idx,recommendProducts:[{productId:this.ruleForm.product1Id,productName:this.ruleForm.product1Name,productImage:this.ruleForm.image1,idx:1},{productId:this.ruleForm.product2Id,productName:this.ruleForm.product2Name,productImage:this.ruleForm.image2,idx:2},{productId:this.ruleForm.product3Id,productName:this.ruleForm.product3Name,productImage:this.ruleForm.image3,idx:3},{productId:this.ruleForm.product4Id,productName:this.ruleForm.product4Name,productImage:this.ruleForm.image4,idx:4}]};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/recommend/saveOrModify",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnRecommend()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess1(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image1=s},handleAvatarSuccess2(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image2=s},handleAvatarSuccess3(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image3=s},handleAvatarSuccess4(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image4=s},returnRecommend(){this.$router.push({path:"/mall/recommend"})},handleSelectProduct(t){if(console.log(t),t){let e=t;this.selectProduct.productId=e.productId,this.selectProduct.productName=e.memo}},handleClick(t,e){this.filters.pageNo=1,this.currentPage=1,"JD"==this.listType?this.getListJD():"ZJ"==this.listType&&this.getListZJ()},jumpTo(){this.$emit("current-change")},handleCurrentChangeZJ(t){this.filters.pageNo=t,this.currentPage=t,this.getListZJ()},handleCurrentChangeJD(t){this.filters.pageNo=t,this.currentPage=t,this.getListJD()},confirmDialog(){this.ruleForm.product1Id==this.selectProduct.productId||this.ruleForm.product2Id==this.selectProduct.productId||this.ruleForm.product3Id==this.selectProduct.productId||this.ruleForm.product4Id==this.selectProduct.productId?this.$message({message:"已选择当前商品",type:"warning"}):(this.ruleForm["product"+this.ProductIndex+"Id"]=this.selectProduct.productId,this.ruleForm["product"+this.ProductIndex+"Name"]=this.selectProduct.productName,this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="")},cancelDialog(){this.$refs.JDTable.setCurrentRow(),this.$refs.ZJTable.setCurrentRow(),this.dialogTableVisible=!1,this.filters.select="",this.filters.productId="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.pageNo=1,this.currentPage=1,this.listType="JD",this.getListJD(),this.selectProduct.productName="",this.selectProduct.productId="",this.dialogTableVisible=!1}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-commend-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"120px"}},[a("div",{staticClass:"add-commend-form-container"},[a("el-form-item",{attrs:{label:"推荐位名称：",prop:"name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"排序值：",prop:"idx",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.idx,callback:function(e){t.$set(t.ruleForm,"idx",e)},expression:"ruleForm.idx"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"选择商品：",prop:"product1Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product1Name,callback:function(e){t.$set(t.ruleForm,"product1Name",e)},expression:"ruleForm.product1Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("1")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图1：",prop:"image1",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image1,callback:function(e){t.$set(t.ruleForm,"image1",e)},expression:"ruleForm.image1"}}),t._v(" "),a("el-upload",{staticClass:"main-product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess1}},[t.ruleForm.image1?a("img",{staticClass:"avatar",attrs:{width:"100",height:"34",src:t.ruleForm.image1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 710*240px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品2：",prop:"product2Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product2Name,callback:function(e){t.$set(t.ruleForm,"product2Name",e)},expression:"ruleForm.product2Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("2")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图2：",prop:"image2",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image2,callback:function(e){t.$set(t.ruleForm,"image2",e)},expression:"ruleForm.image2"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess2}},[t.ruleForm.image2?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品3：",prop:"product3Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product3Name,callback:function(e){t.$set(t.ruleForm,"product3Name",e)},expression:"ruleForm.product3Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("3")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图3：",prop:"image3",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image3,callback:function(e){t.$set(t.ruleForm,"image3",e)},expression:"ruleForm.image3"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess3}},[t.ruleForm.image3?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image3}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品4：",prop:"product4Name",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"",placeholder:"请选择商品"},model:{value:t.ruleForm.product4Name,callback:function(e){t.$set(t.ruleForm,"product4Name",e)},expression:"ruleForm.product4Name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(e){t.chooseProduct("4")}}},[t._v("选择商品")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"图4：",prop:"image4",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image4,callback:function(e){t.$set(t.ruleForm,"image4",e)},expression:"ruleForm.image4"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess4}},[t.ruleForm.image4?a("img",{staticClass:"avatar",attrs:{width:"100",height:"63",src:t.ruleForm.image4}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 230*144px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"add-commend-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("立即创建")]),t._v(" "),a("el-button",{on:{click:t.returnRecommend}},[t._v("取消")])],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"选择商品",visible:t.dialogTableVisible,width:"850px"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.filters[t.filters.select],callback:function(e){t.$set(t.filters,t.filters.select,e)},expression:"filters[filters.select]"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.inputWithSelectChange},slot:"prepend",model:{value:t.filters.select,callback:function(e){t.$set(t.filters,"select",e)},expression:"filters.select"}},[a("el-option",{attrs:{label:"商品名称",value:"keywords"}}),t._v(" "),a("el-option",{attrs:{label:"商品ID",value:"productId"}})],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.cateLvl1,callback:function(e){t.$set(t.filters,"cateLvl1",e)},expression:"filters.cateLvl1"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.filters.cateLvl2,callback:function(e){t.$set(t.filters,"cateLvl2",e)},expression:"filters.cateLvl2"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")])],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.listType,callback:function(e){t.listType=e},expression:"listType"}},[a("el-tab-pane",{attrs:{label:"京东商品",name:"JD"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"JDTable",attrs:{data:t.listJD,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeJD}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"自建商品",name:"ZJ"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"ZJTable",attrs:{data:t.listZJ,"highlight-current-row":""},on:{"current-change":t.handleSelectProduct}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"memo",label:"商品名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{property:"cate4Name",label:"四级分类"}})],1),t._v(" "),a("div",{staticClass:"footer-toolbar clearfix"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.filters.pageSize,total:t.filters.total},on:{"current-change":t.handleCurrentChangeZJ}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"30px","text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirmDialog}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("cb5k"),a("wbkj")},"data-v-e0916758",null);e.default=r.exports},"aem/":function(t,e){},cBop:function(t,e){},cb5k:function(t,e){},e53A:function(t,e){},eOpr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",props:["id"],data:()=>({headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},productList:[{name:"全部",id:""}],productTypeList:[],cateLvl1List:[{name:"全部",id:-1}],cateLvl2List:[{name:"全部",id:-1}],cateLvl3List:[{name:"全部",id:-1}],cateLvl4List:[{name:"全部",id:-1}],ruleForm:{id:"",productId:"",saleNum:"",createTime:"",memo:"",image:"",giftType:"",cateLvl1Id:"",cateLvl2Id:"",cateLvl3Id:"",cateLvl4Id:"",score:"",quantity:"",url:"",status:"1",isHostGood:"0"},rules:{memo:[{required:!0,message:"请输入商品名称",trigger:"blur"}],image:[{required:!0,message:"请上传主图",trigger:"change"}],giftType:[{required:!0,message:"请选择商品类型",trigger:"change"}],cateLvl1Id:[{required:!0,message:"请选择一级分类",trigger:"change"}],cateLvl2Id:[{required:!0,message:"请选择二级分类",trigger:"change"}],cateLvl3Id:[{required:!0,message:"请选择三级分类",trigger:"change"}],cateLvl4Id:[{required:!0,message:"请选择四级分类",trigger:"change"}],score:[{required:!0,message:"请输入兑换值",trigger:"blur"}],quantity:[{required:!0,message:"请输入库存",trigger:"blur"}],url:[{required:!0,message:"请上传商品详情",trigger:"change"}]}}),created(){console.log(this.id),this.getProductType(),this.getOneCategory(),this.getProductDetail()},methods:{getProductDetail(){this.$request.post("/sc/saotx/mall/product/detail",{id:this.id},!0,t=>{"200000"==t.ret&&(this.ruleForm.id=t.data.id,this.ruleForm.productId=t.data.productId,this.ruleForm.saleNum=t.data.saleNum,this.ruleForm.createTime=new Date(t.data.createTime).Format("yyyy-MM-dd hh:mm:ss"),this.ruleForm.memo=t.data.memo,this.ruleForm.image=t.data.image,this.ruleForm.giftType=t.data.giftType,this.ruleForm.cateLvl1Id=t.data.cateLvl1Id,this.ruleForm.cateLvl2Id=t.data.cateLvl2Id,this.ruleForm.cateLvl3Id=t.data.cateLvl3Id,this.ruleForm.cateLvl4Id=t.data.cateLvl4Id,this.getTwoCategory(),this.getThreeCategory(),this.getFourCategory(),this.ruleForm.score=t.data.score,this.ruleForm.quantity=t.data.quantity,this.ruleForm.url=t.data.url,this.ruleForm.status=t.data.status+"",this.ruleForm.isHostGood=t.data.isHostGood+"")})},getProductType(){this.$request.post("/sc/saotx/mall/giftTypeMap",{},!0,t=>{"200000"==t.ret&&(this.productTypeList=[...this.productTypeList,...t.data])})},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.ruleForm.cateLvl2Id=-1,this.cateLvl2List=[{name:"全部",id:-1}],this.ruleForm.cateLvl3Id=-1,this.cateLvl3List=[{name:"全部",id:-1}],this.ruleForm.cateLvl4Id=-1,this.cateLvl4List=[{name:"全部",id:-1}],this.getTwoCategory()},getTwoCategory(){-1!=this.ruleForm.cateLvl1Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl1Id},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},selectBrand2(){this.ruleForm.cateLvl3Id=-1,this.cateLvl3List=[{name:"全部",id:-1}],this.ruleForm.cateLvl4Id=-1,this.cateLvl4List=[{name:"全部",id:-1}],this.getThreeCategory()},getThreeCategory(){-1!=this.ruleForm.cateLvl2Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl2Id},!0,t=>{"200000"==t.ret&&(this.cateLvl3List=[...this.cateLvl3List,...t.data])})},selectBrand3(){this.ruleForm.cateLvl4Id=-1,this.cateLvl4List=[{name:"全部",id:-1}],this.getFourCategory()},getFourCategory(){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl3Id},!0,t=>{"200000"==t.ret&&(this.cateLvl4List=[...this.cateLvl4List,...t.data])})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={id:this.ruleForm.id,cateLvl1Id:this.ruleForm.cateLvl1Id,cateLvl2Id:this.ruleForm.cateLvl2Id,cateLvl3Id:this.ruleForm.cateLvl3Id,cateLvl4Id:this.ruleForm.cateLvl4Id,giftType:this.ruleForm.giftType,image:this.ruleForm.image,memo:this.ruleForm.memo,quantity:this.ruleForm.quantity,score:this.ruleForm.score,status:this.ruleForm.status,url:this.ruleForm.url,isHostGood:this.ruleForm.isHostGood};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/product/saveOrModifyZJ",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnZJProduct()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image=s},handleAvatarSuccessUrl(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.url=s},returnZJProduct(){this.$router.push({path:"/mall/product/zj"})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"edit-product-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"100px"}},[a("div",{staticClass:"edit-product-form-container"},[a("el-form-item",{attrs:{label:"商品ID：",prop:"productId",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.ruleForm.productId,callback:function(e){t.$set(t.ruleForm,"productId",e)},expression:"ruleForm.productId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销量：",prop:"saleNum",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.ruleForm.saleNum,callback:function(e){t.$set(t.ruleForm,"saleNum",e)},expression:"ruleForm.saleNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"创建时间：",prop:"updateTime",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.ruleForm.createTime,callback:function(e){t.$set(t.ruleForm,"createTime",e)},expression:"ruleForm.createTime"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品名称：",prop:"memo",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.memo,callback:function(e){t.$set(t.ruleForm,"memo",e)},expression:"ruleForm.memo"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"主图：",prop:"image",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image,callback:function(e){t.$set(t.ruleForm,"image",e)},expression:"ruleForm.image"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.ruleForm.image?a("img",{staticClass:"avatar",attrs:{width:"100",height:"75",src:t.ruleForm.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 750*468px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"商品类型：",prop:"giftType"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.giftType,callback:function(e){t.$set(t.ruleForm,"giftType",e)},expression:"ruleForm.giftType"}},t._l(t.productTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类：",prop:"cateLvl1Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.ruleForm.cateLvl1Id,callback:function(e){t.$set(t.ruleForm,"cateLvl1Id",e)},expression:"ruleForm.cateLvl1Id"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl2Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.ruleForm.cateLvl2Id,callback:function(e){t.$set(t.ruleForm,"cateLvl2Id",e)},expression:"ruleForm.cateLvl2Id"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl3Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand3},model:{value:t.ruleForm.cateLvl3Id,callback:function(e){t.$set(t.ruleForm,"cateLvl3Id",e)},expression:"ruleForm.cateLvl3Id "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl4Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.cateLvl4Id,callback:function(e){t.$set(t.ruleForm,"cateLvl4Id",e)},expression:"ruleForm.cateLvl4Id"}},t._l(t.cateLvl4List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"兑换值：",prop:"score",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.score,callback:function(e){t.$set(t.ruleForm,"score",e)},expression:"ruleForm.score"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"库存：",prop:"quantity",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.quantity,callback:function(e){t.$set(t.ruleForm,"quantity",e)},expression:"ruleForm.quantity"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品详情：",prop:"url",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.url,callback:function(e){t.$set(t.ruleForm,"url",e)},expression:"ruleForm.url"}}),t._v(" "),a("el-upload",{staticClass:"product-url",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccessUrl}},[t.ruleForm.url?a("img",{staticClass:"avatar",attrs:{width:"100",height:"100",src:t.ruleForm.url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 宽750px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status",size:"small"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("上架")]),t._v(" "),a("el-radio",{attrs:{label:"-1"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("下架")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"是否热门：",prop:"isHostGood",size:"small"}},[a("el-radio",{attrs:{label:"0"},model:{value:t.ruleForm.isHostGood,callback:function(e){t.$set(t.ruleForm,"isHostGood",e)},expression:"ruleForm.isHostGood"}},[t._v("否")]),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.isHostGood,callback:function(e){t.$set(t.ruleForm,"isHostGood",e)},expression:"ruleForm.isHostGood"}},[t._v("是")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"edit-product-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.returnZJProduct}},[t._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("JO+z"),a("8u2C")},"data-v-d7d0a992",null);e.default=r.exports},ehVw:function(t,e,a){"use strict";var s={props:["editData","shareConf"],data:()=>({uploadApi:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")}}),created(){console.log(this.editData[0])},methods:{uploadSuccess(t,e,a){let s=t.data.accessUrl;this.$emit("shareChange",{url:s})},uploadError(t){alert("图片上传失败")},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type||"image/bmp"===t.type||"image/gif"===t.type;return e||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),e}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-share"},[a("el-card",{staticClass:"card"},[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("h3",[t._v("编辑图片")])]),t._v(" "),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分享标题："}},[a("el-input",{attrs:{type:"text",maxlength:15},model:{value:t.shareConf.shareTitle,callback:function(e){t.$set(t.shareConf,"shareTitle",e)},expression:"shareConf.shareTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分享说明："}},[a("el-input",{staticStyle:{width:"70%"},attrs:{maxlength:"30",type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.shareConf.shareDesc,callback:function(e){t.$set(t.shareConf,"shareDesc",e)},expression:"shareConf.shareDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分享图标："}},[a("div",[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.editData[0].url}})]),t._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:t.uploadApi,headers:t.headerObj,"show-file-list":!1,"on-success":t.uploadSuccess,"before-upload":t.beforeAvatarUpload,"on-error":t.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("更换图片")])],1),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("* 图片建议尺寸为 91*91px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1)])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("O6o9")},"data-v-5a1fd758",null);e.a=r.exports},g5AA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",props:["id"],data:()=>({productList:[{name:"全部",id:""}],productTypeList:[],cateLvl1List:[{name:"全部",id:-1}],cateLvl2List:[{name:"全部",id:-1}],cateLvl3List:[{name:"全部",id:-1}],cateLvl4List:[{name:"全部",id:-1}],basicMsg:{imagePath:"",name:"",sku:"",state:"",brandName:"",productArea:"",saleUnit:"",category:"",jdPrice:"",price:""},ruleForm:{id:"",productId:"",saleNum:"",createTime:"",memo:"",giftType:"",cateLvl1Id:"",cateLvl2Id:"",cateLvl3Id:"",cateLvl4Id:"",score:"",deliveryScore:"",status:"1",isHostGood:"0"},rules:{memo:[{required:!0,message:"请输入商品名称",trigger:"blur"}],giftType:[{required:!0,message:"请选择商品类型",trigger:"change"}],cateLvl1Id:[{required:!0,message:"请选择一级分类",trigger:"change"}],cateLvl2Id:[{required:!0,message:"请选择二级分类",trigger:"change"}],cateLvl3Id:[{required:!0,message:"请选择三级分类",trigger:"change"}],cateLvl4Id:[{required:!0,message:"请选择四级分类",trigger:"change"}],score:[{required:!0,message:"请输入兑换值",trigger:"blur"}],deliveryScore:[{required:!0,message:"请输入运费",trigger:"blur"}]}}),created(){this.getProductType(),this.getOneCategory(),this.getJDProductDetail()},methods:{getJDProductDetail(){this.$request.post("/sc/saotx/mall/product/detail",{id:this.id},!0,t=>{if("200000"==t.ret){let e={sku:t.data.outSourceId};this.queryJDSKU(e),this.ruleForm.id=t.data.id,this.ruleForm.productId=t.data.productId,this.ruleForm.saleNum=t.data.saleNum,this.ruleForm.createTime=new Date(t.data.createTime).Format("yyyy-MM-dd hh:mm:ss"),this.ruleForm.memo=t.data.memo,this.ruleForm.giftType=t.data.giftType,this.ruleForm.cateLvl1Id=t.data.cateLvl1Id,this.ruleForm.cateLvl2Id=t.data.cateLvl2Id,this.ruleForm.cateLvl3Id=t.data.cateLvl3Id,this.ruleForm.cateLvl4Id=t.data.cateLvl4Id,this.getTwoCategory(),this.getThreeCategory(),this.getFourCategory(),this.ruleForm.score=t.data.score,this.ruleForm.deliveryScore=t.data.deliveryScore,this.ruleForm.status=t.data.status+"",this.ruleForm.isHostGood=t.data.isHostGood+""}})},queryJDSKU(t){this.$request.post("/sc/saotx/mall/product/queryJDSKU",t,!0,t=>{"200000"==t.ret?(this.basicMsg.imagePath=t.data.propertiesObject.imagePath,this.basicMsg.name=t.data.propertiesObject.name,this.basicMsg.sku=t.data.propertiesObject.sku,this.basicMsg.state=t.data.propertiesObject.state,this.basicMsg.brandName=t.data.propertiesObject.brandName,this.basicMsg.productArea=t.data.propertiesObject.productArea,this.basicMsg.saleUnit=t.data.propertiesObject.saleUnit,this.basicMsg.category=t.data.propertiesObject.category,this.basicMsg.jdPrice=t.data.propertiesObject.jdPrice,this.basicMsg.price=t.data.propertiesObject.price,this.ruleForm.score=t.data.propertiesObject.score):this.$message({message:t.message,type:"warning"})})},getProductList(){this.$request.post("/sc/saotx/mall/statusMap",{},!0,t=>{"200000"==t.ret&&(this.productList=[...this.productList,...t.data])})},getProductType(){this.$request.post("/sc/saotx/mall/giftTypeMap",{},!0,t=>{"200000"==t.ret&&(this.productTypeList=[...this.productTypeList,...t.data])})},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.ruleForm.cateLvl2Id=-1,this.cateLvl2List=[{name:"全部",id:-1}],this.ruleForm.cateLvl3Id=-1,this.cateLvl3List=[{name:"全部",id:-1}],this.ruleForm.cateLvl4Id=-1,this.cateLvl4List=[{name:"全部",id:-1}],this.getTwoCategory()},getTwoCategory(){-1!=this.ruleForm.cateLvl1Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl1Id},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},selectBrand2(){this.ruleForm.cateLvl3Id=-1,this.cateLvl3List=[{name:"全部",id:-1}],this.ruleForm.cateLvl4Id=-1,this.cateLvl4List=[{name:"全部",id:-1}],this.getThreeCategory()},getThreeCategory(){-1!=this.ruleForm.cateLvl2Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl2Id},!0,t=>{"200000"==t.ret&&(this.cateLvl3List=[...this.cateLvl3List,...t.data])})},selectBrand3(){this.ruleForm.cateLvl4Id=-1,this.cateLvl4List=[{name:"全部",id:-1}],this.getFourCategory()},getFourCategory(){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl3Id},!0,t=>{"200000"==t.ret&&(this.cateLvl4List=[...this.cateLvl4List,...t.data])})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={cateLvl1Id:this.ruleForm.cateLvl1Id,cateLvl2Id:this.ruleForm.cateLvl2Id,cateLvl3Id:this.ruleForm.cateLvl3Id,cateLvl4Id:this.ruleForm.cateLvl4Id,deliveryScore:this.ruleForm.deliveryScore,giftType:this.ruleForm.giftType,id:this.id,image:this.basicMsg.imagePath,memo:this.ruleForm.memo,outSourceId:this.basicMsg.sku,price:this.basicMsg.price,score:this.ruleForm.score,status:this.ruleForm.status,isHostGood:this.ruleForm.isHostGood};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/product/saveOrModifyJD",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnJDProduct()):this.$message({message:t.message,type:"warning"})},t=>{})},returnJDProduct(){this.$router.push({path:"/mall/product/jd"})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"edit-jd-product-container"},[a("div",{staticClass:"edit-jd-product-msg-container"},[a("div",{staticClass:"title"},[t._v("基本信息：")]),t._v(" "),a("div",{staticClass:"edit-jd-product-msg"},[a("div",{staticClass:"left-side"},[t._m(0),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.basicMsg.imagePath,width:"200",height:"200",alt:""}})])]),t._v(" "),a("div",{staticClass:"right-side"},[a("div",{staticClass:"line",staticStyle:{width:"100%"}},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("商品名称："+t._s(t.basicMsg.name))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("SKU："+t._s(t.basicMsg.sku))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("上下架状态："+t._s(1==t.basicMsg.state?"上架中":"下架中"))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("品牌："+t._s(t.basicMsg.brandName))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("产地： "+t._s(t.basicMsg.productArea)+" ")]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("销售单位： "+t._s(t.basicMsg.saleUnit)+" ")]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("类别："+t._s(t.basicMsg.category))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("京东价格："+t._s(t.basicMsg.jdPrice))]),t._v(" "),a("div",{staticClass:"line"},[a("span",{staticClass:"imp"},[t._v("*")]),t._v("内部价格："+t._s(t.basicMsg.price))])])])]),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"100px"}},[a("div",{staticClass:"edit-jd-product-form-container"},[a("el-form-item",{attrs:{label:"商品ID：",prop:"productId",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.ruleForm.productId,callback:function(e){t.$set(t.ruleForm,"productId",e)},expression:"ruleForm.productId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销量：",prop:"saleNum",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.ruleForm.saleNum,callback:function(e){t.$set(t.ruleForm,"saleNum",e)},expression:"ruleForm.saleNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"创建时间：",prop:"updateTime",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.ruleForm.createTime,callback:function(e){t.$set(t.ruleForm,"createTime",e)},expression:"ruleForm.createTime"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品名称：",prop:"memo",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.memo,callback:function(e){t.$set(t.ruleForm,"memo",e)},expression:"ruleForm.memo"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"商品类型：",prop:"giftType"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.giftType,callback:function(e){t.$set(t.ruleForm,"giftType",e)},expression:"ruleForm.giftType"}},t._l(t.productTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类：",prop:"cateLvl1Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.ruleForm.cateLvl1Id,callback:function(e){t.$set(t.ruleForm,"cateLvl1Id",e)},expression:"ruleForm.cateLvl1Id"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl2Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.ruleForm.cateLvl2Id,callback:function(e){t.$set(t.ruleForm,"cateLvl2Id",e)},expression:"ruleForm.cateLvl2Id"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl3Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand3},model:{value:t.ruleForm.cateLvl3Id,callback:function(e){t.$set(t.ruleForm,"cateLvl3Id",e)},expression:"ruleForm.cateLvl3Id "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl4Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.cateLvl4Id,callback:function(e){t.$set(t.ruleForm,"cateLvl4Id",e)},expression:"ruleForm.cateLvl4Id"}},t._l(t.cateLvl4List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"兑换值：",prop:"score",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",disabled:""},model:{value:t.ruleForm.score,callback:function(e){t.$set(t.ruleForm,"score",e)},expression:"ruleForm.score"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"运费：",prop:"deliveryScore",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.deliveryScore,callback:function(e){t.$set(t.ruleForm,"deliveryScore",e)},expression:"ruleForm.deliveryScore"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status",size:"small"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("上架")]),t._v(" "),a("el-radio",{attrs:{label:"-1"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("下架")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"是否热门：",prop:"isHostGood",size:"small"}},[a("el-radio",{attrs:{label:"0"},model:{value:t.ruleForm.isHostGood,callback:function(e){t.$set(t.ruleForm,"isHostGood",e)},expression:"ruleForm.isHostGood"}},[t._v("否")]),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.isHostGood,callback:function(e){t.$set(t.ruleForm,"isHostGood",e)},expression:"ruleForm.isHostGood"}},[t._v("是")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"edit-jd-product-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.returnJDProduct}},[t._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line"},[e("span",{staticClass:"imp"},[this._v("*")]),this._v("主图：")])}]};var r=a("VU/8")(s,i,!1,function(t){a("lJq9"),a("L8De")},"data-v-6f3e9791",null);e.default=r.exports},gFgq:function(t,e){},"gNT+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("G0J2");var s={data:()=>({activeName:"home",addActParams:{cssStyle:"",id:"",gameId:"",gameName:"",banner:"",gameDesc:"",score:"",times:""},editorOption:{modules:{toolbar:[[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike",,"blockquote"],[{color:[]},{background:[]},{align:[]}]]},placeholder:"请输入活动说明"},addActRules:{name:[{required:!0,message:"请输入页面名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},configItem:{title:"",description:"",headerImgUrl:"http://qrmkt.oss-cn-beijing.aliyuncs.com/new_platform/tigger-title.png",bgImgUrl:"http://qrmkt.oss-cn-beijing.aliyuncs.com/scoremall/activity/tigger-bg.png",gameBg:"http://qrmkt.oss-cn-beijing.aliyuncs.com/scoremall/activity/pan.png",gameBtn:"http://qrmkt.oss-cn-beijing.aliyuncs.com/new_platform/tigger-btn.png",gameBtnActive:"http://qrmkt.oss-cn-beijing.aliyuncs.com/new_platform/tigger-btn.png",drawImgUrl:"http://qrmkt.oss-cn-beijing.aliyuncs.com/new_platform/hasPrice.png",drawBtnLeftUrl:"http://qrmkt.oss-cn-beijing.aliyuncs.com/new_platform/hasPrice-left.png",drawBtnRightUrl:"http://qrmkt.oss-cn-beijing.aliyuncs.com/new_platform/hasPrice-right.png",cryImgUrl:"http://qrmkt.oss-cn-beijing.aliyuncs.com/new_platform/notPrice.png",cryBtnLeftUrl:"http://qrmkt.oss-cn-beijing.aliyuncs.com/new_platform/notPrice-left.png",cryBtnRightUrl:"http://qrmkt.oss-cn-beijing.aliyuncs.com/new_platform/notPrice-right.png"},uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},showEditConIndex:1,priceList:[],dialogVisible:!1,aName:"",aList:"",aType:"",aTypeList:[],aTypeDe:"",aTypeDeList:[{name:"虚拟",code:1},{name:"实物",code:2},{name:"红包",code:3},{name:"积分",code:4}],tableData:[],selectedPriceList:[],loading:!1,total:10,max:3,page:1,addQuantityShow:!1,addQ:0,awardId:""}),computed:{},created(){var t=parseInt(this.$route.query.id);this.addActParams.id=t,this.getActDetail()},methods:{spliceLength(t){var e=(t.shopQuantity+"").length;t.quantity.length>e&&(t.quantity=t.quantity.slice(0,e))},spliceLength1(t){t.length>6&&(this.addQ=t.slice(0,6))},seam(t){0!=t.allquantity.length?t.quantity=t.allquantity:t.quantity=0},getActDetail(){this.addActParams.id&&this.$request.post("/sc/saotx/game/getGameById",{id:this.addActParams.id},!0,t=>{200===t.code?(this.addActParams=t.context,this.priceList=t.context.items||[],this.priceList.forEach(t=>{t.curId=t.id,t.abled=!0,t.id=""}),t.context.cssStyle&&(this.configItem=JSON.parse(t.context.cssStyle))):this.$message.error(t.message)})},searchAward(){var t=this;this.$request.post("/sc/saotx/mall/product/listActs",{pageNo:t.page,pageSize:t.max,productName:t.aName,giftType:t.aTypeDe},!0,e=>{"200000"===e.ret?(this.tableData=e.data.list||[],t.total=e.data.page.count):this.$message.error(e.message)})},selectAward(){var t=this;this.aName="",this.aTypeDe="",this.dialogVisible=!0,this.$request.post("/sc/saotx/mall/product/listActs",{pageNo:t.page,pageSize:t.max,productName:this.aName,giftType:this.aTypeDe},!0,e=>{"200000"===e.ret?(this.tableData=e.data.list||[],t.total=e.data.page.count):this.$message.error(e.message)})},myCallback(t){this.page=t,this.selectAward()},addQuantity(t){this.addQuantityShow=!0,this.addQ=0,this.awardId=this.priceList[t].curId},sureAdd(){this.$request.post("/sc/saotx/game/addQuality",{id:this.awardId,shopQuantity:parseInt(this.addQ)},!0,t=>{200===t.code?(this.addQuantityShow=!1,this.getActDetail()):(this.$message.error(t.msg),this.addQuantityShow=!1)})},handleSelectionChange(t){this.selectedPriceList=t},sureSelect(){let t=[];this.priceList.forEach(e=>{t.push(e.productId)}),this.selectedPriceList.forEach((e,a)=>{-1==t.indexOf(e.productId)?(this.priceList.push({orgId:e.orgId,gameId:this.addActParams.gameId,gameName:this.addActParams.gameName,productId:e.productId,productName:e.productName,image:e.image,status:this.addActParams.status,probability:"",quantity:0,type:e.giftType,score:e.score,bingo_image:e.image,shopQuantity:e.shopQuantity,curId:1,abled:!1}),this.dialogVisible=!1):this.$message.warning("请不要选择重复的奖品")})},remove(t){this.priceList.splice(t,1)},checkAll(){var t=0;if(this.priceList.forEach(e=>{t+=parseInt(e.probability)}),t>100)return this.$message.error("总中奖概率不能超过100%"),t},saveActTpl(){if(!this.configItem.title)return this.$message.warning("请输入页面名称");if(!this.addActParams.gameName)return this.$message.warning("请输入活动名称");if(!this.addActParams.banner)return this.$message.warning("请添加活动图片");if(!this.addActParams.times)return this.$message.warning("请输入活动次数");if(!this.addActParams.gameDesc)return this.$message.warning("请输入活动说明");if(0==this.priceList.length)return this.$message.warning("请选择奖品");if(this.priceList.length<3)return this.$message.warning("请最少选择三种奖品");var t=1,e=1;return this.priceList.forEach(a=>{""===a.quantity||a.quantity<0?t=0:(""===a.probability||a.probability<0)&&(e=0)}),t?e?this.checkAll()?1:(this.addActParams.cssStyle=JSON.stringify(this.configItem),this.priceList.forEach((t,e)=>{t.score=parseInt(t.score),t.times=parseInt(t.times)}),this.addActParams.items=this.priceList,void this.$request.post("/sc/saotx/game/saveGame",this.addActParams,!0,t=>{if("200"!=t.code)this.$message.error(t.message);else{this.$message.success("保存成功!"),this.getActDetail();var e=this;setTimeout(()=>{e.$router.push({path:"/mall/score"})},1e3)}})):this.$message.warning("请输入奖品的中奖概率"):this.$message.warning("请输入奖品数量")},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},upGameImgSuccess(t){if("200000"===t.ret)return this.configItem.gameBg=t.data.accessUrl;this.$message.error(t.message)},upGameBtnSuccess(t){if("200000"===t.ret)return this.configItem.gameBtn=t.data.accessUrl;this.$message.error(t.message)},upGameBtnActiveSuccess(t){if("200000"===t.ret)return this.configItem.gameBtnActive=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnRightSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnRightUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnLeftSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnLeftUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnRightSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnRightUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.drawImgUrl=t.data.accessUrl;this.$message.error(t.message)},upBanner(t){if("200000"===t.ret)return this.addActParams.banner=t.data.accessUrl;this.$message.error(t.message)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.configItem.title))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg bg-home",style:{backgroundImage:"url("+t.configItem.bgImgUrl+")"},on:{click:function(e){t.showEditConIndex=1}}}),t._v(" "),a("div",{staticClass:"game-con"},[a("img",{attrs:{src:t.configItem.gameBg,alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"game-btn"},[a("img",{attrs:{src:t.configItem.gameBtn,alt:""},on:{click:function(e){t.showEditConIndex=4}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("div",{staticClass:"first-set"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"页面名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入页面名称",maxLength:"15"},model:{value:t.configItem.title,callback:function(e){t.$set(t.configItem,"title",e)},expression:"configItem.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"页面说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入页面描述",maxlength:"20",resize:"none"},model:{value:t.configItem.description,callback:function(e){t.$set(t.configItem,"description",e)},expression:"configItem.description"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("底盘：")]),t._v(" "),a("div",{staticClass:"img-con pan-img-con"},[a("img",{attrs:{src:t.configItem.gameBg,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upGameImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("初始状态：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.gameBtn,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upGameBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("按下效果：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.gameBtnActive,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upGameBtnActiveSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*890px,格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 424*225px,格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*2008px,格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 448*126px,格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("div",{staticClass:"price-alert"},[a("img",{staticClass:"pic",attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("p",[t._v("恭喜您获得双肩包")]),t._v(" "),a("div",{staticClass:"price-left",style:{backgroundImage:"url("+t.configItem.drawBtnLeftUrl+")"}},[t._v("立即领取")]),t._v(" "),a("div",{staticClass:"price-right",style:{backgroundImage:"url("+t.configItem.drawBtnRightUrl+")"}},[t._v("再玩一次")])])])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖背景:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.drawImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 480*480px,格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("左边按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.drawBtnLeftUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnLeftSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 195*64px,格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("右边按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.drawBtnRightUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnRightSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 195*64px,格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("div",{staticClass:"price-alert not-price-alert"},[a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("p",{staticClass:"cry-text"},[t._v("大奖与您插肩而过\n                  \t\t"),a("br"),t._v("\n                  \t\t请再接再励\n                  \t")]),t._v(" "),a("div",{staticClass:"price-right",style:{backgroundImage:"url("+t.configItem.cryBtnRightUrl+")"}},[t._v("再玩一次")])])])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("背景:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为480*480px,格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryBtnRightUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnRightSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 195*64px,格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动设置",name:"set"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"phone-con-big"},[a("div",{staticClass:"content phone last-phone",style:{backgroundImage:"url("+t.configItem.bgImgUrl+")"}},[a("div",{staticClass:"phone-fixed"},[a("div",{staticClass:"bg bg-home-last",style:{backgroundImage:"url("+t.configItem.gameBg+")"}},[a("div",{staticClass:"game-content"},[a("div",{staticClass:"rule-bg"},[a("div",{staticClass:"rule-title"},[t._v("活动规则")]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.addActParams.gameDesc)}})])])]),t._v(" "),a("div",{staticClass:"game-btn last-game-btn"},[a("img",{attrs:{src:t.configItem.gameBtn,alt:""}})])])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("div",{staticClass:"second-set"},[a("div",{staticClass:"title"},[t._v("基础设置")]),t._v(" "),a("div",{staticClass:"base-set"},[a("span",{staticClass:"require-icon"},[t._v("*")]),t._v("活动名称： "),a("el-input",{staticClass:"act-name",attrs:{placeholder:"请输入活动名称",size:"small",maxLength:"10"},model:{value:t.addActParams.gameName,callback:function(e){t.$set(t.addActParams,"gameName",e)},expression:"addActParams.gameName"}}),t._v(" "),a("br"),a("br"),a("br"),t._v(" "),a("span",{staticClass:"require-icon"},[t._v("*")]),t._v("活动图片：\n        \t\t\t"),a("div",{staticClass:"act-img"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBanner,"show-file-list":!1}},[a("div",{staticClass:"addIcon"},[t._v("+")]),t._v(" "),""!=t.addActParams.banner?a("img",{staticClass:"bannerUrl",attrs:{src:t.addActParams.banner,alt:""}}):t._e()])],1),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*270px,格式为jpg\\bmp\\png\\gif")]),t._v(" "),a("br"),a("br"),a("br"),t._v("\n        \t\t\t消耗积分："),a("el-input",{staticClass:"act-score",attrs:{placeholder:"请输入需要消耗的积分",size:"small",maxLength:"4"},model:{value:t.addActParams.score,callback:function(e){t.$set(t.addActParams,"score",e)},expression:"addActParams.score"}}),t._v("积分\t\n        \t\t\t"),a("br"),a("span",{staticClass:"space"}),a("span",[t._v("（用户参与活动每次需要消耗的积分数）")]),t._v(" "),a("br"),a("br"),a("br"),t._v(" "),a("span",{staticClass:"require-icon"},[t._v("*")]),t._v("参与次数： 每人每天可参与 "),a("el-input",{staticClass:"act-num",attrs:{size:"small",maxLength:"4"},model:{value:t.addActParams.times,callback:function(e){t.$set(t.addActParams,"times",e)},expression:"addActParams.times"}}),t._v(" 次\n        \t\t\t"),a("br"),a("br"),a("br"),t._v(" "),a("span",{staticClass:"require-icon"},[t._v("*")]),t._v("活动说明： \n        \t\t\t"),a("quill-editor",{ref:"myTextEditor",staticClass:"edit-input",attrs:{options:t.editorOption,placeholder:"请输入活动说明"},model:{value:t.addActParams.gameDesc,callback:function(e){t.$set(t.addActParams,"gameDesc",e)},expression:"addActParams.gameDesc"}}),t._v(" "),a("div",{staticClass:"title award-title"},[t._v("奖项设置")]),t._v(" "),a("br"),a("br"),t._v(" "),a("span",{staticClass:"require-icon"},[t._v("*")]),t._v("选择奖品： "),a("el-button",{staticClass:"select-award",attrs:{type:"info",plain:""},on:{click:t.selectAward}},[t._v("+")]),a("span",[t._v("（最少配置三种奖品）")]),t._v(" "),a("el-dialog",{attrs:{title:"选择奖品",visible:t.dialogVisible,width:"70%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"search-con"},[t._v("\n\t\t\t\t\t  \t礼品名称：  \n\t\t\t\t\t  \t"),a("el-input",{staticClass:"search-name",attrs:{size:"small",placeholder:"请输入奖品名称"},model:{value:t.aName,callback:function(e){t.aName=e},expression:"aName"}}),t._v("\n\t\t\t\t\t\t    礼品类型：\n\t\t\t\t\t\t"),a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"small"},model:{value:t.aTypeDe,callback:function(e){t.aTypeDe=e},expression:"aTypeDe"}},t._l(t.aTypeDeList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("br"),a("br"),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.searchAward}},[t._v("查询")]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productId",label:"礼品ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"礼品名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"image",label:"礼品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.image,"min-width":"100",height:"70"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"giftType",label:"礼品分类"}})],1),t._v(" "),a("el-pagination",{staticClass:"pagination-css",attrs:{layout:"total,prev, pager, next,jumper",background:"",total:t.total,"page-size":t.max},on:{"current-change":t.myCallback}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureSelect}},[t._v("确 定")])],1)]),t._v(" "),a("br"),a("br"),t._v(" "),a("div",[t._v("所选礼品：")]),t._v(" "),a("ul",t._l(t.priceList,function(e,s){return a("li",{key:s},[a("div",[a("img",{attrs:{src:e.image,alt:""}})]),t._v(" "),a("div",[t._v(t._s(e.productName))]),t._v(" "),a("div",[a("div",[t._v("奖品数量："),a("input",{directives:[{name:"model",rawName:"v-model",value:e.allquantity,expression:"item.allquantity"}],staticClass:"award-num",attrs:{type:"number",disabled:e.abled,min:"1"},domProps:{value:e.allquantity},on:{input:[function(a){a.target.composing||t.$set(e,"allquantity",a.target.value)},function(a){t.seam(e)}]}}),t._v("个")]),t._v(" "),a("div",{staticClass:"award-has"},[t._v("剩余"+t._s(e.quantity)+"个")])]),t._v(" "),a("div",[a("span",{staticClass:"require-icon"},[t._v("*")]),t._v("中奖概率："),a("input",{directives:[{name:"model",rawName:"v-model",value:e.probability,expression:"item.probability"}],staticClass:"award-percent",attrs:{type:"number",max:"100",min:"0"},domProps:{value:e.probability},on:{change:t.checkAll,input:function(a){a.target.composing||t.$set(e,"probability",a.target.value)}}}),t._v("%")]),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.remove(s)}}},[t._v("删除")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addQuantity(s)}}},[t._v("增库")])],1),t._v(" "),a("el-dialog",{attrs:{title:"增加库存",visible:t.addQuantityShow,width:"50%"},on:{"update:visible":function(e){t.addQuantityShow=e}}},[t._v("\n\t\t\t\t\t  \t\t\t\t增加库存： "),a("el-input",{staticClass:"act-name",attrs:{type:"number",placeholder:"请输入增加数量",size:"small",oninput:"if(value.length > 5)value = value.slice(0, 5)"},model:{value:t.addQ,callback:function(e){t.addQ=e},expression:"addQ"}}),t._v(" 件\n\t\t\t\t\t  \t\t\t\t"),a("br"),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addQuantityShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureAdd}},[t._v("确 定")])],1)],1)],1)}))],1)])])]),t._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("OCzX")},"data-v-0c373d63",null);e.default=r.exports},hdH8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({actList:[],actTable:[]}),created(){this.getTaskList()},methods:{getTaskList(){this.$request.post("/sc/saotx/act/findList",{},!0,t=>{if("200000"===t.ret)return this.actList=t.data})},goToDetail(t){this.$router.push(`/setting/memberConf/task/sign?code=${t.taskCode}&id=${t.id}`)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",[a("div",{staticClass:"conf-act-list"},[a("ul",t._l(t.actList,function(e,s){return a("li",{key:s,on:{click:function(a){t.goToDetail(e)}}},[a("div",{staticClass:"img",style:{background:"url("+e.taskImg+") no-repeat center / 100% 100%"}}),t._v(" "),a("div",{staticClass:"con"},[a("div",{staticClass:"text"},[a("div",{staticClass:"title"},[t._v(t._s(e.taskName))]),t._v(" "),a("div",{staticClass:"switch"},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.status,callback:function(a){t.$set(e,"status",a)},expression:"item.status"}})],1)]),t._v(" "),a("div",{staticClass:"desc"},[t._v(t._s(e.taskDetail))])])])}))]),t._v(" "),a("el-table",{staticClass:"mt20",staticStyle:{width:"100%"},attrs:{border:"",data:t.actTable}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"任务名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"获得积分数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"获得成长值",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"更新时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text"}},[t._v("查看明细")])]}}])})],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("PSNe")},"data-v-5673f280",null);e.default=r.exports},lJq9:function(t,e){},lMc2:function(t,e){},lXSJ:function(t,e){},lf89:function(t,e){},mO9t:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:()=>({listLoading:!1,bannerTypeList:[],bannerlist:[],total:0,currentPage:1,pageNo:1,pageSize:10}),methods:{getListBrand(){this.$request.post("/sc/saotx/mall/bannerTypeMap",{},!0,t=>{"200000"==t.ret?this.bannerTypeList=t.data:this.$message({message:t.message,type:"warning"})})},addBanner(){this.$router.push({path:"/mall/banner/addBanner"})},getBannerList(){let t={pageNo:this.pageNo,pageSize:this.pageSize};this.postSearch(t)},postSearch(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/banner/list",t,!0,t=>{"200000"==t.ret?(this.bannerlist=t.data.list,this.total=t.data.page.count,this.pageSize=t.data.page.pageSize,this.pageNo=t.data.page.pageNo,this.listLoading=!1):(this.listLoading=!1,this.$message({message:t.message,type:"warning"}))})},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getBannerList()},jumpTo(){this.$emit("current-change")},editBanner(t){this.$router.push({path:"/mall/banner/editBanner?id="+t})},deleteBanner(t){this.$confirm("您确定删除此banner？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let e={id:t};this.$request.post("/sc/saotx/mall/banner/remove",e,!0,t=>{"200000"==t.ret?(this.$message({message:"已删除",type:"warning"}),this.getBannerList()):(this.$message({message:t.message,type:"warning"}),this.getBannerList())})}).catch(()=>{})}},created(){this.getBannerList()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"banner-manage-container clearfix"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addBanner}},[t._v("新增banner")])],1),t._v(" "),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bannerlist}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{label:"略缩图",width:"120"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{display:"block",margin:"0 auto"},attrs:{src:t.row.image,height:"48",alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"链接类型",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"typeVal",label:"链接地址/商品ID\t",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"idx",label:"排序值"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"创建时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.editBanner(e.row.id)}}},[t._v("\n              编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteBanner(e.row.id)}}},[t._v("\n              删除")])]}}])})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-button",{staticClass:"btn-jump-to",attrs:{type:"primary"},on:{click:t.jumpTo}},[t._v("跳转")]),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("lMc2"),a("IL7I")},"data-v-7a43fefb",null);e.default=r.exports},oDas:function(t,e){},"pbX/":function(t,e){},qMbt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:()=>({headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},productList:[{name:"全部",id:""}],productTypeList:[],cateLvl1List:[{name:"全部",id:"-1"}],cateLvl2List:[{name:"全部",id:"-1"}],cateLvl3List:[{name:"全部",id:"-1"}],cateLvl4List:[{name:"全部",id:"-1"}],ruleForm:{memo:"",image:"",giftType:"",cateLvl1Id:"",cateLvl2Id:"",cateLvl3Id:"",cateLvl4Id:"",score:"",quantity:"",url:"",status:"1",isHostGood:"0"},rules:{memo:[{required:!0,message:"请输入商品名称",trigger:"blur"}],image:[{required:!0,message:"请上传主图",trigger:"change"}],giftType:[{required:!0,message:"请选择商品类型",trigger:"change"}],cateLvl1Id:[{required:!0,message:"请选择一级分类",trigger:"change"}],cateLvl2Id:[{required:!0,message:"请选择二级分类",trigger:"change"}],cateLvl3Id:[{required:!0,message:"请选择三级分类",trigger:"change"}],cateLvl4Id:[{required:!0,message:"请选择四级分类",trigger:"change"}],score:[{required:!0,message:"请输入兑换值",trigger:"blur"}],quantity:[{required:!0,message:"请输入库存",trigger:"blur"}],url:[{required:!0,message:"请上传商品详情",trigger:"change"}]}}),created(){this.getProductType(),this.getOneCategory()},methods:{getProductList(){this.$request.post("/sc/saotx/mall/statusMap",{},!0,t=>{"200000"==t.ret&&(this.productList=[...this.productList,...t.data])})},getProductType(){this.$request.post("/sc/saotx/mall/giftTypeMap",{},!0,t=>{"200000"==t.ret&&(this.productTypeList=[...this.productTypeList,...t.data])})},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.ruleForm.cateLvl2Id="-1",this.cateLvl2List=[{name:"全部",id:"-1"}],this.ruleForm.cateLvl3Id="-1",this.cateLvl3List=[{name:"全部",id:"-1"}],this.ruleForm.cateLvl4Id="-1",this.cateLvl4List=[{name:"全部",id:"-1"}],this.getTwoCategory()},getTwoCategory(){"-1"!=this.ruleForm.cateLvl1Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl1Id},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},selectBrand2(){this.ruleForm.cateLvl3Id="-1",this.cateLvl3List=[{name:"全部",id:"-1"}],this.ruleForm.cateLvl4Id="-1",this.cateLvl4List=[{name:"全部",id:"-1"}],this.getThreeCategory()},getThreeCategory(){"-1"!=this.ruleForm.cateLvl2Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl2Id},!0,t=>{"200000"==t.ret&&(this.cateLvl3List=[...this.cateLvl3List,...t.data])})},selectBrand3(){this.ruleForm.cateLvl4Id="-1",this.cateLvl4List=[{name:"全部",id:"-1"}],this.getFourCategory()},getFourCategory(){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl3Id},!0,t=>{"200000"==t.ret&&(this.cateLvl4List=[...this.cateLvl4List,...t.data])})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={cateLvl1Id:this.ruleForm.cateLvl1Id,cateLvl2Id:this.ruleForm.cateLvl2Id,cateLvl3Id:this.ruleForm.cateLvl3Id,cateLvl4Id:this.ruleForm.cateLvl4Id,giftType:this.ruleForm.giftType,image:this.ruleForm.image,memo:this.ruleForm.memo,quantity:this.ruleForm.quantity,score:this.ruleForm.score,status:this.ruleForm.status,url:this.ruleForm.url,isHostGood:this.ruleForm.isHostGood};this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/product/saveOrModifyZJ",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnZJProduct()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image=s},handleAvatarSuccessUrl(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.url=s},returnZJProduct(){this.$router.push({path:"/mall/product/zj"})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-product-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,inline:!0,rules:t.rules,"label-width":"100px"}},[a("div",{staticClass:"add-product-form-container"},[a("el-form-item",{attrs:{label:"商品名称：",prop:"memo",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.memo,callback:function(e){t.$set(t.ruleForm,"memo",e)},expression:"ruleForm.memo"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"主图：",prop:"image",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image,callback:function(e){t.$set(t.ruleForm,"image",e)},expression:"ruleForm.image"}}),t._v(" "),a("el-upload",{staticClass:"product-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.ruleForm.image?a("img",{staticClass:"avatar",attrs:{width:"100",height:"75",src:t.ruleForm.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 750*468px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"商品类型：",prop:"giftType"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.giftType,callback:function(e){t.$set(t.ruleForm,"giftType",e)},expression:"ruleForm.giftType"}},t._l(t.productTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类：",prop:"cateLvl1Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.ruleForm.cateLvl1Id,callback:function(e){t.$set(t.ruleForm,"cateLvl1Id",e)},expression:"ruleForm.cateLvl1Id"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl2Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.ruleForm.cateLvl2Id,callback:function(e){t.$set(t.ruleForm,"cateLvl2Id",e)},expression:"ruleForm.cateLvl2Id"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl3Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand3},model:{value:t.ruleForm.cateLvl3Id,callback:function(e){t.$set(t.ruleForm,"cateLvl3Id",e)},expression:"ruleForm.cateLvl3Id "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl4Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.cateLvl4Id,callback:function(e){t.$set(t.ruleForm,"cateLvl4Id",e)},expression:"ruleForm.cateLvl4Id"}},t._l(t.cateLvl4List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"兑换值：",prop:"score",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.score,callback:function(e){t.$set(t.ruleForm,"score",e)},expression:"ruleForm.score"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"库存：",prop:"quantity",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.quantity,callback:function(e){t.$set(t.ruleForm,"quantity",e)},expression:"ruleForm.quantity"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"商品详情：",prop:"url",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.url,callback:function(e){t.$set(t.ruleForm,"url",e)},expression:"ruleForm.url"}}),t._v(" "),a("el-upload",{staticClass:"product-url",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccessUrl}},[t.ruleForm.url?a("img",{staticClass:"avatar",attrs:{width:"100",height:"100",src:t.ruleForm.url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"pic-tips"},[t._v("* 图片建议尺寸为 宽750px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status",size:"small"}},[a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("上架")]),t._v(" "),a("el-radio",{attrs:{label:"-1"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("下架")])],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"是否热门：",prop:"isHostGood",size:"small"}},[a("el-radio",{attrs:{label:"0"},model:{value:t.ruleForm.isHostGood,callback:function(e){t.$set(t.ruleForm,"isHostGood",e)},expression:"ruleForm.isHostGood"}},[t._v("否")]),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.isHostGood,callback:function(e){t.$set(t.ruleForm,"isHostGood",e)},expression:"ruleForm.isHostGood"}},[t._v("是")])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"add-product-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("立即创建")]),t._v(" "),a("el-button",{on:{click:t.returnZJProduct}},[t._v("取消")])],1)],1)],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("83S4"),a("U71v")},"data-v-11f32114",null);e.default=r.exports},qPsp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"BuildProduct",data:()=>({listLoading:!1,productList:[{name:"全部",id:""}],productTypeList:[{name:"全部",id:""}],deliveryList:[{name:"全部",id:""},{name:"是",id:"1"},{name:"否",id:"0"}],cateLvl1List:[{name:"全部",id:""}],cateLvl2List:[{name:"全部",id:""}],cateLvl3List:[{name:"全部",id:""}],cateLvl4List:[{name:"全部",id:""}],filters:{status:"",giftType:"",hasDelivery:"",keywords:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:""},listJD:[],sort:0,ids:"",pageSize:10,pageNo:1,currentPage:1,total:0,batchDelete:!0}),created(){this.getProductList(),this.getProductType(),this.getOneCategory(),this.getListJD()},methods:{getProductList(){this.$request.post("/sc/saotx/mall/statusMap",{},!0,t=>{"200000"==t.ret&&(this.productList=[...this.productList,...t.data])})},getProductType(){this.$request.post("/sc/saotx/mall/giftTypeMap",{},!0,t=>{"200000"==t.ret&&(this.productTypeList=[...this.productTypeList,...t.data])})},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.filters.cateLvl2="",this.cateLvl2List=[{name:"全部",id:""}],this.filters.cateLvl3="",this.cateLvl3List=[{name:"全部",id:""}],this.filters.cateLvl4="",this.cateLvl4List=[{name:"全部",id:""}],this.getTwoCategory()},getTwoCategory(){""!=this.filters.cateLvl1&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl1},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},selectBrand2(){this.filters.cateLvl3="",this.cateLvl3List=[{name:"全部",id:""}],this.filters.cateLvl4="",this.cateLvl4List=[{name:"全部",id:""}],this.getThreeCategory()},getThreeCategory(){""!=this.filters.cateLvl2&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl2},!0,t=>{"200000"==t.ret&&(this.cateLvl3List=[...this.cateLvl3List,...t.data])})},selectBrand3(){this.filters.cateLvl4="",this.cateLvl4List=[{name:"全部",id:""}],this.getFourCategory()},getFourCategory(){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.filters.cateLvl3},!0,t=>{"200000"==t.ret&&(this.cateLvl4List=[...this.cateLvl4List,...t.data])})},modiifySort(){1==this.sort?this.sort=0:this.sort=1},getListJD(t){let e={status:this.filters.status,giftType:this.filters.giftType,hasDelivery:this.filters.hasDelivery,keywords:this.filters.keywords,cateLvl1:this.filters.cateLvl1,cateLvl2:this.filters.cateLvl2,cateLvl3:this.filters.cateLvl3,cateLvl4:this.filters.cateLvl4,pageSize:this.pageSize,currentPageNumber:this.pageNo};"bySales"==t?(e.order=1,e.sort=this.sort,this.modiifySort()):"byScore"==t?(e.order=2,e.sort=this.sort,this.modiifySort()):"byTime"==t&&(e.order=3,e.sort=this.sort,this.modiifySort()),this.postSearch(e)},postSearch(t){this.listLoading=!0,this.$request.post("/sc/saotx/mall/product/listJD",t,!0,t=>{"200000"==t.ret&&(console.log(t.data),this.listLoading=!1,this.listJD=t.data.list,this.total=t.data.page.count,this.pageNo=t.data.page.pageNo)})},getStatus(){this.filters.status="",this.filters.giftType="",this.filters.keywords="",this.filters.cateLvl1="",this.filters.cateLvl2="",this.filters.cateLvl3="",this.filters.cateLvl4="",this.pageNo=1,this.currentPage=1,this.getListJD()},commitForm(){this.pageNo=1,this.currentPage=1,this.getListJD()},sortBySales(){this.getListJD("bySales")},sortByScore(){this.getListJD("byScore")},sortByTime(){this.getListJD("byTime")},addJDProduct(){this.$router.push({path:"/mall/product/jd/addJDProduct"})},editJDProduct(t){this.$router.push({path:"/mall/product/jd/editJDProduct?id="+t})},deleteProduct(t){let e={id:t};this.$confirm("您确定刪除此商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/sc/saotx/mall/product/remove",e,!0,t=>{"200000"==t.ret?(this.$message({message:"操作成功！",type:"success"}),this.getListJD()):this.$message({message:t.message,type:"warning"})})})},productOnline(t){let e={id:t};this.$request.post("/sc/saotx/mall/product/online",e,!0,t=>{"200000"==t.ret?(this.$message({message:"操作成功！",type:"success"}),this.getListJD()):this.$message({message:t.message,type:"warning"})})},productOffline(t){let e={id:t};this.$request.post("/sc/saotx/mall/product/offline",e,!0,t=>{"200000"==t.ret?(this.$message({message:"操作成功！",type:"success"}),this.getListJD()):this.$message({message:t.message,type:"warning"})})},handleSelectionChange(t){let e=t;console.log(e);let a=[];e.length>0?(this.batchDelete=!1,e.map((t,e)=>{a.push(t.id)}),this.ids=a.join(",")):(this.ids="",this.batchDelete=!0)},removeBatch(){this.$confirm("您确定批量刪除商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/sc/saotx/mall/product/removeBatch",{ids:this.ids},!0,t=>{"200000"==t.ret?(this.$message({message:"操作成功！",type:"success"}),this.getListJD()):this.$message({message:t.message,type:"warning"})})})},jumpTo(){this.$emit("current-change")},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getListJD()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"build-product-container"},[a("div",{staticClass:"box-container"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addJDProduct}},[t._v("新建商品")])],1),t._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"100px"}},[a("el-form-item",{attrs:{size:"small",label:"商品状态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}},t._l(t.productList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"商品类型："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.giftType,callback:function(e){t.$set(t.filters,"giftType",e)},expression:"filters.giftType"}},t._l(t.productTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"是否有运费："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.hasDelivery,callback:function(e){t.$set(t.filters,"hasDelivery",e)},expression:"filters.hasDelivery"}},t._l(t.deliveryList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.cateLvl1,callback:function(e){t.$set(t.filters,"cateLvl1",e)},expression:"filters.cateLvl1"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.filters.cateLvl2,callback:function(e){t.$set(t.filters,"cateLvl2",e)},expression:"filters.cateLvl2"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand3},model:{value:t.filters.cateLvl3,callback:function(e){t.$set(t.filters,"cateLvl3",e)},expression:"filters.cateLvl3"}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.cateLvl4,callback:function(e){t.$set(t.filters,"cateLvl4",e)},expression:"filters.cateLvl4"}},t._l(t.cateLvl4List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"关键词"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入关键词"},model:{value:t.filters.keywords,callback:function(e){t.$set(t.filters,"keywords",e)},expression:"filters.keywords"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sortBySales}},[t._v("按销量排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sortByScore}},[t._v("按兑换值排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.sortByTime}},[t._v("按创建时间排序")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listJD},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productId",label:"商品ID",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"商品名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"giftType",label:"商品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("1"==e.row.giftType?"虚拟商品":"实物商品"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cate1Name",label:"一级分类",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate2Name",label:"二级分类",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate3Name",label:"三级分类",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate4Name",label:"四级分类",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"京东价格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deliveryScore",label:"运费",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"score",label:"兑换值"}}),t._v(" "),a("el-table-column",{attrs:{prop:"shopQuantity",label:"库存"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(new Date(e.row.createTime).Format("yyyy-MM-dd hh:mm:ss")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"商品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("1"==e.row.status?"上架中":"下架中"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.editJDProduct(e.row.id)}}},[t._v("编辑")]),t._v(" "),"1"==e.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.productOffline(e.row.id)}}},[t._v("下架")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.productOnline(e.row.id)}}},[t._v("上架")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteProduct(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"small",disabled:t.batchDelete},on:{click:function(e){t.removeBatch(t.ids)}}},[t._v("批量删除")]),t._v(" "),a("el-button",{staticClass:"btn-jump-to",attrs:{type:"primary"},on:{click:t.jumpTo}},[t._v("跳转")]),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("U6qu"),a("ysPo")},"data-v-2e3e6310",null);e.default=r.exports},qR49:function(t,e){},wbkj:function(t,e){},wi7m:function(t,e){},"xv/D":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",props:["id"],data:()=>({headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},bannerTypeList:[],productIdList:[],productIdShow:!1,linkShow:!1,cateLvlShow:!1,cateLvl1List:[{name:"全部",id:-1}],cateLvl2List:[{name:"全部",id:-1}],cateLvl3List:[{name:"全部",id:-1}],cateLvl4List:[{name:"全部",id:-1}],ruleForm:{type:"",productId:"",link:"",cateLvl1Id:"",cateLvl2Id:"",cateLvl3Id:"",cateLvl4Id:"",typeVal:"",idx:"",image:""},rules:{type:[{required:!0,message:"请选择链接类型",trigger:"change"}],productId:[{required:!0,message:"请选择商品ID",trigger:"change"}],link:[{required:!0,message:"请输入链接地址",trigger:"blur"}],cateLvl1Id:[{required:!0,message:"请选择一级分类",trigger:"change"}],cateLvl2Id:[{required:!0,message:"请选择二级分类",trigger:"change"}],cateLvl3Id:[{required:!0,message:"请选择三级分类",trigger:"change"}],cateLvl4Id:[{required:!0,message:"请选择四级分类",trigger:"change"}],idx:[{required:!0,message:"请输入排序值",trigger:"blur"}],image:[{required:!0,message:"请上传主图",trigger:"change"}]}}),created(){this.getBannerTypeList(),this.getProductIdList(),this.getOneCategory(),this.getBannerDetail()},methods:{getBannerDetail(){this.$request.post("/sc/saotx/mall/banner/detail",{id:this.id},!0,t=>{"200000"==t.ret&&(this.ruleForm.type=t.data.type,this.ruleForm.idx=t.data.idx,this.ruleForm.image=t.data.image,console.log(this.ruleForm.type),this.selectType(this.ruleForm.type),1==this.ruleForm.type?this.ruleForm.productId=t.data.typeVal:2==this.ruleForm.type?this.ruleForm.link=t.data.typeVal:3==this.ruleForm.type&&(this.ruleForm.cateLvl1Id=t.data.cate1Id-0,this.ruleForm.cateLvl2Id=t.data.cate3Id-0,this.ruleForm.cateLvl3Id=t.data.cate3Id-0,this.ruleForm.cateLvl4Id=t.data.cate4Id-0,this.getTwoCategory(),this.getThreeCategory(),this.getFourCategory()))})},getBannerTypeList(){this.$request.post("/sc/saotx/mall/bannerTypeMap",{},!0,t=>{"200000"==t.ret&&(this.bannerTypeList=[...this.bannerTypeList,...t.data])})},getProductIdList(){this.$request.post("/sc/saotx/mall/product/downBox",{},!0,t=>{"200000"==t.ret&&(this.productIdList=[...this.productIdList,...t.data])})},selectType(t){console.log(t),1==t?(this.productIdShow=!0,this.rules.productId=[{required:!0,message:"请选择商品ID",trigger:"change"}],this.linkShow=!1,this.rules.link=[],this.cateLvlShow=!1,this.rules.cateLvl1Id=[],this.rules.cateLvl2Id=[],this.rules.cateLvl3Id=[],this.rules.cateLvl4Id=[]):2==t?(this.productIdShow=!1,this.rules.productId=[],this.linkShow=!0,this.rules.link=[{required:!0,message:"请输入链接地址",trigger:"blur"}],this.cateLvlShow=!1,this.rules.cateLvl1Id=[],this.rules.cateLvl2Id=[],this.rules.cateLvl3Id=[],this.rules.cateLvl4Id=[]):3==t&&(this.productIdShow=!1,this.rules.productId=[],this.linkShow=!1,this.rules.link=[],this.cateLvlShow=!0,this.rules.cateLvl1Id=[{required:!0,message:"请选择一级分类",trigger:"change"}],this.rules.cateLvl2Id=[{required:!0,message:"请选择二级分类",trigger:"change"}],this.rules.cateLvl3Id=[{required:!0,message:"请选择三级分类",trigger:"change"}],this.rules.cateLvl4Id=[{required:!0,message:"请选择四级分类",trigger:"change"}])},getOneCategory(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{},!0,t=>{"200000"==t.ret&&(this.cateLvl1List=[...this.cateLvl1List,...t.data])})},selectBrand1(){this.ruleForm.cateLvl2Id=-1,this.cateLvl2List=[{name:"全部",id:-1}],this.ruleForm.cateLvl3Id=-1,this.cateLvl3List=[{name:"全部",id:-1}],this.ruleForm.cateLvl4Id=-1,this.cateLvl4List=[{name:"全部",id:-1}],this.getTwoCategory()},getTwoCategory(){-1!=this.ruleForm.cateLvl1Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl1Id},!0,t=>{"200000"==t.ret&&(this.cateLvl2List=[...this.cateLvl2List,...t.data])})},selectBrand2(){this.ruleForm.cateLvl3Id=-1,this.cateLvl3List=[{name:"全部",id:-1}],this.ruleForm.cateLvl4Id=-1,this.cateLvl4List=[{name:"全部",id:-1}],this.getThreeCategory()},getThreeCategory(){-1!=this.ruleForm.cateLvl2Id&&this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl2Id},!0,t=>{"200000"==t.ret&&(this.cateLvl3List=[...this.cateLvl3List,...t.data])})},selectBrand3(){this.ruleForm.cateLvl4Id=-1,this.cateLvl4List=[{name:"全部",id:-1}],this.getFourCategory()},getFourCategory(){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:this.ruleForm.cateLvl3Id},!0,t=>{"200000"==t.ret&&(this.cateLvl4List=[...this.cateLvl4List,...t.data])})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={id:this.id,type:this.ruleForm.type,idx:this.ruleForm.idx,image:this.ruleForm.image};1==this.ruleForm.type?t.typeVal=this.ruleForm.productId:2==this.ruleForm.type?t.typeVal=this.ruleForm.link:3==this.ruleForm.type&&(t.cate1Id=this.ruleForm.cateLvl1Id,t.cate2Id=this.ruleForm.cateLvl2Id,t.cate3Id=this.ruleForm.cateLvl3Id,t.cate4Id=this.ruleForm.cateLvl4Id),this.postParams(t)}})},postParams(t){this.$request.post("/sc/saotx/mall/banner/saveOrModify",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnBannerMannage()):this.$message({message:t.message,type:"warning"})},t=>{})},handleAvatarSuccess(t,e){var a=t.data||{},s=a&&a.accessUrl;this.ruleForm.image=s},returnBannerMannage(){this.$router.push({path:"/mall/banner"})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"add-banner-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{size:"small",label:"链接类型：",prop:"type"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},on:{change:t.selectType},model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},t._l(t.bannerTypeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.productIdShow,expression:"productIdShow"}],attrs:{size:"small",label:"商品ID：",prop:"type"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.productId,callback:function(e){t.$set(t.ruleForm,"productId",e)},expression:"ruleForm.productId"}},t._l(t.productIdList,function(t){return a("el-option",{key:t.productId,attrs:{label:t.memo,value:t.productId}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.linkShow,expression:"linkShow"}],attrs:{label:"链接地址：",prop:"link",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.ruleForm.link,callback:function(e){t.$set(t.ruleForm,"link",e)},expression:"ruleForm.link"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.cateLvlShow,expression:"cateLvlShow"}],attrs:{size:"small",label:"分类：",prop:"cateLvl1Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.ruleForm.cateLvl1Id,callback:function(e){t.$set(t.ruleForm,"cateLvl1Id",e)},expression:"ruleForm.cateLvl1Id"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),t.cateLvlShow?a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl2Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.ruleForm.cateLvl2Id,callback:function(e){t.$set(t.ruleForm,"cateLvl2Id",e)},expression:"ruleForm.cateLvl2Id"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),t.cateLvlShow?a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl3Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand3},model:{value:t.ruleForm.cateLvl3Id,callback:function(e){t.$set(t.ruleForm,"cateLvl3Id",e)},expression:"ruleForm.cateLvl3Id "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),t.cateLvlShow?a("el-form-item",{attrs:{size:"small",label:"",prop:"cateLvl4Id"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.cateLvl4Id,callback:function(e){t.$set(t.ruleForm,"cateLvl4Id",e)},expression:"ruleForm.cateLvl4Id"}},t._l(t.cateLvl4List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1):t._e(),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"排序值：",prop:"idx",size:"small"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number"},model:{value:t.ruleForm.idx,callback:function(e){t.$set(t.ruleForm,"idx",e)},expression:"ruleForm.idx"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{label:"主图：",prop:"image",size:"small"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.ruleForm.image,callback:function(e){t.$set(t.ruleForm,"image",e)},expression:"ruleForm.image"}}),t._v(" "),a("el-upload",{staticClass:"banner-img",attrs:{action:"/api/saotx/attach/commonAliUpload","list-type":"picture-card",headers:t.headers,"show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.ruleForm.image?a("img",{staticClass:"avatar",attrs:{width:"100",height:"100",src:t.ruleForm.image}}):t._e(),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("* 图片建议尺寸为 750*420px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])],1),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"add-banner-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.returnBannerMannage}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("MGLV"),a("Le5s")},"data-v-5686f2b5",null);e.default=r.exports},yLAt:function(t,e){},ysPo:function(t,e){},yuqM:function(t,e){},zK8t:function(t,e){}});
//# sourceMappingURL=1.94d4f35193c0bbf813e4.js.map