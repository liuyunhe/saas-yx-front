webpackJsonp([1],{"+WVz":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["orderId"],name:"ObjectPageDetail",data:()=>({formDetail:{orderCode:"",actCode:"",winnerMobile:"",actName:"",nickname:"",prizeName:"",snName:"",ctime:"",getaddress:"",receiver:"",mobile:"",province:"",city:"",district:"",detail:"",logistics:"",stepTime1:"",stepTime2:"",status:2,stepStatusName1:"",stepStatusName2:""}}),created(){this.getObjectPageDetail(this.orderId)},methods:{submitFormSave(){let t={province:this.formDetail.province,city:this.formDetail.city,district:this.formDetail.district,detail:this.formDetail.detail,mobile:this.formDetail.mobile,receiver:this.formDetail.receiver,orderCode:this.formDetail.orderCode};this.$request.post("/api/wiseqr/order/save",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnObjectPage()):this.$message({message:t.message,type:"warning"})},t=>{})},returnObjectPage(){this.$router.push({path:"/Orders/ACT/object"})},getObjectPageDetail(t){this.$request.post("/api/wiseqr/order/detail",{orderCode:t},!0,t=>{"200000"==t.ret&&(console.log(t.data),this.formDetail.orderCode=t.data.orderCode,this.formDetail.actCode=t.data.actCode,this.formDetail.winnerMobile=t.data.winnerMobile,this.formDetail.actName=t.data.actName,this.formDetail.nickname=t.data.nickname,this.formDetail.prizeName=t.data.prizeName,this.formDetail.snName=t.data.snName,this.formDetail.ctime=this.formatDate(t.data.ctime),this.formDetail.getaddress=t.data.awdDistrictName,this.formDetail.receiver=t.data.receiver,this.formDetail.mobile=t.data.mobile,this.formDetail.province=t.data.province,this.formDetail.city=t.data.city,this.formDetail.district=t.data.district,this.formDetail.detail=t.data.detail,this.formDetail.logistics=t.data.logistics,this.formDetail.status=t.data.status,t.data.logs.length>1?(this.formDetail.stepTime1=t.data.logs[0].stepTime,this.formDetail.stepStatusName1=t.data.logs[0].stepStatusName,this.formDetail.stepTime2=t.data.logs[1].stepTime,this.formDetail.stepStatusName2=t.data.logs[1].stepStatusName):(this.formDetail.stepTime1=t.data.logs[0].stepTime,this.formDetail.stepStatusName1=t.data.logs[0].stepStatusName))})},formatDate(t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate(),r=e.getHours(),l=e.getMinutes(),o=e.getSeconds(),n=Array.apply(null,Array(10)).map(function(t,e){return"0"+e});return a+"-"+(n[s]||s)+"-"+(n[i]||i)+" "+(n[r]||r)+":"+(n[l]||l)+":"+(n[o]||o)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("实物领奖明细/领奖明细查询")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("div",[a("h1",[t._v("订单信息")])]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formDetail}},[a("el-row",[a("el-form-item",{attrs:{size:"small",label:"订单号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderCode,callback:function(e){t.$set(t.formDetail,"orderCode",e)},expression:"formDetail.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"活动ID:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.actCode,callback:function(e){t.$set(t.formDetail,"actCode",e)},expression:"formDetail.actCode"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"活动名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.actName,callback:function(e){t.$set(t.formDetail,"actName",e)},expression:"formDetail.actName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"中奖人:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.nickname,callback:function(e){t.$set(t.formDetail,"nickname",e)},expression:"formDetail.nickname"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"中奖人手机号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.winnerMobile,callback:function(e){t.$set(t.formDetail,"winnerMobile",e)},expression:"formDetail.winnerMobile"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"微信号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.nickname,callback:function(e){t.$set(t.formDetail,"nickname",e)},expression:"formDetail.nickname"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"奖项名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.prizeName,callback:function(e){t.$set(t.formDetail,"prizeName",e)},expression:"formDetail.prizeName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"关联规格:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.snName,callback:function(e){t.$set(t.formDetail,"snName",e)},expression:"formDetail.snName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"获奖时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.ctime,callback:function(e){t.$set(t.formDetail,"ctime",e)},expression:"formDetail.ctime"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"获奖地区:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.getaddress,callback:function(e){t.$set(t.formDetail,"getaddress",e)},expression:"formDetail.getaddress"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("收货人信息")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"收货人:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.receiver,callback:function(e){t.$set(t.formDetail,"receiver",e)},expression:"formDetail.receiver"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"手机号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.mobile,callback:function(e){t.$set(t.formDetail,"mobile",e)},expression:"formDetail.mobile"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"收货地址:省:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.province,callback:function(e){t.$set(t.formDetail,"province",e)},expression:"formDetail.province"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"市:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.city,callback:function(e){t.$set(t.formDetail,"city",e)},expression:"formDetail.city"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"区:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.district,callback:function(e){t.$set(t.formDetail,"district",e)},expression:"formDetail.district"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"详细地址:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:2!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.detail,callback:function(e){t.$set(t.formDetail,"detail",e)},expression:"formDetail.detail"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("订单跟踪")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.stepTime1,callback:function(e){t.$set(t.formDetail,"stepTime1",e)},expression:"formDetail.stepTime1"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.stepStatusName1,callback:function(e){t.$set(t.formDetail,"stepStatusName1",e)},expression:"formDetail.stepStatusName1"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"发货时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.stepTime2,callback:function(e){t.$set(t.formDetail,"stepTime2",e)},expression:"formDetail.stepTime2"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.stepStatusName2,callback:function(e){t.$set(t.formDetail,"stepStatusName2",e)},expression:"formDetail.stepStatusName2"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"物流号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.logistics,callback:function(e){t.$set(t.formDetail,"logistics",e)},expression:"formDetail.logistics"}})],1)],1),t._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",disabled:2!=t.formDetail.status},on:{click:t.submitFormSave}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.returnObjectPage}},[t._v("返回列表")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("FChT")},"data-v-61f3d466",null);e.default=r.exports},"+sAX":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"PatchMgr",data:()=>({uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},confRules:{img:[{required:!0,message:"请上传卡片图片",trigger:"change"}],totalNum:[{required:!0,validator:(t,e,a)=>{0==e?a(new Error("请输入红包金额")):a()},trigger:"blur"}],drawPert:[{required:!0,validator:(t,e,a)=>{0==e?a(new Error("请输入中奖概率")):a()},trigger:"blur"}]},newAct:!0,config:[[{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""}],[{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""}],[{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""}],[{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""}],[{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""},{img:"",totalNum:"",drawPert:""}]]}),created(){this.getDetail()},methods:{getDetail(){this.$request.post("/hbact/jh/saas/pintu/queryConfig",{},!0,t=>{200==t.code?t.data.length&&(this.newAct=!1,this.config=[t.data.slice(0,6),t.data.slice(6,12),t.data.slice(12,18),t.data.slice(18,24),t.data.slice(24,30)]):this.$message.error(t.msg)})},confUpdate(){let t=!0;if(this.$refs.PatchConf.forEach(e=>{e.validate(e=>{e||(t=!1)})}),!t)return;let e=[...this.config[0],...this.config[1],...this.config[2],...this.config[3],...this.config[4]];console.log(e),this.$request.post("/hbact/jh/saas/pintu/addConfig",e,!0,t=>{"200"==t.code?(this.$message({type:"success",message:"操作成功!"}),this.getDetail()):this.$message.error(t.msg)})},uploadImgUrlSuccess(t,e,a){if("200000"===t.ret)return this.config[a][e].img=t.data.accessUrl;this.$message.error(t.message)},addCardRepertory(t){this.$prompt("请输入数字：","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入大于0的整数"}).then(({value:e})=>{if(console.log(e),0==e)return this.$message.error("数字必须大于0");this.$request.post(" /hbact/jh/saas/pintu/addPatchNum",{id:t.id,addNum:e},!1,t=>{"200"===t.code?(this.$message.success("增库成功"),this.getDetail()):this.$message.error(t.msg)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},updateCardPert(t){this.$prompt("请输入概率：","修改概率",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+(\.\d{0,1})?$/,inputErrorMessage:"请输入大于等于0的数字且最多保留小数点后一位"}).then(({value:e})=>{if(console.log(e),e>100)return this.$message.error("数字必须小于100");this.$request.post("/hbact/jh/saas/pintu/update/pert",{id:t.id,drawPert:e},!1,t=>{"200"===t.code?(this.$message.success("修改成功"),this.getDetail()):this.$message.error(t.msg)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PatchMgr-container"},[t._l(t.config,function(e,s){return[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("拼图"+t._s(s+1)+"碎片设置：")])]),t._v(" "),t._l(e,function(e,i){return[a("el-form",{ref:"PatchConf",refInFor:!0,attrs:{model:e,"label-width":"100px",rules:t.confRules}},[a("div",{staticStyle:{height:"90px"}},[a("el-form-item",{staticStyle:{width:"220px",float:"left","margin-right":"10px"},attrs:{label:"碎片"+(i+1)+":",prop:"img"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.img,callback:function(a){t.$set(e,"img",a)},expression:"item.img"}}),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:!t.newAct,action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.uploadImgUrlSuccess(e,i,s)},"show-file-list":!1}},[e.img?a("img",{staticClass:"avatar",attrs:{src:e.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("div",{staticStyle:{float:"left","margin-right":"10px",height:"64px","line-height":"64px"}},[0==i||1==i?[t._v("(405*506)")]:t._e(),t._v(" "),2==i?[t._v("(339*506)")]:t._e(),t._v(" "),3==i||4==i?[t._v("(405*576)")]:t._e(),t._v(" "),5==i?[t._v("(339*576)")]:t._e()],2),t._v(" "),a("div",{staticStyle:{width:"230px",float:"left","margin-right":"10px"}},[a("el-form-item",{attrs:{label:"投放数量：",prop:"totalNum"}},[a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}})],1)],1),t._v(" "),e.id?a("div",{staticStyle:{float:"left","margin-right":"10px",height:"64px","line-height":"64px"}},[t._v("\n              剩余"+t._s(e.totalNum-e.outNum)+"个\n            ")]):t._e(),t._v(" "),a("div",{staticStyle:{width:"250px",float:"left","margin-right":"10px"}},[a("el-form-item",{attrs:{label:"中奖概率：",prop:"drawPert"}},[a("el-input-number",{attrs:{disabled:!t.newAct,precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.drawPert,callback:function(a){t.$set(e,"drawPert",a)},expression:"item.drawPert"}}),t._v("\n                %\n              ")],1)],1),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"10px"}}),t._v(" "),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:function(a){t.addCardRepertory(e)}}},[t._v("增库")])],1),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"10px"}}),t._v(" "),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:function(a){t.updateCardPert(e)}}},[t._v("概率")])],1)],1)])]})],2),t._v(" "),a("div",{staticStyle:{height:"30px"}})]}),t._v(" "),t.newAct?a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.confUpdate}},[t._v("保存")])],1):t._e()],2)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("KMbK"),a("DDi8")},"data-v-2c4ef44b",null);e.default=r.exports},"+y4z":function(t,e){},"/Vy9":function(t,e){},"/mPg":function(t,e){},"/xda":function(t,e){},"0BVG":function(t,e){},"3OrV":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},data:()=>({listData:[],allKeyWordData:[],allGiftTypeData:[],allOneCateData:[],allTwoCateData:[],allThrCateData:[],allFroCateData:[],selectallKyeType:"",selectallOneCate:"",selectallTwoCate:"",selectallThrCate:"",selectallFroCate:"",idtwo:"1",idthr:"1",idfro:"1",form:{kyeName:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:"",startTime:"",endTime:"",status:"",orderType:4,giftType:"",orderId:"",awardName:"",userName:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")}}),name:"JdOrderPage",created(){this.init()},watch:{selectallKyeType(t,e){t&&t!=e&&(1==t&&(this.form.orderId=this.form.kyeName,this.form.awardName="",this.form.userName=""),2==t&&(this.form.orderId="",this.form.awardName=this.form.kyeName,this.form.userName=""),3==t&&(this.form.orderId="",this.form.awardName="",this.form.userName=this.form.kyeName))},selectallOneCate(t,e){t&&t!=e&&(this.idtwo="",this.form.cateLvl1=t,this.allMoreCateList(t,2))},selectallTwoCate(t,e){t&&t!=e&&(this.idthr="",this.form.cateLvl2=t,this.allMoreCateList(t,3))},selectallThrCate(t,e){t&&t!=e&&(this.idfro="",this.form.cateLvl3=t,this.allMoreCateList(t,4))},selectallForCate(t,e){t&&t!=e&&(this.form.cateLvl4=t)}},methods:{init(){this.allKeyWordList(),this.allGiftTypeList(),this.allOneCateList(),this.getlistData()},changek(){1==this.selectallKyeType&&(this.form.orderId=this.form.kyeName,this.form.awardName="",this.form.userName="",this.form.mobile=""),2==this.selectallKyeType&&(this.form.orderId="",this.form.awardName=this.form.kyeName,this.form.userName="",this.form.mobile=""),3==this.selectallKyeType&&(this.form.orderId="",this.form.awardName="",this.form.userName=this.form.kyeName,this.form.mobile=""),4==this.selectallKyeType&&(this.form.orderId="",this.form.awardName="",this.form.userName="",this.form.mobile=this.form.kyeName)},allKeyWordList(){this.$request.post("/sc/saotx/mall/keyWordMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allKeyWordData=t.data)})},allGiftTypeList(){this.$request.post("/sc/saotx/mall/giftTypeMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allGiftTypeData=t.data)})},allOneCateList(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allOneCateData=t.data)})},allMoreCateList(t,e){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:t},!0,t=>{console.log(t.data),"200000"===t.ret&&(2==e&&(this.selectallTwoCate="",this.selectallThrCate="",this.selectallFroCate="",this.allTwoCateData=t.data),3==e&&(this.selectallThrCate="",this.selectallFroCate="",this.allThrCateData=t.data),4==e&&(this.selectallFroCate="",this.allFroCateData=t.data))})},getlistData(){this.$request.post("/sc/saotx/mall/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},queryData:function(t){this.getlistData()},currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},initPagination(t){t&&(this.pagination.total=t.count)},resetData:function(t){this.selectallKyeType="",this.selectallOneCate="",this.selectallTwoCate="",this.selectallThrCate="",this.selectallFroCate="",this.idtwo="1",this.idthr="1",this.idfro="1",this.form={kyeName:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:"",startTime:"",endTime:"",status:"",orderType:4,giftType:"",orderId:"",awardName:"",userName:"",pageNo:1,pageSize:10},this.getlistData()},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/sc/saotx/mall/order/exportOrder",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/京东订单明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"商品类型:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.giftType,callback:function(e){t.$set(t.form,"giftType",e)},expression:"form.giftType"}},t._l(t.allGiftTypeData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"时间段:",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"关键字:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectallKyeType,callback:function(e){t.selectallKyeType=e},expression:"selectallKyeType"}},t._l(t.allKeyWordData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入关键词"},on:{input:function(e){t.changek()}},model:{value:t.form.kyeName,callback:function(e){t.$set(t.form,"kyeName",e)},expression:"form.kyeName"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"分类",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectallOneCate,callback:function(e){t.selectallOneCate=e},expression:"selectallOneCate"}},t._l(t.allOneCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idtwo,clearable:!!t.idtwo},model:{value:t.selectallTwoCate,callback:function(e){t.selectallTwoCate=e},expression:"selectallTwoCate"}},t._l(t.allTwoCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idthr,clearable:!!t.idthr},model:{value:t.selectallThrCate,callback:function(e){t.selectallThrCate=e},expression:"selectallThrCate"}},t._l(t.allThrCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idfro,clearable:!!t.idfro},model:{value:t.selectallFroCate,callback:function(e){t.selectallFroCate=e},expression:"selectallFroCate"}},t._l(t.allFroCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s((t.form.pageNo-1)*t.form.pageSize+e.$index+1)+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"商品名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(2==e.row.giftType?"实物礼品":"虚拟礼品"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate4Name",label:"四级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deliveryFee",label:"运费"}}),t._v(" "),a("el-table-column",{attrs:{prop:"score",label:"兑换币"}}),t._v(" "),a("el-table-column",{attrs:{prop:"originScore",label:"原兑换币"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"联系人姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系人电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"收货地址"}}),t._v(" "),a("el-table-column",{attrs:{label:"下单时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.createTime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态\t"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"待收货":3==e.row.status?"已完成":0==e.row.status?"待发货":5==e.row.status?"已取消":""))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("VnSS")},"data-v-582e43b6",null);e.default=l.exports},"3WsC":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],components:{shareConf:a("ehVw").a},data:()=>({activeName:"home",addActParams:{conf:"",form:"act-113",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},extInfo:{winPert:0},ballonIndex:"",configItem:{title:"",description:"",headerImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/banner.png",bgImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/bg.png",actTip:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/tips.png",food:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/food.png",countBg:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/count-bg.png",boat:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/boat.png",leftArrow:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/left-arrow.png",rightArrow:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/right-arrow.png",drawImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/award-pop.png",drawBtnUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/award-btn.png",cryImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/nolucky-bg.png",cryBtnUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/nolucky-btn.png",shareImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/yr-bg.png",shareBtnUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/share-btn-img.png",shareIconUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/boating/share-icon.png",share:{shareTitle:"",shareDesc:""}},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},getGameIndex(t){this.gameIndex=t},upLoadImgSuccess(t,e){if("200000"===t.ret)return this.configItem[e]=t.data.accessUrl;this.$message.error(t.message)},editPic(t){let e=t.url;this.configItem.shareIconUrl=e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"title-bg"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),a("div",{staticClass:"btn-active",on:{click:function(e){t.showEditConIndex=5}}},[a("img",{attrs:{src:t.configItem.countBg,title:"点击编辑",alt:""}}),t._v(" "),a("div",[t._v("倒计时 : 60S")])]),t._v(" "),a("div",{staticClass:"food"},[a("img",{attrs:{src:t.configItem.food,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"food pos1"},[a("img",{attrs:{src:t.configItem.food,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"food pos2"},[a("img",{attrs:{src:t.configItem.food,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"food pos3"},[a("img",{attrs:{src:t.configItem.food,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"food pos4"},[a("img",{attrs:{src:t.configItem.food,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"boat"},[a("img",{attrs:{src:t.configItem.boat,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"leftArrow"},[a("img",{attrs:{src:t.configItem.leftArrow,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=7}}})]),t._v(" "),a("div",{staticClass:"rightArrow"},[a("img",{attrs:{src:t.configItem.rightArrow,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=8}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"bgImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"headerImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("莲藕图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.food,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"food")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"actTip")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("倒计时背景:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.countBg,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"countBg")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("小船图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.boat,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"boat")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 300*290px格式为jpg\\bmp\\png\\gif")])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("左箭头图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px",background:"gainsboro"}},[a("img",{attrs:{src:t.configItem.leftArrow,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"leftArrow")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 110*110px格式为jpg\\bmp\\png\\gif")])]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("右箭头图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px",background:"gainsboro"}},[a("img",{attrs:{src:t.configItem.rightArrow,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"rightArrow")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 110*110px格式为jpg\\bmp\\png\\gif")])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 592*184px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 87*118px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 140*60px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 233*58px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动预热页",name:"warm"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone warm"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}}),t._v(" "),a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"shareImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con center"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"shareBtnUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 448*100px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("img",{staticStyle:{position:"absolute",width:"94px",height:"77px",left:"50%",transform:"translateX(-50%)",top:"180px"},attrs:{src:"http://qrmkt.oss-cn-beijing.aliyuncs.com/saas_platform/common/model-gift.png",alt:""}}),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"265px",width:"100%","font-size":"10px"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"245px",width:"100%","font-size":"14px"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"drawImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 663*754px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"drawBtnUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 312*95px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"20px",color:"#fff","line-height":"20px","text-align":"center",position:"absolute",left:"0",top:"275px"}},[t._v("未中奖")]),t._v(" "),a("img",{staticClass:"prize-btn",staticStyle:{width:"112px",top:"300px"},attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹窗图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"cryImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 663*754px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"cryBtnUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 312*95px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"分享",name:"share"}},[a("div",{staticClass:"ipone",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone share"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.configItem.share.shareTitle?t.configItem.share.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.configItem.share.shareDesc?t.configItem.share.shareDesc:"扫码验真精彩送不停，更多好礼等你拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.configItem.shareIconUrl}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("share-conf",{staticStyle:{width:"50%",display:"inline-block"},attrs:{editData:[{url:t.configItem.shareIconUrl}],shareConf:t.configItem.share},on:{shareChange:t.editPic}})],1),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("z4wc")},"data-v-39ac5a1e",null);e.default=r.exports},"3xuG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"WinningPrizeMgr",data:()=>({uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},dialogImageUrl:"",dialogVisible:!1,uploadList:[],imgList:[]}),created(){this.getImages()},methods:{getImages(){this.$request.post("/hbact/one/points/sass/prize/images",{},!1,t=>{if("200"==t.code){let e=t.data;return this.imgList=e.map(t=>({url:t.imageUrl})),void this.imgList.forEach(t=>{this.uploadList.push(t)})}this.$message.error(t.message)})},handleSaveImg(){let t=[];if(!this.imgList.length)return this.$message.error("请上传要保存的图片！");this.imgList.forEach(e=>{t.push(e.url)}),console.log(t),this.$request.post("/hbact/one/points/sass/prize/image/save",t,!0,t=>{"200"!=t.code?this.$message.error(t.message):this.$message.success("保存成功！")})},handleRemove(t,e){console.log(t,e);let a=this.imgList.findIndex(e=>e.uid===t.uid);this.uploadList.splice(a,1),this.imgList.splice(a,1)},handlePictureCardPreview(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},uploadImgUrlSuccess(t,e){if(console.log(t,e),"200000"===t.ret)return this.uploadList.push({name:e.name,uid:e.uid,url:e.url}),void this.imgList.push({uid:e.uid,url:t.data.accessUrl});this.$message.error(t.message)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WinningPrizeMgr-container"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("上传图片：")])]),t._v(" "),a("el-form",[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"list-type":"picture-card","file-list":t.uploadList,"on-success":t.uploadImgUrlSuccess,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,title:"图片预览"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveImg}},[t._v("保存")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("Op2J")},"data-v-3a3e44ec",null);e.default=r.exports},"4UqE":function(t,e){},"4We/":function(t,e){},"4sFC":function(t,e){},"4wYT":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","actCode","form","quesId"],data:()=>({stepActive:1,keywords:"",tableData:[],loading:!1,max:10,total:10,titleName:"",detailData:{quesTitle:"",actAnsw:[{answName:"",answFlag:!1},{answName:"",answFlag:!1}],actCode:"",id:"",quesId:"",quesType:1},addFlag:!1}),watch:{detailData:{handler(t){t.actAnsw.length>3?this.addFlag=!1:this.addFlag=!0},deep:!0}},created(){this.id?this.titleName="编辑题目":this.titleName="新增题目",this.getDetail()},methods:{add(t){this.detailData.actAnsw.splice(t+1,0,{answFlag:!1,answName:""})},remove(t){this.detailData.actAnsw.splice(t,1)},getDetail(){this.quesId?this.$request.post("/api/wiseqr/actquest/detail",{actQuest:{id:parseInt(this.quesId)}},!0,t=>{if("200000"==t.ret)return this.detailData=t.data.bean,void this.detailData.actAnsw.forEach(t=>{1==t.answFlag?t.answFlag=!0:t.answFlag=!1});this.$message.error(t.messgae)}):this.detailData.actCode=this.actCode},back(){this.$router.push("/market/actTpl/quesActSetConf?id="+this.id+"&actCode="+this.actCode+"&form="+this.form)},nextStep(){if(!this.detailData.quesTitle)return this.$message.error("请填写题目内容!");var t=0,e=0;return this.detailData.actAnsw.forEach(a=>{a.answName?a.answFlag&&(t=1):e=1}),t?e?this.$message.error("请填写完整题目答案!"):this.detailData.actAnsw.length<2?this.$message.error("请至少填写两个答案!"):(this.detailData.actAnsw.forEach(t=>{1==t.answFlag?t.answFlag=1:t.answFlag=0}),void this.$request.post("/api/wiseqr/actquest/somquet",{actQuest:{id:this.detailData.id,quesId:this.detailData.quesId,actCode:this.detailData.actCode,quesTitle:this.detailData.quesTitle,quesType:this.detailData.quesType},actAnsw:this.detailData.actAnsw},!0,t=>{if(console.log(t),"200000"===t.ret)return this.$message.success("保存成功!"),this.$router.push("/market/actTpl/quesActSetConf?id="+this.id+"&actCode="+this.actCode+"&form="+this.form);this.$message.error(t.message)})):this.$message.error("请至少选择一个正确答案!")}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ques-edit-root"},[a("el-card",[a("el-steps",{staticClass:"step-style",attrs:{active:t.stepActive,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基础设置"}}),t._v(" "),a("el-step",{attrs:{title:"题目设置"}}),t._v(" "),a("el-step",{attrs:{title:"投放设置"}})],1),t._v(" "),a("div",{staticClass:"title"},[t._v(t._s(t.titleName))]),t._v(" "),a("el-form",{staticClass:"ques-part",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"题目名称"}},[a("el-input",{staticClass:"ques-input",attrs:{type:"textarea",maxlength:"100",resize:"false",placeholder:"请输入答案（最多输入100个字）"},model:{value:t.detailData.quesTitle,callback:function(e){t.$set(t.detailData,"quesTitle",e)},expression:"detailData.quesTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"题目答案"}},[a("span",[t._v("(限最多四个)")])]),t._v(" "),t._l(t.detailData.actAnsw,function(e,s){return a("el-form-item",{key:s,attrs:{label:""}},[a("el-checkbox",{staticClass:"answer-checkbox",model:{value:e.answFlag,callback:function(a){t.$set(e,"answFlag",a)},expression:"item.answFlag"}}),t._v(" "),a("el-input",{staticClass:"answer",attrs:{size:"small",placeholder:"请输入答案（最多输入15个字）",maxlength:"15"},model:{value:e.answName,callback:function(a){t.$set(e,"answName",a)},expression:"item.answName"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.addFlag,expression:"addFlag"}],staticClass:"add",on:{click:function(e){t.add(s)}}},[t._v("+")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:s>1,expression:"key>1"}],staticClass:"remove",on:{click:function(e){t.remove(s)}}},[t._v("-")])],1)}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.back}},[t._v("返回题目列表")])],1)],2)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("hsYJ")},"data-v-1ca84334",null);e.default=r.exports},"54tN":function(t,e){},"5usZ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"PartyMgr",data(){return{uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},id:null,isStart:!1,newAct:!1,config:{stime:"",etime:"",scanCont:""},awardConf:[{awardName:"",marketMoney:null,cardValue:null,awardPic:"",awardDesc:"",awardType:null,prizeNum:null,prizeProductList:[]}],title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,brandList:[],confRules:{date:[{required:!0,validator:(t,e,a)=>{this.config.stime&&this.config.etime?this.config.stime>=this.config.etime?a(new Error("开始时间必须小于结束时间")):a():a(new Error("请选择活动时间"))},trigger:"change"}],scanCont:[{required:!0,validator:(t,e,a)=>{this.config.scanCont?a():a(new Error("请输入连续扫码天数"))},trigger:"change"}],awardType:[{required:!0,message:"请选择奖品类型",trigger:"change"}],awardName:[{required:!0,message:"请选择物料",trigger:"change"}],awardPic:[{required:!0,message:"请上传奖品图片",trigger:"change"}],awardDesc:[{required:!0,message:"请输入奖品描述",trigger:"blur"}],prizeNum:[{required:!0,message:"请输入中奖人数",trigger:"blur"}],prizeProductList:[{required:!0,validator:(t,e,a)=>{e.length<1?a(new Error("请输入连续扫码天数")):a()},trigger:"change"}],cardValue:[{required:!0,message:"请输入面额",trigger:"blur"}]},awardType:[{value:1,label:"实物"},{value:7,label:"折扣卡"},{value:8,label:"翻倍卡"}],awardNo:""}},created(){this.getBrandList(),this.getDetail()},mounted(){},methods:{addItem(){this.awardConf.push({awardName:"",marketMoney:null,cardValue:null,awardPic:"",awardDesc:"",awardType:null,prizeNum:null,prizeProductList:[]})},delItem(t){this.awardConf.splice(t,1)},getBrandList(){this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:["BRAND-7D41JAAAAA"],pageSize:"-1"},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.brandList=t.data.list.map(t=>({sn:t.sn,productName:t.allName}))})},getDetail(){this.$request.post("/hbact/one/points/sass/act/config",{},!0,t=>{if("200"==t.code)return this.config.stime=t.data.conf.stime,this.config.etime=t.data.conf.etime,this.config.scanCont=t.data.conf.scanCont,this.newAct=!1,this.id=t.data.conf.id,this.isStart=t.data.isStart,void(t.data.prizeList.length>0&&(this.awardConf=[],t.data.prizeList.forEach(t=>{this.awardConf.push({awardName:t.awardName,marketMoney:t.marketMoney,cardValue:t.cardValue,awardPic:t.awardPic,awardDesc:t.awardDesc,awardType:t.awardType,prizeNum:t.prizeNum,prizeProductList:t.prizeProductList})})));"500"==t.code?this.newAct=!0:this.$message.error(t.msg)})},handleOpen(){this.$request.post("/hbact/one/points/sass/open/award",{},!0,t=>{"200"==t.code?this.$message.success("开奖成功！"):this.$message.error(t.msg)})},confirmSubmit(){let t=!0;this.$refs.awardConf.forEach(e=>{e.validate(e=>{e||(t=!1)})}),this.$refs.actSetConfRef.validate(e=>{if(e){if(!t)return;let e={conf:this.config,prizeList:this.awardConf};this.id&&(e.conf.id=this.id),console.log(e),this.$request.post("/hbact/one/points/sass/act/save",e,!0,t=>{"200"==t.code?(this.$message({type:"success",message:"操作成功!"}),this.getDetail()):this.$message.error(t.msg)})}})},selectPrize(t,e,a){console.log(a),this.awardConf[a].awardName=t.name,this.awardConf[a].awardPrice=t.marketMoney,this.awardConf[a].marketMoney=t.marketMoney,this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},handleSizeChange(t){this.params.pageSize=t,this.getList()},handleCurrentChange(t){this.params.pageNo=t,this.getList()},uploadImgUrlSuccess(t,e){if("200000"===t.ret)return this.awardConf[e].awardPic=t.data.accessUrl;this.$message.error(t.message)},handleSelectChange(t){console.log(t),t.awardName="",t.awardPic=""},getList(t,e){"1"==t?(this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==t&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),void 0!=e&&-1!=e&&(this.awardNo=e),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QA-container"},[a("div",[a("div",{staticStyle:{"margin-bottom":"30px",color:"#0B1019"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleOpen}},[t._v("开奖")]),t._v("（可开奖时间每周六20:30）\n    ")],1),t._v(" "),a("el-form",{ref:"actSetConfRef",attrs:{model:t.config,"label-width":"150px",rules:t.confRules}},[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("基本设置：")])]),t._v(" "),a("el-form-item",{attrs:{label:"活动时间：",prop:"date"}},[a("el-date-picker",{attrs:{disabled:!t.newAct,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.config.stime,callback:function(e){t.$set(t.config,"stime",e)},expression:"config.stime"}}),t._v("\n            至\n            "),a("el-date-picker",{attrs:{disabled:!t.newAct,type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.config.etime,callback:function(e){t.$set(t.config,"etime",e)},expression:"config.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"参与条件：",prop:"scanCont"}},[t._v("\n            本周连续\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.scanCont,callback:function(e){t.$set(t.config,"scanCont",e)},expression:"config.scanCont"}}),t._v("\n            天扫码可参与1荷石币抢大礼活动\n          ")],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}})],1),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("商品设置：")])]),t._v(" "),a("div",[t.awardConf.length<5&&!t.isStart?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addItem}},[t._v("新增商品")]):t._e()],1),t._v(" "),t._l(t.awardConf,function(e,s){return[a("div",{staticStyle:{height:"30px","font-size":"18px","line-height":"30px",margin:"20px",color:"#409EFF"}},[t._v("\n          奖项"+t._s(s+1)+":\n          "),s>0&&!t.isStart?a("el-button",{staticStyle:{"margin-left":"450px"},attrs:{size:"mini",type:"danger"},on:{click:function(e){t.delItem(s)}}},[t._v("删除奖品")]):t._e()],1),t._v(" "),a("el-form",{ref:"awardConf",refInFor:!0,attrs:{model:e,"label-width":"150px",rules:t.confRules,disabled:t.isStart}},[a("el-form-item",{attrs:{label:"奖品类型：",prop:"awardType"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:!!e.id,placeholder:"请选择"},on:{change:function(a){t.handleSelectChange(e)}},model:{value:e.awardType,callback:function(a){t.$set(e,"awardType",a)},expression:"ai.awardType"}},t._l(t.awardType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.awardType&&!e.id,expression:"ai.awardType&&!ai.id"}],attrs:{label:"选择"+("1"==e.awardType?"实物":"7"==e.awardType?"折扣卡":"翻倍卡")+"："}},[a("el-button",{attrs:{size:""},on:{click:function(a){t.getList(e.awardType,s)}}},[t._v("选择")])],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称：",prop:"awardName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.awardName,callback:function(a){t.$set(e,"awardName",a)},expression:"ai.awardName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品图片：",prop:"awardPic"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.awardPic,callback:function(a){t.$set(e,"awardPic",a)},expression:"ai.awardPic"}}),t._v(" "),e.awardPic?a("img",{attrs:{width:"300",height:"165",src:e.awardPic,alt:""}}):t._e(),t._v(" "),a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.uploadImgUrlSuccess(e,s)},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传图片")]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("上传商品图片尺寸（630x348px）")])],1)],1),t._v(" "),7==e.awardType?a("el-form-item",{attrs:{label:"折扣值：",prop:"cardValue"}},[a("el-input-number",{attrs:{step:.01,precision:2,min:0,max:1,"controls-position":"right"},model:{value:e.cardValue,callback:function(a){t.$set(e,"cardValue",a)},expression:"ai.cardValue"}}),t._v(" "),a("span",[t._v("折兑换折扣卡")])],1):t._e(),t._v(" "),8==e.awardType?a("el-form-item",{attrs:{label:"翻倍值：",prop:"cardValue"}},[a("el-input-number",{attrs:{step:.01,precision:2,min:1,"controls-position":"right"},model:{value:e.cardValue,callback:function(a){t.$set(e,"cardValue",a)},expression:"ai.cardValue"}}),t._v(" "),a("span",[t._v("倍红包翻倍卡")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"奖品描述：",prop:"awardDesc"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.awardDesc,callback:function(a){t.$set(e,"awardDesc",a)},expression:"ai.awardDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖人数：",prop:"prizeNum"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"number"},model:{value:e.prizeNum,callback:function(a){t.$set(e,"prizeNum",a)},expression:"ai.prizeNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"关联规格：",prop:"prizeProductList"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:"",disabled:!!e.id,"value-key":"sn",placeholder:"请选择"},model:{value:e.prizeProductList,callback:function(a){t.$set(e,"prizeProductList",a)},expression:"ai.prizeProductList"}},t._l(t.brandList,function(t){return a("el-option",{key:t.sn,attrs:{label:t.productName,value:t}})}))],1),t._v(" "),a("div",{staticStyle:{height:"30px"}})],1)]}),t._v(" "),a("div",{staticStyle:{"margin-bottom":"50px"}})],2)],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[t.isStart?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v("保存")])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e},close:t.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title,t.awardNo)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("PuFD")},"data-v-530aaca2",null);e.default=r.exports},"5vKr":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"QAMgr",data:()=>({id:"",actCode:"",strategyArr:{},act:{},config:{t1Stime:"09:00",t1Etime:"10:00",t2Stime:"14:00",t2Etime:"15:00",t3Stime:"19:00",t3Etime:"22:00"},title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,hb:[],hsb:[],zkk:[],defaultAwae:{awardPic:"",awardPrice:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:"",poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}}),created(){this.getTimeConf(),this.getActCode()},mounted(){},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return this.awae.redMoney*this.awae.totalNum},set:function(t){}}},methods:{getTimeConf(){this.$request.post("/hbact/hyr/mine/conf/show",{},!1,t=>{"200"!=t.code?this.$message.error(t.msg):t.data&&(this.config=t.data)})},getActCode(){this.$request.post("/hbact/hyr/home/actCode",{actType:3},!1,t=>{if("200"==t.code)return this.actCode=t.data.actCode,this.id=t.data.id,void this.getDetail();this.$message.error(t.msg)})},getDetail(){this.$request.post("/api/wiseqr/act/detail",{id:this.id},!0,t=>{if("200000"==t.ret){this.strategyArr=t.data.strategyArr[0],this.act=t.data.act;let e=this.strategyArr.awardArr;return this.hb=[],this.hsb=[],this.zkk=[],void e.forEach((t,e)=>{3==t.awardType?this.hb.push(t):6==t.awardType?this.hsb.push(t):7==t.awardType&&this.zkk.push(t)})}this.$message.error(t.messgae)})},getList(t){"1"==t?(this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t&&(this.params.metraFlag="cdDisc",this.title="选择折扣卡"),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})},addRepertory(t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:e})=>{if(0==e)return this.$message.error("数字不能为0");this.$request.post("/api/wiseqr/act/addNum",{id:t.id,increment:e},!0,t=>{"200000"===t.ret?(this.$message.success("增库成功"),this.getDetail()):this.$message.error(t.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},confirmSubmit(){let t={};t.act={actCode:this.act.actCode,actDesc:this.act.actDesc,actName:this.act.actName,banner:this.act.banner,etimeStr:this.act.etimeStr,extInfo:this.act.extInfo,form:this.act.form,id:this.act.id,idx:this.act.idx,note:this.act.note,selectBrand:this.strategyArr.brandArr,selectCityList:this.strategyArr.areas.cityArr,selectDistrictList:this.strategyArr.areas.districtArr,selectProductList:this.strategyArr.snArr,selectProvList:this.strategyArr.areas.provinceArr,showStatus:this.act.showStatus,status:this.act.status,stimeStr:this.act.stimeStr,tplCode:this.act.tplCode},t.strategyArr=[{areas:{provinceArr:this.strategyArr.areas.provinceArr,cityArr:this.strategyArr.areas.cityArr,districtArr:this.strategyArr.areas.districtArr},awardArr:[...this.hb,...this.hsb,...this.zkk],snArr:this.strategyArr.snArr,brandArr:this.strategyArr.brandArr,tf:{id:this.strategyArr.tf.id,tfCode:this.strategyArr.tf.tfCode},tfType:this.strategyArr.tfType}],Promise.all([this.confirmAward(t),this.confirmTime()]).then(([t,e])=>{"200000"==t.ret?(this.getDetail(),"200"==e.code?this.$message.success("操作成功！"):this.$message.error(e.msg)):this.$message.error(t.message)})},confirmAward(t){return new Promise((e,a)=>{this.$request.post("/api/wiseqr/act/somtfSelf",t,!0,t=>{e(t)})})},confirmTime(){return new Promise((t,e)=>{let a={t1Stime:this.config.t1Stime,t1Etime:this.config.t1Etime,t2Stime:this.config.t2Stime,t2Etime:this.config.t2Etime,t3Stime:this.config.t3Stime,t3Etime:this.config.t3Etime};this.$request.post("/hbact/hyr/mine/conf/update",a,!1,e=>{t(e)})})},selectPrize(t,e){let a=JSON.parse(JSON.stringify(this.defaultAwae));a.awardPic=t.pic,a.poolName=t.name,a.prizeName=t.name,a.poolId=t.id,"选择红包"==e&&(a.awardType=3,this.hb.push(a)),"选择荷石币"==e&&(a.awardType=6,this.hsb.push(a)),"选择折扣卡"==e&&(a.awardType=7,this.zkk.push(a)),this.listVisible=!1},deleteAward(t,e){this[t].splice(e,1)},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QA-container"},[a("div",[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("活动时间：")]),t._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"早:"}},[a("el-time-select",{attrs:{"picker-options":{start:"08:00",step:"00:01",end:"11:30",maxTime:t.config.t1Etime},"value-format":"HH:mm",placeholder:"选择开始时间"},model:{value:t.config.t1Stime,callback:function(e){t.$set(t.config,"t1Stime",e)},expression:"config.t1Stime"}}),t._v("\n            至\n            "),a("el-time-select",{attrs:{"picker-options":{start:"08:00",step:"00:01",end:"11:30",minTime:t.config.t1Stime},"value-format":"HH:mm",placeholder:"选择结束时间"},model:{value:t.config.t1Etime,callback:function(e){t.$set(t.config,"t1Etime",e)},expression:"config.t1Etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中:"}},[a("el-time-select",{attrs:{"picker-options":{start:"12:00",step:"00:01",end:"17:30",maxTime:t.config.t2Etime},"value-format":"HH:mm",placeholder:"选择开始时间"},model:{value:t.config.t2Stime,callback:function(e){t.$set(t.config,"t2Stime",e)},expression:"config.t2Stime"}}),t._v("\n            至\n            "),a("el-time-select",{attrs:{"picker-options":{start:"12:00",step:"00:01",end:"17:30",minTime:t.config.t2Stime},"value-format":"HH:mm",placeholder:"选择结束时间"},model:{value:t.config.t2Etime,callback:function(e){t.$set(t.config,"t2Etime",e)},expression:"config.t2Etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"晚:"}},[a("el-time-select",{attrs:{"picker-options":{start:"19:00",step:"00:01",end:"22:00",maxTime:t.config.t3Etime},"value-format":"HH:mm",placeholder:"选择开始时间"},model:{value:t.config.t3Stime,callback:function(e){t.$set(t.config,"t3Stime",e)},expression:"config.t3Stime"}}),t._v("\n            至\n            "),a("el-time-select",{attrs:{"picker-options":{start:"19:00",step:"00:01",end:"22:00",minTime:t.config.t3Stime},"value-format":"HH:mm",placeholder:"选择结束时间"},model:{value:t.config.t3Etime,callback:function(e){t.$set(t.config,"t3Etime",e)},expression:"config.t3Etime"}})],1)],1)],1)]),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("红包：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择红包:"),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:""},on:{click:function(e){t.getList(3)}}},[t._v("选择")])],1),t._v(" "),a("el-form",t._l(t.hb,function(e,s){return a("el-form-item",{key:s,attrs:{label:"名称："}},[t._v("\n          面额 "),a("el-input-number",{attrs:{disabled:!!e.id,precision:2,min:0,"controls-position":"right"},model:{value:e.redMoney,callback:function(a){t.$set(e,"redMoney",a)},expression:"item.redMoney"}}),t._v("元\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          投放数量 "),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          剩余"+t._s(e.totalNum-e.outNum)+"个\n          ")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          总金额:"+t._s(parseFloat((e.redMoney*e.totalNum).toPrecision(12)))+"元\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          中奖概率 "),a("el-input-number",{attrs:{precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.probability,callback:function(a){t.$set(e,"probability",a)},expression:"item.probability"}}),t._v("\n          %\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("hb",s)}}},[t._v("删除")])],1)}))],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("荷石币：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择荷石币:"),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){t.getList(6)}}},[t._v("选择")])],1),t._v(" "),a("el-form",t._l(t.hsb,function(e,s){return a("el-form-item",{key:s,attrs:{label:"名称："}},[t._v("\n          面额 "),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.integral,callback:function(a){t.$set(e,"integral",a)},expression:"item.integral"}}),t._v("荷石币\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          投放数量"),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          剩余"+t._s(e.totalNum-e.outNum)+"个\n          ")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          总荷石币:"+t._s(e.integral*e.totalNum)+"\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          中奖概率"),a("el-input-number",{attrs:{precision:1,min:0,"controls-position":"right"},model:{value:e.probability,callback:function(a){t.$set(e,"probability",a)},expression:"item.probability"}}),t._v("\n          %\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("hsb",s)}}},[t._v("删除")])],1)}))],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("折扣卡：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择折扣卡:"),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){t.getList(7)}}},[t._v("选择")])],1),t._v(" "),a("el-form",t._l(t.zkk,function(e,s){return a("el-form-item",{key:s,attrs:{label:"名称："}},[a("el-input-number",{attrs:{disabled:!!e.id,step:.01,precision:2,min:0,max:1,"controls-position":"right"},model:{value:e.awardPrice,callback:function(a){t.$set(e,"awardPrice",a)},expression:"item.awardPrice"}}),t._v("折扣卡\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          投放数量"),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          剩余"+t._s(e.totalNum-e.outNum)+"个\n          ")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          中奖概率"),a("el-input-number",{attrs:{precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.probability,callback:function(a){t.$set(e,"probability",a)},expression:"item.probability"}}),t._v("\n          %\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("zkk",s)}}},[t._v("删除")])],1)}))],1)],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v("保存")])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("54tN")},"data-v-0e72a91a",null);e.default=r.exports},"6IBn":function(t,e){},"7v0M":function(t,e){},"8Flj":function(t,e){},"8G00":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data(){return{defaultConf:{title:null,description:"",ratio:.4,img:this.getAllImage()},activeName:"home",addActParams:{conf:"",form:"act-105",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}},computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getImage(t,e){return"http://qoss.qrmkt.cn/new_platform/pc_front/"+t+"."+(e=e||this.suffix)},getStyle(t,e,a,s){var i=t.toString().indexOf("%")>-1,r=e.toString().indexOf("%")>-1;return{style:{"max-width":i?t:Math.floor(.4*t)+"px","max-height":r?e:Math.floor(.4*e)+"px",transform:"translate("+Math.floor(.4*a)+"px,"+Math.floor(.4*s)+"px)"},"c-style":{"max-width":i?t:Math.floor(.5*t)+"px","max-height":r?e:Math.floor(.5*e)+"px",transform:"translate("+Math.floor(.5*a)+"px,"+Math.floor(.5*s)+"px)"}}},getAllImage(){var t={};return t.bg={url:this.getImage("round-bg","png"),width:"100%",height:"100%",left:0,top:0,style:this.getStyle("100%","100%",0,0)},t.title={url:this.getImage("round-title","png"),width:734,height:276,left:13,top:137,style:this.getStyle(734,276,13,137).style,"c-style":this.getStyle(734,276,13,137)["c-style"]},t.tips={url:this.getImage("round-tips","png"),width:86,height:97,left:655,top:8,style:this.getStyle(86,97,655,8).style,"c-style":this.getStyle(98,103,638,38)["c-style"]},t.btm={url:this.getImage("round-btm","png"),width:686,height:676,left:31,top:384,style:this.getStyle(686,676,31,384).style,"c-style":this.getStyle(686,676,31,384)["c-style"]},t.mid={url:this.getImage("round-mid","png"),width:496,height:496,left:109,top:109,style:this.getStyle(496,496,109,109).style,"c-style":this.getStyle(496,496,109,109)["c-style"]},t.btn={url:this.getImage("round-btn","png"),width:209,height:240,left:300,top:272,style:this.getStyle(209,240,300,272).style,"c-style":this.getStyle(209,240,300,272)["c-style"]},t.award={url:"http://qoss.qrmkt.cn/new_platform/pc_front/djlq_btn.png"},t.noAward={url:"http://qoss.qrmkt.cn/new_platform/pc_front/cry75@2x.png"},t.zxNoAwardBtn={url:"http://qoss.qrmkt.cn/new_platform/know-btn.png"},console.log(t),t},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.defaultConf.img.bg.url=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.title.url=t.data.accessUrl;this.$message.error(t.message)},upTipsImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.tips.url=t.data.accessUrl;this.$message.error(t.message)},upBtmImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.btm.url=t.data.accessUrl;this.$message.error(t.message)},upMidImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.mid.url=t.data.accessUrl;this.$message.error(t.message)},upBtnImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.btn.url=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upGameImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.kists[this.gameIndex].url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.award.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImg(t){if("200000"===t.ret)return this.defaultConf.img.noAward.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.zxNoAwardBtn.url=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.defaultConf.title=this.addActParams.name,this.defaultConf.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.defaultConf),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"kits"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"btm"},[a("img",{attrs:{src:t.defaultConf.img.btm.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),a("div",{staticClass:"mid"},[a("img",{attrs:{src:t.defaultConf.img.mid.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=5}}})]),t._v(" "),a("div",{staticClass:"btn"},[a("img",{attrs:{src:t.defaultConf.img.btn.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=6}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("活动锦囊：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipsImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("转盘底图：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.btm.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBtmImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("转盘旋转图：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.mid.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upMidImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("抽奖按钮：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.btn.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBtnImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 734*276px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 120*120px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 686*676px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 469*469，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 210*240px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:"http://qoss.qrmkt.cn/new_platform/awarded.png",alt:""}}),t._v(" "),a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.award.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.award.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 344*84px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[t._v("X")]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.defaultConf.img.noAward.url,alt:""}}),t._v(" "),a("h3",[t._v("很遗憾，未中奖")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖图片：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.noAward.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 620 x 345*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖按钮：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 290 × 74px格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("Z9ow")},"data-v-bb502636",null);e.default=r.exports},"8VOA":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],components:{shareConf:a("ehVw").a},data:()=>({activeName:"home",addActParams:{conf:"",form:"act-704",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},ballonIndex:"",configItem:{title:"",description:"",headerImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-title.png",bgImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/zww-bg.png",actTip:"http://qoss.qrmkt.cn/common/zhuawawa/jww-tips.png",startImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-start.png",toysBgImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-toysbg.png",toyAImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-toyA.png",toyBImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-toyB.png",toyCImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-toyC.png",hookPoleImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-hookpole.png",hookLeftImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-hookleft.png",hookRightImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-hookright.png",drawImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/award-pop.png",drawBtnUrl:"http://qoss.qrmkt.cn/common/zhuawawa/award-btn.png",cryImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/jww-nolucky.png",cryBtnUrl:"http://qoss.qrmkt.cn/common/zhuawawa/nolucky-btn.png",shareImgUrl:"http://qoss.qrmkt.cn/common/zhuawawa/share-bg-img.png",shareBtnUrl:"http://qoss.qrmkt.cn/common/zhuawawa/share-btn-img.png",shareIconUrl:"http://qoss.qrmkt.cn/common/zhuawawa/share-icon.jpg",share:{shareTitle:"",shareDesc:""}},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upToysBgImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toysBgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upStartImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.startImgUrl=t.data.accessUrl;this.$message.error(t.message)},upToyAImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toyAImgUrl=t.data.accessUrl;this.$message.error(t.message)},upToyBImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toyBImgUrl=t.data.accessUrl;this.$message.error(t.message)},upToyCImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toyCImgUrl=t.data.accessUrl;this.$message.error(t.message)},upHookPoleImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.hookPoleImgUrl=t.data.accessUrl;this.$message.error(t.message)},upHookLeftImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.hookLeftImgUrl=t.data.accessUrl;this.$message.error(t.message)},upHookRightImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.hookRightImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upDrawImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.drawImgUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBgSuccess(t){if("200000"===t.ret)return this.configItem.shareImgUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBtnSuccess(t){if("200000"===t.ret)return this.configItem.shareBtnUrl=t.data.accessUrl;this.$message.error(t.message)},editPic(t){let e=t.url;this.configItem.shareIconUrl=e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"hook",attrs:{title:"点击编辑"},on:{click:function(e){t.showEditConIndex=9}}},[a("div",{staticClass:"hookPole"},[a("img",{attrs:{src:t.configItem.hookPoleImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"hookLeft"},[a("img",{attrs:{src:t.configItem.hookLeftImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"hookRight"},[a("img",{attrs:{src:t.configItem.hookRightImgUrl,alt:""}})])]),t._v(" "),a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"title-bg"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"start"},[a("img",{attrs:{src:t.configItem.startImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),a("div",{staticClass:"toysBg"},[a("img",{attrs:{src:t.configItem.toysBgImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=5}}})]),t._v(" "),a("div",{staticClass:"toyA"},[a("img",{attrs:{src:t.configItem.toyAImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"toyB"},[a("img",{attrs:{src:t.configItem.toyBImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=7}}})]),t._v(" "),a("div",{staticClass:"toyC"},[a("img",{attrs:{src:t.configItem.toyCImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=8}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("开始按钮:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.startImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upStartImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("娃娃背景图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.toysBgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upToysBgImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("娃娃A图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.toyAImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upToyAImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("娃娃B图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.toyBImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upToyBImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("娃娃C图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.toyCImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upToyCImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),9==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("夹子上侧图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hookPoleImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHookPoleImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),9==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 80*583px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("夹子左侧图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hookLeftImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHookLeftImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),9==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 138*207px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("夹子右侧图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hookRightImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHookRightImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),9==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 135*199px格式为jpg\\bmp\\png\\gif")]):t._e()]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 591*141px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 602*192px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 92*109px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 690*202px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 225*258px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 220*239px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),8==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 202*238px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动预热页",name:"warm"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone warm"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}}),t._v(" "),a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con center"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 448*240px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("img",{staticStyle:{position:"absolute",width:"94px",height:"77px",left:"50%",transform:"translateX(-50%)",top:"180px"},attrs:{src:"http://qrmkt.oss-cn-beijing.aliyuncs.com/saas_platform/common/model-gift.png",alt:""}}),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"265px",width:"100%","font-size":"10px"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"245px",width:"100%","font-size":"14px"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upDrawImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"20px",color:"#fff","line-height":"20px","text-align":"center",position:"absolute",left:"0",top:"285px"}},[t._v("未中奖")]),t._v(" "),a("img",{staticClass:"prize-btn",staticStyle:{width:"112px",height:"24px",top:"315px"},attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹窗图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"分享",name:"share"}},[a("div",{staticClass:"ipone",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone share"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.configItem.share.shareTitle?t.configItem.share.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.configItem.share.shareDesc?t.configItem.share.shareDesc:"扫码验真精彩送不停，更多好礼等你拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.configItem.shareIconUrl}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("share-conf",{staticStyle:{width:"50%",display:"inline-block"},attrs:{editData:[{url:t.configItem.shareIconUrl}],shareConf:t.configItem.share},on:{shareChange:t.editPic}})],1),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("GgfW")},"data-v-916c278e",null);e.default=r.exports},BmtV:function(t,e){},BzjI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"Reviewmanage",data:()=>({listLoading:!1,authStatusList:[{code:null,name:"全部"},{code:"1",name:"待支付"},{code:"2",name:"待发货"},{code:"3",name:"待收货"},{code:"4",name:"已完成"},{code:"5",name:"已取消"}],buyNumList:[{code:null,name:"全部"},{code:"1",name:"1"},{code:"2",name:"2"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],filters:{authStatus:null,commercial:"",district:"",searchType:"",keywords:"",time:[],addrProvince:"",addrCity:"",addrArea:"",buyNum:null},newList:[],pageSize:10,pageNo:1,currentPage:1,total:0,batchPass:!0,ids:"",dialogVisible:!1,failReason:"",sellerIds:"",headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),created(){this.getListNewList(),this.getOneCategory()},methods:{addNewSeller(){this.$router.push({path:"/seller/review/addSeller"})},getOneCategory(){this.$request.post("/lsh/seller-manager/region/province",{},!0,t=>{this.cateLvl1List=[...t]})},selectBrand1(){this.filters.addrCity="",this.cateLvl2List=[],this.filters.addrArea="",this.cateLvl3List=[],this.getTwoCategory()},getTwoCategory(){""!=this.filters.addrProvince&&this.$request.post("/lsh/seller-manager/region/newCity",{parentCode:this.filters.addrProvince},!0,t=>{this.cateLvl2List=[...t]})},selectBrand2(){this.filters.addrArea="",this.cateLvl3List=[],this.getThreeCategory()},getThreeCategory(){""!=this.filters.addrCity&&this.$request.post("/lsh/seller-manager/region/newDistrict",{parentCode:this.filters.addrCity},!0,t=>{this.cateLvl3List=[...t]})},getListNewList(){let t={orderStatus:this.filters.authStatus,buyNum:this.filters.buyNum,provinceId:this.filters.addrProvince,cityId:this.filters.addrCity,areaId:this.filters.addrArea,startTime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endTime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};this.filters.searchType&&this.filters.keywords&&(t[this.filters.searchType]=this.filters.keywords),this.postSearch(t)},postSearch(t){this.$request.post("/fxweb/fxsaas/getOrders",t,!0,t=>{console.log(t.data),this.newList=t.data.listData,this.total=t.data.pageResult.count,this.pageNo=t.data.pageResult.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getListNewList()},getStatus(){this.filters.authStatus=null,this.filters.commercial="",this.filters.district="",this.filters.searchType="",this.filters.keywords="",this.filters.time=[],this.filters.appStartTime="",this.filters.appEndTime="",this.filters.addrProvince="",this.filters.addrCity="",this.filters.addrArea="",this.pageNo=1,this.currentPage=1,this.getListNewList()},inputWithSelectChange(t){this.filters.keywords=""},approval(t){let e={sellerIds:t,authResult:1};this.$confirm("您确定审核通过吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/lsh/seller-manager/seller/approvalBatch",e,!1,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.getListNewList()):this.$message({message:t.message,type:"warning"})})})},disapprovalDialog(t){this.dialogVisible=!0,this.sellerIds=t},disapproval(){let t={sellerIds:this.sellerIds,authResult:2,failReason:this.failReason};this.$confirm("您确定审核不通过吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/lsh/seller-manager/seller/approvalBatch",t,!1,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.failReason="",this.getListNewList()):(this.$message({message:t.message,type:"warning"}),this.dialogVisible=!1,this.failReason="",this.getListNewList())})})},cancelDialog(){this.dialogVisible=!1,this.failReason=""},sellerDetail(t){this.$router.push({path:"/distribution/orderDetail?orderId="+t})},jumpTo(){this.$emit("current-change")},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getListNewList()},exportData(){var t=new XMLHttpRequest,e=new FormData;let a={provinceId:this.filters.addrProvince,cityId:this.filters.addrCity,areaId:this.filters.addrArea,startTime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endTime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:""};for(var s in this.filters.searchType&&this.filters.keywords&&(a[this.filters.searchType]=this.filters.keywords),a)e.append(s,a[s]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/fxweb/fxsaas/exportOrders",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){t.ok?this.$message({type:"success",message:"上传成功！"}):this.$message.error(t.msg)},handleSourceFileRemove(t,e){this.sourceFiles=[]}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"review-manage-container"},[a("div",{staticClass:"box-container"},[a("div",{staticClass:"add-new-seller"},[a("el-button",{staticStyle:{display:"none","margin-bottom":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.addNewSeller()}}},[t._v("新建零售户")])],1),t._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"90px"}},[a("el-form-item",{attrs:{size:"small",label:"订单状态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.authStatus,callback:function(e){t.$set(t.filters,"authStatus",e)},expression:"filters.authStatus"}},t._l(t.authStatusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"时间区间："}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filters.time,callback:function(e){t.$set(t.filters,"time",e)},expression:"filters.time"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"关键词："}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.filters.keywords,callback:function(e){t.$set(t.filters,"keywords",e)},expression:"filters.keywords"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.inputWithSelectChange},slot:"prepend",model:{value:t.filters.searchType,callback:function(e){t.$set(t.filters,"searchType",e)},expression:"filters.searchType"}},[a("el-option",{attrs:{label:"订单号",value:"orderId"}}),t._v(" "),a("el-option",{attrs:{label:"抢购人",value:"contactName"}}),t._v(" "),a("el-option",{attrs:{label:"手机号",value:"contactPhone"}}),t._v(" "),a("el-option",{attrs:{label:"经销商",value:"salerName"}})],1)],1)],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"位置：",prop:"addrProvince"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.addrProvince,callback:function(e){t.$set(t.filters,"addrProvince",e)},expression:"filters.addrProvince"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrCity"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.filters.addrCity,callback:function(e){t.$set(t.filters,"addrCity",e)},expression:"filters.addrCity"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrArea"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.filters.addrArea,callback:function(e){t.$set(t.filters,"addrArea",e)},expression:"filters.addrArea "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单数量："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.buyNum,callback:function(e){t.$set(t.filters,"buyNum",e)},expression:"filters.buyNum"}},t._l(t.buyNumList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.exportData}},[t._v("导出未发出订单")]),t._v(" "),a("el-button",{attrs:{size:"small"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/fxweb/fxsaas/importOrders",headers:t.headers,data:t.addPool,"before-upload":t.handlerSourceFileBUpload,"on-success":t.handleSourceFileSuccess,"on-remove":t.handleSourceFileRemove,"file-list":t.sourceFiles,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("导入物流信息")])],1)],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.newList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contactName",label:"抢购人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"手机号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addrDetail",label:"收货地址",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"region",label:"地区",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"buyNum",label:"数量",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"alcoholDegree",label:"度数",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.alcoholDegree?a("span",[t._v(t._s("42度"))]):t._e(),t._v(" "),2==e.row.alcoholDegree?a("span",[t._v(t._s("52度"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"支付金额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.amount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"salerName",label:"经销商"}}),t._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"订单状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"下单时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.sellerDetail(e.row.orderId)}}},[t._v("查看详情")])]}}])})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"请输入不通过理由",visible:t.dialogVisible,width:"30%","before-close":t.cancelDialog},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.failReason,callback:function(e){t.failReason=e},expression:"failReason"}}),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.disapproval}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("zi0E"),a("UDQm")},"data-v-f6d3bee6",null);e.default=r.exports},"C/fi":function(t,e){},C2Qb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],components:{shareConf:a("ehVw").a},data:()=>({activeName:"home",addActParams:{conf:"",form:"act-705",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},ballonIndex:"",configItem:{title:"",description:"",headerImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/dhb-title.png",bgImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/dhb-bg.png",actTip:"http://qoss.qrmkt.cn/common/dhongbao/dhb-tips.png",startImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/dhb-start.png",shipImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/dhb-ship.png",clockImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/dhb-clock.png",hookImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/dhb-hook.png",bubbleImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/dhb-bubble.png",drawImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/award-pop.png",drawBtnUrl:"http://qoss.qrmkt.cn/common/dhongbao/award-btn.png",cryImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/dhb-nolucky.png",cryBtnUrl:"http://qoss.qrmkt.cn/common/dhongbao/nolucky-btn.png",shareImgUrl:"http://qoss.qrmkt.cn/common/dhongbao/share-bg-img.png",shareBtnUrl:"http://qoss.qrmkt.cn/common/dhongbao/share-btn-img.png",shareIconUrl:"http://qoss.qrmkt.cn/common/dhongbao/share-icon.png",share:{shareTitle:"",shareDesc:""}},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upToysBgImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toysBgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upShipImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.shipImgUrl=t.data.accessUrl;this.$message.error(t.message)},upHookImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.hookImgUrl=t.data.accessUrl;this.$message.error(t.message)},upClockImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.clockImgUrl=t.data.accessUrl;this.$message.error(t.message)},upBubbleImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.bubbleImgUrl=t.data.accessUrl;this.$message.error(t.message)},upHookPoleImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toyCImgUrl=t.data.accessUrl;this.$message.error(t.message)},upHookLeftImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toyCImgUrl=t.data.accessUrl;this.$message.error(t.message)},upHookRightImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toyCImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upDrawImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.drawImgUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBgSuccess(t){if("200000"===t.ret)return this.configItem.shareImgUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBtnSuccess(t){if("200000"===t.ret)return this.configItem.shareBtnUrl=t.data.accessUrl;this.$message.error(t.message)},editPic(t){let e=t.url;this.configItem.shareIconUrl=e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"start"},[a("img",{attrs:{src:t.configItem.startImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),a("div",{staticClass:"ship"},[a("img",{attrs:{src:t.configItem.shipImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=5}}})]),t._v(" "),a("div",{staticClass:"hook"},[a("img",{attrs:{src:t.configItem.hookImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"clock"},[a("img",{attrs:{src:t.configItem.clockImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=7}}})]),t._v(" "),a("div",{staticClass:"string"}),t._v(" "),t._l([1,2,3,4,5],function(e){return a("div",{class:"bubble-"+e},[a("img",{attrs:{src:t.configItem.bubbleImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=8}}})])})],2),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("开始按钮:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.startImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upStartImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("小船图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.shipImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShipImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("钩子图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hookImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHookImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("倒计时图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.clockImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upClockImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("红包图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.bubbleImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBubbleImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),9==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("夹子上侧图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hookPoleImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHookPoleImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),9==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 80*583px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("夹子左侧图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hookLeftImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHookLeftImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),9==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 138*207px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("夹子右侧图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hookRightImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHookRightImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),9==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 135*199px格式为jpg\\bmp\\png\\gif")]):t._e()]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 697*252px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 519*167px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 130*126px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 171*124px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 61*79px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 205*119px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),8==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 400*400px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动预热页",name:"warm"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone warm"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}}),t._v(" "),a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con center"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 516*166px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("img",{staticStyle:{position:"absolute",width:"94px",height:"77px",left:"50%",transform:"translateX(-50%)",top:"180px"},attrs:{src:"http://qrmkt.oss-cn-beijing.aliyuncs.com/saas_platform/common/model-gift.png",alt:""}}),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"265px",width:"100%","font-size":"10px"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"245px",width:"100%","font-size":"14px"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upDrawImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"20px",color:"#29A9E0","line-height":"20px","text-align":"center",position:"absolute",left:"0",top:"285px"}},[t._v("未中奖")]),t._v(" "),a("img",{staticClass:"prize-btn",staticStyle:{width:"112px",height:"24px",top:"315px"},attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹窗图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"分享",name:"share"}},[a("div",{staticClass:"ipone",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone share"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.configItem.share.shareTitle?t.configItem.share.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.configItem.share.shareDesc?t.configItem.share.shareDesc:"扫码验真精彩送不停，更多好礼等你拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.configItem.shareIconUrl}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("share-conf",{staticStyle:{width:"50%",display:"inline-block"},attrs:{editData:[{url:t.configItem.shareIconUrl}],shareConf:t.configItem.share},on:{shareChange:t.editPic}})],1),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("C/fi")},"data-v-2601df2c",null);e.default=r.exports},DDi8:function(t,e){},DmGG:function(t,e){},F91P:function(t,e){},FChT:function(t,e){},Ftn3:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},data:()=>({listData:[],orderStatusData:[],allBrandsData:[],allSpecisData:[],allareaData:[],selectAllBrands:"",selectSpeciSns:"",selectAllarea:"",id:"1",form:{brandArr:[],snArr:[],cityArr:[],hdCode:"",orderCode:"",etime:"",stime:"",status:"",metraType:1,winnerMobile:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),name:"Object",created(){this.init()},watch:{selectAllBrands(t,e){t&&t!=e&&(this.form.brandArr=[],this.form.brandArr[0]=t,this.id="",this.selectSpeciSns="",this.form.snArr=[],this.allSpecisList(this.form.brandArr[0]))},selectSpeciSns(t,e){t&&t!=e&&(this.form.snArr=[],this.form.snArr[0]=t)},selectAllarea(t,e){t&&t!=e&&(this.form.cityArr=[],this.form.cityArr[0]=t)}},methods:{currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},init(){this.orderStatusList(),this.allBrandsList(),this.allareaList(),this.getlistData()},orderStatusList(){this.$request.post("/api/wiseqr/order/statusSelect",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.orderStatusData=t.data)})},allBrandsList(){this.$request.post("/api/wiseqr/prod/listBrand",{service:"browser"},!0,t=>{"200000"===t.ret&&(this.allBrandsData=t.data.list)})},allSpecisList(t){var e=[];e.push(t),this.$request.post("/api/wiseqr/prod/listTbc",{brandCodeArr:e},!0,t=>{"200000"===t.ret&&(this.allSpecisData=[],this.allSpecisData=t.data.list)})},allareaList(){let t=this;t.$request.post("/api/wiseqr/dim/regionByPCode",{brandListArrObj:{parentCode:"",withRegion:!0}},!0,e=>{if("200000"===e.ret){var a=e.data;0!=a.length&&a.forEach(function(e,a){var s={label:e.name,value:e.code,children:[]};t.$request.post("/api/wiseqr/dim/regionByPCode",{parentCode:e.code},!0,e=>{var a=e.data;null!=a&&0!=a.length&&a.forEach(function(t,e){s.children.push({label:t.name,value:t.code})}),t.allareaData.push(s)})})}})},getlistData(){this.$request.post("/api/wiseqr/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},initPagination(t){t&&(this.pagination.total=t.count)},queryData:function(t){this.getlistData()},resetData:function(t){this.selectAllBrands="",this.selectSpeciSns="",this.selectAllarea="",this.id="1",this.form={metraFlag:"Object",hdCode:"",orderCode:"",brandArr:[],snArr:[],cityArr:[],metraType:1,status:"",stime:"",etime:"",winnerMobile:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){if(2e5==t.ret){this.$message({type:"success",message:t.data.successMsg});let e={name:t.data.sourceFile,sourceCode:t.data.sourceCode,count:t.data.successCount};this.sourceFiles.push(e)}else this.$message.error(t.message)},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/api/wiseqr/order/export",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)},ObjectPageDatail(t){this.$router.push({path:"/Orders/ACT/objectDetail?orderId="+t})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("实物领奖明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"活动ID",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入活动ID"},model:{value:t.form.hdCode,callback:function(e){t.$set(t.form,"hdCode",e)},expression:"form.hdCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllBrands,callback:function(e){t.selectAllBrands=e},expression:"selectAllBrands"}},t._l(t.allBrandsData,function(t,e){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.id,clearable:!!t.id},model:{value:t.selectSpeciSns,callback:function(e){t.selectSpeciSns=e},expression:"selectSpeciSns"}},t._l(t.allSpecisData,function(t,e){return a("el-option",{key:t.product.sn,attrs:{label:t.product.allName,value:t.product.sn}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"发货状态",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.orderStatusData,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"订单号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.form.orderCode,callback:function(e){t.$set(t.form,"orderCode",e)},expression:"form.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖地区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllarea,callback:function(e){t.selectAllarea=e},expression:"selectAllarea"}},t._l(t.allareaData,function(e){return a("el-option-group",{key:e.value,attrs:{label:e.label}},t._l(e.children,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"领奖时段",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.stime,callback:function(e){t.$set(t.form,"stime",e)},expression:"form.stime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.etime,callback:function(e){t.$set(t.form,"etime",e)},expression:"form.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.form.winnerMobile,callback:function(e){t.$set(t.form,"winnerMobile",e)},expression:"form.winnerMobile"}})],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/wiseqr/order/import",headers:t.headers,data:t.addPool,"before-upload":t.handlerSourceFileBUpload,"on-success":t.handleSourceFileSuccess,"on-remove":t.handleSourceFileRemove,"file-list":t.sourceFiles,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("导入物流信息")])],1)],1),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{prop:"hdCode",width:"150px",label:"活动编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCode",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actCode",label:"活动ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"中奖人手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prizeName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"关联规格"}}),t._v(" "),a("el-table-column",{attrs:{label:"领奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                   "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n               ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.awdProvinceName)+"-"+t._s(e.row.awdCityName)+"-"+t._s(e.row.awdDistrictName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态\t"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"已领取":2==e.row.status?"待发货":"已发货"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.ObjectPageDatail(e.row.orderCode)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("g7Yz")},"data-v-25e2d8a7",null);e.default=l.exports},FvRR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],components:{shareConf:a("ehVw").a},data:()=>({activeName:"home",addActParams:{conf:"",form:"act-112",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},ballonIndex:"",configItem:{title:"",description:"",headerImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/banner.png",bgImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/bg.png",actTip:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/tips.png",startImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/ok-btn.png",btnActiveImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/checked.png",gestureAImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/s-s-1.png",gestureBImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/s-s-2.png",gestureCImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/s-s-3.png",gestureAImgUrlL:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/s-l-1.png",gestureBImgUrlL:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/s-l-2.png",gestureCImgUrlL:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/s-l-3.png",drawImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/award-pop.png",drawBtnUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/award-btn.png",cryImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/jww-nolucky.png",cryBtnUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/nolucky-btn.png",shareImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/yr-bg.png",shareBtnUrl:"http://qoss.qrmkt.cn/common/zhuawawa/share-btn-img.png",shareIconUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/chl/share-icon.png",share:{shareTitle:"",shareDesc:""}},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},getGameIndex(t){this.gameIndex=t},upLoadImgSuccess(t,e){if("200000"===t.ret)return this.configItem[e]=t.data.accessUrl;this.$message.error(t.message)},editPic(t){let e=t.url;this.configItem.shareIconUrl=e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"title-bg"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"start"},[a("img",{attrs:{src:t.configItem.startImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),a("div",{staticClass:"btn-active",on:{click:function(e){t.showEditConIndex=5}}},[a("img",{attrs:{src:t.configItem.btnActiveImgUrl,title:"点击编辑",alt:""}}),t._v(" "),a("div",[t._v("石头")])]),t._v(" "),a("div",{staticClass:"btn-active",staticStyle:{left:"128px"}},[a("div",[t._v("剪刀")])]),t._v(" "),a("div",{staticClass:"btn-active",staticStyle:{left:"204px"}},[a("div",[t._v("布")])]),t._v(" "),a("div",{staticClass:"toyA"},[a("img",{attrs:{src:t.configItem.gestureBImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=7}}})]),t._v(" "),a("div",{staticClass:"toyB"},[a("img",{attrs:{src:t.configItem.gestureAImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"toyC"},[a("img",{attrs:{src:t.configItem.gestureCImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=8}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"bgImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"headerImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("开始按钮:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.startImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"startImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"actTip")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("选中按钮:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.btnActiveImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"btnActiveImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("剪刀选项图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.gestureAImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"gestureAImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 162*191px格式为jpg\\bmp\\png\\gif")]),t._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("p",{staticClass:"img-title"},[t._v("剪刀展示图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.gestureAImgUrlL,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"gestureAImgUrlL")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 301*210px格式为jpg\\bmp\\png\\gif")])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("石头选项图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.gestureBImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"gestureBImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 162*191px格式为jpg\\bmp\\png\\gif")]),t._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("p",{staticClass:"img-title"},[t._v("石头展示图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.gestureBImgUrlL,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"gestureBImgUrlL")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 212*196px格式为jpg\\bmp\\png\\gif")])]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("布选项图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.gestureCImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"gestureCImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 162*191px格式为jpg\\bmp\\png\\gif")]),t._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("p",{staticClass:"img-title"},[t._v("布展示图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.gestureCImgUrlL,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"gestureCImgUrlL")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 273*264px格式为jpg\\bmp\\png\\gif")])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*726px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 252*125px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 92*109px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 108*40px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动预热页",name:"warm"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone warm"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}}),t._v(" "),a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"shareImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con center"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"shareBtnUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 448*240px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("img",{staticStyle:{position:"absolute",width:"94px",height:"77px",left:"50%",transform:"translateX(-50%)",top:"180px"},attrs:{src:"http://qrmkt.oss-cn-beijing.aliyuncs.com/saas_platform/common/model-gift.png",alt:""}}),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"265px",width:"100%","font-size":"10px"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"245px",width:"100%","font-size":"14px"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"drawImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 563*639px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"drawBtnUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 312*95px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"20px",color:"#fff","line-height":"20px","text-align":"center",position:"absolute",left:"0",top:"285px"}},[t._v("未中奖")]),t._v(" "),a("img",{staticClass:"prize-btn",staticStyle:{width:"112px",top:"310px"},attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹窗图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"cryImgUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.upLoadImgSuccess(e,"cryBtnUrl")},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 312*95px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"分享",name:"share"}},[a("div",{staticClass:"ipone",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone share"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.configItem.share.shareTitle?t.configItem.share.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.configItem.share.shareDesc?t.configItem.share.shareDesc:"扫码验真精彩送不停，更多好礼等你拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.configItem.shareIconUrl}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("share-conf",{staticStyle:{width:"50%",display:"inline-block"},attrs:{editData:[{url:t.configItem.shareIconUrl}],shareConf:t.configItem.share},on:{shareChange:t.editPic}})],1),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("edkJ")},"data-v-617d84df",null);e.default=r.exports},GXw6:function(t,e){},GgfW:function(t,e){},"H/Pf":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],components:{shareConf:a("ehVw").a},data:()=>({activeName:"home",addActParams:{conf:"",form:"act-702",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},configItem:{title:"",description:"",headerImgUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-title.png",bgImgUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-bg.png",actTip:"http://qoss.qrmkt.cn/common/ddshu/hdjn.png",clickImgUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-clock.png",btnImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-btn.png",holeUrl:"http://qoss.qrmkt.cn/common/ddshu/hole.png",mouseUrl:"http://qoss.qrmkt.cn/common/ddshu/mouse.png",mouseCryUrl:"http://qoss.qrmkt.cn/common/ddshu/mouse-cry.png",hammerUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-hammer.png",drawImgUrl:"http://qoss.qrmkt.cn/common/ddshu/award-pop.png",drawBtnUrl:"http://qoss.qrmkt.cn/common/ddshu/award-btn.png",cryImgUrl:"http://qoss.qrmkt.cn/common/ddshu/dadishu-nolucky.png",cryBtnUrl:"http://qoss.qrmkt.cn/common/ddshu/nolucky-btn.png",shareImgUrl:"http://qoss.qrmkt.cn/common/ddshu/share-bg-img.png",shareBtnUrl:"http://qoss.qrmkt.cn/common/ddshu/share-btn-img.png",shareIconUrl:"http://qoss.qrmkt.cn/common/ddshu/share-icon.png",share:{shareTitle:"",shareDesc:""}},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upHoleUrlSuccess(t){if("200000"===t.ret)return this.configItem.holeUrl=t.data.accessUrl;this.$message.error(t.message)},upClickImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.clickImgUrl=t.data.accessUrl;this.$message.error(t.message)},upMouseUrlSuccess(t){if("200000"===t.ret)return this.configItem.mouseUrl=t.data.accessUrl;this.$message.error(t.message)},upMouseCryUrlSuccess(t){if("200000"===t.ret)return this.configItem.mouseCryUrl=t.data.accessUrl;this.$message.error(t.message)},upHammerUrlSuccess(t){if("200000"===t.ret)return this.configItem.hammerUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upDrawImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.drawImgUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBgSuccess(t){if("200000"===t.ret)return this.configItem.shareImgUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBtnSuccess(t){if("200000"===t.ret)return this.configItem.shareBtnUrl=t.data.accessUrl;this.$message.error(t.message)},editPic(t){let e=t.url;this.configItem.shareIconUrl=e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"clock"},[a("img",{attrs:{src:t.configItem.clickImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),t._l([1,2,3,4,5,6,7,8,9],function(e){return a("div",{class:"hole-"+e},[a("img",{attrs:{src:t.configItem.holeUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=5}}})])}),t._v(" "),a("div",{staticClass:"mouse1"},[a("img",{attrs:{src:t.configItem.mouseUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"mouse2"},[a("img",{attrs:{src:t.configItem.mouseUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"mouse3"},[a("img",{attrs:{src:t.configItem.mouseUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})]),t._v(" "),a("div",{staticClass:"hammer"},[a("img",{attrs:{src:t.configItem.hammerUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=7}}})])],2),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("时间背景:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.clickImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upClickImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("洞口遮罩:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.holeUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHoleUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("出现图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.mouseUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upMouseUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 93*93px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("击中图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.mouseCryUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upMouseCryUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("锤子图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hammerUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHammerUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*415px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 156*177px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 102*103px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 213*136px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 93*93px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 130*124px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动预热页",name:"warm"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone warm"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}}),t._v(" "),a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con center"},[a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 448*240px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{staticStyle:{height:"100%"},attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{staticStyle:{height:"100%"},attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("img",{staticStyle:{position:"absolute",width:"106px",height:"88px",left:"50%",transform:"translateX(-50%)",top:"170px"},attrs:{src:"http://qrmkt.oss-cn-beijing.aliyuncs.com/saas_platform/common/model-gift.png",alt:""}}),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"265px",width:"100%","font-size":"10px"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"245px",width:"100%","font-size":"14px"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upDrawImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"分享",name:"share"}},[a("div",{staticClass:"ipone",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone share"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.configItem.share.shareTitle?t.configItem.share.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.configItem.share.shareDesc?t.configItem.share.shareDesc:"扫码验真精彩送不停，更多好礼等你拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.configItem.shareIconUrl}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("share-conf",{staticStyle:{width:"50%",display:"inline-block"},attrs:{editData:[{url:t.configItem.shareIconUrl}],shareConf:t.configItem.share},on:{shareChange:t.editPic}})],1),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("IPmd")},"data-v-ceeaed24",null);e.default=r.exports},HbXU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],components:{shareConf:a("ehVw").a},data:()=>({activeName:"home",addActParams:{conf:"",form:"act-703",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},ballonIndex:"",configItem:{title:"",description:"",headerImgUrl:"http://qoss.qrmkt.cn/common/dqiqiu/dqiqiu-title.png",bgImgUrl:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-bg.png",actTip:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-tips.png",clockImgUrl:"http://qoss.qrmkt.cn/common/dqiqiu/clock.png",balloonImgUrl:[{src:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-red.png",broken:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-red3.png"},{src:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-blue.png",broken:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-blue3.png"},{src:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-yellow.png",broken:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-yellow3.png"},{src:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-blue.png",broken:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-blue3.png"},{src:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-red.png",broken:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-red3.png"},{src:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-green.png",broken:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-green3.png"},{src:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-blue.png",broken:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-blue3.png"},{src:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-green.png",broken:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-green3.png"},{src:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-red.png",broken:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-balloon-red3.png"}],starImgUrl:"http://qoss.qrmkt.cn/common/dqiqiu/daqiqiu-fb.png",drawImgUrl:"http://qoss.qrmkt.cn/common/dqiqiu/award-pop.png",drawBtnUrl:"http://qoss.qrmkt.cn/common/dqiqiu/award-btn.png",cryImgUrl:"http://qoss.qrmkt.cn/common/dqiqiu/dqiqiu-nolucky.png",cryBtnUrl:"http://qoss.qrmkt.cn/common/dqiqiu/nolucky-btn.png",shareImgUrl:"http://qoss.qrmkt.cn/common/dqiqiu/share-bg-img.png",shareBtnUrl:"http://qoss.qrmkt.cn/common/dqiqiu/share-btn-img.png",shareIconUrl:"http://qoss.qrmkt.cn/common/dqiqiu/share-icon.png",share:{shareTitle:"",shareDesc:""}},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upBalloonUrlSuccess(t){if("200000"===t.ret)return this.configItem.balloonImgUrl[this.ballonIndex].src=t.data.accessUrl;this.$message.error(t.message)},upClockImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.clockImgUrl=t.data.accessUrl;this.$message.error(t.message)},upStarImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.starImgUrl=t.data.accessUrl;this.$message.error(t.message)},upBalloonBrokenUrlSuccess(t){if("200000"===t.ret)return this.configItem.balloonImgUrl[this.ballonIndex].broken=t.data.accessUrl;this.$message.error(t.message)},upHammerUrlSuccess(t){if("200000"===t.ret)return this.configItem.hammerUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upDrawImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.drawImgUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBgSuccess(t){if("200000"===t.ret)return this.configItem.shareImgUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBtnSuccess(t){if("200000"===t.ret)return this.configItem.shareBtnUrl=t.data.accessUrl;this.$message.error(t.message)},editPic(t){let e=t.url;this.configItem.shareIconUrl=e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"clock",on:{click:function(e){t.showEditConIndex=3}}},[a("img",{attrs:{src:t.configItem.clockImgUrl,title:"点击编辑",alt:""}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),t._l(t.configItem.balloonImgUrl,function(e,s){return a("div",{staticClass:"balloon",class:"ps-"+(s+1),attrs:{title:"点击编辑"},on:{click:function(e){t.showEditConIndex=5,t.ballonIndex=s}}},[a("img",{attrs:{src:e.src,alt:""}})])}),t._v(" "),a("div",{staticClass:"star"},[a("img",{attrs:{src:t.configItem.starImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=6}}})])],2),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("时间背景:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.clockImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upClockImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("气球图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.balloonImgUrl[t.ballonIndex].src,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBalloonUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 105*105px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("击中图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.balloonImgUrl[t.ballonIndex].broken,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBalloonBrokenUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("飞镖图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.starImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upStarImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("锤子图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.hammerUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upHammerUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 696*194px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 120*96px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 108*100px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 213*136px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 44*123px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 130*124px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动预热页",name:"warm"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone warm"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}}),t._v(" "),a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con center"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 448*240px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("img",{staticStyle:{position:"absolute",width:"106px",height:"88px",left:"50%",transform:"translateX(-50%)",top:"175px"},attrs:{src:"http://qrmkt.oss-cn-beijing.aliyuncs.com/saas_platform/common/model-gift.png",alt:""}}),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"265px",width:"100%","font-size":"10px"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"245px",width:"100%","font-size":"14px"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upDrawImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("div",{staticStyle:{width:"100%",height:"20px",color:"#5FC54D","line-height":"20px","text-align":"center",position:"absolute",left:"0",top:"285px"}},[t._v("未中奖")]),t._v(" "),a("img",{staticClass:"prize-btn",staticStyle:{width:"112px",height:"24px",top:"315px"},attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹窗图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"分享",name:"share"}},[a("div",{staticClass:"ipone",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone share"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.configItem.share.shareTitle?t.configItem.share.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.configItem.share.shareDesc?t.configItem.share.shareDesc:"扫码验真精彩送不停，更多好礼等你拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.configItem.shareIconUrl}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("share-conf",{staticStyle:{width:"50%",display:"inline-block"},attrs:{editData:[{url:t.configItem.shareIconUrl}],shareConf:t.configItem.share},on:{shareChange:t.editPic}})],1),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("xouQ")},"data-v-8916a220",null);e.default=r.exports},HmuB:function(t,e){},I3g6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},name:"VirtualPage",data:()=>({listData:[],allBrandsData:[],allSpecisData:[],allareaData:[],selectAllBrands:"",selectSpeciSns:"",selectAllarea:"",id:"1",form:{brandArr:[],snArr:[],cityArr:[],hdCode:"",orderCode:"",etime:"",stime:"",status:"",metraType:2,winnerMobile:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),created(){this.init()},watch:{selectAllBrands(t,e){t&&t!=e&&(this.form.brandArr=[],this.form.brandArr[0]=t,this.id="",this.selectSpeciSns="",this.form.snArr=[],this.allSpecisList(this.form.brandArr[0]))},selectSpeciSns(t,e){t&&t!=e&&(this.form.snArr=[],this.form.snArr.push(t))},selectAllarea(t,e){t&&t!=e&&(this.form.cityArr=[],this.form.cityArr[0]=t)}},methods:{currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},init(){this.allBrandsList(),this.allareaList(),this.getlistData()},allBrandsList(){this.$request.post("/api/wiseqr/prod/listBrand",{service:"browser"},!0,t=>{"200000"===t.ret&&(this.allBrandsData=t.data.list)})},allSpecisList(t){var e=[];e.push(t),this.$request.post("/api/wiseqr/prod/listTbc",{brandCodeArr:e},!0,t=>{"200000"===t.ret&&(this.allSpecisData=[],this.allSpecisData=t.data.list)})},allareaList(){let t=this;t.$request.post("/api/wiseqr/dim/regionByPCode",{brandListArrObj:{parentCode:"",withRegion:!0}},!0,e=>{if("200000"===e.ret){var a=e.data;0!=a.length&&a.forEach(function(e,a){var s={label:e.name,value:e.code,children:[]};t.$request.post("/api/wiseqr/dim/regionByPCode",{parentCode:e.code},!0,e=>{var a=e.data;null!=a&&0!=a.length&&a.forEach(function(t,e){s.children.push({label:t.name,value:t.code})}),t.allareaData.push(s)})})}})},getlistData(){this.$request.post("/api/wiseqr/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},initPagination(t){t&&(this.pagination.total=t.count)},queryData:function(t){this.getlistData()},resetData:function(t){this.selectAllBrands="",this.selectSpeciSns="",this.selectAllarea="",this.id="1",this.form={metraFlag:"Object",hdCode:"",orderCode:"",brandArr:[],snArr:[],cityArr:[],metraType:2,status:"",stime:"",etime:"",winnerMobile:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){if(2e5==t.ret){this.$message({type:"success",message:t.data.successMsg});let e={name:t.data.sourceFile,sourceCode:t.data.sourceCode,count:t.data.successCount};this.sourceFiles.push(e)}else this.$message.error(t.message)},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/api/wiseqr/order/export",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("虚拟领奖明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"活动ID",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入活动ID"},model:{value:t.form.hdCode,callback:function(e){t.$set(t.form,"hdCode",e)},expression:"form.hdCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllBrands,callback:function(e){t.selectAllBrands=e},expression:"selectAllBrands"}},t._l(t.allBrandsData,function(t,e){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.id,clearable:!!t.id},model:{value:t.selectSpeciSns,callback:function(e){t.selectSpeciSns=e},expression:"selectSpeciSns"}},t._l(t.allSpecisData,function(t,e){return a("el-option",{key:t.product.sn,attrs:{label:t.product.allName,value:t.product.sn}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"订单号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.form.orderCode,callback:function(e){t.$set(t.form,"orderCode",e)},expression:"form.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖地区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllarea,callback:function(e){t.selectAllarea=e},expression:"selectAllarea"}},t._l(t.allareaData,function(e){return a("el-option-group",{key:e.value,attrs:{label:e.label}},t._l(e.children,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"领奖时段",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.stime,callback:function(e){t.$set(t.form,"stime",e)},expression:"form.stime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.etime,callback:function(e){t.$set(t.form,"etime",e)},expression:"form.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.form.winnerMobile,callback:function(e){t.$set(t.form,"winnerMobile",e)},expression:"form.winnerMobile"}})],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{prop:"hdCode",label:"活动编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCode",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actCode",label:"活动ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prizeName",label:"所领奖项"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awdName",label:"奖项内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"关联规格"}}),t._v(" "),a("el-table-column",{attrs:{label:"领奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.awdProvinceName)+"-"+t._s(e.row.awdCityName)+"-"+t._s(e.row.awdDistrictName))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("S7BC")},"data-v-2d1c517e",null);e.default=l.exports},IPmd:function(t,e){},Ib9Y:function(t,e){},J8gb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["data","saleZone","id"],data:()=>({selectBrand:[],selectSonBrand:[],brandList:[],brandSonList:[]}),watch:{saleZone(t,e){console.log(t,e),this.saleZone=t}},created(){this.getBrandList(),this.handleBrand()},methods:{handleBrand(){0!==this.data.brandArr.length&&(this.selectBrand=this.data.brandArr,this.getBrandSonList()),0!==this.data.snArr.length&&(this.selectSonBrand=this.data.snArr)},getBrandList(){this.$request.post("/api/wiseqr/prod/listBrand",{pageSize:"-1"},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.brandList=t.data.list})},getBrandSonList(){0==this.brandList.length&&setTimeout(()=>{this.getBrandSonList()},1e3),this.saleZone?this.$request.post("/api/actSale/product/sn",{id:this.id,brandCode:this.selectBrand.join(",")},!1,t=>{if("200"===t.code)return this.brandSonList=t.data,void this.done();this.$message.error(t.msg)}):this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.selectBrand,pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandSonList=t.data.list,void this.done();this.$message.error(t.message)})},done(){this.$emit("done",{selectB:this.selectBrand,selectSB:this.selectSonBrand})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getBrandSonList},model:{value:t.selectBrand,callback:function(e){t.selectBrand=e},expression:"selectBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{attrs:{"no-data-text":"请选择品牌",multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.done},model:{value:t.selectSonBrand,callback:function(e){t.selectSonBrand=e},expression:"selectSonBrand"}},t._l(t.brandSonList,function(t){return a("el-option",{key:t.id,attrs:{label:t.allName,value:t.sn}})}))],1)},staticRenderFns:[]},r=a("VU/8")(s,i,!1,null,null,null).exports,l={props:["data","isDis","saleZone","id"],data:()=>({provList:[{code:"000000",name:"全部"}],cityList:[],areaList:[],selectProvList:[],selectCityList:[],selectAreaList:[],oldSlectProvList:["1"],oldSelectCityList:["1"],oldSelectAreaList:["1"],isDisabled:!1}),watch:{saleZone(t,e){console.log(t,e),this.saleZone=t},isDisabled:function(t){t?(this.cityList=[{code:"000000",name:"全部"}],this.areaList=[{code:"000000",name:"全部"}],this.selectProvList=["000000"],this.selectCityList=["000000"],this.selectAreaList=["000000"],this.done(),this.$emit("isAllSelect",!0)):(this.selectProvList.splice(0,this.selectProvList.length),this.selectCityList=[],this.selectAreaList=[],this.cityList=[],this.areaList=[],this.done(),this.$emit("isAllSelect",!1))}},created(){this.getProvList(),this.handleArea(),this.isDis&&(this.isDisabled=!0)},methods:{handleArea(){0!==this.data.provinceArr.length&&(this.selectProvList=this.data.provinceArr,this.getCityList(this.data.provinceArr)),0!==this.data.cityArr.length&&(this.selectCityList=this.data.cityArr,this.getAreaList(this.data.cityArr)),0!==this.data.districtArr.length&&(this.selectAreaList=this.data.districtArr)},getProvList(){this.saleZone?this.$request.post("/api/actSale/province/list",{id:this.id},!1,t=>{"200"!==t.code?this.$message.error(t.msg):this.provList.push(...t.data)}):this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:[]},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.provList.push(...t.data)})},getCityList(t){if(1==this.provList.length)return void setTimeout(()=>{this.getCityList(t)},1e3);let e=[];for(let t of this.provList)e.push(t.code);const a=1===this.oldSlectProvList.length?[]:this.oldSlectProvList[1];if(t.includes("000000")&&(this.selectProvList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectProvList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectProvList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectProvList=["000000"].concat(t)),this.oldSlectProvList[1]=this.selectProvList,0==this.selectProvList.length)return this.cityList=[],this.selectCityList=[],this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectProvList},!0,t=>{if("200000"===t.ret&&t.data.length>0)return this.cityList=[{code:"000000",name:"全部"}],this.cityList.push(...t.data),void this.done();this.message.error(t.message)})},getAreaList(t){if(1==this.cityList.length)return void setTimeout(()=>{this.getAreaList(t)},1e3);let e=[];for(let t of this.cityList)e.push(t.code);const a=1===this.oldSelectCityList.length?[]:this.oldSelectCityList[1];if(t.includes("000000")&&(this.selectCityList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectCityList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectCityList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectCityList=["000000"].concat(t)),this.oldSelectCityList[1]=this.selectCityList,0==this.selectCityList.length)return this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectCityList},!0,t=>{if("200000"===t.ret&&t.data.length>0)return this.areaList=[{code:"000000",name:"全部"}],this.areaList.push(...t.data),void this.done();this.$message.error(t.message)})},selectAll(t){if(1==this.areaList.length)return void setTimeout(()=>{this.selectAll(t)},1e3);let e=[];for(let t of this.areaList)e.push(t.code);const a=1===this.oldSelectAreaList.length?[]:this.oldSelectAreaList[1];if(t.includes("000000")&&(this.selectAreaList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectAreaList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectAreaList=t}a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectAreaList=["000000"].concat(t)),this.oldSelectAreaList[1]=this.selectAreaList,this.done()},done(){this.$emit("done",{selectP:this.selectProvList,selectC:this.selectCityList,selectA:this.selectAreaList})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getCityList},model:{value:t.selectProvList,callback:function(e){t.selectProvList=e},expression:"selectProvList"}},t._l(t.provList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getAreaList},model:{value:t.selectCityList,callback:function(e){t.selectCityList=e},expression:"selectCityList"}},t._l(t.cityList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.selectAll},model:{value:t.selectAreaList,callback:function(e){t.selectAreaList=e},expression:"selectAreaList"}},t._l(t.areaList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),t.saleZone?t._e():a("el-checkbox",{attrs:{label:"全部地区",border:""},model:{value:t.isDisabled,callback:function(e){t.isDisabled=e},expression:"isDisabled"}})],1)},staticRenderFns:[]};var n=a("VU/8")(l,o,!1,function(t){a("aMil")},"data-v-bb18c08a",null).exports,c={props:["awae","prizeType","isDisable","astrict","saleZone","budgetTime"],data(){var t=(t,e,a)=>{};return{prizeList:this.prizeType,rules:{n:[{required:!0,validator:t}],type:[{required:!0,validator:t}],name:[{required:!0,validator:t}],probability:[{required:!0,validator:t}],redNum:[{required:!0,validator:t}],pool:[{required:!0,validator:t}],putNum:[{required:!0,validator:t}],intTotal:[{required:!0,validator:t}],redTotal:[{required:!0,validator:t}]},typeObj:{checkName:{1:"选择物品:",2:"选择物品:",3:"红包池:：",6:"选择积分:"},titleObj:{1:"选择实物",2:"选择虚拟",3:"选择红包",6:"选择积分"},metraObj:{1:"object",2:"virtual",3:"redpack",6:"integral"}},list:[],params:{metraFlag:"object",materialType:"",pageNo:1,pageSize:10,status:1,saleZoneCode:null,budgetTime:null},listTotal:0,listVisible:!1,integralList:[],integralTotal:0,integralVisible:!1,imgStyle:{cursor:"pointer"}}},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return this.awae.redMoney*this.awae.totalNum},set:function(t){}}},watch:{saleZone(t,e){console.log(t,e),this.saleZone=t,this.params.saleZoneCode=t},budgetTime(t,e){console.log(t,e),this.budgetTime=t,this.params.budgetTime=t}},created(){this.params.saleZoneCode=this.saleZone,this.params.budgetTime=this.budgetTime,console.log(this.astrict)},methods:{selectPrize(t){this.awae.awardPic=t.pic,this.awae.poolName=t.name,this.awae.prizeName=t.name,this.awae.poolId=t.id,this.saleZone&&(this.awae.budgetId=t.id,this.awae.poolId=t.material_pool_id),this.listVisible=!1},resetPrize(t){this.awae.awardPic="",this.awae.prizeName="",this.awae.poolName="",this.awae.totalNum="",this.awae.probability="",this.awae.redMoney="",this.awae.redTotalMoney="",this.awae.integral="",this.awae.budgetId="",this.awae.integralBudgetId="",this.params.metraFlag=this.typeObj.metraObj[t]},handleIsDisable(){if(!this.awae.id)return;new Date(this.time.stimeStr).getTime()-this.nowTime<9e5?this.isDisable=!0:this.isDisable=!1},getList(){"1"==this.awae.awardType?(this.params.materialType="1",this.params.metraFlag="object"):"2"==this.awae.awardType?(this.params.metraFlag="virtual",this.params.materialType="2"):"3"==this.awae.awardType?(this.params.metraFlag="redpack",this.params.materialType="3"):"6"==this.awae.awardType&&(this.params.metraFlag="integral",this.params.materialType="6"),console.log(this.params.saleZoneCode);let t="/api/materialBudget/materialList";this.params.saleZoneCode||(t="/api/wiseqr/metra/list"),this.$request.post(t,this.params,!0,t=>{if(t.code&&"200"==t.code||t.ret&&"200000"==t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message||t.msg)})},giveIntegral(){console.log(this.saleZone),this.saleZone?this.$request.post("/api/materialBudget/materialList",{metraFlag:"integral",materialType:"6",budgetTime:this.budgetTime,saleZoneCode:this.saleZone,pageNo:1,pageSize:10,status:1},!0,t=>{if("200"==t.code)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.msg)}):this.$request.post("/api/wiseqr/metra/list",{metraFlag:"integral",pageNo:1,pageSize:10,status:1},!0,t=>{if("200000"===t.ret)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.message)})},selectIntegral(t){this.saleZone?(this.awae.integralBudgetId=t.id,this.awae.integralPool=t.material_pool_id):this.awae.integralPool=t.id,this.integralVisible=!1},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},resetScore(t){t?this.awae.giveScore=1:(this.awae.integralPool=null,this.awae.integral="",this.awae.giveScore=0)},countRedTotal(t){const e=this.awae.redMoney,a=this.awae.totalNum;if(0!=e&&0!=a)return this.awae.redTotalMoney=e*a}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pond"},[a("el-form",{ref:"form",attrs:{model:t.awae,"label-width":"100px",rules:t.rules}},[a("el-form-item",{attrs:{label:"奖品类型:",prop:"type"}},[a("el-select",{attrs:{disabled:!!t.isDisable,placeholder:"请选择"},on:{change:t.resetPrize},model:{value:t.awae.awardType,callback:function(e){t.$set(t.awae,"awardType",e)},expression:"awae.awardType"}},t._l(t.prizeList,function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})}))],1),t._v(" "),[a("el-form-item",{attrs:{label:t.typeObj.checkName[t.awae.awardType],prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{staticClass:"prize-img",style:t.isDisable?"":t.imgStyle,attrs:{src:t.awae.awardPic,title:t.isDisable?"":"点击更换"},on:{click:function(e){!t.isDisable&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),3==t.awae.awardType?a("el-form-item",{attrs:{label:"红包面额:",prop:"redNum"}},[a("el-input-number",{attrs:{disabled:!!t.isDisable,precision:2,min:0,max:t.astrict?.3:1/0,step:.1,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.redMoney,callback:function(e){t.$set(t.awae,"redMoney",e)},expression:"awae.redMoney"}}),t._v(" 元\n        "),t.astrict?a("span",{staticClass:"ml20",staticStyle:{color:"#ccc","font-size":"12px"}},[t._v("开放试用平台，仅支持0.3元红包面额")]):t._e()],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{precision:0,disabled:!!t.isDisable,min:0,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.isDisable?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n        ")],1):t._e()],1),t._v(" "),3==t.awae.awardType?a("el-form-item",{attrs:{label:"红包金额:",prop:"redTotal"}},[a("el-input-number",{attrs:{disabled:"",min:0,"controls-position":"right"},model:{value:t.totalRed,callback:function(e){t.totalRed=e},expression:"totalRed"}}),t._v(" 元\n      ")],1):t._e(),t._v(" "),6==t.awae.awardType?a("el-form-item",{attrs:{label:"积分面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.isDisable,min:0,precision:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n      ")],1):t._e()],t._v(" "),6!==t.awae.awardType?a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.giveScore,"true-label":1,"false-label":0},on:{change:t.resetScore},model:{value:t.awae.giveScore,callback:function(e){t.$set(t.awae,"giveScore",e)},expression:"awae.giveScore"}},[t._v("同时送积分")]),t._v(" "),t.awae.giveScore?a("span",[t.awae.integralPool?a("el-button",{staticClass:"ml20 mr20",attrs:{type:"info"},on:{click:t.giveIntegral}},[t._v("已选择")]):a("el-button",{staticClass:"ml20 mr20",on:{click:t.giveIntegral}},[t._v("选择")]),t._v(" "),a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 积分\n      ")],1):t._e()],1):t._e(),t._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.guideGzh,"true-label":1,"false-label":0},model:{value:t.awae.guideGzh,callback:function(e){t.$set(t.awae,"guideGzh",e)},expression:"awae.guideGzh"}},[t._v("中奖后引导关注公众号")])],1)],2),t._v(" "),a("el-dialog",{attrs:{title:t.typeObj.titleObj[t.awae.awardType],visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"list-img",attrs:{src:t.row.pic}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.budget_value?a("span",[t._v("\n            "+t._s(e.row.budget_value-e.row.budget_used)+"\n          ")]):a("span",[t._v("\n            "+t._s(e.row.stock)+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),t.listTotal>1?a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"选择积分",visible:t.integralVisible,width:"800px"},on:{"update:visible":function(e){t.integralVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.integralList,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.budget_value?a("span",[t._v("\n            "+t._s(e.row.budget_value-e.row.budget_used)+"\n          ")]):a("span",[t._v("\n            "+t._s(e.row.stock)+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.awae.integralPool!==e.row.id?a("el-button",{on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("选择")]):a("el-button",{attrs:{type:"info"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("已选择")])]}}])})],1),t._v(" "),t.integralTotal>1?a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.integralTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,d,!1,function(t){a("OHib")},"data-v-4f618f0e",null).exports,p={props:{data:{type:Object,required:!0},astrictRedflg:{},saleZone:{},budgetTime:{}},components:{pondConf:m},watch:{saleZone(t,e){console.log(t,e),this.saleZone=t},budgetTime(t,e){console.log(t,e),this.budgetTime=t}},data(){return{tabsIndex:null,timeObj:[],statusInfoArr:[],isDisableArr:[],btnDisableArr:[],prizeType:[{name:"实物礼品",type:1},{name:"虚拟礼品",type:2},{name:"红包",type:3},{name:"积分",type:6}],putTabs:[[{title:"常规奖项1",name:"0"}]],putTabsValue:["0"],pickerOptions:{disabledDate:t=>t.getTime()<new Date(this.data.act.stimeStr).getTime()||t.getTime()>new Date(this.data.act.etimeStr).getTime()},defaultAwae:{areas:{cityArr:[],districtArr:[],provinceArr:[]},awardArr:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],brandArr:[],snArr:[],tf:{stimeStr:"",etimeStr:""},tfType:"common"},initData:{}}},created(){this.handleTabs()},methods:{initStatus(t,e){let a;this.$request.post("/api/wiseqr/act/initRedWin",{actCode:t.actCode,tfCode:t.tfCode},!0,t=>{this.initData=JSON.parse(t.data).content,a="200"==this.initData.code?this.initData.data.init?`${this.initData.data.ts}, 初始化成功! 奖品总数：${this.initData.data.rrTfInfo.totalNum}, 剩余：${this.initData.data.rrTfInfo.restNum}`:`${this.initData.data.ts}, 未初始化!`:`${this.initData.data.ts}, ${this.initData.msg}`,this.$set(this.statusInfoArr,e,a)})},handleTabs(){this.data.strategyArr.forEach((t,e)=>{this.handleDisable(t,e),this.handleTime(t),0!==e&&(this.putTabs.push([{title:"常规奖项1",name:"0"}]),this.putTabsValue.push("0")),t.awardArr.forEach((t,a)=>{0!=a&&this.putTabs[e].push({title:"常规奖项"+(a+1),name:a+""})})})},handleTime(t){t.tf.stimeStr&&t.tf.etimeStr&&this.timeObj.push([t.tf.stimeStr,t.tf.etimeStr])},time(t){if(this.timeObj.length>=2){let e=this.timeObj[t];this.timeObj.forEach((a,s)=>{if(s==t)return;if(!a)return;let i=a[0]<=e[0]&&a[1]>=e[0],r=a[0]<=e[1]&&a[1]>=e[1];return i||r?(this.$message.error("场次时间不能重复!"),void this.$set(this.timeObj,t,null)):void 0})}if(!this.timeObj[t])return this.data.strategyArr[t].tf.stimeStr="",void(this.data.strategyArr[t].tf.etimeStr="");this.data.strategyArr[t].tf.stimeStr=this.timeObj[t][0],this.data.strategyArr[t].tf.etimeStr=this.timeObj[t][1]},handleDisable(t,e){let a=t.tf.sysTime,s=new Date(t.tf.stimeStr).getTime(),i=new Date(t.tf.etimeStr).getTime();s-a<9e5?this.isDisableArr.push(!0):this.isDisableArr.push(!1),t.tf.actCode&&t.tf.tfCode&&1==this.data.act.status?a>=i?this.btnDisableArr.push(!0):this.btnDisableArr.push(!1):this.btnDisableArr.push(!0)},putTabsEdit(t,e){if(this.isDisableArr[this.tabsIndex])return;let a=this.data.strategyArr[this.tabsIndex].awardArr.length;if("add"===e){if(10==a)return;let t=JSON.parse(JSON.stringify(this.defaultAwae.awardArr[0]));this.data.strategyArr[this.tabsIndex].awardArr.push(t);let e="常规奖项"+(a+1);this.putTabs[this.tabsIndex].push({title:e,name:a+""}),this.putTabsValue[this.tabsIndex]=a+""}if("remove"===e){if(1==a)return;this.putTabs[this.tabsIndex]=[];for(var s=1;s<a;s++)this.putTabs[this.tabsIndex].push({title:"常规奖项"+s,name:s-1+""});this.putTabsValue[this.tabsIndex]="0",this.data.strategyArr[this.tabsIndex].awardArr.splice(t,1)}},add(){let t=JSON.parse(JSON.stringify(this.defaultAwae));this.data.strategyArr.push(t),this.putTabs.push([{title:"常规奖项1",name:"0"}]),this.putTabsValue.push("0"),this.$set(this.btnDisableArr,this.data.strategyArr.length-1,!0)},del(t){0!=t&&this.$confirm("是否删除该场次?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.timeObj.splice(t,1),this.data.strategyArr.splice(t,1),this.putTabs.splice(t,1),this.putTabsValue.splice(t,1),this.statusInfoArr.splice(t,1),this.isDisableArr.splice(t,1),this.btnDisableArr.splice(t,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[t._l(t.data.strategyArr,function(e,s){return a("div",{key:s,staticClass:"content mt20"},[a("el-form-item",{attrs:{label:"场次时间：",prop:"time"}},[a("el-date-picker",{attrs:{disabled:t.isDisableArr[s],"time-arrow-control":!0,"picker-options":t.pickerOptions,"arrow-control":"",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(e){t.time(s)}},model:{value:t.timeObj[s],callback:function(e){t.$set(t.timeObj,s,e)},expression:"timeObj[index]"}}),t._v(" "),0===s||e.tf.id?t._e():a("el-button",{staticClass:"del-btn",attrs:{type:"danger"},on:{click:function(e){t.del(s)}}},[t._v("删除场次")])],1),t._v(" "),a("el-form-item",{attrs:{label:"初始化奖池："}},[a("el-button",{attrs:{plain:"",type:"primary",disabled:t.btnDisableArr[s]},on:{click:function(a){t.initStatus(e.tf,s)}}},[t._v("初始化奖池")]),t._v(" "),a("span",{staticClass:"ml20 info"},[t._v(t._s(t.statusInfoArr[s]))])],1),t._v(" "),a("div",{on:{mouseover:function(e){t.tabsIndex=s}}},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.putTabsEdit},model:{value:t.putTabsValue[s],callback:function(e){t.$set(t.putTabsValue,s,e)},expression:"putTabsValue[index]"}},t._l(t.putTabs[s],function(i,r){return a("el-tab-pane",{key:r,attrs:{label:i.title,name:i.name}},[a("pond-conf",{attrs:{awae:e.awardArr[r],prizeType:t.prizeType,astrict:t.astrictRedflg,isDisable:t.isDisableArr[s],saleZone:t.saleZone,budgetTime:t.budgetTime}})],1)}))],1)],1)}),t._v(" "),a("el-button",{staticClass:"mt20",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.add}},[t._v("新增场次")])],2)},staticRenderFns:[]};var g={props:["id","actCode","form"],inject:["routerRefresh"],components:{selectedArea:n,selectedBrand:r,putConf:a("VU/8")(p,u,!1,function(t){a("Vy5t")},"data-v-24797f7c",null).exports},data(){var t=(t,e,a)=>{};return{rules:{brand:[{required:!0,validator:t}],area:[{required:!0,validator:t}],time:[{required:!0,validator:t}]},data:{act:{actCode:"",id:"",status:2},strategyArr:[{areas:{cityArr:[],districtArr:[],provinceArr:[]},awardArr:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],brandArr:[],snArr:[],tf:{stimeStr:"",etimeStr:""},tfType:"common"}]},selectedBrandArr:[],selectedSnArr:[],selectedPrevArr:[],selectedCityArr:[],selectedAreaArr:[],saleZoneCode:null,actSTime:"",isDisabled:!1,isShow:!1,statusDisabled:!1,isChange:!1,astrictRedflg:!1}},created(){this.getDetail()},methods:{brandDone(t){this.isChange=!0,this.selectedBrandArr=t.selectB,this.selectedSnArr=t.selectSB},areaDone(t){this.isChange=!0,this.selectedPrevArr=t.selectP,this.selectedCityArr=t.selectC,this.selectedAreaArr=t.selectA},getDetail(){this.$request.post("/api/wiseqr/act/detail",{id:this.id},!0,t=>{"200000"===t.ret&&(this.data.act=t.data.act,this.saleZoneCode=t.data.act.saleZoneCode,this.actSTime=t.data.act.stimeStr,"guest"===this.data.act.orgId&&(this.astrictRedflg=!0),0!==t.data.strategyArr.length&&("000000"==t.data.strategyArr[0].areas.provinceArr[0]&&"000000"==t.data.strategyArr[0].areas.cityArr[0]&&(this.isDisabled=!0),1==t.data.act.status&&(this.statusDisabled=!0),this.data=t.data),this.isShow=!0)})},backList(){this.$router.push("/market/actMgr"),this.routerRefresh()},save(){this.isDisabled||(console.log(this.selectedCityArr),-1!=this.selectedCityArr.indexOf("000000")&&this.selectedCityArr.length>1&&(this.selectedCityArr.splice(this.selectedCityArr.indexOf("000000"),1),console.log(this.selectedCityArr)),-1!=this.selectedAreaArr.indexOf("000000")&&this.selectedAreaArr.length>1&&this.selectedAreaArr.splice(this.selectedAreaArr.indexOf("000000"),1),-1!=this.selectedPrevArr.indexOf("000000")&&this.selectedPrevArr.length>1&&this.selectedPrevArr.splice(this.selectedPrevArr.indexOf("000000"),1)),this.isChange&&this.data.strategyArr.map(t=>{t.areas.provinceArr=this.selectedPrevArr,t.areas.cityArr=this.selectedCityArr,t.areas.districtArr=this.selectedAreaArr,t.brandArr=this.selectedBrandArr,t.snArr=this.selectedSnArr}),this.$request.post("/api/wiseqr/act/somRedtf",this.data,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr"),this.routerRefresh()):this.$message.error(t.message)})}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",{attrs:{"label-width":"110px",rules:t.rules}},[a("el-form-item",{attrs:{label:"品牌规格：",prop:"brand"}},[t.isShow?a("selected-brand",{attrs:{data:{brandArr:t.data.strategyArr[0].brandArr,snArr:t.data.strategyArr[0].snArr},saleZone:t.saleZoneCode,id:t.id},on:{done:t.brandDone}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"地区：",prop:"area"}},[t.isShow?a("selected-area",{attrs:{data:{cityArr:t.data.strategyArr[0].areas.cityArr,districtArr:t.data.strategyArr[0].areas.districtArr,provinceArr:t.data.strategyArr[0].areas.provinceArr},isDis:t.isDisabled,saleZone:t.saleZoneCode,id:t.id},on:{done:t.areaDone,isAllSelect:function(e){t.isDisabled=e}}}):t._e()],1),t._v(" "),t.isShow?a("put-conf",{attrs:{astrictRedflg:t.astrictRedflg,data:t.data,saleZone:t.saleZoneCode,budgetTime:t.actSTime}}):t._e(),t._v(" "),a("el-form-item",{staticClass:"mt20",attrs:{label:"是否立即发布："}},[a("el-switch",{attrs:{disabled:t.statusDisabled,"active-value":1,"inactive-value":2},model:{value:t.data.act.status,callback:function(e){t.$set(t.data.act,"status",e)},expression:"data.act.status"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(e){t.$router.push("/market/actMgr")}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(g,h,!1,function(t){a("8Flj")},"data-v-afab3a32",null);e.default=v.exports},J8gt:function(t,e){},JBIh:function(t,e){},"K0l/":function(t,e){},KMbK:function(t,e){},KMp6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],components:{shareConf:a("ehVw").a},data:()=>({activeName:"home",addActParams:{conf:"",form:"act-701",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},iconUrl:[{key:1,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:378"},{key:2,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:379"},{key:3,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:380"},{key:4,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:381"},{key:5,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:382"},{key:6,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:383"}],configItem:{title:"",description:"",headerImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-title.jpg",bgImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-bkg .png",actTip:"http://qoss.qrmkt.cn/common/niudan/hdjn.png",boxImgUrl:"http://qoss.qrmkt.cn/common/niudan/main.png",btnImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-btn.png",egg1ImgUrl:"http://qoss.qrmkt.cn/common/niudan/ball1.png",egg2ImgUrl:"http://qoss.qrmkt.cn/common/niudan/ball2.png",egg3ImgUrl:"http://qoss.qrmkt.cn/common/niudan/ball3.png",egg1left:"http://qoss.qrmkt.cn/common/niudan/nd-egg1-left.png",egg1right:"http://qoss.qrmkt.cn/common/niudan/nd-egg1-right.png",egg2left:"http://qoss.qrmkt.cn/common/niudan/nd-egg2-left.png",egg2right:"http://qoss.qrmkt.cn/common/niudan/nd-egg2-right.png",egg3left:"http://qoss.qrmkt.cn/common/niudan/nd-egg3-left.png",egg3right:"http://qoss.qrmkt.cn/common/niudan/nd-egg3-right.png",awardUrl:[{imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zhongjiang74@2x.png"}],drawImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-award-bg.png",drawBtnUrl:"http://qoss.qrmkt.cn/common/niudan/niudan-awardBtn.png",cryImgUrl:"http://qoss.qrmkt.cn/common/niudan/nd-noaward.png",cryBtnUrl:"http://qoss.qrmkt.cn/common/niudan/nd-zxNoAwardBtn.png",shareImgUrl:"http://qoss.qrmkt.cn/common/niudan/share-bg-img.png",shareBtnUrl:"http://qoss.qrmkt.cn/common/niudan/share-btn-img.png",shareIconUrl:"http://qoss.qrmkt.cn/common/niudan/share-icon.png",share:{shareTitle:"",shareDesc:""}},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upBtnImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.btnImgUrl=t.data.accessUrl;this.$message.error(t.message)},upBtnImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.btnImgUrl=t.data.accessUrl;this.$message.error(t.message)},upBoxImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.boxImgUrl=t.data.accessUrl;this.$message.error(t.message)},upEgg1ImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.egg1ImgUrl=t.data.accessUrl;this.$message.error(t.message)},upEgg1leftSuccess(t){if("200000"===t.ret)return this.configItem.egg1left=t.data.accessUrl;this.$message.error(t.message)},upEgg1rightSuccess(t){if("200000"===t.ret)return this.configItem.egg1right=t.data.accessUrl;this.$message.error(t.message)},upEgg2ImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.egg2ImgUrl=t.data.accessUrl;this.$message.error(t.message)},upEgg2leftSuccess(t){if("200000"===t.ret)return this.configItem.egg2left=t.data.accessUrl;this.$message.error(t.message)},upEgg2rightSuccess(t){if("200000"===t.ret)return this.configItem.egg2right=t.data.accessUrl;this.$message.error(t.message)},upEgg3ImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.egg3ImgUrl=t.data.accessUrl;this.$message.error(t.message)},upEgg3leftSuccess(t){if("200000"===t.ret)return this.configItem.egg3left=t.data.accessUrl;this.$message.error(t.message)},upEgg3rightSuccess(t){if("200000"===t.ret)return this.configItem.egg3right=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upDrawImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.drawImgUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBgSuccess(t){if("200000"===t.ret)return this.configItem.shareImgUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBtnSuccess(t){if("200000"===t.ret)return this.configItem.shareBtnUrl=t.data.accessUrl;this.$message.error(t.message)},editPic(t){let e=t.url;this.configItem.shareIconUrl=e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("img",{staticClass:"egg7",attrs:{src:t.configItem.egg2ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=7}}}),t._v(" "),a("img",{staticClass:"egg8",attrs:{src:t.configItem.egg3ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=8}}}),t._v(" "),a("img",{staticClass:"egg9",attrs:{src:t.configItem.egg1ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=6}}}),t._v(" "),a("img",{staticClass:"egg2",attrs:{src:t.configItem.egg3ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=8}}}),t._v(" "),a("img",{staticClass:"egg4",attrs:{src:t.configItem.egg3ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=8}}}),t._v(" "),a("img",{staticClass:"egg6",attrs:{src:t.configItem.egg2ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=7}}}),t._v(" "),a("img",{staticClass:"egg1",attrs:{src:t.configItem.egg1ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=6}}}),t._v(" "),a("img",{staticClass:"egg3",attrs:{src:t.configItem.egg2ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=7}}}),t._v(" "),a("img",{staticClass:"egg5",attrs:{src:t.configItem.egg1ImgUrl,alt:""},on:{click:function(e){t.showEditConIndex=6}}}),t._v(" "),a("div",{staticClass:"box"},[a("img",{attrs:{src:t.configItem.boxImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),a("div",{staticClass:"btn"},[a("img",{attrs:{src:t.configItem.btnImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=5}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋机背景：")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.boxImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBoxImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明：")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("抽奖按钮：")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.btnImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBtnImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋一图片：完整")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg1ImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg1ImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋二图片：完整")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg2ImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg2ImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋三图片：完整")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg3ImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg3ImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 730*280px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*930px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 128*103px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 371*137px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),8==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋一开奖：左侧")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg1left,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg1leftSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋一开奖：右侧")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg1right,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg1rightSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋二开奖：左侧")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg2left,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg2leftSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋二开奖：右侧")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg2right,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg2rightSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋三开奖：左侧")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg3left,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg3leftSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),8==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),8==t.showEditConIndex?a("div",{staticClass:"edit-game-img",staticStyle:{"margin-top":"30px"}},[a("div",[a("p",{staticClass:"img-title"},[t._v("扭蛋三开奖：右侧")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px"}},[a("img",{attrs:{src:t.configItem.egg3right,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upEgg3rightSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),8==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 115*115px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动预热页",name:"warm"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone warm"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}}),t._v(" "),a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con center"},[a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 448*240px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("img",{staticStyle:{position:"absolute",width:"106px",height:"88px",left:"50%",transform:"translateX(-50%)",top:"170px"},attrs:{src:"http://qrmkt.oss-cn-beijing.aliyuncs.com/saas_platform/common/model-gift.png",alt:""}}),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"265px",width:"100%","font-size":"10px"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"245px",width:"100%","font-size":"14px"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,width:"100",alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upDrawImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("h3",{staticStyle:{position:"absolute",top:"126px",width:"100%"}},[t._v("很遗憾，未中奖")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 330*70px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"分享",name:"share"}},[a("div",{staticClass:"ipone",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone share"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.configItem.share.shareTitle?t.configItem.share.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.configItem.share.shareDesc?t.configItem.share.shareDesc:"扫码验真精彩送不停，更多好礼等你拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.configItem.shareIconUrl}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("share-conf",{staticStyle:{width:"50%",display:"inline-block"},attrs:{editData:[{url:t.configItem.shareIconUrl}],shareConf:t.configItem.share},on:{shareChange:t.editPic}})],1),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("m4K6")},"data-v-4e5eedfc",null);e.default=r.exports},KxZ5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["awae","prizeType","nWin","isRed","hide","astrict","configId","saleZone","budgetTime"],data(){var t=(t,e,a)=>{};return{prizeList:this.prizeType,rules:{n:[{required:!0,validator:t}],type:[{required:!0,validator:t}],name:[{required:!0,validator:t}],redNum:[{required:!0,validator:t}],pool:[{required:!0,validator:t}],putNum:[{required:!0,validator:t}],intTotal:[{required:!0,validator:t}],redTotal:[{required:!0,validator:t}]},title:"选择物品",list:[],params:{metraFlag:"",materialType:"",pageNo:1,pageSize:10,status:1,saleZoneCode:null,budgetTime:null},listTotal:0,listVisible:!1,integralList:[],integralTotal:0,integralVisible:!1}},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return parseFloat((this.awae.redMoney*this.awae.totalNum).toPrecision(12))},set:function(t){}}},watch:{saleZone(t,e){console.log(t,e),this.saleZone=t,this.params.saleZoneCode=t},budgetTime(t,e){console.log(t,e),this.budgetTime=t,this.params.budgetTime=t}},created(){this.params.saleZoneCode=this.saleZone,this.params.budgetTime=this.budgetTime},methods:{selectPrize(t){this.awae.awardPic=t.pic,this.awae.poolName=t.name,this.awae.prizeName=t.name,this.awae.poolId=t.id,this.saleZone&&(this.awae.budgetId=t.id,this.awae.poolId=t.material_pool_id),this.listVisible=!1},resetPrize(){this.awae.awardPic="",this.awae.prizeName="",this.awae.poolName="",this.awae.totalNum="",this.awae.probability="",this.awae.redMoney="",this.awae.redTotalMoney="",this.awae.integral="",this.awae.budgetId="",this.awae.integralBudgetId=""},getList(){"1"==this.awae.awardType?(this.params.materialType="1",this.params.metraFlag="object"):"2"==this.awae.awardType?(this.params.metraFlag="virtual",this.params.materialType="2"):"3"==this.awae.awardType?(this.params.metraFlag="redpack",this.params.materialType="3"):"6"==this.awae.awardType&&(this.params.metraFlag="integral",this.params.materialType="6"),console.log(this.params.saleZoneCode);let t="/api/materialBudget/materialList";this.params.saleZoneCode||(t="/api/wiseqr/metra/list"),this.$request.post(t,this.params,!0,t=>{if(t.code&&"200"==t.code||t.ret&&"200000"==t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message||t.msg)})},giveIntegral(){console.log(this.saleZone),this.saleZone?this.$request.post("/api/materialBudget/materialList",{metraFlag:"integral",materialType:"6",budgetTime:this.budgetTime,saleZoneCode:this.saleZone,pageNo:1,pageSize:10,status:1},!0,t=>{if("200"==t.code)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.msg)}):this.$request.post("/api/wiseqr/metra/list",{metraFlag:"integral",pageNo:1,pageSize:10,status:1},!0,t=>{if("200000"===t.ret)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.message)})},selectIntegral(t){this.saleZone?(this.awae.integralBudgetId=t.id,this.awae.integralPool=t.material_pool_id):this.awae.integralPool=t.id,this.integralVisible=!1},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},resetScore(t){t?this.awae.giveScore=1:(this.awae.integralPool=null,this.awae.integral="",this.awae.giveScore=0)},resetWarn(t){t||(this.awae.hasWarn=null,this.awae.warnValue="")},resetPdMaxOut(t){t||(this.awae.pdMaxOut=0)},countRedTotal(t){const e=this.awae.redMoney,a=this.awae.totalNum;if(0!=e&&0!=a)return this.awae.redTotalMoney=e*a},addRepertory(){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:t})=>{if(0==t)return this.$message.error("数字不能为0");this.$request.post("/api/flower/prize/add",{flowerConfigId:this.configId,prizeId:this.awae.id,num:t},!1,e=>{"200"==e.code?(this.$message.success("增库成功"),this.awae.totalNum+=Number(t)):this.$message.error(e.msg)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pond"},[a("el-form",{ref:"form",attrs:{model:t.awae,"label-width":"100px",rules:t.rules}},[t.nWin?a("el-form-item",{attrs:{label:"N次必中:",prop:"n"}},[t._v("\n        用户第 "),a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.n,callback:function(e){t.$set(t.awae,"n",e)},expression:"awae.n"}}),t._v(" 个抽奖必中\n      ")],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"奖品类型:",prop:"type"}},[a("el-select",{attrs:{disabled:!!t.awae.id,placeholder:"请选择"},on:{change:t.resetPrize},model:{value:t.awae.awardType,callback:function(e){t.$set(t.awae,"awardType",e)},expression:"awae.awardType"}},t._l(t.prizeList,function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})}))],1),t._v(" "),"1"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{staticStyle:{border:"1px dotted #ccc"},attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n          "),t.awae.id?a("span",[t._v("\n            剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n")],1):t._e()],1)]:t._e(),t._v(" "),"2"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n          "),t.awae.id?a("span",[t._v("\n            剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n")],1):t._e()],1)]:t._e(),t._v(" "),"3"==t.awae.awardType?[a("el-form-item",{attrs:{label:"红包池:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"红包面额:",prop:"redNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:2,min:0,max:t.astrict?.3:1/0,step:.1,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.redMoney,callback:function(e){t.$set(t.awae,"redMoney",e)},expression:"awae.redMoney"}}),t._v(" 元\n          "),t.astrict?a("span",{staticClass:"ml20",staticStyle:{color:"#ccc","font-size":"12px"}},[t._v("开放试用平台，仅支持0.3元红包面额")]):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n          "),t.awae.id?a("span",[t._v("\n            剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n")],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"红包金额:",prop:"redTotal"}},[a("el-input-number",{attrs:{disabled:"",min:0,"controls-position":"right"},model:{value:t.totalRed,callback:function(e){t.totalRed=e},expression:"totalRed"}}),t._v(" 元\n        ")],1)]:t._e(),t._v(" "),"6"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择积分:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{precision:0,disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n          "),t.awae.id?a("span",[t._v("\n            剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n")],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"积分面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:0,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n        ")],1)]:t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.guideGzh,"true-label":1,"false-label":0},model:{value:t.awae.guideGzh,callback:function(e){t.$set(t.awae,"guideGzh",e)},expression:"awae.guideGzh"}},[t._v("中奖后引导关注公众号")]),t._v(" "),t._e(),t._v(" "),t.awae.hasPdMaxOut?a("span",[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.pdMaxOut,callback:function(e){t.$set(t.awae,"pdMaxOut",e)},expression:"awae.pdMaxOut"}}),t._v(" 次\n        ")],1):t._e()],1)],2),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.budget_value?a("span",[t._v("\n              "+t._s(e.row.budget_value-e.row.budget_used)+"\n            ")]):a("span",[t._v("\n              "+t._s(e.row.stock)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"选择积分",visible:t.integralVisible,width:"800px"},on:{"update:visible":function(e){t.integralVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.integralList,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.budget_value?a("span",[t._v("\n              "+t._s(e.row.budget_value-e.row.budget_used)+"\n            ")]):a("span",[t._v("\n              "+t._s(e.row.stock)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.awae.integralPool!==e.row.id?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("选择")]):a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("已选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.integralTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r={props:["formName","configId","editable","saleZone","budgetTime"],components:{pondConf:a("VU/8")(s,i,!1,function(t){a("UP71")},"data-v-0222c2b2",null).exports},watch:{saleZone(t,e){console.log(t,e),this.saleZone=t},budgetTime(t,e){console.log(t,e),this.budgetTime=t}},mixins:[{props:["id","configId","form","awardArr"],inject:["routerRefresh"],data(){return{stepActive:2,act:{id:null,actCode:"",dwnum:null,status:null},status:!1,statusDisabled:!1,actSTime:"",actETime:"",strategy:{areas:{provinceArr:[],cityArr:[],districtArr:[]},awardArr:[],brandArr:[],snArr:[],tfType:""},specialAreas:{provinceArr:[],cityArr:[],districtArr:[]},specialBrand:{brandArr:[],snArr:[]},normalConf:[{awardPic:"",awardType:3,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],normalTfId:"",defaultAwae:{awardPic:"",awardType:3,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null},firstScanConf:[{awardPic:"",awardType:3,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],firstScanTfId:"",nWinConf:[{awardPic:"",awardType:3,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],nWinTfId:"",fixationPutConf:[{awardPic:"",awardType:3,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],fixationPutTfId:"",normalTabsValue:"1",normalTabs:[{title:"奖项1",name:"1"}],firstScanTabsValue:"1",firstScanTabs:[{title:"奖项1",name:"1"}],nWinTabsValue:"1",nWinTabs:[{title:"奖项1",name:"1"}],fixationPutTabsValue:"1",fixationPutTabs:[{title:"奖项1",name:"1"}],tfId:"",tfTimeArr:[],tfDurationArr:[],prizeType:[{name:"红包",type:3}],normalIndex:1,firstScanIndex:1,nWinIndex:1,fixationPutIndex:1,selectBrand:[],selectSonBrand:[],selectProvList:[],oldSlectProvList:["1"],selectCityList:[],oldSelectCityList:["1"],selectAreaList:[],oldSelectAreaList:["1"],brandList:[],brandSonList:[],specialBrandList:[],specialBrandSonList:[],provList:[{code:"000000",name:"全部"}],cityList:[{code:"000000",name:"全部"}],areaList:[{code:"000000",name:"全部"}],specialProvList:[],specialCityList:[],specialAreaList:[],regionVisible:!1,brandVisible:!1,specialRuleConfFlag:!1,prizeLimitFlag:!1,firstScanFlag:!1,nWinFlag:!1,fixationPutFlag:!1,isPut:!1,pickerOptions:{disabledDate:t=>t.getTime()<new Date(this.actSTime).getTime()||t.getTime()>new Date(this.actETime).getTime()},astrictRedflg:!1}},created(){},computed:{},watch:{awardArr(t){this.normalTabs=[{title:"奖项1",name:"1"}],this.normalConf=[{awardPic:"",awardType:3,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],t.length>0&&t.forEach((t,e)=>{if(0!=e&&this.normalTabs.push({title:"奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.normalConf[0][e]=t[e];else this.normalConf.push(t)})},status:function(t){this.act.status=t?1:2},fixationPutFlag:function(t){t?this.restrictArea():(this.selectProvList=[],this.selectCityList=[],this.selectAreaList=[])}},methods:{getBrandList(){this.$request.post("/api/wiseqr/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandList=t.data.list,void this.restrictBrand();this.$message.error(t.message)})},getBrandSonList(){this.restrictBrand(),this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.selectBrand,pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandSonList=t.data.list,void this.restrictSonBrand();this.$message.error(t.message)})},getProvList(){this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:[]},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.provList.push(...t.data)})},getCityList(t){if(1==this.provList.length)return void setTimeout(()=>{this.getCityList(t)},1e3);let e=[];for(let t of this.provList)e.push(t.code);const a=1===this.oldSlectProvList.length?[]:this.oldSlectProvList[1];if(t.includes("000000")&&(this.selectProvList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectProvList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectProvList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectProvList=["000000"].concat(t)),this.oldSlectProvList[1]=this.selectProvList,0==this.selectProvList.length)return this.cityList=[],this.selectCityList=[],this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectProvList},!0,t=>{if("200000"===t.ret)return this.cityList=[{code:"000000",name:"全部"}],this.cityList.push(...t.data),void this.restrictProv();this.message.error(t.message)})},getAreaList(t){if(1==this.cityList.length)return void setTimeout(()=>{this.getAreaList(t)},1e3);let e=[];for(let t of this.cityList)e.push(t.code);const a=1===this.oldSelectCityList.length?[]:this.oldSelectCityList[1];if(t.includes("000000")&&(this.selectCityList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectCityList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectCityList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectCityList=["000000"].concat(t)),this.oldSelectCityList[1]=this.selectCityList,0==this.selectCityList.length)return this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectCityList},!0,t=>{if("200000"===t.ret)return this.areaList=[{code:"000000",name:"全部"}],this.areaList.push(...t.data),void this.restrictCity();this.$message.error(t.message)})},selectAll(t){if(1==this.areaList.length)return void setTimeout(()=>{this.selectAll(t)},1e3);this.restrictArea();let e=[];for(let t of this.areaList)e.push(t.code);const a=1===this.oldSelectAreaList.length?[]:this.oldSelectAreaList[1];if(t.includes("000000")&&(this.selectAreaList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectAreaList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectAreaList=t}a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectAreaList=["000000"].concat(t)),this.oldSelectAreaList[1]=this.selectAreaList},save(){let t=this.normalConf,e=!1;t.forEach((t,a)=>t.prizeName?t.redMoney?void(t.totalNum||(this.$message.error("请输入投放数量"),e=!0)):(this.$message.error("请输入红包金额"),e=!0,!1):(this.$message.error("请选择奖品"),e=!0,!1)),e?(this.$emit("modifyAwardArrError",!1),this.$emit("modifyAwardArr",t)):(this.$emit("modifyAwardArrError",!0),this.$emit("modifyAwardArr",t))},backList(){this.$router.push("/market/actMgr"),this.routerRefresh()},normalTabsEdit(t,e){this.addOrRemove("normal",t,e)},firstScanTabsEdit(t,e){this.addOrRemove("firstScan",t,e)},nWinTabsEdit(t,e){this.addOrRemove("nWin",t,e)},fixationPutTabsEdit(t,e){this.addOrRemove("fixationPut",t,e)},addOrRemove(t,e,a){if("add"===a){if(15==this[t+"Conf"].length)return;let e=JSON.parse(JSON.stringify(this.defaultAwae));this[t+"Conf"].push(e);let a="奖项"+this[t+"Conf"].length;this[t+"Tabs"].push({title:a,name:this[t+"Conf"].length+""}),this[t+"TabsValue"]=this[t+"Conf"].length+""}if("remove"===a){if(1==this[t+"Conf"].length)return;this[t+"Tabs"];this[t+"Conf"].splice(e-1,1),this[t+"Tabs"]=[];for(var s=1;s<=this[t+"Conf"].length;s++)this[t+"Tabs"].push({title:"奖项"+s,name:s+""});this[t+"TabsValue"]="1"}},restrictProv(){this.specialProvList=JSON.parse(JSON.stringify(this.provList)),this.specialProvList.forEach(t=>{t.disabled=!0,this.selectProvList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictCity(){this.specialCityList=JSON.parse(JSON.stringify(this.cityList)),this.specialCityList.forEach(t=>{t.disabled=!0,this.selectCityList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictArea(){this.specialAreaList=JSON.parse(JSON.stringify(this.areaList)),this.specialAreaList.forEach(t=>{t.disabled=!0,this.selectAreaList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictBrand(){this.specialBrandList=JSON.parse(JSON.stringify(this.brandList)),this.specialBrandList.forEach(t=>{t.disabled=!0,this.selectBrand.forEach(e=>{t.brandCode==e&&(t.disabled=!1)})})},restrictSonBrand(){this.specialBrandSonList=JSON.parse(JSON.stringify(this.brandSonList)),this.specialBrandSonList.forEach(t=>{t.disabled=!0,this.selectSonBrand.forEach(e=>{t.sn==e&&(t.disabled=!1)})})}}}]},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actPutConf-container"},[a("el-card",[a("el-form",{ref:"form",attrs:{model:t.strategy,"label-width":"100px"}},[a("el-form-item",[a("div",{staticClass:"prize-conf"},[a("div",{staticClass:"title"},[t._v(t._s(t.formName))]),t._v(" "),a("el-tabs",{staticClass:"put-conf",attrs:{type:"card",editable:t.editable},on:{edit:t.normalTabsEdit},model:{value:t.normalTabsValue,callback:function(e){t.normalTabsValue=e},expression:"normalTabsValue"}},t._l(t.normalTabs,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{astrict:t.astrictRedflg,configId:t.configId,awae:t.normalConf[s],hide:!0,prizeType:t.prizeType,saleZone:t.saleZone,budgetTime:t.budgetTime}})],1)}))],1),t._v(" "),t._e(),t._v(" "),t._e()],1),t._v(" "),t._e()],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"选择的品牌及对应的规格",visible:t.brandVisible,width:"500px"},on:{"update:visible":function(e){t.brandVisible=e}}},[a("span",[t._v("暂时不做")])]),t._v(" "),a("el-dialog",{attrs:{title:"常规奖池选择的地区明细",visible:t.regionVisible,width:"500px"},on:{"update:visible":function(e){t.regionVisible=e}}},[a("span",[t._v("暂时不做")])])],1)},staticRenderFns:[]};var o=a("VU/8")(r,l,!1,function(t){a("kJOH")},"data-v-5548d7e8",null).exports,n={props:["awae","prizeType","nWin","isRed","hide","astrict","configId","saleZone","budgetTime"],data(){var t=(t,e,a)=>{};return{uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},prizeList:this.prizeType,rules:{n:[{required:!0,validator:t}],type:[{required:!0,validator:t}],name:[{required:!0,validator:t}],redNum:[{required:!0,validator:t}],pool:[{required:!0,validator:t}],putNum:[{required:!0,validator:t}],intTotal:[{required:!0,validator:t}],redTotal:[{required:!0,validator:t}]},title:"选择物品",list:[],params:{metraFlag:"",materialType:"",pageNo:1,pageSize:10,status:1,saleZoneCode:null,budgetTime:null},listTotal:0,listVisible:!1,integralList:[],integralTotal:0,integralVisible:!1}},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return parseFloat((this.awae.redMoney*this.awae.totalNum).toPrecision(12))},set:function(t){}}},watch:{saleZone(t,e){console.log(t,e),this.saleZone=t,this.params.saleZoneCode=t},budgetTime(t,e){console.log(t,e),this.budgetTime=t,this.params.budgetTime=t}},created(){this.params.saleZoneCode=this.saleZone,this.params.budgetTime=this.budgetTime},methods:{uploadImgUrlSuccess(t,e){if("200000"===t.ret)return this.awae.awardPic=t.data.accessUrl;this.$message.error(t.message)},selectPrize(t){this.awae.awardPic=t.pic,this.awae.poolName=t.name,this.awae.prizeName=t.name,this.awae.poolId=t.id,this.saleZone&&(this.awae.budgetId=t.id,this.awae.poolId=t.material_pool_id),this.listVisible=!1,1==this.awae.awardType&&(this.awae.goodsPrice=t.marketMoney),console.log(this.awae)},resetPrize(){this.awae.awardPic="",this.awae.prizeName="",this.awae.poolName="",this.awae.totalNum="",this.awae.probability="",this.awae.redMoney="",this.awae.redTotalMoney="",this.awae.integral="",this.awae.budgetId="",this.awae.integralBudgetId=""},getList(){"1"==this.awae.awardType?(this.params.materialType="1",this.params.metraFlag="object"):"2"==this.awae.awardType?(this.params.metraFlag="virtual",this.params.materialType="2"):"3"==this.awae.awardType?(this.params.metraFlag="redpack",this.params.materialType="3"):"6"==this.awae.awardType&&(this.params.metraFlag="integral",this.params.materialType="6"),console.log(this.params.saleZoneCode);let t="/api/materialBudget/materialList";this.params.saleZoneCode||(t="/api/wiseqr/metra/list"),this.$request.post(t,this.params,!0,t=>{if(t.code&&"200"==t.code||t.ret&&"200000"==t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message||t.msg)})},giveIntegral(){console.log(this.saleZone),this.saleZone?this.$request.post("/api/materialBudget/materialList",{metraFlag:"integral",materialType:"6",budgetTime:this.budgetTime,saleZoneCode:this.saleZone,pageNo:1,pageSize:10,status:1},!0,t=>{if("200"==t.code)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.msg)}):this.$request.post("/api/wiseqr/metra/list",{metraFlag:"integral",pageNo:1,pageSize:10,status:1},!0,t=>{if("200000"===t.ret)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.message)})},selectIntegral(t){this.saleZone?(this.awae.integralBudgetId=t.id,this.awae.integralPool=t.material_pool_id):this.awae.integralPool=t.id,this.integralVisible=!1},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},resetScore(t){t?this.awae.giveScore=1:(this.awae.integralPool=null,this.awae.integral="",this.awae.giveScore=0)},resetWarn(t){t||(this.awae.hasWarn=null,this.awae.warnValue="")},resetPdMaxOut(t){t||(this.awae.pdMaxOut=0)},countRedTotal(t){const e=this.awae.redMoney,a=this.awae.totalNum;if(0!=e&&0!=a)return this.awae.redTotalMoney=e*a},addRepertory(){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:t})=>{if(0==t)return this.$message.error("数字不能为0");this.$request.post("/api/flower/prize/add",{flowerConfigId:this.configId,prizeId:this.awae.id,num:t},!1,e=>{"200"==e.code?(this.$message.success("增库成功"),this.awae.totalNum+=Number(t)):this.$message.error(e.msg)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pond"},[a("el-form",{ref:"form",attrs:{model:t.awae,"label-width":"100px",rules:t.rules}},[t.nWin?a("el-form-item",{attrs:{label:"N次必中:",prop:"n"}},[t._v("\n        用户第 "),a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.n,callback:function(e){t.$set(t.awae,"n",e)},expression:"awae.n"}}),t._v(" 个抽奖必中\n      ")],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"奖品类型:",prop:"type"}},[a("el-select",{attrs:{disabled:!!t.awae.id,placeholder:"请选择"},on:{change:t.resetPrize},model:{value:t.awae.awardType,callback:function(e){t.$set(t.awae,"awardType",e)},expression:"awae.awardType"}},t._l(t.prizeList,function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})}))],1),t._v(" "),"1"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{staticStyle:{border:"1px dotted #ccc"},attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n          "),t.awae.id?a("span",[t._v("\n            剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n            "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1)]:t._e(),t._v(" "),"2"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n          "),t.awae.id?a("span",[t._v("\n            剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n            "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1)]:t._e(),t._v(" "),"3"==t.awae.awardType?[a("el-form-item",{attrs:{label:"红包池:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"红包面额:",prop:"redNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:2,min:0,max:t.astrict?.3:1/0,step:.1,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.redMoney,callback:function(e){t.$set(t.awae,"redMoney",e)},expression:"awae.redMoney"}}),t._v(" 元\n          "),t.astrict?a("span",{staticClass:"ml20",staticStyle:{color:"#ccc","font-size":"12px"}},[t._v("开放试用平台，仅支持0.3元红包面额")]):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n          "),t.awae.id?a("span",[t._v("\n            剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n            "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"红包金额:",prop:"redTotal"}},[a("el-input-number",{attrs:{disabled:"",min:0,"controls-position":"right"},model:{value:t.totalRed,callback:function(e){t.totalRed=e},expression:"totalRed"}}),t._v(" 元\n        ")],1)]:t._e(),t._v(" "),"6"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择积分:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{precision:0,disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n          "),t.awae.id?a("span",[t._v("\n            剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n            "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"积分面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:0,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n        ")],1)]:t._e(),t._v(" "),"9"==t.awae.awardType?[a("el-form-item",{attrs:{label:"奖品图片:",prop:"pool"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.awae.awardPic,callback:function(e){t.$set(t.awae,"awardPic",e)},expression:"awae.awardPic"}}),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.uploadImgUrlSuccess(e,"2")},"show-file-list":!1}},[t.awae.awardPic?a("img",{staticClass:"avatar",attrs:{src:t.awae.awardPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("span",[t._v("* 图片建议尺寸为380*280px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"奖品名称",disabled:!!t.awae.id},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{precision:0,disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n          "),t.awae.id?a("span",[t._v("\n            剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n            "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:0,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n        ")],1)]:t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.guideGzh,"true-label":1,"false-label":0},model:{value:t.awae.guideGzh,callback:function(e){t.$set(t.awae,"guideGzh",e)},expression:"awae.guideGzh"}},[t._v("中奖后引导关注公众号")]),t._v(" "),t._e(),t._v(" "),t.awae.hasPdMaxOut?a("span",[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.pdMaxOut,callback:function(e){t.$set(t.awae,"pdMaxOut",e)},expression:"awae.pdMaxOut"}}),t._v(" 次\n        ")],1):t._e()],1)],2),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.budget_value?a("span",[t._v("\n              "+t._s(e.row.budget_value-e.row.budget_used)+"\n            ")]):a("span",[t._v("\n              "+t._s(e.row.stock)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"选择积分",visible:t.integralVisible,width:"800px"},on:{"update:visible":function(e){t.integralVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.integralList,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.budget_value?a("span",[t._v("\n              "+t._s(e.row.budget_value-e.row.budget_used)+"\n            ")]):a("span",[t._v("\n              "+t._s(e.row.stock)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.awae.integralPool!==e.row.id?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("选择")]):a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("已选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.integralTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var d={props:["formName","configId","editable","saleZone","budgetTime"],components:{pondConf:a("VU/8")(n,c,!1,function(t){a("HmuB"),a("DmGG")},"data-v-4b329c49",null).exports},watch:{saleZone(t,e){console.log(t,e),this.saleZone=t},budgetTime(t,e){console.log(t,e),this.budgetTime=t}},mixins:[{props:["id","configId","form","awardArr"],inject:["routerRefresh"],data(){return{stepActive:2,act:{id:null,actCode:"",dwnum:null,status:null},status:!1,statusDisabled:!1,actSTime:"",actETime:"",strategy:{areas:{provinceArr:[],cityArr:[],districtArr:[]},awardArr:[],brandArr:[],snArr:[],tfType:""},specialAreas:{provinceArr:[],cityArr:[],districtArr:[]},specialBrand:{brandArr:[],snArr:[]},normalConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],normalTfId:"",defaultAwae:{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null},firstScanConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],firstScanTfId:"",nWinConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],nWinTfId:"",fixationPutConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],fixationPutTfId:"",normalTabsValue:"1",normalTabs:[{title:"奖项1",name:"1"}],firstScanTabsValue:"1",firstScanTabs:[{title:"奖项1",name:"1"}],nWinTabsValue:"1",nWinTabs:[{title:"奖项1",name:"1"}],fixationPutTabsValue:"1",fixationPutTabs:[{title:"奖项1",name:"1"}],tfId:"",tfTimeArr:[],tfDurationArr:[],prizeType:[{name:"实物礼品",type:1},{name:"红包",type:3},{name:"积分",type:6},{name:"自定义礼品",type:9}],normalIndex:1,firstScanIndex:1,nWinIndex:1,fixationPutIndex:1,selectBrand:[],selectSonBrand:[],selectProvList:[],oldSlectProvList:["1"],selectCityList:[],oldSelectCityList:["1"],selectAreaList:[],oldSelectAreaList:["1"],brandList:[],brandSonList:[],specialBrandList:[],specialBrandSonList:[],provList:[{code:"000000",name:"全部"}],cityList:[{code:"000000",name:"全部"}],areaList:[{code:"000000",name:"全部"}],specialProvList:[],specialCityList:[],specialAreaList:[],regionVisible:!1,brandVisible:!1,specialRuleConfFlag:!1,prizeLimitFlag:!1,firstScanFlag:!1,nWinFlag:!1,fixationPutFlag:!1,isPut:!1,pickerOptions:{disabledDate:t=>t.getTime()<new Date(this.actSTime).getTime()||t.getTime()>new Date(this.actETime).getTime()},astrictRedflg:!1}},created(){},computed:{},watch:{awardArr(t){this.normalTabs=[{title:"奖项1",name:"1"}],this.normalConf=[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],t.length>0&&t.forEach((t,e)=>{if(0!=e&&this.normalTabs.push({title:"奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.normalConf[0][e]=t[e];else this.normalConf.push(t)})},status:function(t){this.act.status=t?1:2},fixationPutFlag:function(t){t?this.restrictArea():(this.selectProvList=[],this.selectCityList=[],this.selectAreaList=[])}},methods:{getBrandList(){this.$request.post("/api/wiseqr/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandList=t.data.list,void this.restrictBrand();this.$message.error(t.message)})},getBrandSonList(){this.restrictBrand(),this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.selectBrand,pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandSonList=t.data.list,void this.restrictSonBrand();this.$message.error(t.message)})},getProvList(){this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:[]},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.provList.push(...t.data)})},getCityList(t){if(1==this.provList.length)return void setTimeout(()=>{this.getCityList(t)},1e3);let e=[];for(let t of this.provList)e.push(t.code);const a=1===this.oldSlectProvList.length?[]:this.oldSlectProvList[1];if(t.includes("000000")&&(this.selectProvList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectProvList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectProvList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectProvList=["000000"].concat(t)),this.oldSlectProvList[1]=this.selectProvList,0==this.selectProvList.length)return this.cityList=[],this.selectCityList=[],this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectProvList},!0,t=>{if("200000"===t.ret)return this.cityList=[{code:"000000",name:"全部"}],this.cityList.push(...t.data),void this.restrictProv();this.message.error(t.message)})},getAreaList(t){if(1==this.cityList.length)return void setTimeout(()=>{this.getAreaList(t)},1e3);let e=[];for(let t of this.cityList)e.push(t.code);const a=1===this.oldSelectCityList.length?[]:this.oldSelectCityList[1];if(t.includes("000000")&&(this.selectCityList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectCityList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectCityList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectCityList=["000000"].concat(t)),this.oldSelectCityList[1]=this.selectCityList,0==this.selectCityList.length)return this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectCityList},!0,t=>{if("200000"===t.ret)return this.areaList=[{code:"000000",name:"全部"}],this.areaList.push(...t.data),void this.restrictCity();this.$message.error(t.message)})},selectAll(t){if(1==this.areaList.length)return void setTimeout(()=>{this.selectAll(t)},1e3);this.restrictArea();let e=[];for(let t of this.areaList)e.push(t.code);const a=1===this.oldSelectAreaList.length?[]:this.oldSelectAreaList[1];if(t.includes("000000")&&(this.selectAreaList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectAreaList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectAreaList=t}a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectAreaList=["000000"].concat(t)),this.oldSelectAreaList[1]=this.selectAreaList},save(){let t=this.normalConf,e=!1;t.forEach((t,a)=>{if(!t.prizeName)return this.$message.error("请选择奖品"),e=!0,!1;t.totalNum||(this.$message.error("请输入投放数量"),e=!0)}),e?(this.$emit("modifyAwardArrError",!1),this.$emit("modifyAwardArr",t)):(this.$emit("modifyAwardArrError",!0),this.$emit("modifyAwardArr",t))},backList(){this.$router.push("/market/actMgr"),this.routerRefresh()},normalTabsEdit(t,e){this.addOrRemove("normal",t,e)},firstScanTabsEdit(t,e){this.addOrRemove("firstScan",t,e)},nWinTabsEdit(t,e){this.addOrRemove("nWin",t,e)},fixationPutTabsEdit(t,e){this.addOrRemove("fixationPut",t,e)},addOrRemove(t,e,a){if("add"===a){if(15==this[t+"Conf"].length)return;let e=JSON.parse(JSON.stringify(this.defaultAwae));this[t+"Conf"].push(e);let a="奖项"+this[t+"Conf"].length;this[t+"Tabs"].push({title:a,name:this[t+"Conf"].length+""}),this[t+"TabsValue"]=this[t+"Conf"].length+""}if("remove"===a){if(1==this[t+"Conf"].length)return;this[t+"Tabs"];this[t+"Conf"].splice(e-1,1),this[t+"Tabs"]=[];for(var s=1;s<=this[t+"Conf"].length;s++)this[t+"Tabs"].push({title:"奖项"+s,name:s+""});this[t+"TabsValue"]="1"}},restrictProv(){this.specialProvList=JSON.parse(JSON.stringify(this.provList)),this.specialProvList.forEach(t=>{t.disabled=!0,this.selectProvList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictCity(){this.specialCityList=JSON.parse(JSON.stringify(this.cityList)),this.specialCityList.forEach(t=>{t.disabled=!0,this.selectCityList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictArea(){this.specialAreaList=JSON.parse(JSON.stringify(this.areaList)),this.specialAreaList.forEach(t=>{t.disabled=!0,this.selectAreaList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictBrand(){this.specialBrandList=JSON.parse(JSON.stringify(this.brandList)),this.specialBrandList.forEach(t=>{t.disabled=!0,this.selectBrand.forEach(e=>{t.brandCode==e&&(t.disabled=!1)})})},restrictSonBrand(){this.specialBrandSonList=JSON.parse(JSON.stringify(this.brandSonList)),this.specialBrandSonList.forEach(t=>{t.disabled=!0,this.selectSonBrand.forEach(e=>{t.sn==e&&(t.disabled=!1)})})}}}]},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actPutConf-container"},[a("el-card",[a("el-form",{ref:"form",attrs:{model:t.strategy,"label-width":"100px"}},[a("el-form-item",[a("div",{staticClass:"prize-conf"},[a("div",{staticClass:"title"},[t._v(t._s(t.formName))]),t._v(" "),a("el-tabs",{staticClass:"put-conf",attrs:{type:"card",editable:t.editable},on:{edit:t.normalTabsEdit},model:{value:t.normalTabsValue,callback:function(e){t.normalTabsValue=e},expression:"normalTabsValue"}},t._l(t.normalTabs,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{astrict:t.astrictRedflg,configId:t.configId,awae:t.normalConf[s],hide:!0,prizeType:t.prizeType,saleZone:t.saleZone,budgetTime:t.budgetTime}})],1)}))],1),t._v(" "),t._e(),t._v(" "),t._e()],1),t._v(" "),t._e()],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"选择的品牌及对应的规格",visible:t.brandVisible,width:"500px"},on:{"update:visible":function(e){t.brandVisible=e}}},[a("span",[t._v("暂时不做")])]),t._v(" "),a("el-dialog",{attrs:{title:"常规奖池选择的地区明细",visible:t.regionVisible,width:"500px"},on:{"update:visible":function(e){t.regionVisible=e}}},[a("span",[t._v("暂时不做")])])],1)},staticRenderFns:[]};var p={name:"HPXSetConf",props:["form","actCode","id","saleZone","budgetTime"],components:{ActPutConf:o,BZActPutConf:a("VU/8")(d,m,!1,function(t){a("iq+h")},"data-v-fc0b4280",null).exports},data(){return{actStatus:0,confData:{id:"",actCode:"",dayNum:"",blossomNum:"",flowerNum:"",JSEtimeStr:"",OpenTimeStr:"",totalMoney:"",totalWinnerNum:""},confRules:{dayNum:[{required:!0,validator:(t,e,a)=>{this.confData.dayNum?a():a(new Error("请输入每人每天可浇水次数"))},trigger:"change"}],blossomNum:[{required:!0,validator:(t,e,a)=>{this.confData.blossomNum?a():a(new Error("请输入养成一朵花浇水次数"))},trigger:"change"}],flowerNum:[{required:!0,validator:(t,e,a)=>{this.confData.flowerNum?a():a(new Error("请输入集齐花朵次数"))},trigger:"change"}],JSEtimeStr:[{required:!0,message:"请选择结束时间",trigger:"change"}],OpenTimeStr:[{required:!0,message:"请选择开奖时间",trigger:"change"}],totalMoney:[{required:!0,validator:(t,e,a)=>{this.confData.totalMoney?a():a(new Error("请输红包总金额"))},trigger:"change"}],totalWinnerNum:[{required:!0,validator:(t,e,a)=>{this.confData.totalWinnerNum?a():a(new Error("请输瓜分总人数"))},trigger:"change"}],awardType:[{required:!0,message:"请选择奖品类型",trigger:"change"}],awardName:[{required:!0,message:"请选择物料",trigger:"change"}],redpackValue:[{required:!0,validator:(t,e,a)=>{this.ZawardArr.redpackValue?a():a(new Error("请输红包金额"))},trigger:"change"}]},awardArr:[],awardArrFlag:!0,ZawardArr:{awdCode:"",awardName:"",redpackValue:null,awardPic:"",awardType:3,guideGzh:0},GFAwardArr:[],GFAwardArrFlag:!0,finishUser:"",awardType:[{value:3,label:"红包"}],jcTypeArr:[{value:1,label:"总奖池"},{value:2,label:"多奖品类奖池"}],jcType:1,title:"选择物品",list:[],params:{metraFlag:"",materialType:"",pageNo:1,pageSize:10,status:1,saleZoneCode:null,budgetTime:null},listTotal:0,listVisible:!1}},created(){this.getActDetail(),this.params.saleZoneCode=this.saleZone,this.params.budgetTime=this.budgetTime},methods:{getActDetail(){this.$request.post("/api/flower/config/select",{actCode:this.actCode},!1,t=>{"200"===t.code?null!=t.data.config&&(this.actStatus=t.data.actStatus,this.confData.id=t.data.config.id,this.confData.JSEtimeStr=t.data.config.joinEndTime,this.confData.OpenTimeStr=t.data.config.awdBeginTime,this.confData.dayNum=t.data.config.dayMaxNum,this.confData.blossomNum=t.data.config.oneFlowerNeedNum,this.confData.flowerNum=t.data.config.finishNeedNum,this.jcType=t.data.config.openAwardType,this.confData.totalMoney=t.data.config.totalAmount,this.finishUser=t.data.finishUser,this.awardArr=t.data.prizeList.map(t=>({id:t.id,actCode:t.actCode,prizeName:t.awdName,totalNum:t.totalNum,outNum:t.outNum,redMoney:t.redpackValue,awardType:t.awdType,awardPic:t.awdPicture,goodsPrice:t.goodsPrice,integral:t.scoreValue,poolId:t.awdCode})),1==this.jcType&&(this.confData.totalWinnerNum=t.data.config.totalWinnerNum,this.ZawardArr.awardName=t.data.config.prizeName,this.ZawardArr.awardPic=t.data.config.prizePicture),2==this.jcType&&(this.GFAwardArr=t.data.awardList.map(t=>({id:t.id,awardType:3,prizeName:t.awardName,awardPic:t.awdPicture,redMoney:t.awardMoney,totalNum:t.awardNum,outNum:t.outNum})))):this.$message.error(t.msg||t.message)})},modifyAwardArrError(t){this.awardArrFlag=t},modifyGFAwardArrError(t){this.GFAwardArrFlag=t},modifyAwardArr(t){this.awardArr=t,this.confirmSubmit()},modifyGFAwardArr(t){this.GFAwardArr=t,this.confirmSubmit()},confirmSubmit(){},judgeDivisor(t,e){var a={},s=0;parseInt(t/e);t%=e;for(;0!=t&&!(t in a);)a[t]=s++,parseInt(10*t/e),t=10*t%e;return 0==t},save(){if(this.$refs.awardArr.save(),!this.awardArrFlag)return;if(2==this.jcType&&(this.$refs.GFAwardArr.save(),!this.GFAwardArrFlag))return;let t=!0;if(this.$refs.actSetConfRef.validate(e=>{e||(t=!1)}),1==this.jcType&&this.$refs.ZawardArr.validate(e=>{e||(t=!1)}),!t)return;if(console.log(this.confData.JSEtimeStr-this.confData.OpenTimeStr),new Date(this.confData.OpenTimeStr).getTime()-new Date(this.confData.JSEtimeStr)<36e5)return void this.$message.error("开奖时间必须大于浇花截止时间1小时");if(1==this.jcType){if(!this.judgeDivisor(this.confData.totalMoney-0,this.confData.totalWinnerNum-0))return void this.$message.error("红包总金额除不尽配置的瓜分总人数")}let e,a=this.awardArr.map(t=>1==t.awardType?{awdCode:t.poolId,awdType:t.awardType,awdName:t.prizeName,awdPicture:t.awardPic,goodsPrice:t.goodsPrice,scoreValue:0,redpackValue:0,totalNum:t.totalNum}:3==t.awardType?{awdCode:t.poolId,awdType:t.awardType,awdName:t.prizeName,awdPicture:t.awardPic,goodsPrice:0,scoreValue:0,redpackValue:t.redMoney,totalNum:t.totalNum}:6==t.awardType?{awdCode:t.poolId,awdType:t.awardType,awdName:t.prizeName,awdPicture:t.awardPic,goodsPrice:0,scoreValue:t.integral,redpackValue:0,totalNum:t.totalNum}:void 0);if(1==this.jcType&&(e={flowerConfig:{actCode:this.actCode,joinEndTime:this.confData.JSEtimeStr,awdBeginTime:this.confData.OpenTimeStr,dayMaxNum:this.confData.dayNum,oneFlowerNeedNum:this.confData.blossomNum,finishNeedNum:this.confData.flowerNum,openAwardType:this.jcType,totalAmount:this.confData.totalMoney,totalWinnerNum:this.confData.totalWinnerNum,prizeName:this.ZawardArr.awardName,prizePicture:this.ZawardArr.awardPic},flowerPrizeList:a}),2==this.jcType){let t=this.GFAwardArr.map(t=>({awardName:t.prizeName,awdPicture:t.awardPic,awardMoney:t.redMoney,awardNum:t.totalNum}));e={flowerConfig:{actCode:this.actCode,joinEndTime:this.confData.JSEtimeStr,awdBeginTime:this.confData.OpenTimeStr,dayMaxNum:this.confData.dayNum,oneFlowerNeedNum:this.confData.blossomNum,finishNeedNum:this.confData.flowerNum,openAwardType:this.jcType,totalAmount:this.confData.totalMoney},flowerPrizeList:a,flowerAwardList:t}}console.log(e),this.confData.id?(e.flowerConfig.id=this.confData.id,this.$request.post("/api/flower/config/update",e,!0,t=>{if("200"===t.code)return this.$message({type:"success",message:"操作成功!"}),void this.backList();this.$message.error(t.msg)})):this.$request.post("/api/flower/config/add",e,!0,t=>{if("200"===t.code)return this.$message({type:"success",message:"操作成功!"}),void this.backList();this.$message.error(t.msg)})},backList(){this.$router.push("/market/actMgr")},selectPrize(t,e){this.ZawardArr.awardName=t.name,this.ZawardArr.awdCode=t.id,this.ZawardArr.awardPrice=t.marketMoney,this.ZawardArr.awardPic=t.pic,this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},handleSizeChange(t){this.params.pageSize=t,this.getList()},handleCurrentChange(t){this.params.pageNo=t,this.getList()},handleSelectChange(t){console.log(t),t.awardName="",t.awardPic="",t.redpackValue=""},getList(t){"1"==t?(this.params.materialType="1",this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.materialType="2",this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.materialType="3",this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.materialType="6",this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t?(this.params.materialType="7",this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==t&&(this.params.materialType="8",this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),console.log(this.params.saleZoneCode);let e="/api/materialBudget/materialList";this.params.saleZoneCode||(e="/api/wiseqr/metra/list"),this.$request.post(e,this.params,!0,t=>{if(t.code&&"200"==t.code||t.ret&&"200000"==t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message||t.msg)})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hpx-actSetConf-container"},[a("el-card",[a("el-form",{ref:"actSetConfRef",attrs:{model:t.confData,"label-width":"150px",rules:t.confRules}},[a("el-form-item",{attrs:{label:"浇水设置：",prop:"dayNum"}},[t._v("\n          每人每天可浇水"),a("el-input-number",{attrs:{disabled:t.actStatus>1,min:0,"controls-position":"right"},model:{value:t.confData.dayNum,callback:function(e){t.$set(t.confData,"dayNum",e)},expression:"confData.dayNum"}}),t._v(" 次；\n        ")],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"blossomNum"}},[t._v("\n          浇水"),a("el-input-number",{attrs:{disabled:t.actStatus>1,min:0,"controls-position":"right"},model:{value:t.confData.blossomNum,callback:function(e){t.$set(t.confData,"blossomNum",e)},expression:"confData.blossomNum"}}),t._v(" 次，可以养成一朵花；\n        ")],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"flowerNum"}},[t._v("\n          集齐"),a("el-input-number",{attrs:{disabled:t.actStatus>1,min:0,"controls-position":"right"},model:{value:t.confData.flowerNum,callback:function(e){t.$set(t.confData,"flowerNum",e)},expression:"confData.flowerNum"}}),t._v(" 朵花，可以瓜分奖池；\n        ")],1),t._v(" "),a("el-form-item",{attrs:{label:"浇水结束时间：",prop:"JSEtimeStr"}},[a("el-date-picker",{attrs:{disabled:t.actStatus>1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择浇水时间"},model:{value:t.confData.JSEtimeStr,callback:function(e){t.$set(t.confData,"JSEtimeStr",e)},expression:"confData.JSEtimeStr"}})],1),t._v(" "),a("BZActPutConf",{ref:"awardArr",attrs:{"form-name":"浇水必中奖池：",configId:t.confData.id,awardArr:t.awardArr,editable:t.actStatus<2,saleZone:t.saleZone,budgetTime:t.budgetTime},on:{modifyAwardArr:t.modifyAwardArr,modifyAwardArrError:t.modifyAwardArrError}}),t._v(" "),a("div",{staticStyle:{"margin-bottom":"30px"}}),t._v(" "),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("瓜分奖池:")])]),t._v(" "),a("el-form-item",{attrs:{label:"开奖时间：",prop:"OpenTimeStr"}},[a("el-date-picker",{attrs:{disabled:t.actStatus>1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开奖时间"},model:{value:t.confData.OpenTimeStr,callback:function(e){t.$set(t.confData,"OpenTimeStr",e)},expression:"confData.OpenTimeStr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"总奖池：",prop:"totalMoney"}},[t._v("\n            红包总金额："),a("el-input-number",{attrs:{disabled:t.actStatus>=4,min:0,"controls-position":"right"},model:{value:t.confData.totalMoney,callback:function(e){t.$set(t.confData,"totalMoney",e)},expression:"confData.totalMoney"}}),t._v("元"),t.confData.id?a("span",{staticStyle:{"margin-left":"20px"}},[t._v("（集齐人数："+t._s(t.finishUser)+"人）")]):t._e()],1),t._v(" "),1==t.jcType?a("el-form-item",{attrs:{label:"总奖池：",prop:"totalWinnerNum"}},[t._v("\n            瓜分总人数："),a("el-input-number",{attrs:{min:0,max:1e5,disabled:t.actStatus>=4,"controls-position":"right"},model:{value:t.confData.totalWinnerNum,callback:function(e){t.$set(t.confData,"totalWinnerNum",e)},expression:"confData.totalWinnerNum"}}),t._v("人"),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("（瓜分金额等于红包总金额除以配置的瓜分总人数）")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"奖池类型："}},[a("el-select",{staticStyle:{width:"220px"},attrs:{disabled:t.actStatus>=4,placeholder:"请选择"},model:{value:t.jcType,callback:function(e){t.jcType=e},expression:"jcType"}},t._l(t.jcTypeArr,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),1==t.jcType?[a("el-form",{ref:"ZawardArr",attrs:{model:t.ZawardArr,"label-width":"150px",rules:t.confRules}},[a("el-form-item",{attrs:{label:"奖品类型：",prop:"awardType"}},[a("el-select",{staticStyle:{width:"220px"},attrs:{disabled:!!t.confData.id,placeholder:"请选择"},on:{change:function(e){t.handleSelectChange(t.ZawardArr)}},model:{value:t.ZawardArr.awardType,callback:function(e){t.$set(t.ZawardArr,"awardType",e)},expression:"ZawardArr.awardType"}},t._l(t.awardType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),t.actStatus<4?a("el-form-item",{attrs:{label:"选择红包："}},[a("el-button",{attrs:{size:""},on:{click:function(e){t.getList(t.ZawardArr.awardType)}}},[t._v("选择")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"物料名称：",prop:"awardName"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:""},model:{value:t.ZawardArr.awardName,callback:function(e){t.$set(t.ZawardArr,"awardName",e)},expression:"ZawardArr.awardName"}})],1),t._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.ZawardArr.guideGzh,"true-label":1,"false-label":0},model:{value:t.ZawardArr.guideGzh,callback:function(e){t.$set(t.ZawardArr,"guideGzh",e)},expression:"ZawardArr.guideGzh"}},[t._v("中奖后引导关注公众号")])],1),t._v(" "),a("div",{staticStyle:{height:"30px"}})],1)]:t._e(),t._v(" "),a("ActPutConf",{directives:[{name:"show",rawName:"v-show",value:2==t.jcType,expression:"jcType == 2"}],ref:"GFAwardArr",attrs:{"form-name":"多奖品类奖池：",configId:t.confData.id,editable:t.actStatus<4,awardArr:t.GFAwardArr,saleZone:t.saleZone,budgetTime:t.budgetTime},on:{modifyAwardArr:t.modifyGFAwardArr,modifyAwardArrError:t.modifyGFAwardArrError}})],2),t._v(" "),a("el-form-item",[a("el-row",{staticClass:"mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.backList}},[t._v("返回列表")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e},close:t.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.budget_value?a("span",[t._v("\n              "+t._s(e.row.budget_value-e.row.budget_used)+"\n            ")]):a("span",[t._v("\n              "+t._s(e.row.stock)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var g=a("VU/8")(p,u,!1,function(t){a("uRqG")},"data-v-0f87ae1e",null);e.default=g.exports},LEyN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({loading:!0,info:{},addNum:0,totalCardNum:0}),created(){this.getInfo()},methods:{getInfo(){this.$request.post("/hbact/lc/saas/act/info",{},!0,t=>{if("200"==t.code)return console.log(t.data),this.info=t.data.actInfo,this.totalCardNum=t.data.totalCardNum,void(this.loading=!1);this.$message.error(t.msg)})},save(){this.loading=!0,this.$request.post("/hbact/lc/saas/update/cardNum",{addNum:this.addNum},!1,t=>{if(this.loading=!1,"200"==t.code)return this.addNum=0,this.$message.success("新增成功！"),void this.getInfo();this.$message.error(t.msg)})},open(){this.$request.post("/hbact/lc/saas/award/open",{},!0,t=>{if("200"==t.code)return this.$message.success(t.msg),void this.getInfo();this.$message.error(t.msg),this.getInfo()})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-col",{staticClass:"mb20"},[t._v("\n      新增特殊卡片数量："),a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:t.addNum,callback:function(e){t.addNum=e},expression:"addNum"}}),a("span",{staticStyle:{"margin-left":"30px"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("新增")]),t._v("（特殊卡一次投放数量1-500张）\n    ")],1),t._v(" "),a("el-col",{staticClass:"mb20"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("投放总数："+t._s(t.totalCardNum))]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("\n        开奖状态："+t._s(1==t.info.lotteryStatus?"等待开奖":2==t.info.lotteryStatus?"开奖中":3==t.info.lotteryStatus?"已开奖":"")+"\n      ")]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("\n        开奖时间："+t._s(t.info.awdBeginTime)+"\n      ")]),t._v(" "),a("div",[t._v("\n        活动结束时间："+t._s(t.info.joinEndTime)+"\n      ")])]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:1!==t.info.lotteryStatus},on:{click:t.open}},[t._v("开奖")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("vsQH")},"data-v-8ca60872",null);e.default=r.exports},LYyV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"ParkourMgr",data(){return{uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},id:null,isStart:!1,newAct:!1,config:{stime:"",etime:"",dayJoinCount:"",exchangeCount:"",exchangePoints:"",sysLuckyScore:"",inviteLuckyScore:"",invitedDayCount:"",inviteAcceptNum:"",discountCardNum:"",discountCardName:"",discountCardValue:""},awardConf:[{awdCode:"",awardName:"",marketMoney:null,cardValue:null,awardPic:"",awardType:null,winnerNum:null,scoreValue:null,redpackValue:null}],title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,confRules:{date:[{required:!0,validator:(t,e,a)=>{this.config.stime&&this.config.etime?this.config.stime>=this.config.etime?a(new Error("开始时间必须小于结束时间")):a():a(new Error("请选择活动时间"))},trigger:"change"}],dayJoinCount:[{required:!0,validator:(t,e,a)=>{this.config.dayJoinCount?a():a(new Error("请输入连续扫码天数"))},trigger:"change"}],sysLuckyScore:[{required:!0,validator:(t,e,a)=>{this.config.sysLuckyScore?a():a(new Error("请输入幸运值"))},trigger:"change"}],inviteLuckyScore:[{required:!0,validator:(t,e,a)=>{this.config.inviteLuckyScore?a():a(new Error("请输入幸运值"))},trigger:"change"}],exchangeCount:[{required:!0,validator:(t,e,a)=>{""===this.config.exchangeCount?(console.log(this.config.exchangeCount),a(new Error("请输入兑换次数"))):a()},trigger:"change"}],exchangePoints:[{required:!0,validator:(t,e,a)=>{this.config.exchangePoints?a():a(new Error("请输入兑换所需积分"))},trigger:"change"}],invitedDayCount:[{required:!0,validator:(t,e,a)=>{this.config.invitedDayCount?a():a(new Error("请输入每个用户每天最多应战次数"))},trigger:"change"}],inviteAcceptNum:[{required:!0,validator:(t,e,a)=>{this.config.inviteAcceptNum?a():a(new Error("请输入每个用户每周最多被应战人数"))},trigger:"change"}],discountCardNum:[{required:!0,validator:(t,e,a)=>{this.config.discountCardNum?a():a(new Error("请输入折扣卡数量"))},trigger:"change"}],discountCardName:[{required:!0,validator:(t,e,a)=>{this.config.discountCardName?a():a(new Error("请输入折扣卡数量"))},trigger:"change"}],discountCardValue:[{required:!0,validator:(t,e,a)=>{this.config.discountCardValue?a():a(new Error("请输入折扣值"))},trigger:"change"}],awardType:[{required:!0,message:"请选择奖品类型",trigger:"change"}],awardName:[{required:!0,message:"请选择物料",trigger:"change"}],awardPic:[{required:!0,message:"请上传奖品图片",trigger:"change"}],winnerNum:[{required:!0,message:"请输入中奖人数",trigger:"blur"}],cardValue:[{required:!0,message:"请输入面额",trigger:"blur"}],scoreValue:[{required:!0,message:"请输入面额",trigger:"blur"}],redpackValue:[{required:!0,message:"请输入面额",trigger:"blur"}]},awardType:[{value:1,label:"实物"},{value:6,label:"积分"},{value:3,label:"红包"},{value:7,label:"折扣卡"},{value:8,label:"翻倍卡"}],awardNo:""}},created(){this.getDetail()},mounted(){},methods:{addItem(){this.awardConf.push({awardName:"",marketMoney:null,cardValue:null,awardPic:"",awardDesc:"",awardType:null,winnerNum:null})},delItem(t){this.awardConf.splice(t,1)},handleDelete(){this.$request.post("/hbact/pk/saas/act/delete",{pkActId:this.id},!1,t=>{"200"==t.code?(this.$message.success("删除成功！"),this.getDetail(),this.id=null):this.$message.error(t.msg)})},getDetail(){this.$request.post("/hbact/pk/saas/act/info",{},!0,t=>{if("200"==t.code)return this.config.stime=t.data.conf.stime,this.config.etime=t.data.conf.etime,this.config.dayJoinCount=t.data.conf.dayJoinCount,this.config.exchangeCount=t.data.conf.exchangeCount,this.config.exchangePoints=t.data.conf.exchangePoints,this.config.sysLuckyScore=t.data.conf.sysLuckyScore,this.config.inviteLuckyScore=t.data.conf.inviteLuckyScore,this.config.invitedDayCount=t.data.conf.invitedDayCount,this.config.inviteAcceptNum=t.data.conf.inviteAcceptNum,this.config.discountCardNum=t.data.conf.discountCardNum,this.config.discountCardName=t.data.conf.discountCardName,this.config.discountCardValue=t.data.conf.discountCardValue,this.newAct=!1,this.id=t.data.conf.id,this.isStart=t.data.isStart,void(t.data.prize&&(this.awardConf=[],this.awardConf.push({awdCode:t.data.prize.awdCode,awardName:t.data.prize.awdName,marketMoney:t.data.prize.goodsPrice,cardValue:t.data.prize.cardValue,awardPic:t.data.prize.awdPicture,awardType:t.data.prize.awdType,winnerNum:t.data.prize.winnerNum,scoreValue:t.data.prize.scoreValue,redpackValue:t.data.prize.redpackValue})));"500"==t.code?(this.newAct=!0,this.id=null,this.isStart=!1):this.$message.error(t.msg)})},handleOpen(){this.$request.post("/hbact/pk/saas/open/award",{},!0,t=>{"200"==t.code?(this.$message.success("开奖成功！"),this.getDetail()):this.$message.error(t.msg)})},confirmSubmit(){let t=!0;this.$refs.awardConf.forEach(e=>{e.validate(e=>{e||(t=!1)})}),this.$refs.actSetConfRef.validate(e=>{if(e){if(!t)return;let e={pkConfig:this.config,pkPrize:{awdCode:this.awardConf[0].awdCode,awdType:this.awardConf[0].awardType,awdName:this.awardConf[0].awardName,awdPicture:this.awardConf[0].awardPic,goodsPrice:this.awardConf[0].marketMoney,scoreValue:this.awardConf[0].scoreValue,redpackValue:this.awardConf[0].redpackValue,cardValue:this.awardConf[0].cardValue,winnerNum:this.awardConf[0].winnerNum}};this.id&&(e.pkConfig.id=this.id),console.log(e),this.$request.post("/hbact/pk/saas/act/save",e,!0,t=>{"200"==t.code?(this.$message({type:"success",message:"操作成功!"}),this.getDetail()):this.$message.error(t.msg)})}})},selectPrize(t,e,a){console.log(a),this.awardConf[a].awardName=t.name,this.awardConf[a].awdCode=t.id,this.awardConf[a].awardPrice=t.marketMoney,this.awardConf[a].marketMoney=t.marketMoney,this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},handleSizeChange(t){this.params.pageSize=t,this.getList()},handleCurrentChange(t){this.params.pageNo=t,this.getList()},uploadImgUrlSuccess(t,e){if("200000"===t.ret)return this.awardConf[e].awardPic=t.data.accessUrl;this.$message.error(t.message)},handleSelectChange(t){console.log(t),t.awardName="",t.awardPic="",t.redpackValue="",t.cardValue="",t.scoreValue=""},getList(t,e){"1"==t?(this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==t&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),void 0!=e&&-1!=e&&(this.awardNo=e),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QA-container"},[a("div",[a("div",{staticStyle:{"margin-bottom":"30px",color:"#0B1019"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleOpen}},[t._v("开奖")]),t._v("（可开奖时间每周日00:00-23:59）\n    ")],1),t._v(" "),a("el-form",{ref:"actSetConfRef",attrs:{model:t.config,"label-width":"150px",rules:t.confRules}},[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("基本设置：")])]),t._v(" "),a("el-form-item",{attrs:{label:"活动时间：",prop:"date"}},[a("el-date-picker",{attrs:{disabled:!t.newAct,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.config.stime,callback:function(e){t.$set(t.config,"stime",e)},expression:"config.stime"}}),t._v("\n            至\n            "),a("el-date-picker",{attrs:{disabled:!t.newAct,type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.config.etime,callback:function(e){t.$set(t.config,"etime",e)},expression:"config.etime"}}),t._v("(每周可参与获得幸运值时间，结束时间注意配置在开奖日期0:00之前)；\n          ")],1),t._v(" "),a("el-form-item"),t._v(" "),a("el-form-item",{attrs:{label:"参与条件：",prop:"dayJoinCount"}},[t._v("\n            用户每周扫码（首扫）后即可获得参与资格，每人每天\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.dayJoinCount,callback:function(e){t.$set(t.config,"dayJoinCount",e)},expression:"config.dayJoinCount"}}),t._v("\n            次参与资格；\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"exchangeCount"}},[t._v("\n            限制每天可兑换\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.exchangeCount,callback:function(e){t.$set(t.config,"exchangeCount",e)},expression:"config.exchangeCount"}}),t._v("\n            次 (值为0时即不限兑换次数)；\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"exchangePoints"}},[t._v("\n            消耗\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.exchangePoints,callback:function(e){t.$set(t.config,"exchangePoints",e)},expression:"config.exchangePoints"}}),t._v("\n            荷石璧，可额外获得一次参与资格；\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"幸运值配置：",prop:"sysLuckyScore"}},[t._v("\n            系统PK获胜方一次可获得\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.sysLuckyScore,callback:function(e){t.$set(t.config,"sysLuckyScore",e)},expression:"config.sysLuckyScore"}}),t._v("\n            幸运值；\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"inviteLuckyScore"}},[t._v("\n            邀请PK获胜方一次可获得\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.inviteLuckyScore,callback:function(e){t.$set(t.config,"inviteLuckyScore",e)},expression:"config.inviteLuckyScore"}}),t._v("\n            幸运值；\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"分享设置：",prop:"invitedDayCount"}},[t._v("\n            每天最多应战次数：\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.invitedDayCount,callback:function(e){t.$set(t.config,"invitedDayCount",e)},expression:"config.invitedDayCount"}}),t._v("；\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"inviteAcceptNum"}},[t._v("\n            每个用户每周最多被\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.inviteAcceptNum,callback:function(e){t.$set(t.config,"inviteAcceptNum",e)},expression:"config.inviteAcceptNum"}}),t._v("人应战；\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"discountCardName"}},[t._v("\n            折扣卡名称：\n            "),a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!t.newAct},model:{value:t.config.discountCardName,callback:function(e){t.$set(t.config,"discountCardName",e)},expression:"config.discountCardName"}}),t._v("；\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"discountCardNum"}},[t._v("\n            本周投放折扣卡数量（仅新用户有机会获得）：\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.discountCardNum,callback:function(e){t.$set(t.config,"discountCardNum",e)},expression:"config.discountCardNum"}}),t._v("；\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"discountCardValue"}},[t._v("\n            折扣值：\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,step:.01,precision:2,min:0,max:1,"controls-position":"right"},model:{value:t.config.discountCardValue,callback:function(e){t.$set(t.config,"discountCardValue",e)},expression:"config.discountCardValue"}}),t._v("。\n          ")],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}})],1),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("奖品配置：")])]),t._v(" "),a("div"),t._v(" "),t._l(t.awardConf,function(e,s){return[a("el-form",{ref:"awardConf",refInFor:!0,attrs:{model:e,"label-width":"150px",rules:t.confRules,disabled:t.isStart}},[a("el-form-item",{attrs:{label:"奖品类型：",prop:"awardType"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:!!e.id,placeholder:"请选择"},on:{change:function(a){t.handleSelectChange(e)}},model:{value:e.awardType,callback:function(a){t.$set(e,"awardType",a)},expression:"ai.awardType"}},t._l(t.awardType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e.awardType&&!e.id?a("el-form-item",{attrs:{label:"选择"+("1"==e.awardType?"实物":"6"==e.awardType?"积分":"3"==e.awardType?"红包":"7"==e.awardType?"折扣卡":"8"==e.awardType?"翻倍卡":"")+"："}},[a("el-button",{attrs:{size:""},on:{click:function(a){t.getList(e.awardType,s)}}},[t._v("选择")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"物料名称：",prop:"awardName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.awardName,callback:function(a){t.$set(e,"awardName",a)},expression:"ai.awardName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品图片：",prop:"awardPic"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.awardPic,callback:function(a){t.$set(e,"awardPic",a)},expression:"ai.awardPic"}}),t._v(" "),e.awardPic?a("img",{attrs:{width:"271",height:"200",src:e.awardPic,alt:""}}):t._e(),t._v(" "),a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.uploadImgUrlSuccess(e,s)},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传图片")]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("上传商品图片尺寸（380x280px）")])],1)],1),t._v(" "),3==e.awardType?a("el-form-item",{attrs:{label:"红包：",prop:"redpackValue"}},[a("el-input-number",{attrs:{step:.01,precision:2,min:0,"controls-position":"right"},model:{value:e.redpackValue,callback:function(a){t.$set(e,"redpackValue",a)},expression:"ai.redpackValue"}}),t._v(" "),a("span",[t._v("元")])],1):t._e(),t._v(" "),6==e.awardType?a("el-form-item",{attrs:{label:"积分：",prop:"scoreValue"}},[a("el-input-number",{attrs:{step:1,precision:0,min:0,"controls-position":"right"},model:{value:e.scoreValue,callback:function(a){t.$set(e,"scoreValue",a)},expression:"ai.scoreValue"}}),t._v(" "),a("span",[t._v("积分")])],1):t._e(),t._v(" "),7==e.awardType?a("el-form-item",{attrs:{label:"折扣值：",prop:"cardValue"}},[a("el-input-number",{attrs:{step:.01,precision:2,min:0,max:1,"controls-position":"right"},model:{value:e.cardValue,callback:function(a){t.$set(e,"cardValue",a)},expression:"ai.cardValue"}}),t._v(" "),a("span",[t._v("折兑换折扣卡")])],1):t._e(),t._v(" "),8==e.awardType?a("el-form-item",{attrs:{label:"翻倍值：",prop:"cardValue"}},[a("el-input-number",{attrs:{step:.01,precision:2,min:1,"controls-position":"right"},model:{value:e.cardValue,callback:function(a){t.$set(e,"cardValue",a)},expression:"ai.cardValue"}}),t._v(" "),a("span",[t._v("倍红包翻倍卡")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"中奖人数：",prop:"winnerNum"}},[t._v("\n            幸运值排名前\n            "),a("el-input",{staticStyle:{width:"100px"},attrs:{type:"number"},model:{value:e.winnerNum,callback:function(a){t.$set(e,"winnerNum",a)},expression:"ai.winnerNum"}}),t._v("\n            个，可获得奖励\n          ")],1),t._v(" "),a("div",{staticStyle:{height:"30px"}})],1)]}),t._v(" "),a("div",{staticStyle:{"margin-bottom":"50px"}})],2)],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[t.isStart?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v("保存")]),t._v(" "),t.id?a("el-button",{attrs:{type:"danger"},on:{click:t.handleDelete}},[t._v("删除")]):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e},close:t.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title,t.awardNo)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("pKQi")},"data-v-0cb2b1cd",null);e.default=r.exports},LdZ2:function(t,e){},MFIH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"PartyMgr",data:()=>({uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},id:null,isStart:!1,newAct:!1,config:{stime:"",etime:"",scanCont:""},awardConf:[{awdName:"",awdPic:"",awdType:null,awdValue:0,awdPr:0,numTotal:0}],title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,brandList:[],confRules:{awdType:[{required:!0,message:"请选择奖品类型",trigger:"change"}],awdName:[{required:!0,message:"请选择物料",trigger:"change"}],awdPic:[{required:!0,message:"请上传奖品图片",trigger:"change"}],numTotal:[{required:!0,message:"请输入中奖人数",trigger:"blur"}],awdPr:[{required:!0,message:"请输入中奖概率",trigger:"blur"}],awdValue:[{required:!0,message:"请输入中奖概率",trigger:"blur"}]},awardType:[{value:1,label:"实物"},{value:3,label:"红包"},{value:6,label:"积分"}],awardNo:"",actCode:""}),created(){this.getActDetail()},mounted(){},methods:{addItem(){this.awardConf.push({awdName:"",awdPic:"",awdType:null,awdValue:0,awdPr:0,numTotal:0})},delItem(t){this.awardConf.splice(t,1)},getActDetail(){this.$request.post("/hbact/saas/zt/ht/hejiaAct",{},!0,t=>{"200"==t.code?(this.actCode=t.data.act.actCode,this.getAwardDetail(this.actCode)):this.$message.error(t.msg)})},getAwardDetail(t){this.$request.post("/hbact/saas/zt/actAwdList",{actCode:t},!1,t=>{if("200"==t.code)return this.newAct=!1,void(t.data.awList.length>0&&(this.awardConf=[],t.data.awList.forEach(t=>{this.awardConf.push(t)})));"500"==t.code?this.newAct=!0:this.$message.error(t.msg)})},addRepertory(t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:e})=>{if(0==e)return this.$message.error("数字不能为0");this.$request.post("/hbact/saas/zt/ztActAwdAdd",{id:t.id,actCode:this.actCode,addValue:e},!1,t=>{"200"==t.code?(this.$message.success("增库成功"),this.getActDetail()):this.$message.error(t.msg)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},confirmSubmit(){let t=!0;if(this.$refs.awardConf.forEach(e=>{e.validate(e=>{e||(t=!1)})}),!t)return;let e=this.awardConf.map(t=>(t.prizeName||(t.prizeName=t.awdName),t.actCode=this.actCode,t));console.log(e),this.$request.post(" /hbact/saas/zt/ztActAwdSave",e,!0,t=>{"200"==t.code?(this.$message({type:"success",message:"操作成功!"}),this.getActDetail()):this.$message.error(t.msg)})},selectPrize(t,e,a){console.log(a),this.awardConf[a].awardName=t.name,this.awardConf[a].awardPrice=t.marketMoney,this.awardConf[a].marketMoney=t.marketMoney,this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},handleSizeChange(t){this.params.pageSize=t,this.getList()},handleCurrentChange(t){this.params.pageNo=t,this.getList()},uploadImgUrlSuccess(t,e){if("200000"===t.ret)return this.awardConf[e].awdPic=t.data.accessUrl;this.$message.error(t.message)},handleSelectChange(t){console.log(t),t.awdName="",t.awdPic=""},getList(t,e){"1"==t?(this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==t&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),void 0!=e&&-1!=e&&(this.awardNo=e),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QA-container"},[a("div",[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("荷家好礼-奖品设置：")])]),t._v(" "),a("div",[t.awardConf.length<14&&!t.isStart?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addItem}},[t._v("新增商品")]):t._e()],1),t._v(" "),t._l(t.awardConf,function(e,s){return[a("div",{staticStyle:{height:"30px","font-size":"18px","line-height":"30px",margin:"20px",color:"#409EFF"}},[t._v("\n            奖项"+t._s(s+1)+":\n            "),t.isStart?t._e():a("el-button",{staticStyle:{"margin-left":"450px"},attrs:{size:"mini",type:"danger"},on:{click:function(e){t.delItem(s)}}},[t._v("删除奖品")])],1),t._v(" "),a("el-form",{ref:"awardConf",refInFor:!0,attrs:{model:e,"label-width":"150px",rules:t.confRules,disabled:t.isStart}},[a("el-form-item",{attrs:{label:"奖品类型：",prop:"awdType"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:!!e.id,placeholder:"请选择"},on:{change:function(a){t.handleSelectChange(e)}},model:{value:e.awdType,callback:function(a){t.$set(e,"awdType",a)},expression:"ai.awdType"}},t._l(t.awardType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称：",prop:"awdName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!!e.id},model:{value:e.awdName,callback:function(a){t.$set(e,"awdName",a)},expression:"ai.awdName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品图片：",prop:"awdPic"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.awdPic,callback:function(a){t.$set(e,"awdPic",a)},expression:"ai.awdPic"}}),t._v(" "),e.awdPic?a("img",{staticStyle:{border:"1px dashed #e4e7ed"},attrs:{width:"100",height:"100",src:e.awdPic,alt:""}}):t._e(),t._v(" "),a("el-upload",{attrs:{disabled:!!e.id,action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.uploadImgUrlSuccess(e,s)},"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary",disabled:!!e.id}},[t._v("上传图片")]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("上传商品图片尺寸（233x233px）")])],1)],1),t._v(" "),3==e.awdType?a("el-form-item",{attrs:{label:"红包：",prop:"awdValue"}},[a("el-input-number",{attrs:{disabled:!!e.id,step:.01,precision:2,min:0,"controls-position":"right"},model:{value:e.awdValue,callback:function(a){t.$set(e,"awdValue",a)},expression:"ai.awdValue"}}),t._v(" "),a("span",[t._v("元")])],1):t._e(),t._v(" "),6==e.awdType?a("el-form-item",{attrs:{label:"积分：",prop:"awdValue"}},[a("el-input-number",{attrs:{disabled:!!e.id,step:1,precision:0,min:0,"controls-position":"right"},model:{value:e.awdValue,callback:function(a){t.$set(e,"awdValue",a)},expression:"ai.awdValue"}}),t._v(" "),a("span")],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"奖品数量：",prop:"numTotal"}},[a("el-input-number",{attrs:{disabled:!!e.id,step:1,precision:0,min:0,"controls-position":"right"},model:{value:e.numTotal,callback:function(a){t.$set(e,"numTotal",a)},expression:"ai.numTotal"}}),t._v(" "),e.id?a("span",{staticStyle:{"margin-left":"20px"}},[t._v("剩余："+t._s(e.numTotal-e.numUsed))]):t._e(),t._v(" "),e.id?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")]):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖概率：",prop:"awdPr"}},[a("el-input-number",{attrs:{"controls-position":"right",precision:1,step:.1,min:0,max:100},model:{value:e.awdPr,callback:function(a){t.$set(e,"awdPr",a)},expression:"ai.awdPr"}}),t._v(" "),a("span",[t._v("%")])],1),t._v(" "),a("div",{staticStyle:{height:"30px"}})],1)]}),t._v(" "),a("div",{staticStyle:{"margin-bottom":"50px"}})],2)],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[t.isStart?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v("保存")])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e},close:t.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title,t.awardNo)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("X5hN")},"data-v-02225faa",null);e.default=r.exports},MlEv:function(t,e){},N6eQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({loading:!1,form:{pageNo:1,pageSize:15},marketqr:[],pagination:{total:0}}),created(){this.getMarketQr()},methods:{currentChange(t){this.getMarketQr(event,t)},sizeChange(t){this.getMarketQr(event,null,t)},getMarketQr(t,e,a){let s=1;e&&(s=e),this.form.pageNo=s;let i=15;a&&(i=a),this.form.pageSize=i,this.loading=!0,this.$request.post("/api/wiseqr/guest/listqr",this.form,!0,t=>{if(this.loading=!1,"200000"===t.ret){this.marketqr=t.data.list||[];let e=t.data.page||{};this.initPagination(e)}})},initPagination(t){t&&(this.pagination.total=t.count)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"market-qr"},[a("el-container",[a("el-header",[t._v("体验码不够用？请联系智新物码客服 "),a("span",{staticClass:"tel"},[t._v("010-64700731")]),t._v("。创建新活动，体验码可再次使用")]),t._v(" "),a("el-main",[a("el-row",{attrs:{gutter:20}},t._l(t.marketqr,function(e){return a("el-col",{key:e.id,attrs:{span:5}},[a("div",{staticClass:"grid-content"},[a("img",{attrs:{src:e.ossUrl}}),t._v(" "),a("span",[t._v("扫码体验")])])])}))],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("BmtV")},"data-v-1aaed9b8",null);e.default=r.exports},NJk8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({loading:!0,info:{}}),created(){this.getInfo()},methods:{getInfo(){this.$request.post("/hbact/flower/saas/act/info",{},!0,t=>{if("200"==t.code)return this.info=t.data,void(this.loading=!1);this.$message.error(t.msg)})},open(){this.$request.post("/hbact/flower/saas/open/award",{},!0,t=>{if("200"==t.code)return this.$message.success(t.msg),void this.getInfo();this.$message.error(t.msg),this.getInfo()})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-col",{staticClass:"mb20"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("\n        开奖状态："+t._s(1==t.info.lotteryStatus?"等待开奖":2==t.info.lotteryStatus?"开奖中":3==t.info.lotteryStatus?"已开奖":"")+"\n      ")]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("\n        开奖时间："+t._s(t.info.awdBeginTime)+"\n      ")]),t._v(" "),a("div",[t._v("\n        活动结束时间："+t._s(t.info.joinEndTime)+"\n      ")])]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.open}},[t._v("开奖")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("Wdsx")},"data-v-0a973bb2",null);e.default=r.exports},OBQS:function(t,e){},OHib:function(t,e){},Op2J:function(t,e){},PLA4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},name:"RedpackPage",data:()=>({listData:[],allBrandsData:[],allSpecisData:[],allareaData:[],selectAllBrands:"",selectSpeciSns:"",selectAllarea:"",id:"1",form:{brandArr:[],snArr:[],cityArr:[],hdCode:"",orderCode:"",etime:"",stime:"",status:"",metraType:3,winnerMobile:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),created(){this.init()},watch:{selectAllBrands(t,e){t&&t!=e&&(this.form.brandArr=[],this.form.brandArr[0]=t,this.id="",this.selectSpeciSns="",this.form.snArr=[],this.allSpecisList(this.form.brandArr[0]))},selectSpeciSns(t,e){t&&t!=e&&(this.form.snArr=[],this.form.snArr.push(t))},selectAllarea(t,e){t&&t!=e&&(this.form.cityArr=[],this.form.cityArr[0]=t)}},methods:{currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},init(){this.allBrandsList(),this.allareaList(),this.getlistData()},allBrandsList(){this.$request.post("/api/wiseqr/prod/listBrand",{service:"browser"},!0,t=>{"200000"===t.ret&&(this.allBrandsData=t.data.list)})},allSpecisList(t){var e=[];e.push(t),this.$request.post("/api/wiseqr/prod/listTbc",{brandCodeArr:e},!0,t=>{"200000"===t.ret&&(this.allSpecisData=[],this.allSpecisData=t.data.list)})},allareaList(){let t=this;t.$request.post("/api/wiseqr/dim/regionByPCode",{brandListArrObj:{parentCode:"",withRegion:!0}},!0,e=>{if("200000"===e.ret){var a=e.data;0!=a.length&&a.forEach(function(e,a){var s={label:e.name,value:e.code,children:[]};t.$request.post("/api/wiseqr/dim/regionByPCode",{parentCode:e.code},!0,e=>{var a=e.data;null!=a&&0!=a.length&&a.forEach(function(t,e){s.children.push({label:t.name,value:t.code})}),t.allareaData.push(s)})})}})},getlistData(){this.$request.post("/api/wiseqr/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},initPagination(t){t&&(this.pagination.total=t.count)},queryData:function(t){this.getlistData()},resetData:function(t){this.selectAllBrands="",this.selectSpeciSns="",this.selectAllarea="",this.id="1",this.form={metraFlag:"Object",hdCode:"",orderCode:"",brandArr:[],snArr:[],cityArr:[],metraType:3,status:"",stime:"",etime:"",winnerMobile:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){if(2e5==t.ret){this.$message({type:"success",message:t.data.successMsg});let e={name:t.data.sourceFile,sourceCode:t.data.sourceCode,count:t.data.successCount};this.sourceFiles.push(e)}else this.$message.error(t.message)},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/api/wiseqr/order/export",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("红包领奖明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"活动ID",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入活动ID"},model:{value:t.form.hdCode,callback:function(e){t.$set(t.form,"hdCode",e)},expression:"form.hdCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllBrands,callback:function(e){t.selectAllBrands=e},expression:"selectAllBrands"}},t._l(t.allBrandsData,function(t,e){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.id,clearable:!!t.id},model:{value:t.selectSpeciSns,callback:function(e){t.selectSpeciSns=e},expression:"selectSpeciSns"}},t._l(t.allSpecisData,function(t,e){return a("el-option",{key:t.product.sn,attrs:{label:t.product.allName,value:t.product.sn}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"订单号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.form.orderCode,callback:function(e){t.$set(t.form,"orderCode",e)},expression:"form.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖地区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllarea,callback:function(e){t.selectAllarea=e},expression:"selectAllarea"}},t._l(t.allareaData,function(e){return a("el-option-group",{key:e.value,attrs:{label:e.label}},t._l(e.children,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"领奖时段",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.stime,callback:function(e){t.$set(t.form,"stime",e)},expression:"form.stime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.etime,callback:function(e){t.$set(t.form,"etime",e)},expression:"form.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.form.winnerMobile,callback:function(e){t.$set(t.form,"winnerMobile",e)},expression:"form.winnerMobile"}})],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{prop:"hdCode",label:"活动编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCode",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actCode",label:"活动ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"winnerMobile",label:"中奖人手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awdName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"关联规格"}}),t._v(" "),a("el-table-column",{attrs:{label:"领奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.awdProvinceName)+"-"+t._s(e.row.awdCityName)+"-"+t._s(e.row.awdDistrictName))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("lZBi")},"data-v-79a84acf",null);e.default=l.exports},PrJ7:function(t,e){},PuFD:function(t,e){},Q9su:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({loading:!0,info:{id:null,joinEtime:"",actCode:"",openRedpack:0,openStatus:0,rcdNote:""},addNum:0,openawdUserNum:0,canOpenAward:!1,rules:{actCode:[{required:!0,message:"请输入跑步活动ID",trigger:"blur"}],joinEtime:[{required:!0,message:"请输入结束时间",trigger:"blur"}],openRedpack:[{required:!0,message:"请输入红包金额",trigger:"blur"}]}}),created(){this.getInfo()},methods:{getInfo(){this.$request.post("/hbact/saas/diy/configInfo",{},!0,t=>{if(this.loading=!1,"200"==t.code)return console.log(t.data),t.data.nowConfig&&(this.info=t.data.nowConfig),this.canOpenAward=t.data.canOpenAward,void(this.openawdUserNum=t.data.openawdUserNum);this.$message.error(t.msg)})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;this.save()})},save(){this.loading=!0;let t={id:this.info.id,joinEtime:this.info.joinEtime,actCode:this.info.actCode,confCode:"diy_act",openRedpack:this.info.openRedpack,rcdNote:this.info.rcdNote};this.$request.post("/hbact/saas/diy/configUpdate",t,!0,t=>{if(this.loading=!1,"200"==t.code)return this.$message.success("保存成功！"),void this.getInfo();this.$message.error(t.msg)})},open(){this.$request.post("/hbact/saas/diy/awardOpen",{configId:this.info.id},!1,t=>{if("200"==t.code)return this.$message.success("开奖成功！"),void this.getInfo();this.$message.error(t.msg),this.getInfo()})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-col",{staticClass:"mb20"},[a("el-button",{attrs:{type:"primary",disabled:!t.canOpenAward},on:{click:t.open}},[t._v("开奖")]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}}),t._v(" "),1==t.info.openStatus?a("span",[t._v("活动进行中，未开奖")]):t._e(),t._v(" "),2==t.info.openStatus?a("span",[t._v("开奖中")]):t._e(),t._v(" "),3==t.info.openStatus?a("span",[t._v("已开奖")]):t._e(),t._v(" "),4==t.info.openStatus?a("span",[t._v("开奖失败")]):t._e()],1),t._v(" "),a("el-col",{staticClass:"mb20"},[a("div",[t._v("当前已有"),a("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.openawdUserNum))]),t._v("人获得瓜分大奖资格")])]),t._v(" "),a("el-col",{staticClass:"mb20"},[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("活动设置：")])]),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.info,rules:t.rules,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"DIY活动ID：",prop:"actCode"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!!t.info.id},model:{value:t.info.actCode,callback:function(e){t.$set(t.info,"actCode",e)},expression:"info.actCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"DIY活动结束参与时间：",prop:"joinEtime"}},[a("el-date-picker",{attrs:{disabled:!!t.info.id,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择结束时间"},model:{value:t.info.joinEtime,callback:function(e){t.$set(t.info,"joinEtime",e)},expression:"info.joinEtime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"单个用户可瓜分获得金额：",prop:"openRedpack"}},[a("el-input-number",{attrs:{disabled:t.info.openStatus>1,step:.01,precision:2,min:0,"controls-position":"right"},model:{value:t.info.openRedpack,callback:function(e){t.$set(t.info,"openRedpack",e)},expression:"info.openRedpack"}}),t._v(" 元\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"备注：",prop:"rcdNote"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!!t.info.id,type:"textarea"},model:{value:t.info.rcdNote,callback:function(e){t.$set(t.info,"rcdNote",e)},expression:"info.rcdNote"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("TlXX")},"data-v-45163909",null);e.default=r.exports},QLyS:function(t,e){},QjFJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("9ijK"),i={props:["title","titleLength","page","imgData","commonImg","shareConf"],data:()=>({isHover:""}),created(){},methods:{active(t){this.isHover=void 0!==t?2:1},unActive(){this.isHover=""}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"phone-wrapper"},[a("div",{staticClass:"phone-header"},[a("h4",[t._v(t._s(t.title))])]),t._v(" "),a("div",{staticClass:"phone-body"},[a("div",{directives:[{name:"show",rawName:"v-show",value:2!=t.page&&9!==t.page,expression:"page != 2 && page !== 9"}],staticClass:"page"},[a("img",{staticClass:"bg",attrs:{src:t.imgData.normal.bg.url,title:"点击编辑"},on:{mousemove:function(e){t.active()},mouseout:function(e){t.unActive()}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page == 1"}],staticClass:"num"},[a("p",{staticClass:"total-num"},[t._v("红包总量：10000个")]),t._v(" "),a("p",{staticClass:"residue-num"},[t._v("红包剩余：8000个")])]),t._v(" "),t._l(t.imgData.normal.redPacket.style,function(e,s){return a("img",{key:s,staticClass:"red-packet",style:{width:e.w,height:e.h,top:e.t,left:e.l},attrs:{src:t.imgData.normal.redPacket.url},on:{mousemove:function(e){t.active(s)},mouseout:function(e){t.unActive()}}})}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page == 1"}],staticClass:"prize-list"},[a("p",[t._v("恭喜180****1156  获得88元红包")]),t._v(" "),a("p",[t._v("恭喜180****1156  获得88元红包")])])],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.page,expression:"page == 2"}],staticClass:"page2 page"},[a("img",{staticClass:"bg",attrs:{src:t.imgData.rules.bg.url,title:"点击编辑"},on:{mousemove:function(e){t.active()},mouseout:function(e){t.unActive()}}}),t._v(" "),a("img",{staticClass:"rules-btn",attrs:{src:t.imgData.rules.rulesBtn.url}}),t._v(" "),a("div",{staticClass:"btn",style:{background:"url('"+t.imgData.rules.btnImg.url+"') no-repeat center / 100% 100%"}},[t._v("返回")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.page,expression:"page == 3"}],staticClass:"page3 page"},[a("img",{staticClass:"bg",attrs:{src:t.imgData.downCount.bg.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.downCount.num3.size[0]+"px",height:.4*t.imgData.downCount.num3.size[1]+"px",left:.4*t.imgData.downCount.num3.pos[0]+"px",top:.4*t.imgData.downCount.num3.pos[1]+"px"},attrs:{src:t.imgData.downCount.num3.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:4==t.page,expression:"page == 4"}],staticClass:"page4 page"},[a("img",{staticClass:"bg",attrs:{src:t.commonImg.actNotes.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:5==t.page,expression:"page == 5"}],staticClass:"page5 page"},[a("img",{staticClass:"bg",attrs:{src:t.commonImg.myAward.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:6==t.page,expression:"page == 6"}],staticClass:"page6 page"},[a("img",{style:{width:.4*t.imgData.tips.winningImg.size[0]+"px",height:.4*t.imgData.tips.winningImg.size[1]+"px",left:.4*t.imgData.tips.winningImg.pos[0]+"px",top:.4*t.imgData.tips.winningImg.pos[1]+"px"},attrs:{src:t.imgData.tips.winningImg.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.tips.drawBtn1.size[0]+"px",height:.4*t.imgData.tips.drawBtn1.size[1]+"px",left:.4*t.imgData.tips.drawBtn1.pos[0]+"px",top:.4*t.imgData.tips.drawBtn1.pos[1]+"px"},attrs:{src:t.imgData.tips.drawBtn1.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:7==t.page,expression:"page == 7"}],staticClass:"page7 page"},[a("img",{style:{width:.4*t.imgData.tips.notWinImg.size[0]+"px",height:.4*t.imgData.tips.notWinImg.size[1]+"px",left:.4*t.imgData.tips.notWinImg.pos[0]+"px",top:.4*t.imgData.tips.notWinImg.pos[1]+"px"},attrs:{src:t.imgData.tips.notWinImg.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.tips.drawBtn2.size[0]+"px",height:.4*t.imgData.tips.drawBtn2.size[1]+"px",left:.4*t.imgData.tips.drawBtn2.pos[0]+"px",top:.4*t.imgData.tips.drawBtn2.pos[1]+"px"},attrs:{src:t.imgData.tips.drawBtn2.url}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8==t.page,expression:"page == 8"}],staticClass:"page8 page"},[a("div",{staticClass:"tipsDialog"},[a("img",{style:{width:.4*t.imgData.tips.tipsImg.size[0]+"px",height:.4*t.imgData.tips.tipsImg.size[1]+"px",left:.4*t.imgData.tips.tipsImg.pos[0]+"px",top:.4*t.imgData.tips.tipsImg.pos[1]+"px"},attrs:{src:t.imgData.tips.tipsImg.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.tips.tipsBtn1.size[0]+"px",height:.4*t.imgData.tips.tipsBtn1.size[1]+"px",left:.4*t.imgData.tips.tipsBtn1.pos[0]+"px",top:.4*t.imgData.tips.tipsBtn1.pos[1]+"px"},attrs:{src:t.imgData.tips.tipsBtn1.url}}),t._v(" "),a("img",{style:{width:.4*t.imgData.tips.tipsBtn2.size[0]+"px",height:.4*t.imgData.tips.tipsBtn2.size[1]+"px",left:.4*t.imgData.tips.tipsBtn2.pos[0]+"px",top:.4*t.imgData.tips.tipsBtn2.pos[1]+"px"},attrs:{src:t.imgData.tips.tipsBtn2.url}})])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:9==t.page,expression:"page == 9"}],staticClass:"page9 page"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.shareConf.shareTitle?t.shareConf.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.shareConf.shareDesc?t.shareConf.shareDesc:"扫码验真精彩送不停，更多好礼等你拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.imgData.share.icon.url}})])])])]),t._v(" "),a("div",{staticClass:"phone-footer"})])])},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("tFn2")},"data-v-09553642",null).exports,o=a("ifEn"),n=a("UJta"),c=a("ehVw"),d={props:["id","edit"],components:{activityInfo:o.a,activityImageEditor:n.a,phoneModel:l,shareConf:c.a},data:()=>({defaultActive:"1",editData:[],editType:"normal",itemRepeat:!1,page:"1",isPublish:!0,conf:{form:"act-301",id:"",description:"",title:"",img:{},commonImg:s.a.commonImg,conf:{img:"",commonImg:"",title:"",desc:""},name:"",note:"",share:{shareTitle:"",shareDesc:""},actCode:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")}}),created(){this.conf.img=JSON.parse(JSON.stringify(s.a.img.ACT_HONGBAOYU)),this.getDetail(),this.editData=[this.conf.img.normal.bg,this.conf.img.normal.redPacket]},methods:{getDetail(){let t;this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,e=>{"200000"===e.ret?(t=JSON.parse(e.data.conf),this.conf.img=JSON.parse(t.img),this.conf.commonImg=JSON.parse(t.commonImg),this.conf.description=e.data.note,this.conf.title=e.data.name,this.conf.id=e.data.id,this.conf.saleZone=e.data.saleZone,this.conf.share=JSON.parse(t.share),"未投放"==e.data.statusName?this.isPublish=!1:this.isPublish=!0):this.$message.error(e.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,e=>{"200000"===e.ret?(t=JSON.parse(e.data.conf),this.conf.actCode=e.data.actCode,this.conf.img=JSON.parse(t.img),this.conf.commonImg=JSON.parse(t.commonImg),this.conf.description=t.desc,this.conf.title=t.title,this.conf.id=e.data.id,this.conf.saleZone=e.data.saleZone,this.conf.share=JSON.parse(t.share),"未投放"==e.data.statusName?this.isPublish=!1:this.isPublish=!0):this.$message.error(e.message)})},switchMenu(t,e){switch(this.page=t,t){case"1":this.editData=[this.conf.img.normal.bg,this.conf.img.normal.redPacket];break;case"2":this.editData=[this.conf.img.rules.bg,this.conf.img.rules.rulesBtn,this.conf.img.rules.btnImg];break;case"3":this.editData=[this.conf.img.downCount.bg,this.conf.img.downCount.num1,this.conf.img.downCount.num2,this.conf.img.downCount.num3];break;case"6":this.editData=[this.conf.img.tips.winningImg,this.conf.img.tips.drawBtn1];break;case"7":this.editData=[this.conf.img.tips.notWinImg,this.conf.img.tips.drawBtn2];break;case"8":this.editData=[this.conf.img.tips.tipsImg,this.conf.img.tips.tipsBtn1,this.conf.img.tips.tipsBtn2];break;case"9":this.editData=[this.conf.img.share.icon]}},titleInput(t){let e=t.value;this.conf.title=e||""},descInput(t){let e=t.value;e?this.conf.description=e:this.description=""},saleZoneInput(t){let e=t.value;e?this.conf.saleZone=e:this.saleZone=""},editPic(t){let e=t.index||"",a=t.url;if(a)switch(this.page){case"1":this.conf.img.normal[e].url=a;break;case"2":this.conf.img.rules[e].url=a;break;case"3":this.conf.img.downCount[e].url=a;break;case"6":case"7":case"8":this.conf.img.tips[e].url=a;break;case"9":this.conf.img.share.icon.url=a}},saveActTpl(){if(!this.conf.title)return this.$message.warning("请输入模板名称");this.conf.conf.img=JSON.stringify(this.conf.img),this.conf.conf.commonImg=JSON.stringify(this.conf.commonImg),this.conf.conf.title=this.conf.title,this.conf.conf.desc=this.conf.description,this.conf.conf.share=JSON.stringify(this.conf.share),this.conf.conf=JSON.stringify(this.conf.conf),this.conf.name=this.conf.title,this.conf.note=this.conf.description,this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.conf,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.conf,!0,t=>{if("200000"===t.ret)return this.isPublish?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("新建活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-menu",{attrs:{mode:"horizontal","default-active":t.defaultActive},on:{select:t.switchMenu}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("首页")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[t._v("活动预热页")]),t._v(" "),a("el-menu-item",{attrs:{index:"3"}},[t._v("活动倒计时")]),t._v(" "),a("el-menu-item",{attrs:{index:"4"}},[t._v("活动说明")]),t._v(" "),a("el-menu-item",{attrs:{index:"5"}},[t._v("我的奖品")]),t._v(" "),a("el-menu-item",{attrs:{index:"6"}},[t._v("中奖页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"7"}},[t._v("未中奖页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"8"}},[t._v("提示语弹窗")]),t._v(" "),a("el-menu-item",{attrs:{index:"9"}},[t._v("分享")])],1),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"40px"}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("phone-model",{attrs:{title:t.conf.title,commonImg:t.conf.commonImg,shareConf:t.conf.share,titleLength:30,page:t.page,imgData:t.conf.img}})],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("activity-info",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page == 1"}],attrs:{title:t.conf.title,desc:t.conf.description,saleZone:t.conf.saleZone},on:{titleInput:t.titleInput,descInput:t.descInput,saleZoneInput:t.saleZoneInput}}),t._v(" "),a("activity-image-editor",{directives:[{name:"show",rawName:"v-show",value:4!=t.page&&5!=t.page&&9!=t.page,expression:"page != 4 && page != 5 && page != 9"}],attrs:{editData:t.editData,type:t.editType,itemRepeat:t.itemRepeat},on:{picChange:t.editPic}}),t._v(" "),a("share-conf",{directives:[{name:"show",rawName:"v-show",value:9==t.page,expression:"page == 9"}],attrs:{editData:t.editData,shareConf:t.conf.share},on:{shareChange:t.editPic}})],1)],1),t._v(" "),a("div",{staticClass:"btn mt20"},[a("p",[t._v("\n        是否投放: "),a("el-switch",{model:{value:t.isPublish,callback:function(e){t.isPublish=e},expression:"isPublish"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,m,!1,function(t){a("zZS8")},"data-v-9748dcbe",null);e.default=p.exports},RRMr:function(t,e){},"S+u4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},data:()=>({listData:[],orderStatusData:[],form:{startTime:"",endTime:"",status:"",orderType:3,orderId:"",physicalOrVirtual:"",awardName:"",userName:"",jmcnl:"",startUpdateTime:"",endUpdateTime:"",pageNo:1,pageSize:10},pagination:{total:0},physicalOrVirtualGroup:[{id:"",name:"全部"},{id:2,name:"实物"},{id:3,name:"红包"},{id:4,name:"积分"}],currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),name:"ActOrderPage",created(){this.init()},watch:{},methods:{init(){this.orderStatusList(),this.getlistData()},orderStatusList(){this.$request.post("/sc/saotx/mall/ActorderStatusMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.orderStatusData=t.data)})},getlistData(){this.$request.post("/sc/saotx/mall/order/actList",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},queryData:function(t){this.form.pageNo=1,this.getlistData()},currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},initPagination(t){t&&(this.pagination.total=t.count)},resetData:function(t){this.form={startTime:"",endTime:"",status:"",orderType:3,orderId:"",awardName:"",physicalOrVirtual:"",userName:"",startUpdateTime:"",endUpdateTime:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){2e5==t.ret?this.$message({type:"success",message:t.message}):this.$message.error(t.message),this.getlistData()},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;let a=JSON.parse(JSON.stringify(this.form));for(var s in null==a.startTime&&(a.startTime=""),null==a.endTime&&(a.endTime=""),null==a.startUpdateTime&&(a.startUpdateTime=""),null==a.endUpdateTime&&(a.endUpdateTime=""),a)e.append(s,a[s]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/sc/saotx/mall/order/exportActOrder",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)},ObjectPageDatail(t){this.$router.push({path:"/Orders/mall/ActOrderPageDetail?orderCode="+t})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/积分活动订单")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"订单号:",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:t.form.orderId,callback:function(e){t.$set(t.form,"orderId",e)},expression:"form.orderId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动名称:",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:t.form.jmcnl,callback:function(e){t.$set(t.form,"jmcnl",e)},expression:"form.jmcnl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号:",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"收货人姓名:",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"中奖时间:",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品类型:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.physicalOrVirtual,callback:function(e){t.$set(t.form,"physicalOrVirtual",e)},expression:"form.physicalOrVirtual"}},t._l(t.physicalOrVirtualGroup,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"领奖时间:",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.startUpdateTime,callback:function(e){t.$set(t.form,"startUpdateTime",e)},expression:"form.startUpdateTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.endUpdateTime,callback:function(e){t.$set(t.form,"endUpdateTime",e)},expression:"form.endUpdateTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"订单状态:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.orderStatusData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/sc/saotx/mall/order/importActOrders",headers:t.headers,data:t.addPool,"before-upload":t.handlerSourceFileBUpload,"on-success":t.handleSourceFileSuccess,"on-remove":t.handleSourceFileRemove,"file-list":t.sourceFiles,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("导入物流信息")])],1)],1),t._v(" "),a("el-button",{attrs:{plain:"",disabled:""==t.form.physicalOrVirtual},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s((t.form.pageNo-1)*t.form.pageSize+e.$index+1)+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.physicalOrVirtual?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.ObjectPageDatail(e.row.orderId)}}},[t._v("查看详情")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gameName",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lmobile",label:"中奖人手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"中奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.createTime?a("span",[t._v("\n                        "+t._s(new Date(e.row.createTime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                    ")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"领奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.updateTime?new Date(e.row.updateTime).Format("yyyy-MM-dd hh:mm:ss"):"")+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态\t"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"待发货":2==e.row.status?"已发货":0==e.row.status?"待领取":5==e.row.status?"已过期":"已完成"))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("bdfW")},"data-v-73cabd96",null);e.default=l.exports},S3gb:function(t,e){},S7BC:function(t,e){},SLj2:function(t,e){},StCO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],components:{shareConf:a("ehVw").a},data:()=>({activeName:"home",addActParams:{conf:"",form:"act-111",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},ballonIndex:"",configItem:{title:"",description:"",headerImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/hpx-title.png",bgImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/bg.png",actTip:"http://qoss.qrmkt.cn/common/hepiaoxiang/hpx-tips.png",startImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/begin.png",wateringcanImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/wateringcan.png",flowerImgUrl1:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/hehua-1.png",flowerImgUrl2:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/hehua-2.png",flowerImgUrl3:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/hehua-3.png",flowerImgUrl4:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/hehua-4.png",flowerImgUrl5:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/hehua-5.png",drawImgUrl:"http://qoss.qrmkt.cn/common/hepiaoxiang/award-pop.png",drawBtnUrl:"http://qoss.qrmkt.cn/common/hepiaoxiang/award-btn.png",cryImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/no-award.png",cryBtnUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/get-no-award.png",shareImgUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/share-bg-img.png",shareBtnUrl:"http://qoss.qrmkt.cn/common/hepiaoxiang/share-btn-img.png",shareIconUrl:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/hepiaoxiang/share-icon.png",share:{shareTitle:"",shareDesc:""}},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upToysBgImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toysBgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upWateringcanImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.wateringcanImgUrl=t.data.accessUrl;this.$message.error(t.message)},upFlowerImgUrlSuccess1(t){if("200000"===t.ret)return this.configItem.flowerImgUrl1=t.data.accessUrl;this.$message.error(t.message)},upFlowerImgUrlSuccess2(t){if("200000"===t.ret)return this.configItem.flowerImgUrl2=t.data.accessUrl;this.$message.error(t.message)},upFlowerImgUrlSuccess3(t){if("200000"===t.ret)return this.configItem.flowerImgUrl3=t.data.accessUrl;this.$message.error(t.message)},upFlowerImgUrlSuccess4(t){if("200000"===t.ret)return this.configItem.flowerImgUrl4=t.data.accessUrl;this.$message.error(t.message)},upFlowerImgUrlSuccess5(t){if("200000"===t.ret)return this.configItem.flowerImgUrl5=t.data.accessUrl;this.$message.error(t.message)},upHookPoleImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toyCImgUrl=t.data.accessUrl;this.$message.error(t.message)},upHookLeftImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toyCImgUrl=t.data.accessUrl;this.$message.error(t.message)},upHookRightImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.toyCImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upDrawImgUrlSuccess(t){if("200000"===t.ret)return this.configItem.drawImgUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBgSuccess(t){if("200000"===t.ret)return this.configItem.shareImgUrl=t.data.accessUrl;this.$message.error(t.message)},upShareBtnSuccess(t){if("200000"===t.ret)return this.configItem.shareBtnUrl=t.data.accessUrl;this.$message.error(t.message)},editPic(t){let e=t.url;this.configItem.shareIconUrl=e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"start"},[a("img",{attrs:{src:t.configItem.startImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=4}}})]),t._v(" "),a("div",{staticClass:"wateringcan"},[a("img",{attrs:{src:t.configItem.wateringcanImgUrl,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=5}}})]),t._v(" "),a("div",{staticClass:"flower"},[a("img",{attrs:{src:t.configItem.flowerImgUrl1,title:"点击编辑",alt:""},on:{click:function(e){t.showEditConIndex=7}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1),t._v(" "),a("el-popover",{attrs:{placement:"right-end",title:"背景图片说明",width:"300",trigger:"hover"}},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/common/ddshu/act_tpl_tip.png",width:"300",alt:""}}),t._v(" "),a("div",{staticClass:"tip",attrs:{slot:"reference"},slot:"reference"},[t._v("?")])])],1):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("开始按钮:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.startImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upStartImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("水壶图片:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.wateringcanImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWateringcanImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),7==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("花朵图片-状态1:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.flowerImgUrl1,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upFlowerImgUrlSuccess1,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("花朵图片-状态2:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.flowerImgUrl2,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upFlowerImgUrlSuccess2,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("花朵图片-状态3:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.flowerImgUrl3,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upFlowerImgUrlSuccess3,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("花朵图片-状态4:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.flowerImgUrl4,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upFlowerImgUrlSuccess4,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("div",[a("p",{staticClass:"img-title"},[t._v("花朵图片-状态5:")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.flowerImgUrl5,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upFlowerImgUrlSuccess5,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 290*82px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 519*167px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 130*126px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 225*167px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),7==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 900*658px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),8==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 400*400px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动预热页",name:"warm"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone warm"},[a("img",{attrs:{src:t.configItem.shareImgUrl,alt:""}}),t._v(" "),a("img",{attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1600px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con center"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.configItem.shareBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con",staticStyle:{display:"inline-block"}},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upShareBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 417*107px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",staticStyle:{"margin-right":"0"},attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("img",{staticStyle:{position:"absolute",width:"94px",height:"77px",left:"50%",transform:"translateX(-50%)",top:"180px"},attrs:{src:"http://qrmkt.oss-cn-beijing.aliyuncs.com/saas_platform/common/model-gift.png",alt:""}}),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"259px",width:"100%","font-size":"10px",color:"#004b5e"}},[t._v("请在24小时内领取")]),t._v(" "),a("p",{staticStyle:{position:"absolute",top:"238px",width:"100%","font-size":"14px",color:"#004b5e"}},[t._v("1.05红包+50积分")]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("中奖图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.drawImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upDrawImgUrlSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 563*638px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 316*72px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg",staticStyle:{"background-color":"#111",opacity:".7"}}),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("img",{staticClass:"prize-btn",staticStyle:{width:"112px",height:"34px",top:"285px"},attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹窗图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"113px","line-height":"113px"}},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 525*592px格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮图片:")]),t._v(" "),a("div",{staticClass:"img-con",staticStyle:{width:"100px",height:"100px","line-height":"100px"}},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 285*75px格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"分享",name:"share"}},[a("div",{staticClass:"ipone",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone share"},[a("div",{staticClass:"text"},[a("h3",{staticClass:"title",domProps:{innerHTML:t._s(t.configItem.share.shareTitle?t.configItem.share.shareTitle:"扫码验真")}}),t._v(" "),a("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.configItem.share.shareDesc?t.configItem.share.shareDesc:"扫码验真精彩送不停，更多好礼等你拿！")}}),t._v(" "),a("div",{staticClass:"img"},[a("img",{attrs:{src:t.configItem.shareIconUrl}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("share-conf",{staticStyle:{width:"50%",display:"inline-block"},attrs:{editData:[{url:t.configItem.shareIconUrl}],shareConf:t.configItem.share},on:{shareChange:t.editPic}})],1),t._v(" "),a("div",{staticClass:"btn"},[t._e(),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("K0l/")},"data-v-05b21498",null);e.default=r.exports},"Syx/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("G0J2"),i={props:["awae","prizeType","nWin","isRed","hide","astrict"],data(){var t=(t,e,a)=>{};return{uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},prizeList:this.prizeType,rules:{n:[{required:!0,validator:t}],type:[{required:!0,validator:t}],name:[{required:!0,validator:t}],probability:[{required:!0,validator:t}],redNum:[{required:!0,validator:t}],pool:[{required:!0,validator:t}],putNum:[{required:!0,validator:t}],intTotal:[{required:!0,validator:t}],redTotal:[{required:!0,validator:t}]},title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,integralList:[],integralTotal:0,integralVisible:!1}},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return parseFloat((this.awae.redMoney*this.awae.totalNum).toPrecision(12))},set:function(t){}}},created(){},methods:{uploadImgUrlSuccess(t,e){if("200000"===t.ret)return this.awae.awardPic=t.data.accessUrl;this.$message.error(t.message)},selectPrize(t){this.awae.awardPic=t.pic,this.awae.poolName=t.name,this.awae.prizeName=t.name,this.awae.poolId=t.id,this.listVisible=!1},resetPrize(){this.awae.awardPic="",this.awae.prizeName="",this.awae.poolName="",this.awae.totalNum="",this.awae.probability="",this.awae.redMoney="",this.awae.redTotalMoney="",this.awae.integral=""},getList(){"1"==this.awae.awardType?(this.params.metraFlag="object",this.title="选择实物"):"2"==this.awae.awardType?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==this.awae.awardType?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==this.awae.awardType&&(this.params.metraFlag="integral",this.title="选择积分"),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})},giveIntegral(){this.$request.post("/api/wiseqr/metra/list",{metraFlag:"integral",pageNo:1,pageSize:10,status:1},!0,t=>{if("200000"===t.ret)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.message)})},selectIntegral(t){this.awae.integralPool=t.id,this.integralVisible=!1},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},resetScore(t){t?this.awae.giveScore=1:(this.awae.integralPool=null,this.awae.integral="",this.awae.giveScore=0)},resetWarn(t){t||(this.awae.hasWarn=null,this.awae.warnValue="")},resetPdMaxOut(t){t||(this.awae.pdMaxOut=0)},countRedTotal(t){const e=this.awae.redMoney,a=this.awae.totalNum;if(0!=e&&0!=a)return this.awae.redTotalMoney=e*a},addRepertory(){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:t})=>{if(0==t)return this.$message.error("数字不能为0");this.$request.post("/api/wiseqr/act/addNum",{id:this.awae.id,increment:t},!0,e=>{"200000"===e.ret?(this.$message.success("增库成功"),this.awae.totalNum+=Number(t)):this.$message.error(e.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pond"},[a("el-form",{ref:"form",attrs:{model:t.awae,"label-width":"100px",rules:t.rules}},[t.nWin?a("el-form-item",{attrs:{label:"N次必中:",prop:"n"}},[t._v("\n      用户第 "),a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.n,callback:function(e){t.$set(t.awae,"n",e)},expression:"awae.n"}}),t._v(" 个抽奖必中\n    ")],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"奖品类型:",prop:"type"}},[a("el-select",{attrs:{disabled:!!t.awae.id,placeholder:"请选择"},on:{change:t.resetPrize},model:{value:t.awae.awardType,callback:function(e){t.$set(t.awae,"awardType",e)},expression:"awae.awardType"}},t._l(t.prizeList,function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})}))],1),t._v(" "),"1"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{staticStyle:{border:"1px dotted #ccc"},attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1)]:t._e(),t._v(" "),"2"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1)]:t._e(),t._v(" "),"3"==t.awae.awardType?[a("el-form-item",{attrs:{label:"红包池:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"红包面额:",prop:"redNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:2,min:0,max:t.astrict?.3:1/0,step:.1,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.redMoney,callback:function(e){t.$set(t.awae,"redMoney",e)},expression:"awae.redMoney"}}),t._v(" 元\n        "),t.astrict?a("span",{staticClass:"ml20",staticStyle:{color:"#ccc","font-size":"12px"}},[t._v("开放试用平台，仅支持0.3元红包面额")]):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"红包金额:",prop:"redTotal"}},[a("el-input-number",{attrs:{disabled:"",min:0,"controls-position":"right"},model:{value:t.totalRed,callback:function(e){t.totalRed=e},expression:"totalRed"}}),t._v(" 元\n      ")],1)]:t._e(),t._v(" "),"6"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择积分:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{precision:0,disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"积分面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:0,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n      ")],1)]:t._e(),t._v(" "),"9"==t.awae.awardType?[a("el-form-item",{attrs:{label:"奖品图片:",prop:"pool"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.awae.awardPic,callback:function(e){t.$set(t.awae,"awardPic",e)},expression:"awae.awardPic"}}),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.uploadImgUrlSuccess(e,"2")},"show-file-list":!1}},[t.awae.awardPic?a("img",{staticClass:"avatar",attrs:{src:t.awae.awardPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("span",[t._v("* 图片建议尺寸为380*280px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"奖品名称",disabled:!!t.awae.id},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{precision:0,disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:0,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n      ")],1)]:t._e(),t._v(" "),t.hide?t._e():a("el-form-item",{attrs:{label:"中奖概率:",prop:"probability"}},[a("el-input-number",{attrs:{min:0,max:100,"controls-position":"right"},model:{value:t.awae.probability,callback:function(e){t.$set(t.awae,"probability",e)},expression:"awae.probability"}}),t._v(" %\n    ")],1),t._v(" "),a("el-form-item",[a("el-checkbox",{on:{change:t.resetWarn},model:{value:t.awae.hasWarn,callback:function(e){t.$set(t.awae,"hasWarn",e)},expression:"awae.hasWarn"}},[t._v("阈值预警")]),t._v(" "),t.awae.hasWarn?a("span",[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.warnValue,callback:function(e){t.$set(t.awae,"warnValue",e)},expression:"awae.warnValue"}}),t._v(" 个\n      ")],1):t._e()],1),t._v(" "),"6"!=t.awae.awardType?a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.giveScore,"true-label":1,"false-label":0},on:{change:t.resetScore},model:{value:t.awae.giveScore,callback:function(e){t.$set(t.awae,"giveScore",e)},expression:"awae.giveScore"}},[t._v("同时送积分")]),t._v(" "),t.awae.giveScore?a("span",[t.awae.integralPool?a("el-button",{attrs:{size:"mini",type:"info"},on:{click:t.giveIntegral}},[t._v("已选择")]):a("el-button",{staticClass:"ml20 mr20",on:{click:t.giveIntegral}},[t._v("选择")]),t._v(" "),a("el-input-number",{attrs:{min:0,precision:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 积分\n      ")],1):t._e()],1):t._e(),t._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.guideGzh,"true-label":1,"false-label":0},model:{value:t.awae.guideGzh,callback:function(e){t.$set(t.awae,"guideGzh",e)},expression:"awae.guideGzh"}},[t._v("中奖后引导关注公众号")]),t._v(" "),t.isRed?t._e():a("el-checkbox",{on:{change:t.resetPdMaxOut},model:{value:t.awae.hasPdMaxOut,callback:function(e){t.$set(t.awae,"hasPdMaxOut",e)},expression:"awae.hasPdMaxOut"}},[t._v("每天出奖总次数限制")]),t._v(" "),t.awae.hasPdMaxOut?a("span",[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.pdMaxOut,callback:function(e){t.$set(t.awae,"pdMaxOut",e)},expression:"awae.pdMaxOut"}}),t._v(" 次\n      ")],1):t._e()],1)],2),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"选择积分",visible:t.integralVisible,width:"800px"},on:{"update:visible":function(e){t.integralVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.integralList,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.awae.integralPool!==e.row.id?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("选择")]):a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("已选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.integralTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var l={components:{pondConf:a("VU/8")(i,r,!1,function(t){a("rwsO"),a("xm2p")},"data-v-63306364",null).exports},mixins:[{props:["id","actCode","form","awardArr"],inject:["routerRefresh"],data(){return{stepActive:2,act:{id:null,actCode:"",dwnum:null,status:null},status:!1,statusDisabled:!1,actSTime:"",actETime:"",strategy:{areas:{provinceArr:[],cityArr:[],districtArr:[]},awardArr:[],brandArr:[],snArr:[],tfType:""},specialAreas:{provinceArr:[],cityArr:[],districtArr:[]},specialBrand:{brandArr:[],snArr:[]},normalConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],normalTfId:"",defaultAwae:{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""},firstScanConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],firstScanTfId:"",nWinConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],nWinTfId:"",fixationPutConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],fixationPutTfId:"",normalTabsValue:"1",normalTabs:[{title:"常规奖项1",name:"1"}],firstScanTabsValue:"1",firstScanTabs:[{title:"常规奖项1",name:"1"}],nWinTabsValue:"1",nWinTabs:[{title:"常规奖项1",name:"1"}],fixationPutTabsValue:"1",fixationPutTabs:[{title:"常规奖项1",name:"1"}],tfId:"",tfTimeArr:[],tfDurationArr:[],prizeType:[{name:"实物礼品",type:1},{name:"虚拟礼品",type:2},{name:"红包",type:3},{name:"积分",type:6},{name:"自定义礼品",type:9}],normalIndex:1,firstScanIndex:1,nWinIndex:1,fixationPutIndex:1,selectBrand:[],selectSonBrand:[],selectProvList:[],oldSlectProvList:["1"],selectCityList:[],oldSelectCityList:["1"],selectAreaList:[],oldSelectAreaList:["1"],brandList:[],brandSonList:[],specialBrandList:[],specialBrandSonList:[],provList:[{code:"000000",name:"全部"}],cityList:[{code:"000000",name:"全部"}],areaList:[{code:"000000",name:"全部"}],specialProvList:[],specialCityList:[],specialAreaList:[],regionVisible:!1,brandVisible:!1,specialRuleConfFlag:!1,prizeLimitFlag:!1,firstScanFlag:!1,nWinFlag:!1,fixationPutFlag:!1,isPut:!1,pickerOptions:{disabledDate:t=>t.getTime()<new Date(this.actSTime).getTime()||t.getTime()>new Date(this.actETime).getTime()},astrictRedflg:!1}},created(){this.getBrandList(),this.getProvList()},computed:{},watch:{awardArr(t){this.normalTabs=[{title:"常规奖项1",name:"1"}],this.normalConf=[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}],t.length>0&&t.forEach((t,e)=>{if(0!=e&&this.normalTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.normalConf[0][e]=t[e];else this.normalConf.push(t)})},status:function(t){this.act.status=t?1:2},fixationPutFlag:function(t){t?this.restrictArea():(this.selectProvList=[],this.selectCityList=[],this.selectAreaList=[])}},methods:{getBrandList(){this.$request.post("/api/wiseqr/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandList=t.data.list,void this.restrictBrand();this.$message.error(t.message)})},getBrandSonList(){this.restrictBrand(),this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.selectBrand,pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandSonList=t.data.list,void this.restrictSonBrand();this.$message.error(t.message)})},getProvList(){this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:[]},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.provList.push(...t.data)})},getCityList(t){if(1==this.provList.length)return void setTimeout(()=>{this.getCityList(t)},1e3);let e=[];for(let t of this.provList)e.push(t.code);const a=1===this.oldSlectProvList.length?[]:this.oldSlectProvList[1];if(t.includes("000000")&&(this.selectProvList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectProvList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectProvList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectProvList=["000000"].concat(t)),this.oldSlectProvList[1]=this.selectProvList,0==this.selectProvList.length)return this.cityList=[],this.selectCityList=[],this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectProvList},!0,t=>{if("200000"===t.ret)return this.cityList=[{code:"000000",name:"全部"}],this.cityList.push(...t.data),void this.restrictProv();this.message.error(t.message)})},getAreaList(t){if(1==this.cityList.length)return void setTimeout(()=>{this.getAreaList(t)},1e3);let e=[];for(let t of this.cityList)e.push(t.code);const a=1===this.oldSelectCityList.length?[]:this.oldSelectCityList[1];if(t.includes("000000")&&(this.selectCityList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectCityList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectCityList=t}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectCityList=["000000"].concat(t)),this.oldSelectCityList[1]=this.selectCityList,0==this.selectCityList.length)return this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectCityList},!0,t=>{if("200000"===t.ret)return this.areaList=[{code:"000000",name:"全部"}],this.areaList.push(...t.data),void this.restrictCity();this.$message.error(t.message)})},selectAll(t){if(1==this.areaList.length)return void setTimeout(()=>{this.selectAll(t)},1e3);this.restrictArea();let e=[];for(let t of this.areaList)e.push(t.code);const a=1===this.oldSelectAreaList.length?[]:this.oldSelectAreaList[1];if(t.includes("000000")&&(this.selectAreaList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectAreaList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectAreaList=t}a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectAreaList=["000000"].concat(t)),this.oldSelectAreaList[1]=this.selectAreaList},save(){console.log(this.normalConf);let t=this.normalConf,e=!1;if(t.forEach((t,a)=>t.prizeName?(t.totalNum||(this.$message.error("请输入投放数量"),e=!0),""===t.probability?(this.$message.error("请输入中奖概率"),e=!0,!1):void 0):(this.$message.error("请选择奖品"),e=!0,!1)),e)return!1;this.$emit("modifyAwardArr",t)},backList(){this.$router.push("/market/actMgr"),this.routerRefresh()},normalTabsEdit(t,e){this.addOrRemove("normal",t,e)},firstScanTabsEdit(t,e){this.addOrRemove("firstScan",t,e)},nWinTabsEdit(t,e){this.addOrRemove("nWin",t,e)},fixationPutTabsEdit(t,e){this.addOrRemove("fixationPut",t,e)},addOrRemove(t,e,a){if("add"===a){if(15==this[t+"Conf"].length)return;let e=JSON.parse(JSON.stringify(this.defaultAwae));this[t+"Conf"].push(e);let a="常规奖项"+this[t+"Conf"].length;this[t+"Tabs"].push({title:a,name:this[t+"Conf"].length+""}),this[t+"TabsValue"]=this[t+"Conf"].length+""}if("remove"===a){if(1==this[t+"Conf"].length)return;this[t+"Tabs"];this[t+"Conf"].splice(e-1,1),this[t+"Tabs"]=[];for(var s=1;s<=this[t+"Conf"].length;s++)this[t+"Tabs"].push({title:"常规奖项"+s,name:s+""});this[t+"TabsValue"]="1"}},restrictProv(){this.specialProvList=JSON.parse(JSON.stringify(this.provList)),this.specialProvList.forEach(t=>{t.disabled=!0,this.selectProvList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictCity(){this.specialCityList=JSON.parse(JSON.stringify(this.cityList)),this.specialCityList.forEach(t=>{t.disabled=!0,this.selectCityList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictArea(){this.specialAreaList=JSON.parse(JSON.stringify(this.areaList)),this.specialAreaList.forEach(t=>{t.disabled=!0,this.selectAreaList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictBrand(){this.specialBrandList=JSON.parse(JSON.stringify(this.brandList)),this.specialBrandList.forEach(t=>{t.disabled=!0,this.selectBrand.forEach(e=>{t.brandCode==e&&(t.disabled=!1)})})},restrictSonBrand(){this.specialBrandSonList=JSON.parse(JSON.stringify(this.brandSonList)),this.specialBrandSonList.forEach(t=>{t.disabled=!0,this.selectSonBrand.forEach(e=>{t.sn==e&&(t.disabled=!1)})})}}}]},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actPutConf-container"},[a("el-card",[a("el-form",{ref:"form",attrs:{model:t.strategy,"label-width":"100px"}},[a("el-form-item",[a("div",{staticClass:"prize-conf"},[a("div",{staticClass:"title"},[t._v("常规奖池")]),t._v(" "),a("el-tabs",{staticClass:"put-conf",attrs:{type:"card",editable:""},on:{edit:t.normalTabsEdit},model:{value:t.normalTabsValue,callback:function(e){t.normalTabsValue=e},expression:"normalTabsValue"}},t._l(t.normalTabs,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{astrict:t.astrictRedflg,awae:t.normalConf[s],prizeType:t.prizeType}})],1)}))],1),t._v(" "),a("el-form-item",[a("div",{staticClass:"special-rule-conf"},[a("div",{staticClass:"title"},[a("span",[t._v("特殊规则设置")]),t._v(" "),a("el-switch",{model:{value:t.specialRuleConfFlag,callback:function(e){t.specialRuleConfFlag=e},expression:"specialRuleConfFlag"}})],1),t._v(" "),t.specialRuleConfFlag?a("div",{staticClass:"con"},[a("el-row",[a("el-checkbox",{model:{value:t.firstScanFlag,callback:function(e){t.firstScanFlag=e},expression:"firstScanFlag"}},[t._v("首扫必中奖")]),t._v(" "),t.firstScanFlag?a("div",{staticClass:"conf"},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.firstScanTabsEdit},model:{value:t.firstScanTabsValue,callback:function(e){t.firstScanTabsValue=e},expression:"firstScanTabsValue"}},t._l(t.firstScanTabs,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{astrict:t.astrictRedflg,awae:t.firstScanConf[s],hide:!0,prizeType:t.prizeType}})],1)}))],1):t._e()],1),t._v(" "),a("el-row",[a("el-checkbox",{model:{value:t.nWinFlag,callback:function(e){t.nWinFlag=e},expression:"nWinFlag"}},[t._v("N次必中奖")]),t._v(" "),t.nWinFlag?a("div",{staticClass:"conf"},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.nWinTabsEdit},model:{value:t.nWinTabsValue,callback:function(e){t.nWinTabsValue=e},expression:"nWinTabsValue"}},t._l(t.nWinTabs,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{astrict:t.astrictRedflg,awae:t.nWinConf[s],hide:!0,prizeType:t.prizeType,nWin:!0}})],1)}))],1):t._e()],1),t._v(" "),a("el-row")],1):t._e()])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"prize-limit"},[a("div",{staticClass:"title"},[a("span",[t._v("抽奖限制")]),t._v(" "),a("el-switch",{on:{change:function(e){t.act.dwnum=0}},model:{value:t.prizeLimitFlag,callback:function(e){t.prizeLimitFlag=e},expression:"prizeLimitFlag"}})],1),t._v(" "),t.prizeLimitFlag?a("div",{staticClass:"con"},[a("el-row",[a("el-col",{staticClass:"label",attrs:{span:6}},[t._v("每日中奖机会限制:")]),t._v("\n                  每人每日"),a("el-input-number",{attrs:{size:"small",min:0,"controls-position":"right"},model:{value:t.act.dwnum,callback:function(e){t.$set(t.act,"dwnum",e)},expression:"act.dwnum"}}),t._v("\n                  次抽奖后，不再有中奖机会\n                ")],1)],1):t._e()])])],1),t._v(" "),a("el-form-item",[a("el-row",{staticClass:"mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.backList}},[t._v("返回列表")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"选择的品牌及对应的规格",visible:t.brandVisible,width:"500px"},on:{"update:visible":function(e){t.brandVisible=e}}},[a("span",[t._v("暂时不做")])]),t._v(" "),a("el-dialog",{attrs:{title:"常规奖池选择的地区明细",visible:t.regionVisible,width:"500px"},on:{"update:visible":function(e){t.regionVisible=e}}},[a("span",[t._v("暂时不做")])])],1)},staticRenderFns:[]};var n=a("VU/8")(l,o,!1,function(t){a("Udxb")},"data-v-5ed270ba",null).exports,c={props:["form","tplCode","id","clone"],components:{quillEditor:s.quillEditor,ActPutConf:n},data(){return{editorOption:{modules:{toolbar:[[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike",,"blockquote"],[{color:[]},{background:[]},{align:[]}]]},placeholder:"请输入活动说明"},idxSelect:{},actTagGroup:[],confData:{id:"",actCode:"",actDesc:"",actName:"",banner:"",form:this.form,idx:"",note:"",stimeStr:"",etimeStr:"",showStatus:0,tplCode:"",extInfo:"",status:1,selectBrand:[],selectProductList:[],selectProvList:[],selectCityList:[],selectDistrictList:[],saleZoneFlag:0,saleZoneCode:null,link:""},statusDisabled:!1,strategyArr:[],extInfo:{},confRules:{actName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],note:[{required:!0,message:"请输入活动描述",trigger:"blur"}],date:[{required:!0,validator:(t,e,a)=>{this.confData.stimeStr&&this.confData.etimeStr?this.confData.stimeStr>=this.confData.etimeStr?a(new Error("开始时间必须小于结束时间")):a():a(new Error("请选择活动时间"))},trigger:"change"}],idx:[{required:!0,validator:(t,e,a)=>{"0"==e?a(new Error("请选择活动优先级")):a()},trigger:"change"}],banner:[{required:!0,validator:(t,e,a)=>{this.confData.banner?a():a(new Error("请选择活动图片"))}}],desc:[{required:!0,validator:(t,e,a)=>{this.confData.actDesc?a():a(new Error("请输入活动说明"))}}],selectProductList:[{required:!0,validator:(t,e,a)=>{this.confData.selectProductList&&this.confData.selectProductList.length>0?a():a(new Error("请选择品牌规格"))}}],selectCityList:[{required:!0,validator:(t,e,a)=>{this.confData.selectCityList&&this.confData.selectCityList.length>0?a():a(new Error("请选择地区"))}}],link:[{required:!0,message:"请输入活动链接",trigger:"blur"}]},timeDisable:!1,uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token")},stepActive:0,brandList:[],productList:[],saleZone:[],provList:[{code:"000000",name:"全国"}],cityList:[],districtList:[],allProv:[],allCity:{},allDistrict:{},isDisabled:!1,initProd:!1,initCity:!1,initDistrict:!1,awardArr:[],useAwardArr:!1,directDraw:"0",Cindex:0,showSaleZone:-1==sessionStorage.getItem("account").indexOf("shankun"),saleZoneDisabled:!1,showNoneActTag:!1}},watch:{isDisabled:function(t){t?(this.confData.selectProvList=["000000"],this.confData.selectCityList=["000000"],this.cityList=[],this.cityList.push({code:"000000",name:"全国"})):(this.confData.selectProvList=[],this.confData.selectCityList=[],this.cityList=[])}},created(){this.id&&this.id>0?(this.initProd=!0,this.initCity=!0,this.initDistrict=!0,this.getDetail()):(this.initAjax(),this.getActTag())},methods:{getActTag(){this.id?this.$request.post("/api/actTag/query/saleZoneTag",{saleZoneCode:null},!1,t=>{if("200"==t.code){let e=t.data.tagList.find(t=>t.id==this.confData.actTag);this.actTagGroup=e?[e]:[]}}):this.$request.post("/api/actTag/query/saleZoneTag",{saleZoneCode:this.confData.saleZoneCode},!1,t=>{"200"==t.code&&(this.actTagGroup=t.data.tagList||[])})},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},modifyAwardArr(t){this.awardArr=t,console.log(this.awardArr),this.confirmSubmit()},initAjax(){this.getIdxSelect(),this.getBrandList(),this.getAllRegions(),this.getSaleZone()},getIdxSelect(){this.$request.post("/api/wiseqr/act/idxSelect",{},!0,t=>{if("200000"===t.ret)return this.idxSelect=t.data})},getAllRegions(){this.$request.post("/api/wiseqr/dim/allRegions",{withRight:!0},!0,t=>{if("200000"==t.ret){let e=t.data||{};this.allProv=e.province||[],this.allCity=e.city||{},this.allDistrict=e.district||{},this.provList=this.provList.concat(this.allProv);let a=this.strategyArr[this.Cindex];a&&(this.confData.selectProvList=a.areas.provinceArr||[]),this.initCity&&this.getCityList()}else this.$message.error(t.messgae)})},getCityList(){if(this.districtList=[],this.confData.selectCityList=[],this.confData.selectDistrictList=[],this.confData.selectProvList.length>0){if("000000"==this.confData.selectProvList[this.confData.selectProvList.length-1]){this.confData.selectProvList=["000000"],this.cityList.splice(0,this.cityList.length);let t=Object.values(this.allCity),e=[];for(let a=0;a<t.length;a++)e=e.concat(t[a]);for(let t=0;t<e.length;t++)this.cityList.push(e[t]);if(this.confData.selectCityList=this.cityList.map(t=>t.code),this.confData.selectCityList.unshift("全选"),this.initCity){let t=this.strategyArr[this.Cindex];t&&("000000"==t.areas.cityArr[0]&&(this.isDisabled=!0),this.confData.selectCityList=t.areas.cityArr||[]),this.initCity=!1}return}this.confData.selectProvList.length>1&&"000000"==this.confData.selectProvList[0]&&this.confData.selectProvList.shift(),this.cityList=[];let t=[];for(let e=0;e<this.confData.selectProvList.length;e++){let a=this.confData.selectProvList[e];t=t.concat(this.allCity[a])}this.cityList=t}else this.cityList=[];if(this.initCity){let t=this.strategyArr[this.Cindex];t&&(this.confData.selectCityList=t.areas.cityArr||[]),0!==this.confData.selectCityList.length&&this.confData.selectCityList.length==this.cityList.length&&this.confData.selectCityList.unshift("全选"),this.initCity=!1}this.initDistrict&&this.getDistrictList()},selectAll(){this.confData.selectCityList.length<this.cityList.length?(this.confData.selectCityList=[],this.cityList.map(t=>{this.confData.selectCityList.push(t.code)}),this.confData.selectCityList.unshift("全选")):this.confData.selectCityList=[]},removeTag(t){"全选"===t&&(this.confData.selectCityList=[])},getDistrictList(t){if(this.districtList=[],this.confData.selectDistrictList=[],this.confData.selectProvList.length>0){if("000000"==this.confData.selectCityList[this.confData.selectCityList.length-1])return this.confData.selectCityList=["000000"],void(this.districtList=[{code:"000000",name:"全国"}]);this.districtList=[];let t=[];for(let e=0;e<this.confData.selectCityList.length;e++){let a=this.confData.selectCityList[e];t=t.concat(this.allDistrict[a])}this.districtList=t}else this.districtList=[];if(this.initDistrict){let t=this.strategyArr[this.Cindex];t&&(this.confData.selectDistrictList=t.areas.districtArr||[]),this.initDistrict=!1}t&&(t.includes("全选")||t.length!==this.cityList.length?t.includes("全选")&&t.length-1<this.cityList.length&&(this.confData.selectCityList=this.confData.selectCityList.filter(t=>"全选"!==t)):this.confData.selectCityList.unshift("全选"))},getBrandList(){this.$request.post("/api/wiseqr/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"!=t.ret)this.$message.error(t.message);else{this.brandList=t.data.list||[];let e=this.strategyArr[this.Cindex];e&&(this.confData.selectBrand=e.brandArr||[],this.initProd&&this.getProductList())}})},getProductList(){this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.confData.selectBrand,pageSize:"-1",status:"1"},!0,t=>{if("200000"!=t.ret)this.$message.error(t.message);else if(this.productList=t.data.list||[],this.initProd){let t=this.strategyArr[this.Cindex];t&&(this.confData.selectProductList=t.snArr||[]),this.initProd=!1}})},copyDetailAttr(t){1==t.status&&(this.statusDisabled=!0),2==t.status?this.saleZoneDisabled=!1:this.saleZoneDisabled=!0,t.extInfo&&(this.extInfo=JSON.parse(t.extInfo)),console.log(t),this.confData={id:t.id||"",actCode:t.actCode||"",actDesc:t.actDesc||"",actTag:t.actTag||"",actName:t.actName||"",banner:t.banner||"",form:this.form,idx:t.idx+""||"",note:t.note||"",stimeStr:t.stimeStr||"",etimeStr:t.etimeStr||"",showStatus:t.showStatus||0,tplCode:t.tplCode||"",extInfo:t.extInfo||"",status:t.status||2,saleZoneCode:t.saleZoneCode||null,saleZoneFlag:t.saleZoneFlag||0,selectBrand:[],selectProductList:[],selectProvList:[],selectCityList:[],selectDistrictList:[],link:this.extInfo.link||""},"1"==this.clone&&(this.confData.id="",this.confData.actCode=""),t.stimeStr&&t.etimeStr&&this.handleDisableTime()},getDetail(){this.$request.post("/api/wiseqr/act/detail",{id:this.id},!0,t=>{if("200000"==t.ret)return this.copyDetailAttr(t.data.act),this.getActTag(),this.confData.actTag||(this.showNoneActTag=!0),this.strategyArr=t.data.strategyArr,void t.data.strategyArr.forEach((e,a)=>{"common"==e.tfType&&(this.Cindex=a,this.initAjax(),t.data.strategyArr[this.Cindex].awardArr&&(this.useAwardArr=!0,this.awardArr=t.data.strategyArr[this.Cindex].awardArr,"directDraw"in JSON.parse(t.data.act.extInfo)&&"1"==JSON.parse(t.data.act.extInfo).directDraw&&(this.directDraw="1"))),"sn_first"==e.tfType&&(1!=this.clone&&(this.$refs.actPutConf.firstScanTfId=e.tf.id),e.awardArr.forEach((t,e)=>{if(0!=e&&this.$refs.actPutConf.firstScanTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.$refs.actPutConf.firstScanConf[0][e]=t[e];else this.$refs.actPutConf.firstScanConf.push(t)}),this.$refs.actPutConf.specialRuleConfFlag=!0,this.$refs.actPutConf.firstScanFlag=!0,this.$refs.actPutConf.firstScanConf=e.awardArr),"n_mwin"==e.tfType&&(1!=this.clone&&(this.$refs.actPutConf.nWinTfId=e.tf.id),e.awardArr.forEach((t,e)=>{if(0!=e&&this.$refs.actPutConf.nWinTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.$refs.actPutConf.nWinConf[0][e]=t[e];else this.$refs.actPutConf.nWinConf.push(t)}),this.$refs.actPutConf.specialRuleConfFlag=!0,this.$refs.actPutConf.nWinFlag=!0,this.$refs.actPutConf.nWinConf=e.awardArr),"special"==e.tfType&&(1!=this.clone&&(this.$refs.actPutConf.fixationPutTfId=e.tf.id),e.awardArr.forEach((t,e)=>{if(0!=e&&this.$refs.actPutConf.fixationPutTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.$refs.actPutConf.fixationPutConf[0][e]=t[e];else this.$refs.actPutConf.fixationPutConf.push(t)}),this.$refs.actPutConf.specialRuleConfFlag=!0,this.$refs.actPutConf.fixationPutFlag=!0,this.$refs.actPutConf.fixationPutConf=e.awardArr,this.$refs.actPutConf.specialAreas=e.areas,this.$refs.actPutConf.specialBrand.brandArr=e.brandArr,this.$refs.actPutConf.specialBrand.snArr=e.snArr,this.$refs.actPutConf.tfDurationArr.push(e.tf.sduration),this.$refs.actPutConf.tfDurationArr.push(e.tf.eduration),this.$refs.actPutConf.tfTimeArr.push(e.tf.stimeStr),this.$refs.actPutConf.tfTimeArr.push(e.tf.etimeStr))});this.$message.error(t.message)})},handleDisableTime(){(new Date).getTime()>=new Date(this.confData.stimeStr).getTime()&&1==this.confData.status&&(this.timeDisable=!0),"1"==this.clone&&(this.timeDisable=!1)},upBannerImg(t){if("200000"===t.ret)return this.confData.banner=t.data.accessUrl,void this.$refs.actSetConfRef.validateField("banner",t=>{});this.$message.error(t.message)},onEditorBlur(){this.$refs.actSetConfRef.validateField("desc",t=>{})},confirmSubmit(){this.$refs.actSetConfRef.validate(t=>{if(t){this.extInfo={link:this.confData.link,directDraw:this.directDraw},this.confData.extInfo=JSON.stringify(this.extInfo);let t={};t.act=this.confData;let e={tf:{},tfType:"common",snArr:this.confData.selectProductList,areas:{provinceArr:this.confData.selectProvList,cityArr:this.confData.selectCityList,districtArr:this.confData.selectDistrictList}};console.log(e),"全选"==e.areas.cityArr[0]&&e.areas.cityArr.shift();let a=this.strategyArr[this.Cindex];a&&(e.tf.id=a.tf.id,e.tf.tfCode=a.tf.tfCode),1==this.clone&&(e.tf={}),t.strategyArr=[],t.strategyArr.push(e),this.useAwardArr&&(t.strategyArr[0].awardArr=this.awardArr);let s=0;this.$refs.actPutConf.firstScanFlag&&(t.strategyArr.push(JSON.parse(JSON.stringify(this.$refs.actPutConf.strategy))),s=t.strategyArr.length,t.strategyArr[s-1].awardArr=this.$refs.actPutConf.firstScanConf,t.strategyArr[s-1].confOpen=!0,t.strategyArr[s-1].tfType="sn_first",t.strategyArr[s-1].tf={id:this.$refs.actPutConf.firstScanTfId}),this.$refs.actPutConf.nWinFlag&&(t.strategyArr.push(JSON.parse(JSON.stringify(this.$refs.actPutConf.strategy))),s=t.strategyArr.length,t.strategyArr[s-1].awardArr=this.$refs.actPutConf.nWinConf,t.strategyArr[s-1].confOpen=!0,t.strategyArr[s-1].tfType="n_mwin",t.strategyArr[s-1].tf={id:this.$refs.actPutConf.nWinTfId}),this.$refs.actPutConf.fixationPutFlag&&(t.strategyArr.push(JSON.parse(JSON.stringify(this.$refs.actPutConf.strategy))),s=t.strategyArr.length,t.strategyArr[s-1].areas=this.$refs.actPutConf.specialAreas,t.strategyArr[s-1].awardArr=this.$refs.actPutConf.fixationPutConf,t.strategyArr[s-1].confOpen=!0,t.strategyArr[s-1].brandArr=this.$refs.actPutConf.specialBrand.brandArr,t.strategyArr[s-1].snArr=this.$refs.actPutConf.specialBrand.snArr,t.strategyArr[s-1].tf={sduration:this.$refs.actPutConf.tfDurationArr[0],eduration:this.$refs.actPutConf.tfDurationArr[1],stimeStr:this.$refs.actPutConf.tfTimeArr[0],etimeStr:this.$refs.actPutConf.tfTimeArr[1],id:this.$refs.actPutConf.fixationPutTfId},t.strategyArr[s-1].tfType="special"),this.$request.post("/api/wiseqr/act/somtfSelf",t,!0,t=>{"200000"==t.ret?(this.$message({type:"success",message:"操作成功!"}),this.$router.push({path:"/market/actMgr"})):this.$message.error(t.message)})}})},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),e&&a}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actSetConf-container"},[a("el-card",[a("el-form",{ref:"actSetConfRef",attrs:{model:t.confData,"label-width":"150px",rules:t.confRules}},[a("el-form-item",{attrs:{label:"活动名称：",prop:"actName"}},[a("el-input",{attrs:{maxLength:"15",placeholder:"请输入活动名称，15字以内"},model:{value:t.confData.actName,callback:function(e){t.$set(t.confData,"actName",e)},expression:"confData.actName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动描述：",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:3,resize:"none",maxLength:"15",placeholder:"请输入活动描述，15字以内"},model:{value:t.confData.note,callback:function(e){t.$set(t.confData,"note",e)},expression:"confData.note"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"优先级：",prop:"idx"}},[a("el-select",{staticClass:"select-one",attrs:{placeholder:"请选择"},model:{value:t.confData.idx,callback:function(e){t.$set(t.confData,"idx",e)},expression:"confData.idx"}},t._l(t.idxSelect,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"活动时间：",prop:"date"}},[a("el-date-picker",{attrs:{disabled:t.timeDisable,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.confData.stimeStr,callback:function(e){t.$set(t.confData,"stimeStr",e)},expression:"confData.stimeStr"}}),t._v("\n          至\n          "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.confData.etimeStr,callback:function(e){t.$set(t.confData,"etimeStr",e)},expression:"confData.etimeStr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动图片：",prop:"banner"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":t.beforeAvatarUpload,action:t.uploadURL,headers:t.headerObj,"on-success":t.upBannerImg,"show-file-list":!1}},[t.confData.banner?a("img",{staticClass:"avatar",attrs:{src:t.confData.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传图片的最佳尺寸：750像素*160像素；格式png、jpg；大小不超过2M")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"活动说明：",prop:"desc"}},[a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption,placeholder:"请输入活动说明，300字以内"},on:{blur:function(e){t.onEditorBlur(e)}},model:{value:t.confData.actDesc,callback:function(e){t.$set(t.confData,"actDesc",e)},expression:"confData.actDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌规格：",prop:"selectProductList"}},[a("el-select",{staticClass:"select-two",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getProductList},model:{value:t.confData.selectBrand,callback:function(e){t.$set(t.confData,"selectBrand",e)},expression:"confData.selectBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{staticClass:"select-two",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.confData.selectProductList,callback:function(e){t.$set(t.confData,"selectProductList",e)},expression:"confData.selectProductList"}},t._l(t.productList,function(t){return a("el-option",{key:t.id,attrs:{label:t.allName,value:t.sn}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"地区：",prop:"selectCityList"}},[a("el-select",{staticClass:"select-three",attrs:{size:"small",multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择",disabled:t.isDisabled},on:{change:t.getCityList},model:{value:t.confData.selectProvList,callback:function(e){t.$set(t.confData,"selectProvList",e)},expression:"confData.selectProvList"}},t._l(t.provList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{staticClass:"select-three",attrs:{size:"small",multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择",disabled:t.isDisabled},on:{change:t.getDistrictList,"remove-tag":t.removeTag},model:{value:t.confData.selectCityList,callback:function(e){t.$set(t.confData,"selectCityList",e)},expression:"confData.selectCityList"}},[a("el-option",{attrs:{label:"全选",value:"全选"},nativeOn:{click:function(e){return t.selectAll(e)}}}),t._v(" "),t._l(t.cityList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})],2),t._v(" "),a("el-checkbox",{attrs:{label:"全部地区",border:""},model:{value:t.isDisabled,callback:function(e){t.isDisabled=e},expression:"isDisabled"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动标签：",prop:"actTag"}},[t._l(t.actTagGroup,function(e,s){return a("el-radio",{key:s,attrs:{disabled:!!t.id,label:e.id},model:{value:t.confData.actTag,callback:function(e){t.$set(t.confData,"actTag",e)},expression:"confData.actTag"}},[t._v(t._s(e.name))])}),t._v(" "),t.showNoneActTag?a("span",[t._v("无")]):t._e()],2),t._v(" "),a("el-form-item",{attrs:{label:"活动链接：",prop:"link"}},[a("el-input",{attrs:{placeholder:"请输入活动链接"},model:{value:t.confData.link,callback:function(e){t.$set(t.confData,"link",e)},expression:"confData.link"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否在落地页显示："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.confData.showStatus,callback:function(e){t.$set(t.confData,"showStatus",e)},expression:"confData.showStatus"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否立即发布："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":2,disabled:t.statusDisabled},model:{value:t.confData.status,callback:function(e){t.$set(t.confData,"status",e)},expression:"confData.status"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否配置奖池："}},[a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},model:{value:t.useAwardArr,callback:function(e){t.useAwardArr=e},expression:"useAwardArr"}})],1),t._v(" "),t.useAwardArr?a("el-form-item",{attrs:{label:"是否直接抽奖："}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.directDraw,callback:function(e){t.directDraw=e},expression:"directDraw"}})],1):t._e(),t._v(" "),a("ActPutConf",{directives:[{name:"show",rawName:"v-show",value:t.useAwardArr,expression:"useAwardArr"}],ref:"actPutConf",attrs:{awardArr:t.awardArr},on:{modifyAwardArr:t.modifyAwardArr}}),t._v(" "),t.useAwardArr?t._e():a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(e){t.$router.push("/market/actMgr")}}},[t._v("返回列表")])],1)],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,d,!1,function(t){a("Ib9Y")},"data-v-1f6400df",null);e.default=m.exports},TKD6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data(){return{defaultConf:{title:null,description:"",ratio:.4,img:this.getAllImage()},activeName:"home",addActParams:{conf:"",form:"act-102",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}},computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getImage(t,e){return"http://qoss.qrmkt.cn/new_platform/pc_front/"+t+"."+(e=e||this.suffix)},getStyle(t,e,a,s){var i=t.toString().indexOf("%")>-1,r=e.toString().indexOf("%")>-1;return{style:{"max-width":i?t:Math.floor(.4*t)+"px","max-height":r?e:Math.floor(.4*e)+"px",transform:"translate("+Math.floor(.4*a)+"px,"+Math.floor(.4*s)+"px)"},"c-style":{"max-width":i?t:Math.floor(.5*t)+"px","max-height":r?e:Math.floor(.5*e)+"px",transform:"translate("+Math.floor(.5*a)+"px,"+Math.floor(.5*s)+"px)"}}},getAllImage(){var t={},e=[[111,127],[130,146],[123,124],[125,144],[114,112],[147,144]],a=[[41,614],[207,530],[317,409],[348,615],[484,499],[547,604]];t.kists=[];for(var s=1;s<=e.length;s++){var i=e[s-1][0],r=e[s-1][1],l=a[s-1][0],o=a[s-1][1];t["yuanbao0"+s]={url:this.getImage("yuanbao0"+s,"png"),width:i,height:r,left:l,top:o,style:this.getStyle(i,r,l,o).style,"c-style":this.getStyle(i,r,l,o)["c-style"]},t.kists.push(t["yuanbao0"+s])}return t.bg={url:this.getImage("yuanbao-bg","jpg"),width:"100%",height:"100%",left:0,top:0,style:this.getStyle("100%","100%",0,0)},t.title={url:this.getImage("yuanbao-title","png"),width:586,height:244,left:83,top:57,style:this.getStyle(586,244,83,57).style,"c-style":this.getStyle(586,244,83,57)["c-style"]},t.tips={url:this.getImage("JGG_HDJN","png"),width:120,height:120,left:638,top:38,style:this.getStyle(120,120,638,38).style,"c-style":this.getStyle(120,120,638,38)["c-style"]},t.award={url:"http://qoss.qrmkt.cn/new_platform/yuanbao-award-btn.png"},t.award_bg={url:"http://qoss.qrmkt.cn/new_platform/yuanbao-award-bg.png"},t.noAward={url:"http://qoss.qrmkt.cn/new_platform/yuanbao-no-award-bg.png"},t.zxNoAwardBtn={url:"http://qoss.qrmkt.cn/new_platform/yuanbao-no-award-btn.png"},console.log(t),t},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.defaultConf.img.bg.url=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.title.url=t.data.accessUrl;this.$message.error(t.message)},upTipsImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.tips.url=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upGameImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img["yuanbao0"+[this.gameIndex+1]].url=t.data.accessUrl,this.defaultConf.img.kists[this.gameIndex].url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.award.url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBg(t){if("200000"===t.ret)return this.defaultConf.img.award_bg.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImg(t){if("200000"===t.ret)return this.defaultConf.img.noAward.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.zxNoAwardBtn.url=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.defaultConf.title=this.addActParams.name,this.defaultConf.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.defaultConf),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"kits"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),t._l(t.defaultConf.img.kists,function(e){return a("img",{key:e.key,staticClass:"game-con",style:e.style,attrs:{src:e.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=4}}})})],2),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("活动锦囊：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipsImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},t._l(t.defaultConf.img.kists,function(e,s){return a("div",{key:e.key},[a("p",{staticClass:"img-title"},[t._v(t._s("元宝"+(s+1)+":"))]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:e.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upGameImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.getGameIndex(s)}}},[t._v("更换图片")])],1)],1)])})):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 586*244px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 120*120px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 125*125px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con award-con"},[a("img",{staticClass:"award-alert",attrs:{src:t.defaultConf.img.award_bg.url,alt:""}}),t._v(" "),a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:"http://qoss.qrmkt.cn/new_platform/award_img.png",alt:""}}),t._v(" "),a("div",{staticClass:"award-text"},[a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.award.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.award_bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.award.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con award-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"award-alert",attrs:{src:t.defaultConf.img.noAward.url,alt:""}}),t._v(" "),a("div",{staticClass:"award-no-text"},[a("h3",[t._v("很遗憾，未中奖")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖图片：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.noAward.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖按钮：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放:\n\t\t\t\t\t\t"),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("S3gb")},"data-v-4fc61eaa",null);e.default=r.exports},TlXX:function(t,e){},UDQm:function(t,e){},UP71:function(t,e){},Udxb:function(t,e){},UhMD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"SignMgr",data:()=>({ctnDay:"7",points:0}),created(){this.getTimeConf()},methods:{getTimeConf(){this.$request.post("/hbact/hyr/sign/confQuery",{},!1,t=>{if("200"==t.code)return this.ctnDay=t.data.signConf.ctnDay,void(this.points=t.data.signConf.points);this.$message.error(t.msg)})},confUpdate(){this.$request.post("/hbact/hyr/sign/confUpdate",{ctnDay:this.ctnDay,points:this.points},!1,t=>{if("200"==t.code)return this.$message.success("操作成功！"),void this.getTimeConf();this.$message.error(t.msg)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SignMgr-container"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("打卡设置：")])]),t._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"连续签到奖励："}},[t._v("\n        连续签到\n        "),a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:t.ctnDay,callback:function(e){t.ctnDay=e},expression:"ctnDay"}}),t._v("\n        天，额外可获得\n        "),a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:t.points,callback:function(e){t.points=e},expression:"points"}}),t._v("\n        积分\n      ")],1)],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.confUpdate}},[t._v("保存")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("vknl")},"data-v-717ef482",null);e.default=r.exports},VnSS:function(t,e){},Vy5t:function(t,e){},Wdsx:function(t,e){},"Wen/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"SignMgr",data:()=>({list:[{sn:"1234567",snName:"河北测试（变长一点）",points:0},{sn:"11111111010123456",snName:"Test盒",points:0},{sn:"6901028250009",snName:"经典醇和",points:0},{sn:"6901028250382",snName:"经典浓情",points:0},{sn:"6901028250234",snName:"钻石（经典浓情）红",points:0},{sn:"6901028250351",snName:"钻石（细支洪荒之绿）",points:0},{sn:"1111111111111",snName:"钻石（洪荒之绿）",points:0},{sn:"1111111111112",snName:"钻石（洪荒之绿薄荷）",points:0},{sn:"1111111111114",snName:"钻石（玫瑰之旅）",points:0},{sn:"6901028078245",snName:"钻石（时尚红）",points:0},{sn:"6901028079075",snName:"钻石（自在·八仙）",points:0},{sn:"6901028250788",snName:"钻石（时尚蓝）",points:0},{sn:"1111111111115",snName:"钻石（传奇·子龙）",points:0},{sn:"6901028077699",snName:"钻石（软绿硬化版）",points:0},{sn:"6901028080019",snName:"钻石（硬玫瑰紫）",points:0},{sn:"6901028250757",snName:"钻石（绿石2代）",points:0},{sn:"6901028079815",snName:"钻石（西柏坡）",points:0},{sn:"6901028250320",snName:"钻石（细支尚风）",points:0},{sn:"6901028250412",snName:"钻石（盛世迎宾）",points:0},{sn:"6901028250979",snName:"钻石（金玉兰）",points:0},{sn:"6901028250597",snName:"钻石（硬珍品）",points:0},{sn:"6901028107105",snName:"钻石（扁蓝时尚）",points:0},{sn:"6901028250955",snName:"钻石（细支心世界）",points:0},{sn:"6901028107198",snName:"钻石（细支西柏坡）",points:0},{sn:"6901028250790",snName:"钻石（金石）",points:0},{sn:"6901028077460",snName:"钻石(冰雪大好河山)",points:0},{sn:"6901028107280",snName:"钻石（玫瑰）二代盒",points:0},{sn:"6901028107259",snName:"钻石（一九零二中支）盒",points:0},{sn:"6901028107341",snName:"钻石（君子中支）盒",points:0}],hb:[],form:{num:0,contDay5:0,contDay6:0,contDay7:0},title:"选择物品",awdList:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,defaultAwae:{awardPrice:0,prizePert:0,totalNum:0,awardPic:""}}),created(){this.getScanConf(),this.getContConf(),this.getRedpackConf()},mounted(){},methods:{getList(t){"1"==t?(this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==t&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.awdList=[],this.awdList=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})},addRepertory(t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:e})=>{if(0==e)return this.$message.error("数字不能为0");this.$request.post("/hbact/dayscan/redpack/stock",{id:t.id,addNum:e},!1,t=>{"200"==t.code?(this.$message.success("增库成功"),this.getRedpackConf()):this.$message.error(t.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},selectPrize(t,e){let a=JSON.parse(JSON.stringify(this.defaultAwae));a.awardPic=t.pic,this.hb.push(a),this.listVisible=!1},deleteAward(t,e){this.$request.post("/hbact/dayscan/redpack/delete",{id:t.id},!1,t=>{"200"==t.code?(this.$message.success("删除成功"),this.getRedpackConf()):this.$message.error(t.message)})},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},getScanConf(){this.$request.post("/hbact/dayscan/conf/list",{},!0,t=>{"200"!=t.code?this.$message.error(t.msg):this.list.forEach(e=>{t.data.forEach(t=>{e.sn==t.sn&&(e.points=t.points)})})})},getContConf(){this.$request.post("/hbact/dayscan/cont/list",{},!0,t=>{if("200"!=t.code)this.$message.error(t.msg);else{t.data.forEach((t,e)=>{5==t.contDay?this.form.contDay5=t.points:6==t.contDay?this.form.contDay6=t.points:7==t.contDay&&(this.form.contDay7=t.points)})}})},getRedpackConf(){this.$request.post("/hbact/dayscan/redpack/query",{},!0,t=>{"200"!=t.code?this.$message.error(t.msg):this.hb=t.data})},dayscanUpdate(){return new Promise((t,e)=>{let a=this.list.map((t,e)=>({sn:t.sn,snName:t.snName,points:t.points}));this.$request.post("/hbact/dayscan/conf/update",a,!0,e=>{t(e)})})},contDayUpdate(){return new Promise((t,e)=>{this.$request.post("/hbact/dayscan/cont/update",[{contDay:5,points:this.form.contDay5},{contDay:6,points:this.form.contDay6},{contDay:7,points:this.form.contDay7}],!0,e=>{t(e)})})},setRedpack(){return new Promise((t,e)=>{let a=this.hb.map(t=>t.id?{id:t.id,awardPrice:t.awardPrice,prizePert:t.prizePert,totalNum:t.totalNum,awardPic:t.awardPic}:{awardPrice:t.awardPrice,prizePert:t.prizePert,totalNum:t.totalNum,awardPic:t.awardPic});this.$request.post("/hbact/dayscan/redpack/set",a,!0,e=>{t(e)})})},handleSave(){Promise.all([this.dayscanUpdate(),this.contDayUpdate(),this.setRedpack()]).then(([t,e,a])=>{"200"==t.code?(console.log(t.data),"200"==e.code?(console.log(e.data),"200"==a.code?(console.log(a.data),this.$message.success("保存成功！"),this.getScanConf(),this.getContConf(),this.getRedpackConf()):this.$message.error(a.msg)):this.$message.error(e.msg)):this.$message.error(t.msg)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sign-container"},[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("每天扫码奖励设置（每天首扫前3次奖励）")])]),t._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"奖励设置："}}),t._v(" "),t._l(t.list,function(e,s){return a("el-form-item",{key:s,attrs:{label:"规格："}},[t._v("\n         "+t._s(e.snName)+" 奖励\n          "),a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:e.points,callback:function(a){t.$set(e,"points",a)},expression:"item.points"}}),t._v("\n          荷石币\n")],1)})],2)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("红包：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择红包:"),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:""},on:{click:function(e){t.getList(3)}}},[t._v("选择")])],1),t._v(" "),a("el-form",t._l(t.hb,function(e,s){return a("el-form-item",{key:s,attrs:{label:"名称："}},[t._v("\n          面额 "),a("el-input-number",{attrs:{disabled:!!e.id,precision:2,min:0,"controls-position":"right"},model:{value:e.awardPrice,callback:function(a){t.$set(e,"awardPrice",a)},expression:"item.awardPrice"}}),t._v("元\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          投放数量 "),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n            剩余"+t._s(e.totalNum-e.outNum)+"个\n            ")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          总金额:"+t._s(parseFloat((e.awardPrice*e.totalNum).toPrecision(12)))+"元\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          中奖概率 "),a("el-input-number",{attrs:{precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.prizePert,callback:function(a){t.$set(e,"prizePert",a)},expression:"item.prizePert"}}),t._v("\n          %\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.deleteAward(e,s)}}},[t._v("删除")])],1)}))],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("连续扫码奖励设置（不区分规格）")])]),t._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"连续扫码奖励："}}),t._v(" "),a("el-form-item",{attrs:{label:"连续扫码第5天："}},[t._v("\n          额外奖励\n          "),a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:t.form.contDay5,callback:function(e){t.$set(t.form,"contDay5",e)},expression:"form.contDay5"}}),t._v("\n          荷石币\n        ")],1),t._v(" "),a("el-form-item",{attrs:{label:"连续扫码第6天："}},[t._v("\n          额外奖励\n          "),a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:t.form.contDay6,callback:function(e){t.$set(t.form,"contDay6",e)},expression:"form.contDay6"}}),t._v("\n          荷石币\n        ")],1),t._v(" "),a("el-form-item",{attrs:{label:"连续扫码第7天："}},[t._v("\n          额外奖励\n          "),a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:t.form.contDay7,callback:function(e){t.$set(t.form,"contDay7",e)},expression:"form.contDay7"}}),t._v("\n          荷石币\n        ")],1)],1)],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.awdList,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("PrJ7")},"data-v-ca71b354",null);e.default=r.exports},"Wgu+":function(t,e){},WhI0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"LetterCubeMgr",data:()=>({uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},id:null,isStart:!1,newAct:!1,config:{stime:"",etime:"",scanCont:""},canRunLottery:!0,openStatus:0,awardConf:[{awardName:"",marketMoney:null,awardPic:"",awardType:null,scoreValue:null,redpackValue:null},{awardName:"",marketMoney:null,awardPic:"",awardType:null,scoreValue:null,redpackValue:null},{awardName:"",marketMoney:null,awardPic:"",awardType:null,scoreValue:null,redpackValue:null},{awardName:"",marketMoney:null,awardPic:"",awardType:null,scoreValue:null,redpackValue:null},{awardName:"",marketMoney:null,awardPic:"",awardType:null,scoreValue:null,redpackValue:null},{awardName:"",marketMoney:null,awardPic:"",awardType:null,scoreValue:null,redpackValue:null}],title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,brandList:[],confRules:{awardType:[{required:!0,message:"请选择奖品类型",trigger:"change"}],awardName:[{required:!0,message:"请选择物料",trigger:"change"}],awardPic:[{required:!0,message:"请上传奖品图片",trigger:"change"}],scoreValue:[{required:!0,message:"请输入面额",trigger:"blur"}],redpackValue:[{required:!0,message:"请输入面额",trigger:"blur"}]},awardType:[{value:1,label:"实物"}],awardNo:"",startNumArr:[1,2,4,11,51,101],endNumArr:[1,3,10,50,100,500]}),created(){this.getDetail()},mounted(){},methods:{addItem(){this.awardConf.push({awardName:"",marketMoney:null,awardPic:"",awardType:null,scoreValue:null,redpackValue:null})},delItem(t){this.awardConf.splice(t,1)},getBrandList(){this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:["BRAND-7D41JAAAAA"],pageSize:"-1"},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.brandList=t.data.list.map(t=>({sn:t.sn,productName:t.allName}))})},getDetail(){this.$request.post("/hbact/jhPuzzle/saas/prizeConf/list",{},!0,t=>{"200"!=t.code?"500"==t.code?this.newAct=!0:this.$message.error(t.msg):t.data.length>0&&(this.awardConf=[],t.data.forEach(t=>{this.awardConf.push({awardName:t.awdName,awardPic:t.awdPicture,awardType:t.awdType})}))}),this.$request.post("/hbact/jhPuzzle/saas/prizeConf/openStatus",{},!0,t=>{"200"==t.code?(this.openStatus=t.data.status,t.data.status>0&&(this.isStart=!0)):this.$message.error(t.msg)})},handleClickRunLottery(){this.$request.post("/hbact/jhPuzzle/saas/prizeConf/openAward",{},!0,t=>{"200"==t.code?(this.$message.success("开奖成功！"),this.getDetail()):this.$message.error(t.msg)})},handleClickRefresh(){this.$request.post("/hbact/jhPuzzle/saas/prizeConf/refreshRank",{},!0,t=>{"200"==t.code?this.$message.success("刷新成功！"):this.$message.error(t.msg)})},confirmSubmit(){let t=!0;if(this.$refs.awardConf.forEach(e=>{e.validate(e=>{e||(t=!1)})}),!t)return;let e=this.awardConf.map((t,e)=>({confLevel:e+1,startNum:this.startNumArr[e],endNum:this.endNumArr[e],awdType:t.awardType,awdName:t.awardName,awdPicture:t.awardPic}));console.log(e),this.$request.post("/hbact/jhPuzzle/saas/prizeConf/save",e,!0,t=>{"200"==t.code?(this.$message({type:"success",message:"操作成功!"}),this.getDetail()):this.$message.error(t.msg)})},selectPrize(t,e,a){console.log(a),this.awardConf[a].awardName=t.name,this.awardConf[a].awardPrice=t.marketMoney,this.awardConf[a].marketMoney=t.marketMoney,this.awardConf[a].awardPic=t.pic,this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},handleSizeChange(t){this.params.pageSize=t,this.getList()},handleCurrentChange(t){this.params.pageNo=t,this.getList()},uploadImgUrlSuccess(t,e){if("200000"===t.ret)return this.awardConf[e].awardPic=t.data.accessUrl;this.$message.error(t.message)},handleSelectChange(t){console.log(t),t.awardName="",t.awardPic=""},getList(t,e){"1"==t?(this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==t&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),void 0!=e&&-1!=e&&(this.awardNo=e),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QA-container"},[a("div",{staticStyle:{"margin-bottom":"30px",color:"#0B1019"}},[a("el-button",{attrs:{type:"primary",disabled:0!=t.openStatus},on:{click:t.handleClickRefresh}},[t._v("刷新排行缓存")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:0!=t.openStatus},on:{click:t.handleClickRunLottery}},[t._v("开奖")]),t._v(" "),0==t.openStatus?a("span",[t._v("（未开奖）")]):t._e(),t._v(" "),1==t.openStatus?a("span",[t._v("（开奖中）")]):t._e(),t._v(" "),2==t.openStatus?a("span",[t._v("（开奖成功）")]):t._e(),t._v(" "),3==t.openStatus?a("span",[t._v("（开奖失败）")]):t._e()],1),t._v(" "),a("div",[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("奖品设置：")])]),t._v(" "),t._l(t.awardConf,function(e,s){return[a("div",{staticStyle:{height:"30px","font-size":"18px","line-height":"30px",margin:"20px",color:"#409EFF"}},[t._v("\n            中奖人数：闯关正确次数排名前\n            "),0==s?a("span",{staticStyle:{color:"red"}},[t._v(t._s("1"))]):t._e(),t._v(" "),1==s?a("span",{staticStyle:{color:"red"}},[t._v(t._s("2-3"))]):t._e(),t._v(" "),2==s?a("span",{staticStyle:{color:"red"}},[t._v(t._s("4-10"))]):t._e(),t._v(" "),3==s?a("span",{staticStyle:{color:"red"}},[t._v(t._s("11-50"))]):t._e(),t._v(" "),4==s?a("span",{staticStyle:{color:"red"}},[t._v(t._s("51-100"))]):t._e(),t._v(" "),5==s?a("span",{staticStyle:{color:"red"}},[t._v(t._s("101-500"))]):t._e(),t._v("\n            名\n          ")]),t._v(" "),a("el-form",{ref:"awardConf",refInFor:!0,attrs:{model:e,"label-width":"150px",rules:t.confRules,disabled:t.isStart}},[a("el-form-item",{attrs:{label:"奖品类型：",prop:"awardType"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:!!e.id,placeholder:"请选择"},on:{change:function(a){t.handleSelectChange(e)}},model:{value:e.awardType,callback:function(a){t.$set(e,"awardType",a)},expression:"ai.awardType"}},t._l(t.awardType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.awardType&&!e.id,expression:"ai.awardType&&!ai.id"}],attrs:{label:"选择"+("1"==e.awardType?"实物":"3"==e.awardType?"红包":"积分")+"："}},[a("el-button",{attrs:{size:""},on:{click:function(a){t.getList(e.awardType,s)}}},[t._v("选择")])],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称：",prop:"awardName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.awardName,callback:function(a){t.$set(e,"awardName",a)},expression:"ai.awardName"}})],1),t._v(" "),3==e.awardType?a("el-form-item",{attrs:{label:"红包：",prop:"redpackValue"}},[a("el-input-number",{attrs:{step:.01,precision:2,min:0,"controls-position":"right"},model:{value:e.redpackValue,callback:function(a){t.$set(e,"redpackValue",a)},expression:"ai.redpackValue"}}),t._v(" "),a("span",[t._v("元")])],1):t._e(),t._v(" "),6==e.awardType?a("el-form-item",{attrs:{label:"积分：",prop:"scoreValue"}},[a("el-input-number",{attrs:{step:1,precision:0,min:0,"controls-position":"right"},model:{value:e.scoreValue,callback:function(a){t.$set(e,"scoreValue",a)},expression:"ai.scoreValue"}}),t._v(" "),a("span",[t._v("积分")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"奖品图片：",prop:"awardPic"}},[a("el-input",{staticStyle:{display:"none"},model:{value:e.awardPic,callback:function(a){t.$set(e,"awardPic",a)},expression:"ai.awardPic"}}),t._v(" "),e.awardPic?a("img",{attrs:{height:"100",src:e.awardPic,alt:""}}):t._e(),t._v(" "),a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.uploadImgUrlSuccess(e,s)},"show-file-list":!1}},[a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"small",type:"primary"}},[t._v("上传图片")])],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}})],1)]}),t._v(" "),a("div",{staticStyle:{"margin-bottom":"50px"}})],2)],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[t.isStart?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v("保存")])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e},close:t.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title,t.awardNo)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("meT9")},"data-v-80897c20",null);e.default=r.exports},Wm6k:function(t,e){},X5hN:function(t,e){},XIUx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["orderCode"],name:"ZjOrderPageDetail",data:()=>({allProvinceData:[],allCityData:[],allDistrictData:[],selectallPro:"",selectallCity:"",selectallDistrict:"",formDetail:{orderId:"",create_time:"",category:"",awardName:"",score:"",username:"",mobile:"",province:"",city:"",district:"",address:"",status:0,ctime:"",orderStatus:"",orderWLoad:"",waybill:"",finish_time:"",orderFLoad:""}}),created(){this.getObjectPageDetail(this.orderCode),this.init()},watch:{selectallPro(t,e){t&&t!=e&&(this.formDetail.province=t,this.allMoreRightRegionList(t,2))},selectallCity(t,e){t&&t!=e&&(this.formDetail.city=t,this.allMoreRightRegionList(t,3))},selectallDistrict(t,e){t&&t!=e&&(this.formDetail.district=t)}},methods:{init(){this.allRightRegionList()},allRightRegionList(){this.$request.post("/api/wiseqr/dim/regionByPCode",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allProvinceData=t.data)})},allMoreRightRegionList(t,e){this.$request.post("/api/wiseqr/dim/regionByPCode",{parentCode:t},!0,t=>{"200000"===t.ret&&(2==e&&(this.allCityData=t.data),3==e&&(this.allDistrictData=t.data))})},submitFormSave(){let t={userName:this.formDetail.username,mobile:this.formDetail.mobile,province:this.formDetail.province,city:this.formDetail.city,district:this.formDetail.district,adddress:this.formDetail.address,orderId:this.formDetail.orderId};this.$request.post("/sc/saotx/mall/order/modifyReceiptInfo",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnObjectPage()):this.$message({message:t.message,type:"warning"})},t=>{})},returnObjectPage(){this.$router.push({path:"/Orders/mall/zj"})},getObjectPageDetail(t){this.$request.post("/sc/saotx/mall/order/selfOrderDetail",{orderId:t},!0,t=>{"200000"==t.ret&&(console.log(t.data),this.formDetail.orderId=t.data.orderInfo.orderid,this.formDetail.create_time=this.formatDateTime(t.data.orderInfo.create_time),this.formDetail.category=t.data.orderInfo.category,this.formDetail.awardName=t.data.orderInfo.awardName,this.formDetail.score=t.data.orderInfo.score,this.formDetail.status=t.data.orderInfo.status,this.formDetail.username=t.data.ReceiptInfo.username,this.formDetail.mobile=t.data.ReceiptInfo.mobile,this.formDetail.province=t.data.ReceiptInfo.province,this.selectallPro=t.data.ReceiptInfo.province+"",this.formDetail.city=t.data.ReceiptInfo.city,this.selectallCity=t.data.ReceiptInfo.city+"",this.formDetail.district=t.data.ReceiptInfo.district,this.selectallDistrict=t.data.ReceiptInfo.district+"",this.formDetail.address=t.data.ReceiptInfo.address,""!=t.data.orderTrackingInfo.ctime&&(this.formDetail.ctime=this.formatDateTime(t.data.orderTrackingInfo.ctime)),this.formDetail.orderStatus=t.data.orderTrackingInfo.orderStatus,this.formDetail.orderWLoad=t.data.orderTrackingInfo.orderWLoad,this.formDetail.waybill=t.data.orderTrackingInfo.waybill,this.formDetail.finish_time=this.formatDateTime(t.data.orderTrackingInfo.finish_time),this.formDetail.orderFLoad=t.data.orderTrackingInfo.orderFLoad)})},formatDateTime(t){if(null!=t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var i=e.getDate();i=i<10?"0"+i:i;var r=e.getHours();r=r<10?"0"+r:r;var l=e.getMinutes(),o=e.getSeconds();return a+"-"+s+"-"+i+" "+r+":"+(l=l<10?"0"+l:l)+":"+(o=o<10?"0"+o:o)}}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/自建订单明细/订单明细查询")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("div",[a("h1",[t._v("订单信息")])]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formDetail}},[a("el-row",[a("el-form-item",{attrs:{size:"small",label:"订单号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderId,callback:function(e){t.$set(t.formDetail,"orderId",e)},expression:"formDetail.orderId"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.create_time,callback:function(e){t.$set(t.formDetail,"create_time",e)},expression:"formDetail.create_time"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"商品名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.awardName,callback:function(e){t.$set(t.formDetail,"awardName",e)},expression:"formDetail.awardName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"分类:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.category,callback:function(e){t.$set(t.formDetail,"category",e)},expression:"formDetail.category"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"兑换值:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.score,callback:function(e){t.$set(t.formDetail,"score",e)},expression:"formDetail.score"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("收货人信息")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"联系人姓名:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:0!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.username,callback:function(e){t.$set(t.formDetail,"username",e)},expression:"formDetail.username"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"联系人电话:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:0!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.mobile,callback:function(e){t.$set(t.formDetail,"mobile",e)},expression:"formDetail.mobile"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"收货地址:省:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:0!=t.formDetail.status},model:{value:t.selectallPro,callback:function(e){t.selectallPro=e},expression:"selectallPro"}},t._l(t.allProvinceData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"市:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:0!=t.formDetail.status},model:{value:t.selectallCity,callback:function(e){t.selectallCity=e},expression:"selectallCity"}},t._l(t.allCityData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"区:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:0!=t.formDetail.status},model:{value:t.selectallDistrict,callback:function(e){t.selectallDistrict=e},expression:"selectallDistrict"}},t._l(t.allDistrictData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"详细地址:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:0!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.address,callback:function(e){t.$set(t.formDetail,"address",e)},expression:"formDetail.address"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("订单跟踪")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.create_time,callback:function(e){t.$set(t.formDetail,"create_time",e)},expression:"formDetail.create_time"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderStatus,callback:function(e){t.$set(t.formDetail,"orderStatus",e)},expression:"formDetail.orderStatus"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"发货时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.ctime,callback:function(e){t.$set(t.formDetail,"ctime",e)},expression:"formDetail.ctime"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderWLoad,callback:function(e){t.$set(t.formDetail,"orderWLoad",e)},expression:"formDetail.orderWLoad"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"物流号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.waybill,callback:function(e){t.$set(t.formDetail,"waybill",e)},expression:"formDetail.waybill"}})],1)],1),t._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",disabled:0!=t.formDetail.status},on:{click:t.submitFormSave}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.returnObjectPage}},[t._v("返回列表")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("0BVG")},"data-v-7d4aa692",null);e.default=r.exports},Y2aJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"Application",data:()=>({brandList:[],brandSonList:[],selectBrand:[],specialBrandList:[],selectSonBrand:[],specialBrandSonList:[],brandList2:[],brandSonList2:[],selectBrand2:[],specialBrandList2:[],selectSonBrand2:[],specialBrandSonList2:[],productSn2:"",factoryList:[],search:{pageNo:1,pageSize:10,productSn:"",factoryCode:"",requestTime:"",confirmTime:""},pagination:{totalNum:0},tableList:[],form:[],dialogTableVisible:!1,logData:[],dialogVisible:!1,dialogFormVisible:!1,formRules:{codeSize:[{required:!0,message:"请输入码源数量",trigger:"blur"}],factoryCode:[{required:!0,message:"请选择印刷厂",trigger:"change"}]},activeList:[],totalNum:0}),created(){this.list(),this.getBrandList(),this.getFactoryList()},methods:{exportData(){var t=new XMLHttpRequest,e=JSON.stringify(this.search);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/codesrc/saas/cgRequest/reqListExport",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)},getFactoryList(){this.$request.get("/codesrc/saas/factory/list",{},t=>{"200"!==t.code?this.$message.error(t.msg):this.factoryList=t.data})},getBrandList(){this.$request.post("/api/wiseqr/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandList=t.data.list,this.restrictBrand(),this.brandList2=t.data.list,void this.restrictBrand2();this.$message.error(t.message)})},getBrandSonList(){this.restrictBrand(),this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.selectBrand,pageSize:"-1",status:"1"},!0,t=>{if("200000"===t.ret)return this.brandSonList=t.data.list,void this.restrictSonBrand();this.$message.error(t.message)})},getBrandSonList2(){this.restrictBrand2(),this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.selectBrand2,pageSize:"-1",status:"1"},!0,t=>{if("200000"===t.ret)return this.brandSonList2=t.data.list,void this.restrictSonBrand2();this.$message.error(t.message)})},restrictSonBrand(){this.specialBrandSonList=JSON.parse(JSON.stringify(this.brandSonList))},restrictSonBrand2(t){this.specialBrandSonList2=JSON.parse(JSON.stringify(this.brandSonList2)),console.log(t)},restrictBrand(){this.search.productSn="",this.specialBrandList=JSON.parse(JSON.stringify(this.brandList)),this.specialBrandList.forEach(t=>{t.disabled=!0,this.selectBrand.forEach(e=>{t.brandCode==e&&(t.disabled=!1)})})},restrictBrand2(){this.productSn2="",this.specialBrandList2=JSON.parse(JSON.stringify(this.brandList2)),this.specialBrandList2.forEach(t=>{t.disabled=!0,this.selectBrand2.forEach(e=>{t.brandCode==e&&(t.disabled=!1)})})},currentChange(t){this.list(event,t)},sizeChange(t){this.list(event,null,t)},initPagination(t){t&&(this.pagination.totalNum=t.totalNum)},reset(){this.selectBrand=[],this.search.confirmTime="",this.search.requestTime="",this.search.factoryCode="",this.search.productSn="",this.search.pageNo=1,this.search.pageSize=10,this.list()},list(t,e,a){let s=1;e&&(s=e),this.search.pageNo=s;let i=10;a&&(i=a),this.search.pageSize=i,this.$request.post("/codesrc/saas/cgRequest/reqList",this.search,!0,t=>{"200"==t.code&&(this.tableList=t.data||[],this.initPagination(t.pageInfo||{})),this.$message.error(t.msg)})},showApplication(){this.dialogFormVisible=!0},addApplication(){if(!this.form.length)return void this.$message({message:"成码申请不能为空！",type:"warning"});let t=!0;if(this.$refs.form.forEach(e=>{e.validate(e=>{e||(t=!1)})}),t){let t=this.form.map(t=>({productSn:t.productSn,factoryCode:t.factoryCode,codeSize:t.codeSize}));this.$request.post("/codesrc/saas/cgRequest/reqAdd",t,!0,t=>{"200"==t.code?(this.$message({type:"success",message:"操作成功!"}),this.cancelApplication(),this.reset()):this.$message({type:"error",message:t.msg})})}},cancelApplication(){if(!this.form.length)return this.dialogFormVisible=!1,this.selectBrand2=[],this.specialBrandSonList2=[],void(this.productSn2="");this.$refs.form.forEach(t=>{t.resetFields()}),this.dialogFormVisible=!1,this.form=[],this.selectBrand2=[],this.specialBrandSonList2=[],this.productSn2=""},modifyData(t){this.$request.get("/codesrc/saas/cgBackBatchInfo/list",{requestId:t},t=>{"200"==t.code?(this.activeList=t.data.activeList,this.totalNum=t.data.totalNum,this.dialogVisible=!0):this.$message.error(t.msg)})},oplog(t){this.$request.get("/codesrc/saas/cgRequestLog/list",{requestId:t},t=>{"200"==t.code?(this.logData=t.data,this.dialogTableVisible=!0):this.$message.error(t.msg)})},comformData(t){this.$confirm("请核对当前成码申请没有问题？码源确认后，请邮件告知数据人员成码已完成及需入库产品规格明细，由数据人员对码源手工入库?","码源确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/codesrc/saas/cgRequest/opt/confirm",{requestId:t},!1,t=>{"200"==t.code?(this.$message({type:"success",message:"已申请!"}),this.list(event,this.search.pageNo,this.search.pageSize)):this.$message.error(t.msg)})}).catch(()=>{this.$message({type:"info",message:"已取消"})})},deleteCode(t){this.$confirm("请核对当前成码申请没有问题？码源作废后，可重新提交成码申请, 是否继续?","源码作废",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/codesrc/saas/cgRequest/opt/deprecate",{requestId:t},!1,t=>{"200"==t.code?(this.$message({type:"success",message:"已作废!"}),this.list(event,this.search.pageNo,this.search.pageSize)):this.$message.error(t.msg)})}).catch(()=>{this.$message({type:"info",message:"已取消"})})},addItem(t){if(this.form.findIndex(e=>e.productSn==t.sn)>-1)return void this.$message({type:"error",message:"已添加此规格!"});let e={productSn:t.sn,codeSize:"",name:t.allName,factoryCode:""};this.form.push(e)},deleteItem(t){console.log(t),this.form.splice(t,1)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.showApplication}},[t._v("新增成码申请")])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{attrs:{inline:!0,model:t.search}},[a("el-form-item",{attrs:{label:"品牌名称："}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getBrandSonList},model:{value:t.selectBrand,callback:function(e){t.selectBrand=e},expression:"selectBrand"}},t._l(t.specialBrandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.restrictSonBrand},model:{value:t.search.productSn,callback:function(e){t.$set(t.search,"productSn",e)},expression:"search.productSn"}},t._l(t.specialBrandSonList,function(t){return a("el-option",{key:t.id,attrs:{label:t.allName,value:t.sn}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌SN："}},[a("el-input",{attrs:{size:"small",readonly:""},model:{value:t.search.productSn,callback:function(e){t.$set(t.search,"productSn",e)},expression:"search.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"印刷厂名称："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.search.factoryCode,callback:function(e){t.$set(t.search,"factoryCode",e)},expression:"search.factoryCode"}},t._l(t.factoryList,function(t,e){return a("el-option",{key:e,attrs:{label:t.factoryName,value:t.factoryCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"申请时间："}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:t.search.requestTime,callback:function(e){t.$set(t.search,"requestTime",e)},expression:"search.requestTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认时间："}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:t.search.confirmTime,callback:function(e){t.$set(t.search,"confirmTime",e)},expression:"search.confirmTime"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.list}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s((t.search.pageNo-1)*t.search.pageSize+e.$index+1)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"产品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productSn",label:"产品SN",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"codeSize",label:"源码数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"factoryName",label:"印刷厂名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"loadFileSql",label:"库文件",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"requestTime",label:"申请时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"requestStatus",label:"任务状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.requestStatus?a("span",[t._v("任务失败")]):t._e(),t._v(" "),1==e.row.requestStatus?a("span",[t._v("待生成")]):t._e(),t._v(" "),2==e.row.requestStatus?a("span",[t._v("处理中")]):t._e(),t._v(" "),3==e.row.requestStatus?a("span",[t._v("已生成")]):t._e(),t._v(" "),4==e.row.requestStatus?a("span",[t._v("已作废")]):t._e(),t._v(" "),5==e.row.requestStatus?a("span",[t._v("确认中")]):t._e(),t._v(" "),6==e.row.requestStatus?a("span",[t._v("已确认")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"statusTime",label:"确认时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"factoryFilePath",label:"存放目录",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.factoryFilePath?e.row.factoryFilePath:"")+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.requestStatus?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteCode(e.row.id)}}},[t._v(" 码源作废")]):t._e(),t._v(" "),3==e.row.requestStatus?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.comformData(e.row.id,0)}}},[t._v("确认无误")]):t._e(),t._v(" "),3==e.row.requestStatus?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteCode(e.row.id)}}},[t._v(" 码源作废")]):t._e(),t._v(" "),6==e.row.requestStatus?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.modifyData(e.row.id)}}},[t._v("激活明细")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.oplog(e.row.id)}}},[t._v("操作日志")])]}}])})],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":t.search.pageNo,"page-size":t.search.pageSize,total:t.pagination.totalNum},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"操作日志",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.logData}},[a("el-table-column",{attrs:{property:"optTime",align:"center",label:"操作时间"}}),t._v(" "),a("el-table-column",{attrs:{property:"optAccount",align:"center",label:"操作人"}}),t._v(" "),a("el-table-column",{attrs:{property:"optDesc",align:"center",label:"操作明细"}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"码源激活明细",visible:t.dialogVisible,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"jhmx content"},[a("div",{staticClass:"title"},[a("div",[t._v("激活总数量："+t._s(t.totalNum)+"个")])]),t._v(" "),a("ul",{staticClass:"content"},t._l(t.activeList,function(e,s){return a("li",{key:s},[a("span",[t._v("成码批次："+t._s(e.batch))]),t._v(" "),a("span",{staticStyle:{"margin-left":"30px"}},[t._v("子批次号"+t._s(s+1)+"："+t._s(e.subbatch))]),t._v(" "),a("span",{staticStyle:{"margin-left":"30px"}},[t._v("激活数量："+t._s(e.cnt)+"个")])])}))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"新增成码申请",visible:t.dialogFormVisible,width:"640px"},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.cancelApplication}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"品牌名称："}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getBrandSonList2},model:{value:t.selectBrand2,callback:function(e){t.selectBrand2=e},expression:"selectBrand2"}},t._l(t.specialBrandList2,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{attrs:{placeholder:"请选择","value-key":"sn"},on:{change:t.restrictSonBrand2},model:{value:t.productSn2,callback:function(e){t.productSn2=e},expression:"productSn2"}},t._l(t.specialBrandSonList2,function(t){return a("el-option",{key:t.id,attrs:{label:t.allName,value:t}})})),t._v(" "),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",size:"mini",disabled:!t.productSn2},on:{click:function(e){t.addItem(t.productSn2)}}},[t._v("添加")])],1)],1),t._v(" "),t._l(t.form,function(e,s){return a("el-card",{key:s,staticClass:"cmsq-card"},[a("div",{staticStyle:{"line-height":"40px","margin-bottom":"10px"}},[a("span",{staticStyle:{"margin-left":"80px"}}),t._v("\n          "+t._s(e.name)+"\n          "),a("span",{staticStyle:{"margin-left":"20px"}}),t._v("\n          产品SN："+t._s(e.productSn)+"\n          "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",size:"mini"},on:{click:function(e){t.deleteItem(s)}}},[t._v("删除")])],1),t._v(" "),a("el-form",{ref:"form",refInFor:!0,attrs:{model:e,rules:t.formRules}},[a("el-form-item",{attrs:{label:"码源数量：",prop:"codeSize","label-width":"200px"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{controls:!1,max:5e7,min:1},model:{value:e.codeSize,callback:function(a){t.$set(e,"codeSize",a)},expression:"f.codeSize"}}),t._v("个\n            "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("（"+t._s(parseFloat((e.codeSize/1e4).toPrecision(12)))+"万）")])],1),t._v(" "),a("el-form-item",{attrs:{label:"印刷厂名称：",prop:"factoryCode","label-width":"200px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.factoryCode,callback:function(a){t.$set(e,"factoryCode",a)},expression:"f.factoryCode"}},t._l(t.factoryList,function(t,e){return a("el-option",{key:e,attrs:{label:t.factoryName,value:t.factoryCode}})}))],1)],1)],1)}),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelApplication}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addApplication}},[t._v("提交申请")])],1)],2)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("GXw6")},"data-v-402e5565",null);e.default=r.exports},"YGr+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({loading:!0,info:{id:null,joinEtime:"",actCode:"",redpackMoney:0,lottoryStatus:0},addNum:0,userNum:0,openAwardTime:!1,rules:{actCode:[{required:!0,message:"请输入跑步活动ID",trigger:"blur"}],joinEtime:[{required:!0,message:"请输入结束时间",trigger:"blur"}]}}),created(){this.getInfo()},methods:{getInfo(){this.$request.post("/hbact/saas/fishAct/configInfo",{},!0,t=>{if(this.loading=!1,"200"==t.code)return console.log(t.data),t.data.nowConfig&&(this.info=t.data.nowConfig),this.openAwardTime=t.data.openAwardTime,void(this.userNum=t.data.userNum);this.$message.error(t.msg)})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;this.save()})},save(){this.loading=!0;let t={id:this.info.id,joinEtime:this.info.joinEtime,actCode:this.info.actCode,redpackMoney:this.info.redpackMoney};this.$request.post("/hbact/saas/fishAct/configUpdate",t,!0,t=>{if(this.loading=!1,"200"==t.code)return this.$message.success("保存成功！"),void this.getInfo();this.$message.error(t.msg)})},open(){this.$request.post("/hbact/saas/fishAct/awardOpen",{configId:this.info.id},!1,t=>{if("200"==t.code)return this.$message.success(t.msg),void this.getInfo();this.$message.error(t.msg),this.getInfo()})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-col",{staticClass:"mb20"},[a("el-button",{attrs:{type:"primary",disabled:!t.openAwardTime},on:{click:t.open}},[t._v("开奖")]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}}),t._v(" "),1==t.info.lottoryStatus?a("span",[t._v("活动进行中，不可开奖（在结束参与时间后，可操作开奖）")]):t._e(),t._v(" "),2==t.info.lottoryStatus?a("span",[t._v("开奖中")]):t._e(),t._v(" "),3==t.info.lottoryStatus?a("span",[t._v("已开奖")]):t._e(),t._v(" "),4==t.info.lottoryStatus?a("span",[t._v("开奖失败")]):t._e()],1),t._v(" "),a("el-col",{staticClass:"mb20"},[a("div",[t._v("当前已有"),a("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.userNum))]),t._v("人获得瓜分大奖资格")])]),t._v(" "),a("el-col",{staticClass:"mb20"},[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("活动设置：")])]),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.info,rules:t.rules,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"锦鲤活动ID：",prop:"actCode"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!!t.info.id},model:{value:t.info.actCode,callback:function(e){t.$set(t.info,"actCode",e)},expression:"info.actCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"锦鲤活动结束参与时间：",prop:"joinEtime"}},[a("el-date-picker",{attrs:{disabled:!!t.info.id,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择结束时间"},model:{value:t.info.joinEtime,callback:function(e){t.$set(t.info,"joinEtime",e)},expression:"info.joinEtime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"单个用户可瓜分获得金额：",prop:"redpackMoney"}},[a("el-input-number",{attrs:{disabled:t.info.lottoryStatus>1,step:.01,precision:2,min:0,"controls-position":"right"},model:{value:t.info.redpackMoney,callback:function(e){t.$set(t.info,"redpackMoney",e)},expression:"info.redpackMoney"}}),t._v(" 元\n          ")],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("xzOO")},"data-v-1376c30e",null);e.default=r.exports},YkGI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data(){return{defaultConf:{title:null,description:"",ratio:.4,img:this.getAllImage()},activeName:"home",addActParams:{conf:"",form:"act-101",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}},computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getImage(t,e){return"http://qoss.qrmkt.cn/new_platform/pc_front/"+t+"."+(e=e||this.suffix)},getNewImage:function(t,e){return"http://qoss.qrmkt.cn/new_platform/"+t+"."+(e=e||this.suffix)},getStyle(t,e,a,s){var i=t.toString().indexOf("%")>-1,r=e.toString().indexOf("%")>-1;return{style:{"max-width":i?t:Math.floor(.4*t)+"px","max-height":r?e:Math.floor(.4*e)+"px",transform:"translate("+Math.floor(.4*a)+"px,"+Math.floor(.4*s)+"px)"},"c-style":{"max-width":i?t:Math.floor(.5*t)+"px","max-height":r?e:Math.floor(.5*e)+"px",transform:"translate("+Math.floor(.5*a)+"px,"+Math.floor(.5*s)+"px)"}}},getAllImage(){var t={},e=[[195,162],[130,146],[123,124],[125,144],[114,112],[147,144]],a=[[70,632],[265,632],[460,632],[70,794],[265,794],[460,794],[70,956],[265,956],[460,956]];t.kists=[];for(var s=1;s<=a.length;s++){var i=e[0][0],r=e[0][1],l=a[s-1][0],o=a[s-1][1],n=0;1==s||2==s||3==s||7==s?n=s:6==s?n=4:9==s?n=5:8==s?n=6:4==s?n=8:5==s&&(n=9);5!=s?(t["item0"+s]={url:this.getNewImage("item_bg","png"),width:i,height:r,left:l,top:o,pos:n,style:this.getStyle(i,r,l,o).style,"c-style":this.getStyle(i,r,l,o)["c-style"]},t.kists.push(t["item0"+s])):(t["item0"+s]={url:this.getNewImage("jgg_ljcj","png"),width:i,height:r,left:l,top:o,pos:n,style:this.getStyle(i,r,l,o).style,"c-style":this.getStyle(i,r,l,o)["c-style"]},t.kists.push(t["item0"+s]))}return t.translateStyle={url:this.getNewImage("translateStyle","png"),width:"100%",height:"100%",left:0,top:0,style:this.getStyle("100%","100%",0,0)},t.bg={url:this.getNewImage("jiugongge-bg","png"),width:"100%",height:"100%",left:0,top:0,style:this.getStyle("100%","100%",0,0)},t.title={url:this.getNewImage("jgg-banner","png"),width:690,height:360,left:63,top:130,style:this.getStyle(690,360,63,130).style,"c-style":this.getStyle(690,360,63,130)["c-style"]},t.subTitle={url:this.getImage("JGG_title_text","png"),width:680,height:100,left:80,top:500,style:this.getStyle(550,100,80,500).style,"c-style":this.getStyle(550,100,80,500)["c-style"]},t.tips={url:this.getImage("JGG_HDJN","png"),width:120,height:120,left:638,top:38,style:this.getStyle(120,120,638,38).style,"c-style":this.getStyle(120,120,638,38)["c-style"]},t.yxContentBg={url:this.getImage("content-bg","png"),width:655,height:552,left:35,top:600,style:this.getStyle(655,552,35,600).style,"c-style":this.getStyle(655,552,35,600)["c-style"]},t.award={url:this.getImage("jiugongge_award_btn","png")},t.award_bg={url:this.getImage("jiugongge_award_bg","png")},t.noAward={url:this.getNewImage("no-award-alert","png")},t.zxNoAwardBtn={url:this.getNewImage("no-award-btn","png")},console.log(t),t},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.defaultConf=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.defaultConf.img.bg.url=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.title.url=t.data.accessUrl;this.$message.error(t.message)},upTransformImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.translateStyle.url=t.data.accessUrl;this.$message.error(t.message)},upSubTitleImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.subTitle.url=t.data.accessUrl;this.$message.error(t.message)},upTipsImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.tips.url=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upBGridImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.yxContentBg.url=t.data.accessUrl;this.$message.error(t.message)},upGameImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img["item0"+[this.gameIndex+1]].url=t.data.accessUrl,this.defaultConf.img.kists[this.gameIndex].url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.award.url=t.data.accessUrl;this.$message.error(t.message)},upYesWinningImgBg(t){if("200000"===t.ret)return this.defaultConf.img.award_bg.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImg(t){if("200000"===t.ret)return this.defaultConf.img.noAward.url=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgBtn(t){if("200000"===t.ret)return this.defaultConf.img.zxNoAwardBtn.url=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.defaultConf.title=this.addActParams.name,this.defaultConf.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.defaultConf),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content"},[a("img",{staticClass:"bg",style:t.defaultConf.img.bg.style,attrs:{src:t.defaultConf.img.bg.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}}),t._v(" "),a("img",{staticClass:"top",style:t.defaultConf.img.title.style,attrs:{src:t.defaultConf.img.title.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}}),t._v(" "),a("img",{staticClass:"subTitle",style:t.defaultConf.img.subTitle.style,attrs:{src:t.defaultConf.img.subTitle.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}}),t._v(" "),a("img",{staticClass:"kits",style:t.defaultConf.img.tips.style,attrs:{src:t.defaultConf.img.tips.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=4}}}),t._v(" "),a("img",{staticClass:"game-con",style:t.defaultConf.img.yxContentBg.style,attrs:{src:t.defaultConf.img.yxContentBg.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=5}}}),t._v(" "),t._l(t.defaultConf.img.kists,function(e){return a("img",{key:e.key,staticClass:"game-con",style:e.style,attrs:{src:e.url,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=6}}})})],2),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.title.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-subTitle-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.subTitle.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upSubTitleImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("活动锦囊：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.tips.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipsImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),5==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("操作区背景图：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.yxContentBg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBGridImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),6==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("方格反面:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.translateStyle.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTransformImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),t._l(t.defaultConf.img.kists,function(e,s){return a("div",{key:e.key},[a("p",{staticClass:"img-title"},[t._v(t._s(4==s?"抽奖按钮:":"方格"+(s+1)+":"))]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:e.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upGameImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.getGameIndex(s)}}},[t._v("更换图片")])],1)],1)])})],2):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 690*360px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 680*100px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 120*120px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),5==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 655x552px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),6==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 196*162*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con award-con"},[a("img",{staticClass:"award-alert",attrs:{src:t.defaultConf.img.award_bg.url,alt:""}}),t._v(" "),a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:"http://qoss.qrmkt.cn/new_platform/award_img.png",alt:""}}),t._v(" "),a("div",{staticClass:"award-text"},[a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.award.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con alert-con"},[a("img",{attrs:{src:t.defaultConf.img.award_bg.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]),t._v(" "),a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.award.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upYesWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.defaultConf.img.bg.url}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con award-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"award-alert",attrs:{src:t.defaultConf.img.noAward.url,alt:""}}),t._v(" "),a("div",{staticClass:"award-no-text"},[a("h3",[t._v("很遗憾，未中奖")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖图片：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.noAward.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImg,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("未中奖按钮：")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.defaultConf.img.zxNoAwardBtn.url,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgBtn,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("MlEv")},"data-v-44be6606",null);e.default=r.exports},Z833:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["awae","prizeType","nWin","isRed","hide","astrict","saleZone","budgetTime"],data(){var t=(t,e,a)=>{};return{uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},prizeList:this.prizeType,rules:{n:[{required:!0,validator:t}],type:[{required:!0,validator:t}],name:[{required:!0,validator:t}],probability:[{required:!0,validator:t}],redNum:[{required:!0,validator:t}],pool:[{required:!0,validator:t}],putNum:[{required:!0,validator:t}],intTotal:[{required:!0,validator:t}],redTotal:[{required:!0,validator:t}]},title:"选择物品",list:[],params:{metraFlag:"",materialType:"",pageNo:1,pageSize:10,status:1,saleZoneCode:null,budgetTime:null},listTotal:0,listVisible:!1,integralList:[],integralTotal:0,integralVisible:!1}},watch:{saleZone(t,e){console.log(t,e),this.saleZone=t,this.params.saleZoneCode=t},budgetTime(t,e){console.log(t,e),this.budgetTime=t,this.params.budgetTime=t}},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return parseFloat((this.awae.redMoney*this.awae.totalNum).toPrecision(12))},set:function(t){}}},created(){this.params.saleZoneCode=this.saleZone,this.params.budgetTime=this.budgetTime},methods:{uploadImgUrlSuccess(t,e){if("200000"===t.ret)return this.awae.awardPic=t.data.accessUrl;this.$message.error(t.message)},selectPrize(t){console.log(t),this.awae.awardPic=t.pic,this.awae.poolName=t.name,this.awae.prizeName=t.name,this.awae.poolId=t.id,this.saleZone&&(this.awae.budgetId=t.id,this.awae.poolId=t.material_pool_id),this.listVisible=!1},resetPrize(){this.awae.awardPic="",this.awae.prizeName="",this.awae.poolName="",this.awae.totalNum="",this.awae.probability="",this.awae.redMoney="",this.awae.redTotalMoney="",this.awae.integral="",this.awae.budgetId="",this.awae.integralBudgetId=""},getList(){"1"==this.awae.awardType?(this.params.materialType="1",this.params.metraFlag="object",this.title="选择实物"):"2"==this.awae.awardType?(this.params.metraFlag="virtual",this.params.materialType="2",this.title="选择虚拟"):"3"==this.awae.awardType?(this.params.metraFlag="redpack",this.params.materialType="3",this.title="选择红包"):"6"==this.awae.awardType&&(this.params.metraFlag="integral",this.params.materialType="6",this.title="选择积分"),console.log(this.params.saleZoneCode);let t="/api/materialBudget/materialList";this.params.saleZoneCode||(t="/api/wiseqr/metra/list"),this.$request.post(t,this.params,!0,t=>{if(t.code&&"200"==t.code||t.ret&&"200000"==t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message||t.msg)})},giveIntegral(){console.log(this.saleZone),this.saleZone?this.$request.post("/api/materialBudget/materialList",{metraFlag:"integral",materialType:"6",budgetTime:this.budgetTime,saleZoneCode:this.saleZone,pageNo:1,pageSize:10,status:1},!0,t=>{if("200"==t.code)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.msg)}):this.$request.post("/api/wiseqr/metra/list",{metraFlag:"integral",pageNo:1,pageSize:10,status:1},!0,t=>{if("200000"===t.ret)return this.list=[],this.integralList=t.data.list,this.integralTotal=t.data.page.count,void(this.integralVisible=!0);this.$message.error(t.message)})},selectIntegral(t){this.saleZone?(this.awae.integralBudgetId=t.id,this.awae.integralPool=t.material_pool_id):this.awae.integralPool=t.id,this.integralVisible=!1},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},resetScore(t){t?this.awae.giveScore=1:(this.awae.integralPool=null,this.awae.integral="",this.awae.giveScore=0)},resetWarn(t){t||(this.awae.hasWarn=null,this.awae.warnValue="")},resetPdMaxOut(t){t||(this.awae.pdMaxOut=0)},countRedTotal(t){const e=this.awae.redMoney,a=this.awae.totalNum;if(0!=e&&0!=a)return this.awae.redTotalMoney=e*a},addRepertory(){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:t})=>{if(0==t)return this.$message.error("数字不能为0");this.$request.post("/api/wiseqr/act/addNum",{id:this.awae.id,increment:t},!0,e=>{"200000"===e.ret?(this.$message.success("增库成功"),this.awae.totalNum+=Number(t)):this.$message.error(e.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pond"},[a("el-form",{ref:"form",attrs:{model:t.awae,"label-width":"100px",rules:t.rules}},[t.nWin?a("el-form-item",{attrs:{label:"N次必中:",prop:"n"}},[t._v("\n      用户第 "),a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.n,callback:function(e){t.$set(t.awae,"n",e)},expression:"awae.n"}}),t._v(" 个抽奖必中\n    ")],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"奖品类型:",prop:"type"}},[a("el-select",{attrs:{disabled:!!t.awae.id,placeholder:"请选择"},on:{change:t.resetPrize},model:{value:t.awae.awardType,callback:function(e){t.$set(t.awae,"awardType",e)},expression:"awae.awardType"}},t._l(t.prizeList,function(t){return a("el-option",{key:t.type,attrs:{label:t.name,value:t.type}})}))],1),t._v(" "),"1"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{staticStyle:{border:"1px dotted #ccc"},attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1)]:t._e(),t._v(" "),"2"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择物品:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1)]:t._e(),t._v(" "),"3"==t.awae.awardType?[a("el-form-item",{attrs:{label:"红包池:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"红包面额:",prop:"redNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:2,min:0,max:t.astrict?.3:1/0,step:.1,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.redMoney,callback:function(e){t.$set(t.awae,"redMoney",e)},expression:"awae.redMoney"}}),t._v(" 元\n        "),t.astrict?a("span",{staticClass:"ml20",staticStyle:{color:"#ccc","font-size":"12px"}},[t._v("开放试用平台，仅支持0.3元红包面额")]):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,min:0,"controls-position":"right"},on:{change:t.countRedTotal},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"红包金额:",prop:"redTotal"}},[a("el-input-number",{attrs:{disabled:"",min:0,"controls-position":"right"},model:{value:t.totalRed,callback:function(e){t.totalRed=e},expression:"totalRed"}}),t._v(" 元\n      ")],1)]:t._e(),t._v(" "),"6"==t.awae.awardType?[a("el-form-item",{attrs:{label:"选择积分:",prop:"pool"}},[t.awae.awardPic?t._e():a("el-button",{on:{click:t.getList}},[t._v("选择")]),t._v(" "),t.awae.awardPic?a("img",{attrs:{src:t.awae.awardPic},on:{click:function(e){!t.awae.id&&t.getList()}}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{disabled:!0,placeholder:"奖品名称"},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{precision:0,disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"积分面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:0,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n      ")],1)]:t._e(),t._v(" "),"9"==t.awae.awardType?[a("el-form-item",{attrs:{label:"奖品图片:",prop:"pool"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.awae.awardPic,callback:function(e){t.$set(t.awae,"awardPic",e)},expression:"awae.awardPic"}}),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":function(e){t.uploadImgUrlSuccess(e,"2")},"show-file-list":!1}},[t.awae.awardPic?a("img",{staticClass:"avatar",attrs:{src:t.awae.awardPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("span",[t._v("* 图片建议尺寸为380*280px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品名称:",prop:"name"}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"奖品名称",disabled:!!t.awae.id},model:{value:t.awae.prizeName,callback:function(e){t.$set(t.awae,"prizeName",e)},expression:"awae.prizeName"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量:",prop:"putNum"}},[a("el-input-number",{attrs:{precision:0,disabled:!!t.awae.id,min:0,"controls-position":"right"},model:{value:t.awae.totalNum,callback:function(e){t.$set(t.awae,"totalNum",e)},expression:"awae.totalNum"}}),t._v(" 个\n        "),t.awae.id?a("span",[t._v("\n          剩余"),a("el-input-number",{attrs:{disabled:!0},model:{value:t.residue,callback:function(e){t.residue=e},expression:"residue"}}),t._v("个\n          "),a("el-button",{on:{click:t.addRepertory}},[t._v("增库")])],1):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品面额:",prop:"intTotal"}},[a("el-input-number",{attrs:{disabled:!!t.awae.id,precision:0,min:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 分\n      ")],1)]:t._e(),t._v(" "),t.hide?t._e():a("el-form-item",{attrs:{label:"中奖概率:",prop:"probability"}},[a("el-input-number",{attrs:{min:0,max:100,"controls-position":"right"},model:{value:t.awae.probability,callback:function(e){t.$set(t.awae,"probability",e)},expression:"awae.probability"}}),t._v(" %\n    ")],1),t._v(" "),a("el-form-item",[a("el-checkbox",{on:{change:t.resetWarn},model:{value:t.awae.hasWarn,callback:function(e){t.$set(t.awae,"hasWarn",e)},expression:"awae.hasWarn"}},[t._v("阈值预警")]),t._v(" "),t.awae.hasWarn?a("span",[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.warnValue,callback:function(e){t.$set(t.awae,"warnValue",e)},expression:"awae.warnValue"}}),t._v(" 个\n      ")],1):t._e()],1),t._v(" "),"6"!=t.awae.awardType?a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.giveScore,"true-label":1,"false-label":0},on:{change:t.resetScore},model:{value:t.awae.giveScore,callback:function(e){t.$set(t.awae,"giveScore",e)},expression:"awae.giveScore"}},[t._v("同时送积分")]),t._v(" "),t.awae.giveScore?a("span",[t.awae.integralPool?a("el-button",{attrs:{size:"mini",type:"info"},on:{click:t.giveIntegral}},[t._v("已选择")]):a("el-button",{staticClass:"ml20 mr20",on:{click:t.giveIntegral}},[t._v("选择")]),t._v(" "),a("el-input-number",{attrs:{min:0,precision:0,"controls-position":"right"},model:{value:t.awae.integral,callback:function(e){t.$set(t.awae,"integral",e)},expression:"awae.integral"}}),t._v(" 积分\n      ")],1):t._e()],1):t._e(),t._v(" "),a("el-form-item",[a("el-checkbox",{attrs:{checked:1==t.awae.guideGzh,"true-label":1,"false-label":0},model:{value:t.awae.guideGzh,callback:function(e){t.$set(t.awae,"guideGzh",e)},expression:"awae.guideGzh"}},[t._v("中奖后引导关注公众号")]),t._v(" "),t.isRed?t._e():a("el-checkbox",{on:{change:t.resetPdMaxOut},model:{value:t.awae.hasPdMaxOut,callback:function(e){t.$set(t.awae,"hasPdMaxOut",e)},expression:"awae.hasPdMaxOut"}},[t._v("每天出奖总次数限制")]),t._v(" "),t.awae.hasPdMaxOut?a("span",[a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:t.awae.pdMaxOut,callback:function(e){t.$set(t.awae,"pdMaxOut",e)},expression:"awae.pdMaxOut"}}),t._v(" 次\n      ")],1):t._e()],1)],2),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"budget_value",label:"剩余库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.budget_value?a("span",[t._v("\n            "+t._s(e.row.budget_value-e.row.budget_used)+"\n          ")]):a("span",[t._v("\n            "+t._s(e.row.stock)+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"选择积分",visible:t.integralVisible,width:"800px"},on:{"update:visible":function(e){t.integralVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.integralList,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.budget_value?a("span",[t._v("\n            "+t._s(e.row.budget_value-e.row.budget_used)+"\n          ")]):a("span",[t._v("\n            "+t._s(e.row.stock)+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.awae.integralPool!==e.row.id?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("选择")]):a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){t.selectIntegral(e.row)}}},[t._v("已选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.integralTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r={components:{pondConf:a("VU/8")(s,i,!1,function(t){a("7v0M"),a("cmT3")},"data-v-22ca3574",null).exports},mixins:[{props:["id","actCode","form"],inject:["routerRefresh"],data(){return{stepActive:2,act:{id:null,actCode:"",dwnum:null,status:null},status:!1,statusDisabled:!1,actSTime:"",actETime:"",strategy:{areas:{provinceArr:[],cityArr:[],districtArr:[]},awardArr:[],brandArr:[],snArr:[],tfType:""},specialAreas:{provinceArr:[],cityArr:[],districtArr:[]},specialBrand:{brandArr:[],snArr:[]},normalConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],normalTfId:"",defaultAwae:{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null},firstScanConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],firstScanTfId:"",nWinConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,n:"",outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],nWinTfId:"",fixationPutConf:[{awardPic:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:"",integralPool:"",integralPoolName:"",integralPoolPic:"",isGiveScore:!1,outNum:"",pdMaxOut:0,poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:"",budgetId:null,integralBudgetId:null}],fixationPutTfId:"",normalTabsValue:"1",normalTabs:[{title:"常规奖项1",name:"1"}],firstScanTabsValue:"1",firstScanTabs:[{title:"常规奖项1",name:"1"}],nWinTabsValue:"1",nWinTabs:[{title:"常规奖项1",name:"1"}],fixationPutTabsValue:"1",fixationPutTabs:[{title:"常规奖项1",name:"1"}],tfId:"",tfTimeArr:[],tfDurationArr:[],prizeType:[{name:"实物礼品",type:1},{name:"虚拟礼品",type:2},{name:"红包",type:3},{name:"积分",type:6},{name:"自定义礼品",type:9}],normalIndex:1,firstScanIndex:1,nWinIndex:1,fixationPutIndex:1,selectBrand:[],selectSonBrand:[],selectProvList:[],oldSlectProvList:["1"],oldSlectProvList1:["1"],selectCityList:[],oldSelectCityList:["1"],oldSelectCityList1:["1"],selectAreaList:[],oldSelectAreaList:["1"],oldSelectAreaList1:["1"],brandList:[],brandSonList:[],specialBrandList:[],specialBrandSonList:[],saleZoneCode:null,saleZone:[],provList:[{code:"000000",name:"全部"}],cityList:[{code:"000000",name:"全部"}],areaList:[{code:"000000",name:"全部"}],specialProvList:[],specialCityList:[],specialAreaList:[],regionVisible:!1,brandVisible:!1,specialRuleConfFlag:!1,prizeLimitFlag:!1,firstScanFlag:!1,nWinFlag:!1,fixationPutFlag:!1,isPut:!1,isDisabled:!1,saleZoneDisabled:!1,pickerOptions:{disabledDate:t=>t.getTime()<new Date(this.actSTime).getTime()||t.getTime()>new Date(this.actETime).getTime()},astrictRedflg:!1,showSaleZone:-1==sessionStorage.getItem("account").indexOf("shankun")}},created(){this.getActDetail(),this.getBrandList(),this.getSaleZone()},computed:{},watch:{status:function(t){this.act.status=t?1:2},isDisabled:function(t){t?(this.selectProvList=["000000"],this.selectCityList=["000000"],this.selectAreaList=["000000"]):(this.selectProvList=[],this.selectCityList=[],this.selectAreaList=[])},fixationPutFlag:function(t){t?this.restrictArea():(this.selectProvList=[],this.selectCityList=[],this.selectAreaList=[])}},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/act/detail",{id:this.id},!0,t=>{if("200000"!==t.ret)return this.$message.error(t.message);"guest"===t.data.act.orgId&&(this.astrictRedflg=!0),1==t.data.act.status?this.statusDisabled=!0:this.statusDisabled=!1,2==t.data.act.status?this.saleZoneDisabled=!1:this.saleZoneDisabled=!0,this.status=1==t.data.act.status,this.prizeLimitFlag=!!t.data.act.dwnum,this.act.dwnum=t.data.act.dwnum,this.actSTime=t.data.act.stimeStr,this.actETime=t.data.act.etimeStr,this.saleZoneCode=t.data.act.saleZoneCode,this.getProvList(),console.log(t.data),0!=t.data.strategyArr.length&&t.data.strategyArr.forEach((t,e)=>{if("common"==t.tfType){if(0==t.awardArr.length)return;this.normalTfId=t.tf.id,t.awardArr.forEach((t,e)=>{if(0!=e&&this.normalTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.normalConf[0][e]=t[e];else this.normalConf.push(t)}),"000000"==t.areas.provinceArr[0]&&"000000"==t.areas.cityArr[0]?(this.isDisabled=!0,this.restrictProv(),this.restrictCity()):(this.selectProvList=t.areas.provinceArr,this.selectCityList=t.areas.cityArr,this.getCityList(this.selectProvList)),this.selectBrand=t.brandArr,this.getBrandSonList(),this.selectSonBrand=t.snArr}"sn_first"==t.tfType&&(this.firstScanTfId=t.tf.id,t.awardArr.forEach((t,e)=>{if(0!=e&&this.firstScanTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.firstScanConf[0][e]=t[e];else this.firstScanConf.push(t)}),this.specialRuleConfFlag=!0,this.firstScanFlag=!0,this.firstScanConf=t.awardArr),"n_mwin"==t.tfType&&(this.nWinTfId=t.tf.id,t.awardArr.forEach((t,e)=>{if(0!=e&&this.nWinTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.nWinConf[0][e]=t[e];else this.nWinConf.push(t)}),this.specialRuleConfFlag=!0,this.nWinFlag=!0,this.nWinConf=t.awardArr),"special"==t.tfType&&(console.log(t),this.fixationPutTfId=t.tf.id,t.awardArr.forEach((t,e)=>{if(0!=e&&this.fixationPutTabs.push({title:"常规奖项"+(e+1),name:""+(e+1)}),0==e)for(let e in t)this.fixationPutConf[0][e]=t[e];else this.fixationPutConf.push(t)}),this.specialRuleConfFlag=!0,this.fixationPutFlag=!0,this.fixationPutConf=t.awardArr,this.specialAreas=t.areas,console.log(this.specialAreas,t.areas),this.specialBrand.brandArr=t.brandArr,this.specialBrand.snArr=t.snArr,this.tfDurationArr.push(t.tf.sduration),this.tfDurationArr.push(t.tf.eduration),this.tfTimeArr.push(t.tf.stimeStr),this.tfTimeArr.push(t.tf.etimeStr))})}):this.$router.push("/market/actMgr")},getBrandList(){this.$request.post("/api/wiseqr/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandList=t.data.list,void this.restrictBrand();this.$message.error(t.message)})},getBrandSonList(){this.restrictBrand(),this.saleZoneCode?this.$request.post("/api/actSale/product/sn",{id:this.id,brandCode:this.selectBrand.join(",")},!1,t=>{if("200"===t.code)return this.brandSonList=t.data,void this.restrictSonBrand();this.$message.error(t.msg)}):this.$request.post("/api/wiseqr/prod/list",{status:"1",brandCodeArr:this.selectBrand,pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandSonList=t.data.list,void this.restrictSonBrand();this.$message.error(t.message)})},getProvList(){this.saleZoneCode?this.$request.post("/api/actSale/province/list",{id:this.id},!1,t=>{if("200"===t.code)return this.provList.push(...t.data),void this.restrictProv();this.$message.error(t.msg)}):this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:[]},!0,t=>{if("200000"===t.ret)return this.provList.push(...t.data),void this.restrictProv();this.$message.error(t.message)})},getCityList(t){if(1==this.provList.length&&!this.saleZoneCode)return void setTimeout(()=>{console.log(111),this.getCityList(t)},1e3);this.restrictProv();let e=[];for(let t of this.provList)e.push(t.code);const a=1===this.oldSlectProvList.length?[]:this.oldSlectProvList[1];if(t.includes("000000")&&(this.selectProvList=e,this.specialAreas.provinceArr=[],this.specialAreas.cityArr=[],this.restrictProv()),a.includes("000000")&&!t.includes("000000")&&(this.selectProvList=[],this.specialAreas.provinceArr=[],this.specialAreas.cityArr=[],this.restrictProv()),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectProvList=t,this.specialAreas.provinceArr=[],this.specialAreas.cityArr=[],this.restrictProv()}if(a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectProvList=["000000"].concat(t),this.specialAreas.provinceArr=[],this.specialAreas.cityArr=[],this.restrictProv()),this.oldSlectProvList[1]=this.selectProvList,0==this.selectProvList.length)return this.cityList=[],this.selectCityList=[],this.areaList=[],void(this.selectAreaList=[]);let s={parentArr:this.selectProvList};this.saleZoneCode&&(s.saleZoneCode=this.saleZoneCode),this.$request.post("/api/wiseqr/dim/regionByMultiParent",s,!0,t=>{if("200000"===t.ret)return this.cityList=[{code:"000000",name:"全部"}],this.cityList.push(...t.data),this.restrictProv(),void this.restrictCity();this.message.error(t.message)})},getAreaList(t){if(1==this.cityList.length)return void setTimeout(()=>{this.getAreaList(t)},1e3);this.restrictCity();let e=[];for(let t of this.cityList)e.push(t.code);const a=1===this.oldSelectCityList.length?[]:this.oldSelectCityList[1];if(t.includes("000000")&&(this.selectCityList=e,this.specialAreas.cityArr=[],this.restrictCity()),a.includes("000000")&&!t.includes("000000")&&(this.selectCityList=[],this.specialAreas.cityArr=[],this.restrictCity()),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectCityList=t,this.specialAreas.cityArr=[],this.restrictCity()}if(a.includes("000000")||t.includes("000000")||(t.length===e.length-1&&(this.selectCityList=["000000"].concat(t)),this.specialAreas.cityArr=[],this.restrictCity()),this.oldSelectCityList[1]=this.selectCityList,0==this.selectCityList.length)return this.areaList=[],void(this.selectAreaList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectCityList},!0,t=>{if("200000"===t.ret)return this.areaList=[{code:"000000",name:"全部"}],this.areaList.push(...t.data),void this.restrictCity();this.$message.error(t.message)})},selectAll(t){if(1==this.areaList.length)return void setTimeout(()=>{this.selectAll(t)},1e3);this.restrictArea();let e=[];for(let t of this.areaList)e.push(t.code);const a=1===this.oldSelectAreaList.length?[]:this.oldSelectAreaList[1];if(t.includes("000000")&&(this.selectAreaList=e),a.includes("000000")&&!t.includes("000000")&&(this.selectAreaList=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.selectAreaList=t}a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.selectAreaList=["000000"].concat(t)),this.oldSelectAreaList[1]=this.selectAreaList},save(){if(0==this.selectBrand.length||0==this.selectSonBrand.length)return this.$message.error("请选择品牌规格");if(0==this.selectProvList.length||0==this.selectCityList.length)return this.$message.error("请选择地区");this.isDisabled||(-1!=this.selectCityList.indexOf("000000")&&this.selectCityList.splice(this.selectCityList.indexOf("000000"),1),-1!=this.selectAreaList.indexOf("000000")&&this.selectAreaList.splice(this.selectAreaList.indexOf("000000"),1),-1!=this.selectProvList.indexOf("000000")&&this.selectProvList.splice(this.selectProvList.indexOf("000000"),1)),this.act.id=this.id,this.act.actCode=this.actCode;let t={act:{},strategyArr:[]};t.act=this.act,t.act.saleZoneCode=this.saleZoneCode,t.strategyArr.push(JSON.parse(JSON.stringify(this.strategy))),t.strategyArr[0].awardArr=this.normalConf,t.strategyArr[0].areas.cityArr=this.selectCityList,t.strategyArr[0].areas.districtArr=this.selectAreaList,t.strategyArr[0].areas.provinceArr=this.selectProvList,t.strategyArr[0].brandArr=this.selectBrand,t.strategyArr[0].snArr=this.selectSonBrand,t.strategyArr[0].tfType="common",t.strategyArr[0].tf={id:this.normalTfId};let e=0;this.firstScanFlag&&(t.strategyArr.push(JSON.parse(JSON.stringify(this.strategy))),e=t.strategyArr.length,t.strategyArr[e-1].awardArr=this.firstScanConf,t.strategyArr[e-1].confOpen=!0,t.strategyArr[e-1].tfType="sn_first",t.strategyArr[e-1].tf={id:this.firstScanTfId}),this.nWinFlag&&(t.strategyArr.push(JSON.parse(JSON.stringify(this.strategy))),e=t.strategyArr.length,t.strategyArr[e-1].awardArr=this.nWinConf,t.strategyArr[e-1].confOpen=!0,t.strategyArr[e-1].tfType="n_mwin",t.strategyArr[e-1].tf={id:this.nWinTfId}),this.fixationPutFlag&&(t.strategyArr.push(JSON.parse(JSON.stringify(this.strategy))),e=t.strategyArr.length,t.strategyArr[e-1].areas=this.specialAreas,"000000"==t.strategyArr[e-1].areas.provinceArr[0]&&t.strategyArr[e-1].areas.provinceArr.splice(0,1),"000000"==t.strategyArr[e-1].areas.cityArr[0]&&t.strategyArr[e-1].areas.cityArr.splice(0,1),t.strategyArr[e-1].awardArr=this.fixationPutConf,t.strategyArr[e-1].confOpen=!0,t.strategyArr[e-1].brandArr=this.specialBrand.brandArr,t.strategyArr[e-1].snArr=this.specialBrand.snArr,t.strategyArr[e-1].tf={sduration:this.tfDurationArr[0],eduration:this.tfDurationArr[1],stimeStr:this.tfTimeArr[0],etimeStr:this.tfTimeArr[1],id:this.fixationPutTfId},t.strategyArr[e-1].tfType="special"),this.$request.post("/api/wiseqr/act/somtf",t,!0,t=>{if("200000"===t.ret){if(this.$message.success("保存成功"),"act-111"==this.form)return this.$router.push("/market/actTpl/HPXSetConf?id="+this.id+"&actCode="+this.actCode+"&form="+this.form+"&saleZone="+(this.saleZoneCode||"")+"&budgetTime="+this.actSTime);this.$router.push("/market/actMgr"),this.routerRefresh()}else this.$message.error(t.message)})},backList(){this.$router.push("/market/actMgr"),this.routerRefresh()},normalTabsEdit(t,e){this.addOrRemove("normal",t,e)},firstScanTabsEdit(t,e){this.addOrRemove("firstScan",t,e)},nWinTabsEdit(t,e){this.addOrRemove("nWin",t,e)},fixationPutTabsEdit(t,e){this.addOrRemove("fixationPut",t,e)},addOrRemove(t,e,a){if("add"===a){if(15==this[t+"Conf"].length)return;let e=JSON.parse(JSON.stringify(this.defaultAwae));this[t+"Conf"].push(e);let a="常规奖项"+this[t+"Conf"].length;this[t+"Tabs"].push({title:a,name:this[t+"Conf"].length+""}),this[t+"TabsValue"]=this[t+"Conf"].length+""}if("remove"===a){if(1==this[t+"Conf"].length)return;this[t+"Tabs"];this[t+"Conf"].splice(e-1,1),this[t+"Tabs"]=[];for(var s=1;s<=this[t+"Conf"].length;s++)this[t+"Tabs"].push({title:"常规奖项"+s,name:s+""});this[t+"TabsValue"]="1"}},restrictProv(){this.specialProvList=JSON.parse(JSON.stringify(this.provList)),this.specialProvList.forEach(t=>{t.disabled=!0,this.selectProvList.forEach(e=>{t.code!=e&&"000000"!=t.code||(t.disabled=!1)})}),"000000"==this.specialProvList[0].code?this.specialProvList[0].name="全选":this.specialProvList.unshift({code:"000000",name:"全选"})},getCityListSpecial(t){let e=[];for(let t of this.specialProvList)t.disabled||e.push(t.code);const a=1===this.oldSlectProvList1.length?[]:this.oldSlectProvList1[1];if(t.includes("000000")&&(this.specialAreas.provinceArr=e),a.includes("000000")&&!t.includes("000000")&&(this.specialAreas.provinceArr=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.specialAreas.provinceArr=t}a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.specialAreas.provinceArr=["000000"].concat(t)),this.oldSlectProvList1[1]=this.specialAreas.provinceArr},restrictCity(){this.specialCityList=JSON.parse(JSON.stringify(this.cityList)),this.specialCityList.forEach(t=>{t.disabled=!0,this.selectCityList.forEach(e=>{t.code!=e&&"000000"!=t.code||(t.disabled=!1)})}),"000000"==this.specialCityList[0].code?this.specialCityList[0].name="全选":this.specialCityList.unshift({code:"000000",name:"全选"})},getAreaListSpecial(t){let e=[];for(let t of this.specialCityList)t.disabled||e.push(t.code);const a=1===this.oldSelectCityList1.length?[]:this.oldSelectCityList1[1];if(t.includes("000000")&&(this.specialAreas.cityArr=e),a.includes("000000")&&!t.includes("000000")&&(this.specialAreas.cityArr=[]),a.includes("000000")&&t.includes("000000")){const e=t.indexOf("000000");t.splice(e,1),this.specialAreas.cityArr=t}a.includes("000000")||t.includes("000000")||t.length===e.length-1&&(this.specialAreas.cityArr=["000000"].concat(t)),this.oldSelectCityList1[1]=this.specialAreas.cityArr},restrictArea(){this.specialAreaList=JSON.parse(JSON.stringify(this.areaList)),this.specialAreaList.forEach(t=>{t.disabled=!0,this.selectAreaList.forEach(e=>{t.code==e&&(t.disabled=!1)})})},restrictBrand(){this.specialBrandList=JSON.parse(JSON.stringify(this.brandList)),this.specialBrandList.forEach(t=>{t.disabled=!0,this.selectBrand.forEach(e=>{t.brandCode==e&&(t.disabled=!1)})})},restrictSonBrand(){this.specialBrandSonList=JSON.parse(JSON.stringify(this.brandSonList)),this.specialBrandSonList.forEach(t=>{t.disabled=!0,this.selectSonBrand.forEach(e=>{t.sn==e&&(t.disabled=!1)})})}}}]},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actPutConf-container"},[a("el-breadcrumb",{directives:[{name:"show",rawName:"v-show",value:"act-501"!=t.form,expression:'form!="act-501"'}],attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("投放设置")])],1),t._v(" "),a("el-card",[a("el-steps",{directives:[{name:"show",rawName:"v-show",value:"act-501"==t.form,expression:'form=="act-501"'}],staticClass:"step-style",attrs:{active:t.stepActive,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基础设置"}}),t._v(" "),a("el-step",{attrs:{title:"题目设置"}}),t._v(" "),a("el-step",{attrs:{title:"投放设置"}})],1),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.strategy,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品牌规格："}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getBrandSonList},model:{value:t.selectBrand,callback:function(e){t.selectBrand=e},expression:"selectBrand"}},t._l(t.brandList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.restrictSonBrand},model:{value:t.selectSonBrand,callback:function(e){t.selectSonBrand=e},expression:"selectSonBrand"}},t._l(t.brandSonList,function(t){return a("el-option",{key:t.id,attrs:{label:t.allName,value:t.sn}})}))],1),t._v(" "),t.showSaleZone&&t.saleZoneCode?a("el-form-item",{attrs:{label:"销区："}},[a("el-select",{attrs:{size:"small",disabled:t.saleZoneDisabled||!!t.id,clearable:!0,placeholder:"请选择"},model:{value:t.saleZoneCode,callback:function(e){t.saleZoneCode=e},expression:"saleZoneCode"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"地区："}},[a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getCityList},model:{value:t.selectProvList,callback:function(e){t.selectProvList=e},expression:"selectProvList"}},t._l(t.provList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getAreaList},model:{value:t.selectCityList,callback:function(e){t.selectCityList=e},expression:"selectCityList"}},t._l(t.cityList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),t.saleZoneCode?t._e():a("el-checkbox",{attrs:{label:"全部地区",border:""},model:{value:t.isDisabled,callback:function(e){t.isDisabled=e},expression:"isDisabled"}})],1),t._v(" "),a("el-form-item",[a("div",{staticClass:"prize-conf"},[a("div",{staticClass:"title"},[t._v("常规奖池")]),t._v(" "),a("el-tabs",{staticClass:"put-conf",attrs:{type:"card",editable:""},on:{edit:t.normalTabsEdit},model:{value:t.normalTabsValue,callback:function(e){t.normalTabsValue=e},expression:"normalTabsValue"}},t._l(t.normalTabs,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{astrict:t.astrictRedflg,awae:t.normalConf[s],prizeType:t.prizeType,saleZone:t.saleZoneCode,budgetTime:t.actSTime}})],1)}))],1)]),t._v(" "),a("el-form-item",[a("div",{staticClass:"special-rule-conf"},[a("div",{staticClass:"title"},[a("span",[t._v("特殊规则设置")]),t._v(" "),a("el-switch",{model:{value:t.specialRuleConfFlag,callback:function(e){t.specialRuleConfFlag=e},expression:"specialRuleConfFlag"}})],1),t._v(" "),t.specialRuleConfFlag?a("div",{staticClass:"con"},[a("el-row",[a("el-checkbox",{model:{value:t.firstScanFlag,callback:function(e){t.firstScanFlag=e},expression:"firstScanFlag"}},[t._v("首扫必中奖")]),t._v(" "),t.firstScanFlag?a("div",{staticClass:"conf"},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.firstScanTabsEdit},model:{value:t.firstScanTabsValue,callback:function(e){t.firstScanTabsValue=e},expression:"firstScanTabsValue"}},t._l(t.firstScanTabs,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{astrict:t.astrictRedflg,awae:t.firstScanConf[s],hide:!0,prizeType:t.prizeType,saleZone:t.saleZoneCode,budgetTime:t.actSTime}})],1)}))],1):t._e()],1),t._v(" "),a("el-row",[a("el-checkbox",{model:{value:t.nWinFlag,callback:function(e){t.nWinFlag=e},expression:"nWinFlag"}},[t._v("N次必中奖")]),t._v(" "),t.nWinFlag?a("div",{staticClass:"conf"},[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.nWinTabsEdit},model:{value:t.nWinTabsValue,callback:function(e){t.nWinTabsValue=e},expression:"nWinTabsValue"}},t._l(t.nWinTabs,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{astrict:t.astrictRedflg,awae:t.nWinConf[s],hide:!0,prizeType:t.prizeType,saleZone:t.saleZoneCode,budgetTime:t.actSTime,nWin:!0}})],1)}))],1):t._e()],1),t._v(" "),a("el-row",[a("el-checkbox",{model:{value:t.fixationPutFlag,callback:function(e){t.fixationPutFlag=e},expression:"fixationPutFlag"}},[t._v("定点投放奖")]),t._v(" "),t.fixationPutFlag?a("div",{staticClass:"conf mb20"},[a("el-form",{staticClass:"mb20 mt20",attrs:{model:t.specialAreas,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品牌规格："}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.specialBrand.brandArr,callback:function(e){t.$set(t.specialBrand,"brandArr",e)},expression:"specialBrand.brandArr"}},t._l(t.specialBrandList,function(t){return a("el-option",{key:t.id,attrs:{disabled:t.disabled,label:t.name,value:t.brandCode}})})),t._v(" "),a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.specialBrand.snArr,callback:function(e){t.$set(t.specialBrand,"snArr",e)},expression:"specialBrand.snArr"}},t._l(t.specialBrandSonList,function(t){return a("el-option",{key:t.id,attrs:{disabled:t.disabled,label:t.allName,value:t.sn}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"地区："}},[a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getCityListSpecial},model:{value:t.specialAreas.provinceArr,callback:function(e){t.$set(t.specialAreas,"provinceArr",e)},expression:"specialAreas.provinceArr"}},t._l(t.specialProvList,function(t){return a("el-option",{key:t.code,attrs:{disabled:t.disabled,label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.isDisabled,multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:t.getAreaListSpecial},model:{value:t.specialAreas.cityArr,callback:function(e){t.$set(t.specialAreas,"cityArr",e)},expression:"specialAreas.cityArr"}},t._l(t.specialCityList,function(t){return a("el-option",{key:t.code,attrs:{disabled:t.disabled,label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"投放时间:"}},[a("el-date-picker",{attrs:{"picker-options":t.pickerOptions,format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.tfTimeArr,callback:function(e){t.tfTimeArr=e},expression:"tfTimeArr"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发放时间:"}},[a("el-time-picker",{attrs:{"is-range":"",format:"HH:mm","value-format":"HH:mm","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.tfDurationArr,callback:function(e){t.tfDurationArr=e},expression:"tfDurationArr"}})],1)],1),t._v(" "),a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:t.fixationPutTabsEdit},model:{value:t.fixationPutTabsValue,callback:function(e){t.fixationPutTabsValue=e},expression:"fixationPutTabsValue"}},t._l(t.fixationPutTabs,function(e,s){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a("pond-conf",{attrs:{astrict:t.astrictRedflg,awae:t.fixationPutConf[s],prizeType:t.prizeType,saleZone:t.saleZoneCode,budgetTime:t.actSTime}})],1)}))],1):t._e()],1)],1):t._e()])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"prize-limit"},[a("div",{staticClass:"title"},[a("span",[t._v("抽奖限制")]),t._v(" "),a("el-switch",{on:{change:function(e){t.act.dwnum=0}},model:{value:t.prizeLimitFlag,callback:function(e){t.prizeLimitFlag=e},expression:"prizeLimitFlag"}})],1),t._v(" "),t.prizeLimitFlag?a("div",{staticClass:"con"},[a("el-row",[a("el-col",{staticClass:"label",attrs:{span:6}},[t._v("每日中奖机会限制:")]),t._v("\n                每人每日"),a("el-input-number",{attrs:{size:"small",min:0,"controls-position":"right"},model:{value:t.act.dwnum,callback:function(e){t.$set(t.act,"dwnum",e)},expression:"act.dwnum"}}),t._v("\n                次抽奖后，不再有中奖机会\n              ")],1)],1):t._e()])]),t._v(" "),"act-111"!==t.form?a("el-form-item",[t._v("\n          是否立即发布\n          "),a("el-switch",{staticClass:"ml20",attrs:{disabled:t.statusDisabled},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1):t._e(),t._v(" "),a("el-form-item",[a("el-row",{staticClass:"mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.backList}},[t._v("返回列表")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"选择的品牌及对应的规格",visible:t.brandVisible,width:"500px"},on:{"update:visible":function(e){t.brandVisible=e}}},[a("span",[t._v("暂时不做")])]),t._v(" "),a("el-dialog",{attrs:{title:"常规奖池选择的地区明细",visible:t.regionVisible,width:"500px"},on:{"update:visible":function(e){t.regionVisible=e}}},[a("span",[t._v("暂时不做")])])],1)},staticRenderFns:[]};var o=a("VU/8")(r,l,!1,function(t){a("LdZ2")},"data-v-61386cb5",null);e.default=o.exports},Z9ow:function(t,e){},ZUOX:function(t,e){},ZXoO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["orderId"],name:"",data:()=>({disabled:!0,returnPath:"/distribution/orderMgr",buyNum:"",region:"",nickname:"",salerName:"",invitCode:"",amount:"",orderStatus:0,cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],ruleForm:{contactName:"",contactPhone:"",provinceId:"",provinceName:"",cityId:"",cityName:"",areaId:"",areaName:"",addrDetail:""},rules:{contactName:[{required:!0,message:"请输入抢购人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入手机号",trigger:"blur"}],provinceId:[{required:!0,message:"请选择省份",trigger:"change"}],cityId:[{required:!0,message:"请选择城市",trigger:"change"}],areaId:[{required:!0,message:"请选择地区",trigger:"change"}],addrDetail:[{required:!0,message:"请输入收货地址",trigger:"blur"}]},orderTrack:[]}),created(){this.getReviewDetail(),this.getOrderTrack()},methods:{getOneCategory(){this.$request.post("/fxweb/fxsaas/getProvince",{},!1,t=>{this.cateLvl1List=[...t.data]})},selectBrand1(t){let e=this.cateLvl1List.find(e=>e.code==t);this.ruleForm.provinceName=e.name,this.ruleForm.cityName="",this.ruleForm.cityId="",this.cateLvl2List=[],this.ruleForm.areaId="",this.ruleForm.areaName="",this.cateLvl3List=[],this.getTwoCategory()},getTwoCategory(){""!=this.ruleForm.provinceId&&this.$request.post("/fxweb/fxsaas/getCity",{parentCode:this.ruleForm.provinceId},!1,t=>{this.cateLvl2List=[...t.data]})},selectBrand2(t){let e=this.cateLvl2List.find(e=>e.code==t);this.ruleForm.cityName=e.name,this.ruleForm.areaId="",this.ruleForm.areaName="",this.cateLvl3List=[],this.getThreeCategory()},getThreeCategory(){""!=this.ruleForm.cityId&&this.$request.post("/fxweb/fxsaas/getCounty",{parentCode:this.ruleForm.cityId},!1,t=>{this.cateLvl3List=[...t.data]})},selectBrand3(t){let e=this.cateLvl3List.find(e=>e.code==t);this.ruleForm.areaName=e.name},getReviewDetail(){this.$request.post("/fxweb/fxsaas/getOrderDetail",{orderId:this.orderId},!0,t=>{t.ok&&(this.buyNum=t.data.orderInfo.buyNum,this.region=t.data.orderInfo.region,this.nickname=t.data.orderInfo.nickname,this.salerName=t.data.orderInfo.salerName,this.invitCode=t.data.orderInfo.invitCode,this.amount=t.data.orderInfo.amount,this.ruleForm.contactName=t.data.orderAddress.contactName,this.ruleForm.contactPhone=t.data.orderAddress.contactPhone,this.ruleForm.provinceName=t.data.orderAddress.provinceName,this.ruleForm.cityName=t.data.orderAddress.cityName,this.ruleForm.areaName=t.data.orderAddress.areaName,this.ruleForm.addrDetail=t.data.orderAddress.addrDetail,this.orderStatus=t.data.orderInfo.orderStatus,this.$request.post("/fxweb/fxsaas/getProvince",{},!1,e=>{this.cateLvl1List=[...e.data],this.ruleForm.provinceId=t.data.orderAddress.provinceId+"",this.$request.post("/fxweb/fxsaas/getCity",{parentCode:this.ruleForm.provinceId},!1,e=>{this.cateLvl2List=[...e.data],this.ruleForm.cityId=t.data.orderAddress.cityId+"",this.$request.post("/fxweb/fxsaas/getCounty",{parentCode:this.ruleForm.cityId},!1,e=>{this.cateLvl3List=[...e.data],this.ruleForm.areaId=t.data.orderAddress.areaId+""})})}))})},getOrderTrack(){this.$request.post("/fxweb/fxsaas/getOrderTrack",{orderId:this.orderId},!1,t=>{this.orderTrack=t.data})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;{let t={};this.postParams(t)}})},postParams(t){this.$request.post("/lsh/seller-manager/seller/saveOrUpdateSeller",t,!1,t=>{t.ok?(this.$message({message:"保存成功！",type:"success"}),this.returnMgr()):this.$message({message:t.msg,type:"warning"})},t=>{})},returnMgr(){this.$router.push({path:this.returnPath})},cancelOrder(){this.$confirm("您确定取消此订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/fxweb/fxsaas/cancelOrder",{orderId:this.orderId},!1,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.returnMgr()):this.$message({message:t.msg,type:"warning"})},t=>{})})},submitModify(){this.$refs.ruleForm.validate(t=>{if(!t)return!1;{let t=this.ruleForm;if(t.orderId=this.orderId,!/^1[3456789]\d{9}$/.test(t.contactPhone))return void this.$message({message:"手机号格式不正确！",type:"error"});this.$request.post("/fxweb/fxsaas/modifyOrderAddress",t,!0,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.returnMgr()):this.$message({message:t.msg,type:"warning"})},t=>{})}})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"basic-msg-container"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("订单信息：")])]),t._v(" "),a("div",{staticClass:"basic-msg-broad"},[a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("订单号：")]),t._v(t._s(t.orderId))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("订单数量：")]),t._v(t._s(t.buyNum))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("位置：")]),t._v(t._s(t.region))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("微信号：")]),t._v(t._s(t.nickname))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("经销商：")]),t._v(t._s(t.salerName))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("推荐码：")]),t._v(t._s(t.invitCode))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("支付金额：")]),t._v("￥"+t._s(t.amount))])])]),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("收货人信息：")])]),t._v(" "),a("el-form",{ref:"ruleForm",staticStyle:{"margin-left":"60px"},attrs:{"label-width":"100px",model:t.ruleForm,rules:t.rules,disabled:t.orderStatus>2}},[a("el-form-item",{attrs:{label:"抢购人:",prop:"contactName"}},[a("el-input",{staticStyle:{width:"400px"},model:{value:t.ruleForm.contactName,callback:function(e){t.$set(t.ruleForm,"contactName",e)},expression:"ruleForm.contactName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号:",prop:"contactPhone"}},[a("el-input",{staticStyle:{width:"400px"},model:{value:t.ruleForm.contactPhone,callback:function(e){t.$set(t.ruleForm,"contactPhone",e)},expression:"ruleForm.contactPhone"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"位置:",prop:"provinceId"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.ruleForm.provinceId,callback:function(e){t.$set(t.ruleForm,"provinceId",e)},expression:"ruleForm.provinceId"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"cityId"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.ruleForm.cityId,callback:function(e){t.$set(t.ruleForm,"cityId",e)},expression:"ruleForm.cityId"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"areaId"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand3},model:{value:t.ruleForm.areaId,callback:function(e){t.$set(t.ruleForm,"areaId",e)},expression:"ruleForm.areaId "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"收货地址:",prop:"addrDetail"}},[a("el-input",{staticStyle:{width:"400px"},model:{value:t.ruleForm.addrDetail,callback:function(e){t.$set(t.ruleForm,"addrDetail",e)},expression:"ruleForm.addrDetail"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("订单跟踪：")])]),t._v(" "),a("div",{staticClass:"contnent",staticStyle:{"margin-left":"60px"}},t._l(t.orderTrack,function(e,s){return a("div",{key:s,staticClass:"dd-line"},[a("span",[t._v(t._s(e.timeString))]),a("span",[t._v("订单状态："+t._s(e.desc))])])}))]),t._v(" "),a("div",{staticClass:"basic-msg-form-bt"},[a("el-button",{attrs:{type:"primary"},on:{click:t.cancelOrder}},[t._v("取消订单")]),t._v(" "),t.orderStatus<3?a("el-button",{attrs:{type:"primary"},on:{click:t.submitModify}},[t._v("确定")]):t._e(),t._v(" "),a("el-button",{on:{click:t.returnMgr}},[t._v("返回列表")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("tssb"),a("qrNY")},"data-v-3b418d51",null);e.default=r.exports},aMil:function(t,e){},bdfW:function(t,e){},cmT3:function(t,e){},cxap:function(t,e){},dE4w:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"Reviewmanage",data:()=>({listLoading:!1,statusList:[{code:null,name:"全部"},{code:"1",name:"待审核"},{code:"2",name:"提现完成"},{code:"3",name:"审核未通过"},{code:"4",name:"审核通过未到账"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],filters:{status:null},TxList:[],pageSize:10,pageNo:1,currentPage:1,total:0,dialogVisible:!1,failReason:"",txId:""}),created(){this.getListTx()},methods:{getListTx(){let t={appStatus:this.filters.status,pageNo:this.pageNo,pageSize:10};this.postSearch(t)},postSearch(t){this.$request.post("/fxweb/fxsaas/tx/list",t,!0,t=>{console.log(t.data),this.TxList=t.data.dataList,this.total=t.data.pageResult.count,this.pageNo=t.data.pageResult.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getListTx()},getStatus(){this.filters.status=null,this.pageNo=1,this.currentPage=1,this.getListTx()},inputWithSelectChange(t){this.filters.keywords=""},approval(t){let e={id:t,appStatus:1};this.$confirm("您确定审核通过？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/fxweb/fxsaas/tx/audit",e,!0,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.getListTx()):(console.log(t),this.$message({message:t.msg,type:"warning"}))})})},disapprovalDialog(t){this.dialogVisible=!0,this.txId=t},disapproval(){let t={id:this.txId,appStatus:2,failReason:this.failReason};this.$confirm("您确定审核不通过？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/fxweb/fxsaas/tx/audit",t,!0,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.failReason="",this.getListTx()):(console.log(t),this.$message({message:t.msg,type:"warning"}),this.dialogVisible=!1,this.failReason="",this.getListTx())})})},cancelDialog(){this.dialogVisible=!1,this.failReason=""},sellerDetail(t){this.$router.push({path:"/seller/tx/sellerDetail?sellerId="+t})},jumpTo(){this.$emit("current-change")},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getListTx()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"amount-examine-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"提现状态"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}},t._l(t.statusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("div"),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.TxList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"salerName",label:"经销商姓名",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"手机号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"返佣数量",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"balance",label:"累积佣金",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.totalNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ktxAmount",label:"可提现金额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.ktxAmount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"txAmount",label:"提现金额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"red"}},[t._v("￥"+t._s(e.row.txAmount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"txTime",label:"申请时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"finishTime",label:"到账时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"txStatus",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:0!==e.row.appStatus,type:"text",size:"mini"},on:{click:function(a){t.disapprovalDialog(e.row.id)}}},[t._v("审核不通过")]),t._v(" "),a("el-button",{attrs:{disabled:0!==e.row.appStatus,type:"text",size:"mini"},on:{click:function(a){t.approval(e.row.id)}}},[t._v("审核通过")])]}}])})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"请输入不通过理由",visible:t.dialogVisible,width:"30%","before-close":t.cancelDialog},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.failReason,callback:function(e){t.failReason=e},expression:"failReason"}}),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.disapproval}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("om1E"),a("ezfA")},"data-v-044fd808",null);e.default=r.exports},dRMm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id"],data:()=>({data:{orderId:"",nickName:"",ctime:"",giftName:"",getUserName:"",mobile:"",orderStatus:"",address:""},provList:[],cityList:[],areaList:[],selectProvList:[],selectCityList:[],selectAreaList:[]}),created(){this.getProvList()},mounted(){if(!this.id)return this.$router.push("/orders/member");const t=this.$loading({target:".wrapper"});this.getDetail(()=>t.close())},methods:{getDetail(t){this.$request.post("/api/wiseqr/mborder/detail",{orderId:this.id},!0,e=>{if("200000"===e.ret)return this.data=e.data,void(this.data.provinceCode?(this.selectProvList=this.data.provinceCode+"",this.getCityList(()=>{this.data.cityCode?(this.selectCityList=this.data.cityCode+"",this.getAreaList(()=>{this.data.countyCode?(this.selectAreaList=this.data.countyCode+"",t&&t()):t&&t()})):t&&t()})):t&&t());this.$message.error(e.message)})},getProvList(){this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:[]},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.provList=t.data})},getCityList(t){this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:[this.selectProvList]},!0,e=>{if("200000"===e.ret&&e.data.length>0)return this.cityList=e.data,void(t&&t());this.message.error(e.message)})},getAreaList(t){this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:[this.selectCityList]},!0,e=>{if("200000"===e.ret&&e.data.length>0)return this.areaList=e.data,void(t&&t());this.message.error(e.message)})},save(){if(this.data.provinceCode=this.selectProvList,this.data.cityCode=this.selectCityList,this.data.countyCode=this.selectAreaList,this.data.mobile&&!/^1[34578]\d{9}$/.test(this.data.mobile))return this.$message.error("手机号填写错误");this.$request.post("/api/wiseqr/mborder/modifyReceiptInfo",this.data,!0,t=>{if("200000"===t.ret)return this.$message.success("保存成功"),void setTimeout(()=>{this.$router.push("/orders/member")},500);this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("订单详情")])],1),t._v(" "),a("el-card",{staticClass:"wrapper"},[a("el-card",[a("p",{staticClass:"title"},[t._v("订单详情")]),t._v(" "),a("div",{staticClass:"con"},[a("span",[t._v("订单号："+t._s(t.data.orderId))]),t._v(" "),a("span",[t._v("用户名称："+t._s(t.data.nickName))]),t._v(" "),a("span",[t._v("微信号："+t._s(t.data.nickName))]),t._v(" "),a("span",[t._v("领取时间："+t._s(new Date(t.data.ctime).Format("yyyy-MM-dd hh:mm:ss")))]),t._v(" "),a("span",[t._v("获奖地区："+t._s(t.data.address))])])]),t._v(" "),a("el-form",{staticClass:"mt20 ml20",attrs:{"label-width":"130px"}},[a("el-form-item",{attrs:{label:"礼品名称："}},[a("el-input",{attrs:{disabled:t.data.orderStatus>=2},model:{value:t.data.giftName,callback:function(e){t.$set(t.data,"giftName",e)},expression:"data.giftName"}})],1),t._v(" "),a("div",{staticClass:"title mb20"},[t._v("收货人信息")]),t._v(" "),a("el-form-item",{attrs:{label:"收货人："}},[a("el-input",{attrs:{disabled:t.data.orderStatus>=2},model:{value:t.data.getUserName,callback:function(e){t.$set(t.data,"getUserName",e)},expression:"data.getUserName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号："}},[a("el-input",{attrs:{disabled:t.data.orderStatus>=2,type:"tel",maxlength:13},model:{value:t.data.mobile,callback:function(e){t.$set(t.data,"mobile",e)},expression:"data.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"收货地址："}},[a("el-select",{attrs:{disabled:t.data.orderStatus>=2,placeholder:"请选择"},on:{change:t.getCityList},model:{value:t.selectProvList,callback:function(e){t.selectProvList=e},expression:"selectProvList"}},t._l(t.provList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.data.orderStatus>=2,placeholder:"请选择"},on:{change:t.getAreaList},model:{value:t.selectCityList,callback:function(e){t.selectCityList=e},expression:"selectCityList"}},t._l(t.cityList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{disabled:t.data.orderStatus>=2,placeholder:"请选择"},model:{value:t.selectAreaList,callback:function(e){t.selectAreaList=e},expression:"selectAreaList"}},t._l(t.areaList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-input",{attrs:{disabled:t.data.orderStatus>=2},model:{value:t.data.address,callback:function(e){t.$set(t.data,"address",e)},expression:"data.address"}})],1)],1),t._v(" "),a("div",{staticClass:"title mb20 ml20"},[t._v("订单跟踪")]),t._v(" "),a("div",{staticClass:"info"},[0==t.data.orderStatus?a("p",[a("span",[t._v("下单时间："+t._s(new Date(t.data.ctime).Format("yyyy-MM-dd hh:mm:ss")))]),a("span",[t._v("订单状态：待审核")])]):t._e(),t._v(" "),1==t.data.orderStatus?a("p",[a("span",[t._v("下单时间："+t._s(new Date(t.data.ctime).Format("yyyy-MM-dd hh:mm:ss")))]),a("span",[t._v("订单状态：审核通过")])]):t._e(),t._v(" "),2==t.data.orderStatus?a("p",[a("span",[t._v("发货时间："+t._s(new Date(t.data.shipTime).Format("yyyy-MM-dd hh:mm:ss")))]),a("span",[t._v("订单状态：已发货")]),a("span",[t._v("物流号："+t._s(t.data.trackingNumber))])]):t._e()]),t._v(" "),a("div",{staticClass:"btn mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(e){t.$router.back(-1)}}},[t._v("返回列表")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("uOJp")},"data-v-a0acb182",null);e.default=r.exports},dRqP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},data:()=>({listData:[],orderStatusData:[],allKeyWordData:[],allGiftTypeData:[],allOneCateData:[],allTwoCateData:[],allThrCateData:[],allFroCateData:[],selectallKyeType:"",selectallOneCate:"",selectallTwoCate:"",selectallThrCate:"",selectallFroCate:"",idtwo:"1",idthr:"1",idfro:"1",form:{kyeName:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:"",startTime:"",endTime:"",status:"",orderType:1,giftType:"",orderId:"",awardName:"",userName:"",mobile:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),name:"ZjOrderPage",created(){this.init()},watch:{selectallKyeType(t,e){t&&t!=e&&(1==t&&(this.form.orderId=this.form.kyeName,this.form.awardName="",this.form.userName=""),2==t&&(this.form.orderId="",this.form.awardName=this.form.kyeName,this.form.userName=""),3==t&&(this.form.orderId="",this.form.awardName="",this.form.userName=this.form.kyeName))},selectallOneCate(t,e){t&&t!=e&&(this.idtwo="",this.form.cateLvl1=t,this.allMoreCateList(t,2))},selectallTwoCate(t,e){t&&t!=e&&(this.idthr="",this.form.cateLvl2=t,this.allMoreCateList(t,3))},selectallThrCate(t,e){t&&t!=e&&(this.idfro="",this.form.cateLvl3=t,this.allMoreCateList(t,4))},selectallForCate(t,e){t&&t!=e&&(this.form.cateLvl4=t)}},methods:{init(){this.orderStatusList(),this.allKeyWordList(),this.allGiftTypeList(),this.allOneCateList(),this.getlistData()},changek(){1==this.selectallKyeType&&(this.form.orderId=this.form.kyeName,this.form.awardName="",this.form.userName="",this.form.mobile=""),2==this.selectallKyeType&&(this.form.orderId="",this.form.awardName=this.form.kyeName,this.form.userName="",this.form.mobile=""),3==this.selectallKyeType&&(this.form.orderId="",this.form.awardName="",this.form.userName=this.form.kyeName,this.form.mobile=""),4==this.selectallKyeType&&(this.form.orderId="",this.form.awardName="",this.form.userName="",this.form.mobile=this.form.kyeName)},orderStatusList(){this.$request.post("/sc/saotx/mall/orderStatusMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.orderStatusData=t.data)})},allKeyWordList(){this.$request.post("/sc/saotx/mall/keyWordMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allKeyWordData=t.data)})},allGiftTypeList(){this.$request.post("/sc/saotx/mall/giftTypeMap",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allGiftTypeData=t.data)})},allOneCateList(){this.$request.post("/sc/saotx/mall/cate/oneCategory",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allOneCateData=t.data)})},allMoreCateList(t,e){this.$request.post("/sc/saotx/mall/cate/moreCategory",{id:t},!0,t=>{console.log(t.data),"200000"===t.ret&&(2==e&&(this.selectallTwoCate="",this.selectallThrCate="",this.selectallFroCate="",this.allTwoCateData=t.data),3==e&&(this.selectallThrCate="",this.selectallFroCate="",this.allThrCateData=t.data),4==e&&(this.selectallFroCate="",this.allFroCateData=t.data))})},getlistData(){this.$request.post("/sc/saotx/mall/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},queryData:function(t){this.getlistData()},currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},initPagination(t){t&&(this.pagination.total=t.count)},resetData:function(t){this.selectallKyeType="",this.selectallOneCate="",this.selectallTwoCate="",this.selectallThrCate="",this.selectallFroCate="",this.idtwo="1",this.idthr="1",this.idfro="1",this.form={kyeName:"",cateLvl1:"",cateLvl2:"",cateLvl3:"",cateLvl4:"",startTime:"",endTime:"",status:"",orderType:1,giftType:"",orderId:"",awardName:"",userName:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){2e5==t.ret?this.$message({type:"success",message:t.message}):this.$message.error(t.message),this.getlistData()},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/sc/saotx/mall/order/exportOrder",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)},ObjectPageDatail(t){this.$router.push({path:"/Orders/mall/zjOrderPageDetail?orderCode="+t})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/自建订单明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"订单状态:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.orderStatusData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"时间段:",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"关键字:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectallKyeType,callback:function(e){t.selectallKyeType=e},expression:"selectallKyeType"}},t._l(t.allKeyWordData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-input",{attrs:{placeholder:"请输入关键词"},on:{input:function(e){t.changek()}},model:{value:t.form.kyeName,callback:function(e){t.$set(t.form,"kyeName",e)},expression:"form.kyeName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品状态:",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.giftType,callback:function(e){t.$set(t.form,"giftType",e)},expression:"form.giftType"}},t._l(t.allGiftTypeData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"分类",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectallOneCate,callback:function(e){t.selectallOneCate=e},expression:"selectallOneCate"}},t._l(t.allOneCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idtwo,clearable:!!t.idtwo},model:{value:t.selectallTwoCate,callback:function(e){t.selectallTwoCate=e},expression:"selectallTwoCate"}},t._l(t.allTwoCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idthr,clearable:!!t.idthr},model:{value:t.selectallThrCate,callback:function(e){t.selectallThrCate=e},expression:"selectallThrCate"}},t._l(t.allThrCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.idfro,clearable:!!t.idfro},model:{value:t.selectallFroCate,callback:function(e){t.selectallFroCate=e},expression:"selectallFroCate"}},t._l(t.allFroCateData,function(t,e){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/sc/saotx/mall/order/importZJOrders",headers:t.headers,data:t.addPool,"before-upload":t.handlerSourceFileBUpload,"on-success":t.handleSourceFileSuccess,"on-remove":t.handleSourceFileRemove,"file-list":t.sourceFiles,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("导入物流信息")])],1)],1),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s((t.form.pageNo-1)*t.form.pageSize+e.$index+1)+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.ObjectPageDatail(e.row.orderId)}}},[t._v("查看详情")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"商品名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"商品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(2==e.row.giftType?"实物礼品":"虚拟礼品"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cate1Name",label:"一级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate2Name",label:"二级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate3Name",label:"三级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cate4Name",label:"四级分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"score",label:"兑换币"}}),t._v(" "),a("el-table-column",{attrs:{prop:"originScore",label:"原兑换币"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"联系人姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系人电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"收货地址"}}),t._v(" "),a("el-table-column",{attrs:{label:"下单时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.createTime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态\t"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.status?"待收货":3==e.row.status?"已完成":0==e.row.status?"待发货":5==e.row.status?"已取消":""))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("/Vy9")},"data-v-e28b60ce",null);e.default=l.exports},edkJ:function(t,e){},ehVw:function(t,e,a){"use strict";var s={props:["editData","shareConf"],data:()=>({uploadApi:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")}}),created(){},methods:{uploadSuccess(t,e,a){let s=t.data.accessUrl;this.editData[0].url=s,this.$emit("shareChange",{url:s})},uploadError(t){alert("图片上传失败")},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type||"image/bmp"===t.type||"image/gif"===t.type;return e||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),e}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-share"},[a("el-card",{staticClass:"card"},[a("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("h3",[t._v("编辑图片")])]),t._v(" "),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分享标题："}},[a("el-input",{attrs:{type:"text",maxlength:15},model:{value:t.shareConf.shareTitle,callback:function(e){t.$set(t.shareConf,"shareTitle",e)},expression:"shareConf.shareTitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分享说明："}},[a("el-input",{staticStyle:{width:"70%"},attrs:{maxlength:"30",type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.shareConf.shareDesc,callback:function(e){t.$set(t.shareConf,"shareDesc",e)},expression:"shareConf.shareDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分享图标："}},[a("div",[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.editData[0].url}})]),t._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:t.uploadApi,headers:t.headerObj,"show-file-list":!1,"on-success":t.uploadSuccess,"before-upload":t.beforeAvatarUpload,"on-error":t.uploadError}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("更换图片")])],1),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("* 图片建议尺寸为 91*91px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])],1)])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("RRMr")},"data-v-c4140b6c",null);e.a=r.exports},ezfA:function(t,e){},g7Yz:function(t,e){},gQgQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7w9a"),i=a("ifEn"),r=a("UJta"),l=a("9ijK"),o={props:["id","edit"],data:()=>({defaultActive:"1",editData:[l.a.img.ACT_QUESTION.normal.bg],editType:"normal",itemRepeat:!1,page:1,isPublish:!1,conf:{form:"act-501",id:"",description:"",title:"",img:JSON.parse(JSON.stringify(l.a.img.ACT_QUESTION)),commonImg:JSON.parse(JSON.stringify(l.a.commonImg)),conf:{img:"",commonImg:"",title:"",desc:""},name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")}}),components:{phoneModel:s.a,activityInfo:i.a,activityImageEditor:r.a},created(){this.getActDetail()},mounted(){console.log(this)},computed:{},methods:{switchMenu(t,e){let a=this;a.page=t,4==t?(a.editData=[a.conf.commonImg.getAwardBg,a.conf.commonImg.getBtn],a.editType="common"):1==t?(a.editData=[a.conf.img.normal.bg],a.editType="normal"):5==t?(a.editData=[a.conf.commonImg.noAward,a.conf.commonImg.knowBtn],a.editType="common"):6==t?(a.editData=[a.conf.img.question.Quesbg],a.editType="normal"):7==t&&(a.editData=[a.conf.commonImg.errorTip,a.conf.commonImg.errorBtn],a.editType="common")},titleInput(t){let e=t.value;this.conf.title=e||""},descInput(t){let e=t.value;e?this.conf.description=e:this.description=""},saleZoneInput(t){let e=t.value;e?this.conf.saleZone=e:this.saleZone=""},editTpl(t){console.log(t);let e=this,a=t.index,s=a.indexOf("item")>-1?"item":"normal";e.editType=s,6!=e.page?e.editData="item"==s?e.itemRepeat?[this.conf.img[s].item0]:this.conf.img[s]:[this.conf.img[s][a]]:(console.log(e.page),e.editData=[this.conf.img.question[a]])},editPic(t){let e=t.type,a=t.index,s=t.url,i=t.itemRepeat,r=this.conf;if(s)if("item"==e&&i)for(let t in r.img[e])r.img[e][t].url=s;else"item"==e&&!i||"normal"==e&&1==this.page?r.img[e][a].url=s:"common"==e?(console.log(a),r.commonImg[a].url=s):"normal"==e&&6==this.page&&(console.log(r.img.question),r.img.question[a].url=s)},getActDetail(){let t=this,e=null;this.edit?this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,a=>{"200000"===a.ret?(this.conf.actCode=a.data.actCode,e=JSON.parse(a.data.conf),t.conf.img=JSON.parse(e.img),t.conf.commonImg=JSON.parse(e.commonImg),t.conf.description=e.desc,t.conf.title=e.title,t.conf.id=a.data.id,t.conf.saleZone=a.data.saleZone,"未投放"==a.data.statusName?t.isPublish=!1:t.isPublish=!0):this.$message.error(a.message)}):t.id&&t.$request.post("/api/wiseqr/acttpl/detail",{id:t.id},!0,a=>{"200000"===a.ret?(e=JSON.parse(a.data.conf),t.conf.img=JSON.parse(e.img),t.conf.commonImg=JSON.parse(e.commonImg),t.conf.description=a.data.note,t.conf.title=a.data.name,t.conf.id=a.data.id,t.conf.saleZone=a.data.saleZone,"未投放"==a.data.statusName?t.isPublish=!1:t.isPublish=!0):this.$message.error(a.message)})},save(){let t=this;if(!t.conf.title)return this.$message.warning("请输入模板名称");t.conf.conf.img=JSON.stringify(t.conf.img),t.conf.conf.commonImg=JSON.stringify(t.conf.commonImg),t.conf.conf.title=t.conf.title,t.conf.conf.desc=t.conf.description,t.conf.conf=JSON.stringify(t.conf.conf),t.conf.name=t.conf.title,t.conf.note=t.conf.description,this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",t.conf,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):t.$request.post("/api/wiseqr/acttpl/saveOrModify",t.conf,!0,e=>{if("200000"===e.ret)return t.isPublish?t.$router.push("/market/actTpl/actSetConf?form="+e.data.form+"&tplCode="+e.data.tplCode):t.$router.push("/market/actTpl"),void t.$message.success("保存成功!");t.$message.error(e.message)})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"root"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("新建活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-menu",{attrs:{mode:"horizontal","default-active":t.defaultActive},on:{select:t.switchMenu}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("首页")]),t._v(" "),a("el-menu-item",{attrs:{index:"6"}},[t._v("答题页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"2"}},[t._v("活动说明页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"3"}},[t._v("我的奖品页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"4"}},[t._v("中奖页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"5"}},[t._v("未中奖页面")]),t._v(" "),a("el-menu-item",{attrs:{index:"7"}},[t._v("异常处理页面")])],1),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"40px"}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("phone-model",{attrs:{title:t.conf.title,titleLength:30,page:t.page,imgKey:"ACT_QUESTION",imgData:t.conf.img,commonImg:t.conf.commonImg,flag:"ques"},on:{edit:t.editTpl}})],1),t._v(" "),a("el-col",{attrs:{span:14}},[a("activity-info",{directives:[{name:"show",rawName:"v-show",value:1==t.page,expression:"page == 1"}],attrs:{title:t.conf.title,desc:t.conf.description,saleZone:t.conf.saleZone},on:{titleInput:t.titleInput,descInput:t.descInput,saleZoneInput:t.saleZoneInput}}),t._v(" "),2!=t.page&&3!=t.page?a("activity-image-editor",{attrs:{editData:t.editData,type:t.editType,itemRepeat:t.itemRepeat},on:{picChange:t.editPic}}):t._e()],1)],1),t._v(" "),a("el-row",{staticClass:"tool-bar",staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{height:"100px"}})]),t._v(" "),a("el-col",{attrs:{span:14}},[a("div",{staticClass:"publish"},[a("label",{attrs:{for:""}},[t._v("是否投放：")]),t._v(" "),a("el-switch",{model:{value:t.isPublish,callback:function(e){t.isPublish=e},expression:"isPublish"}})],1),t._v(" "),a("div",{staticClass:"save"},[a("el-button",{attrs:{type:"primary",size:"medium",width:"100"},on:{click:t.save}},[t._v("保存")])],1)])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,n,!1,function(t){a("Wgu+")},null,null);e.default=c.exports},gYd8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({orgHasSaleZone:sessionStorage.orgHasSaleZone,isAllSaleZone:sessionStorage.isAllSaleZone,saleZoneCode:sessionStorage.saleZoneCode,saleZone:[],queryActParams:{allFormCode:"",brandCodeArr:[],cityCodeArr:[],etime:"",form:"",hdCode:"",keywords:"",pageNo:1,pageSize:10,provinceCodeArr:[],snArr:[],status:"",stime:"",saleZoneCode:null},actListTotal:0,addActDialogVisible:!1,actFormName:[{name:"全部",code:""}],actParams:{pageNo:1,pageSize:4,pcode:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},actForms:[],actTotal:0,nowActiveIndex:0,actList:[],actStatusObj:{},brandList:[],sonBrandList:[],provList:[],selectProvList:[],cityList:[],selectCityList:[],isDisabled:!1,value:"",actTime:"",nowActCode:"",putLogVisible:!1,putTimeList:[],putLogTime:"",normalLogList:[],firstScanLogList:[],nWinLogList:[],fixationLogList:[],loading:!0,formPath:{"act-101":"/market/actTpl/AddActSudoku?edit=","act-102":"/market/actTpl/AddWingAct?edit=","act-103":"/market/actTpl/addActEgg?edit=","act-111":"/market/actTpl/addHePiaoXiang?edit=","act-112":"/market/actTpl/addRockPaperScissors?edit=","act-113":"/market/actTpl/addBoating?edit=","act-104":"/market/actTpl/addActFanpaizi?edit=","act-501":"/market/actTpl/addActQuestion?edit=","act-301":"/market/actTpl/addActRedPacked?edit=","act-105":"/market/actTpl/addRound?edit=","act-100":"/market/actTpl/addAct?edit=","act-701":"/market/actTpl/addCapsuleToys?edit=","act-702":"/market/actTpl/addDadishu?edit=","act-703":"/market/actTpl/addDaqiqiu?edit=","act-704":"/market/actTpl/addJiawawa?edit=","act-705":"/market/actTpl/addDiaohongbao?edit="}}),created(){this.init()},watch:{isDisabled:function(t,e){t?(this.selectProvList=[],this.selectCityList=[],this.queryActParams.provinceCodeArr=["000000"],this.queryActParams.cityCodeArr=["000000"]):(this.queryActParams.provinceCodeArr=[],this.queryActParams.cityCodeArr=[])},actTime:function(t){t&&2===t.length?(this.queryActParams.stime=this.actTime[0],this.queryActParams.etime=this.actTime[1]):(this.queryActParams.stime="",this.queryActParams.etime="")}},methods:{getSaleZoneName(t){if(!t)return"";let e="",a=this.saleZone.find(e=>{if(e.zoneCode==t)return e});return e=a?a.zoneName:""},init(){this.getProvList(),this.getActStatus(),this.getBrandList(),this.getActCodeList(),this.getSaleZone()},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[],1==this.isAllSaleZone?this.getActList():(this.queryActParams.saleZoneCode=this.saleZoneCode,this.getActList()))})},getActList(){this.loading=!0,this.$request.post("/api/wiseqr/act/list",this.queryActParams,!0,t=>{if("200000"===t.ret)return this.actList=t.data.list,this.actListTotal=t.data.page.count,void(this.loading=!1);this.$message.error(t.message)})},getActStatus(){this.$request.post("/api/wiseqr/act/statusSelect",{},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.actStatusObj=t.data})},selectArea(){this.queryActParams.provinceCodeArr=this.selectProvList,this.queryActParams.cityCodeArr=this.selectCityList},getBrandList(){this.$request.post("/api/wiseqr/prod/listBrand",{pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandList=t.data.list})},getSonBrandList(){if(0===this.queryActParams.brandCodeArr.length)return this.sonBrandList=[],void(this.queryActParams.snArr=[]);this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.queryActParams.brandCodeArr,pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.sonBrandList=t.data.list;this.$message.error(t.message)})},getProvList(){this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:[]},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.provList=t.data})},getCityList(){if(0==this.selectProvList.length)return this.cityList=[],void(this.selectCityList=[]);this.$request.post("/api/wiseqr/dim/regionByMultiParent",{parentArr:this.selectProvList},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.cityList=t.data})},addAct(){this.addActDialogVisible=!0,this.actParams.pcode="",this.actParams.pageNo=1,this.nowActiveIndex=0;const t=this.$loading({target:".el-dialog"});this.getAct(()=>t.close())},getCheckedAct(t,e){this.nowActiveIndex=e,this.actParams.pcode=t.code,this.actParams.pageNo=1;const a=this.$loading({target:".el-dialog"});this.getAct(()=>a.close())},getActCodeList(){this.$request.post("/api/wiseqr/act/formByPCode",{pCode:"",pageNo:1,pageSize:-1},!0,t=>{"200000"==t.ret?this.actFormName.push(...t.data.list):this.$message.error(t.message)})},getAct(t){this.$request.post("/api/wiseqr/acttpl/list",this.actParams,!0,e=>{"200000"==e.ret?(this.actForms=e.data.list||[],this.actForms&&0!=this.actForms.length||"form-cate6"!=this.actParams.pcode?this.actTotal=e.data.page.count:(this.actForms=[{extUrl:"http://qoss.qrmkt.cn/saas_platform/common/act_tpl/act-tpl-self.png",form:"act-601",tplCode:"",name:"自定义活动",note:"",id:""}],this.actTotal=1)):this.$message.error(e.message),t&&t()},t=>{console.log(t)})},queryActList(){this.queryActParams.pageNo=1,this.getActList()},resetForm(){this.queryActParams.keywords="",this.queryActParams.brandCodeArr=[],this.queryActParams.snArr=[],this.queryActParams.status="",this.queryActParams.stime="",this.queryActParams.etime="",this.selectProvList=[],this.selectCityList=[],this.queryActParams.provinceCodeArr=[],this.queryActParams.cityCodeArr=[],this.actTime=[],this.queryActParams.pageNo=1,1==this.isAllSaleZone&&(this.queryActParams.saleZoneCode=null),this.getActList()},getLogList(t){this.$request.post("/api/wiseqr/act/hisVers",{actCode:t},!0,e=>{if("200000"==e.ret)return this.putLogVisible=!0,this.normalLogList=[],this.firstScanLogList=[],this.nWinLogList=[],this.fixationLogList=[],this.putTimeList=[],this.putLogTime="",void(e.data.length>0&&(this.nowActCode=t,this.putTimeList=e.data,this.putLogTime=e.data[0].version,this.logDetail(t,this.putLogTime)));this.$message.error(e.message)})},logDetail(t,e){this.$request.post("/api/wiseqr/act/hisDetail",{actCode:t,version:e},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):t.data.strategyArr.forEach(t=>{"common"==t.tfType&&(this.normalLogList=t.awardArr),"sn_first"==t.tfType&&(this.firstScanLogList=t.awardArr),"n_mwin"==t.tfType&&(this.nWinLogList=t.awardArr),"special"==t.tfType&&(this.fixationLogList=t.awardArr)})})},handleSizeChange(t){this.queryActParams.pageSize=t,this.getActList()},handleCurrentChange(t){this.queryActParams.pageNo=t,this.getActList()},actHandleSizeChange(t){this.actParams.pageSize=t,this.getAct()},actHandleCurrentChange(t){this.actParams.pageNo=t,this.getAct()},goPut(t){let e=null;e="act-601"==t.form?"/market/actTpl/actSetConfSelf":"/market/actTpl/actSetConf",e+="?form="+t.form+"&tplCode="+t.tplCode,this.$router.push(e)},edit(t,e){let a=null;a="act-601"==e?"/market/actTpl/actSetConfSelf":"/market/actTpl/actSetConf",a+="?form="+e+"&id="+t,this.$router.push(a)},clone(t,e){"act-601"==e?this.$router.push("/market/actTpl/actSetConfSelf?id="+t+"&clone=1&form="+e):this.$router.push("/market/actTpl/actSetConf?id="+t+"&clone=1&form="+e)},async post(t){if("confirm"!==await this.$confirm("确定发布此活动吗？","发布提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消发布"});this.$request.post("/api/wiseqr/act/modifyStatus",{id:t,status:1},!0,t=>{if("200000"==t.ret)return this.$message.success("发布成功"),void this.getActList();this.$message.error(t.message)})},async over(t){if("confirm"!==await this.$confirm("确定要结束此活动吗？结束后活动将会下线哦！","结束提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消"});this.$request.post("/api/wiseqr/act/modifyStatus",{id:t,status:4},!0,t=>{if("200000"==t.ret)return this.$message.success("已结束"),void this.getActList();this.$message.error(t.message)})},async stop(t){if("confirm"!==await this.$confirm("确定要暂停此活动吗？暂停后活动将会下线哦！","暂停提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消"});this.$request.post("/api/wiseqr/act/modifyStatus",{id:t,status:3},!0,t=>{if("200000"==t.ret)return this.$message.success("已暂停"),void this.getActList();this.$message.error(t.message)})},async del(t){if("confirm"!==await this.$confirm("您确定删除这些模板？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消删除"});this.$request.post("/api/wiseqr/act/remBatch",{idArr:[t]},!0,t=>{if("200000"==t.ret)return this.$message.success("删除成功"),void this.getActList();this.$message.error(t.message)})},editTpl(t,e){this.$router.push(this.formPath[t]+e)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actMgr-container"},[a("el-card",[a("el-button",{staticClass:"ml20",attrs:{type:"primary",size:"small"},on:{click:t.addAct}},[t._v("新建活动")]),t._v(" "),a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"选择品牌:"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},on:{change:t.getSonBrandList},model:{value:t.queryActParams.brandCodeArr,callback:function(e){t.$set(t.queryActParams,"brandCodeArr",e)},expression:"queryActParams.brandCodeArr"}},t._l(t.brandList,function(t){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"选择规格:"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},model:{value:t.queryActParams.snArr,callback:function(e){t.$set(t.queryActParams,"snArr",e)},expression:"queryActParams.snArr"}},t._l(t.sonBrandList,function(t){return a("el-option",{key:t.sn,attrs:{label:t.allName,value:t.sn}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"活动状态:"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.queryActParams.status,callback:function(e){t.$set(t.queryActParams,"status",e)},expression:"queryActParams.status"}},t._l(t.actStatusObj,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}))],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"关键词:"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入关键词"},model:{value:t.queryActParams.keywords,callback:function(e){t.$set(t.queryActParams,"keywords",e)},expression:"queryActParams.keywords"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:16,offset:2}},[a("el-form-item",{attrs:{label:"地区:"}},[a("el-select",{attrs:{size:"small",disabled:t.isDisabled,multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.getCityList},model:{value:t.selectProvList,callback:function(e){t.selectProvList=e},expression:"selectProvList"}},t._l(t.provList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-select",{attrs:{size:"small",disabled:t.isDisabled,multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:t.selectArea},model:{value:t.selectCityList,callback:function(e){t.selectCityList=e},expression:"selectCityList"}},t._l(t.cityList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),t._v(" "),a("el-checkbox",{attrs:{size:"small",label:"全部地区",border:""},model:{value:t.isDisabled,callback:function(e){t.isDisabled=e},expression:"isDisabled"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.queryActParams.saleZoneCode,callback:function(e){t.$set(t.queryActParams,"saleZoneCode",e)},expression:"queryActParams.saleZoneCode"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"时间段:"}},[a("el-date-picker",{attrs:{size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.actTime,callback:function(e){t.actTime=e},expression:"actTime"}})],1)],1),t._v(" "),a("el-col",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.queryActList}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.resetForm}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-card",{staticClass:"mt20"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.actList,border:"",stripe:!0}},[a("el-table-column",{attrs:{type:"index",width:"50px",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"actCode",label:"活动ID",align:"center",width:"180px"}}),t._v(" "),a("el-table-column",{attrs:{property:"hdCode",label:"活动编号",align:"center",width:"180px"}}),t._v(" "),a("el-table-column",{attrs:{property:"saleZoneCode",label:"销区",align:"center",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.getSaleZoneName(e.row.saleZoneCode))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"actName",label:"活动名称",align:"center ",width:"200px"}}),t._v(" "),a("el-table-column",{attrs:{label:"活动时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.stimeStr)+"至"+t._s(e.row.etimeStr)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"statusName",label:"状态",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"260px"},scopedSlots:t._u([{key:"default",fn:function(e){return[4!=e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.edit(e.row.id,e.row.form)}}},[t._v("编辑")]):t._e(),t._v(" "),2==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.post(e.row.id)}}},[t._v("发布")]):t._e(),t._v(" "),3==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.post(e.row.id)}}},[t._v("发布")]):t._e(),t._v(" "),a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.clone(e.row.id,e.row.form)}}},[t._v("复制")]),t._v(" "),a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.getLogList(e.row.actCode)}}},[t._v("投放日志")]),t._v(" "),1==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.stop(e.row.id)}}},[t._v("暂停")]):t._e(),t._v(" "),1==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.over(e.row.id)}}},[t._v("结束")]):t._e(),t._v(" "),4==e.row.status?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.del(e.row.id)}}},[t._v("删除")]):t._e(),t._v(" "),4!=e.row.status&&0!=e.row.status&&-1==e.row.form.indexOf("act-6")?a("a",{staticStyle:{color:"#347ab7"},attrs:{href:"javascript:;"},on:{click:function(a){t.editTpl(e.row.form,e.row.actCode)}}},[t._v("活动模板")]):t._e()]}}])})],1),t._v(" "),t.actForms?a("el-pagination",{attrs:{background:"","current-page":t.queryActParams.pageNo,"page-size":t.queryActParams.pageSize,layout:"total, prev, pager, next, jumper",total:t.actListTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{visible:t.addActDialogVisible,width:"900px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addActDialogVisible=e}}},[a("div",{staticClass:"act-wrap"},[a("div",{staticClass:"title"},[a("ul",t._l(t.actFormName,function(e,s){return a("li",{key:s,class:s==t.nowActiveIndex?"active":"",on:{click:function(a){t.getCheckedAct(e,s)}}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticStyle:{clear:"both"}})]),t._v(" "),0!==t.actForms.length?a("div",t._l(t.actForms,function(e){return a("div",{key:e.id,staticClass:"act-item"},[a("img",{staticStyle:{height:"282px"},attrs:{src:e.extUrl,alt:e.name}}),t._v(" "),a("p",{staticClass:"act-name"},[t._v(t._s(e.name))]),t._v(" "),a("p",{staticClass:"desc"},[t._v(t._s(e.note?e.note:"暂无活动说明~"))]),t._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.goPut(e)}}},[t._v("投放")])],1)])})):a("div",{staticStyle:{"margin-top":"200px",height:"224px",width:"100%","text-align":"center"}},[t._v("暂无")])]),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:t.actForms,expression:"actForms"}],attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.actParams.pageNo,"page-size":t.actParams.pageSize,layout:"total, prev, pager, next, jumper",total:t.actTotal},on:{"size-change":t.actHandleSizeChange,"current-change":t.actHandleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.putLogVisible,width:"900px","close-on-click-modal":!1},on:{"update:visible":function(e){t.putLogVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:8}},[t._v("\n        投放时间\n        "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){t.logDetail(t.nowActCode,t.putLogTime)}},model:{value:t.putLogTime,callback:function(e){t.putLogTime=e},expression:"putLogTime"}},t._l(t.putTimeList,function(t,e){return a("el-option",{key:e,attrs:{label:new Date(t.time).Format("yyyy-MM-dd hh:mm:ss"),value:t.version}})}))],1),t._v(" "),a("el-col",{attrs:{span:12,offset:3}},[t._v("\n        投放日志\n      ")])],1),t._v(" "),a("div",[a("div",{staticClass:"mt20"},[t._v("常规奖池")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.normalLogList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"奖品数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outNum",label:"已发数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"剩余数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.totalNum-e.row.outNum)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖概率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.probability+"%")+"\n          ")]}}])})],1)],1),t._v(" "),0!=t.firstScanLogList.length?a("div",[a("div",{staticClass:"mt20"},[t._v("首扫奖池")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.normalLogList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"奖品数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outNum",label:"已发数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"剩余数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.totalNum-e.row.outNum)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖概率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.probability+"%")+"\n          ")]}}])})],1)],1):t._e(),t._v(" "),0!=t.nWinLogList.length?a("div",[a("div",{staticClass:"mt20"},[t._v("n次必中奖池")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.normalLogList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"奖品数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outNum",label:"已发数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"剩余数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.totalNum-e.row.outNum)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖概率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.probability+"%")+"\n          ")]}}])})],1)],1):t._e(),t._v(" "),0!=t.fixationLogList.length?a("div",[a("div",{staticClass:"mt20"},[t._v("定投奖池")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.normalLogList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awardName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalNum",label:"奖品数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"outNum",label:"已发数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"剩余数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.totalNum-e.row.outNum)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖概率"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.probability+"%")+"\n          ")]}}])})],1)],1):t._e()],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("4UqE")},"data-v-2b840282",null);e.default=r.exports},gkoZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"dealerMgr",data:()=>({listLoading:!1,authStatusList:[{code:null,name:"全部"},{code:"1",name:"启用"},{code:"2",name:"禁用"}],districtList:[{code:"",name:"全部"},{code:"1",name:"城镇"},{code:"2",name:"乡村"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],filters:{authStatus:null,searchType:"",keywords:"",addrProvince:"",addrCity:"",addrArea:"",orderBy:"1"},newList:[],pageSize:10,pageNo:1,currentPage:1,total:0,batchPass:!0,ids:"",dialogVisible:!1,failReason:"",sellerIds:""}),created(){this.getListNewList(),this.getOneCategory()},methods:{addNewSeller(){this.$router.push({path:"/seller/review/addSeller"})},getOneCategory(){this.$request.post("/fxweb/fxsaas/getProvince",{},!1,t=>{this.cateLvl1List=[...t.data]})},selectBrand1(){this.filters.addrCity="",this.cateLvl2List=[],this.filters.addrArea="",this.cateLvl3List=[],this.getTwoCategory()},getTwoCategory(){""!=this.filters.addrProvince&&this.$request.post("/fxweb/fxsaas/getCity",{parentCode:this.filters.addrProvince},!1,t=>{this.cateLvl2List=[...t.data]})},selectBrand2(){this.filters.addrArea="",this.cateLvl3List=[],this.getThreeCategory()},getThreeCategory(){""!=this.filters.addrCity&&this.$request.post("/fxweb/fxsaas/getCounty",{parentCode:this.filters.addrCity},!1,t=>{this.cateLvl3List=[...t.data]})},getListNewList(){let t={accountStatus:this.filters.authStatus,provinceName:this.filters.addrProvince,cityName:this.filters.addrCity,areaName:this.filters.addrArea,orderBy:this.filters.orderBy,pageNo:this.pageNo,pageSize:10};this.filters.searchType&&this.filters.keywords&&(t[this.filters.searchType]=this.filters.keywords),this.postSearch(t)},postSearch(t){this.$request.post("/fxweb/fxsaas/getApprovaledSalers",t,!0,t=>{console.log(t.data),this.newList=t.data.listData,this.total=t.data.pageResult.count,this.pageNo=t.data.pageResult.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getListNewList()},getStatus(){this.filters.authStatus="1",this.filters.searchType="",this.filters.keywords="",this.filters.addrProvince="",this.filters.addrCity="",this.filters.addrArea="",this.filters.orderBy="1",this.pageNo=1,this.currentPage=1,this.getListNewList()},querySellerFans(t){this.filters.orderBy=t,this.pageNo=1,this.currentPage=1,this.getListNewList()},inputWithSelectChange(t){this.filters.keywords=""},approval(t){let e={salerId:t,accountStatus:1};this.$confirm("您确定启用此商户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/fxweb/fxsaas/updateSalers",e,!0,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.getListNewList()):this.$message({message:t.message,type:"warning"})})})},disapproval(t){let e={salerId:t,accountStatus:2};this.$confirm("您确定禁用此商户吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/fxweb/fxsaas/updateSalers",e,!0,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.failReason="",this.getListNewList()):this.$message({message:t.message,type:"warning"})})})},cancelDialog(){this.dialogVisible=!1,this.failReason=""},sellerDetail(t){this.$router.push({path:"/distribution/dealerDetail?salerId="+t})},jumpTo(){this.$emit("current-change")},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getListNewList()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"review-manage-container"},[a("div",{staticClass:"box-container"},[a("div",{staticClass:"add-new-seller"},[a("el-button",{staticStyle:{display:"none","margin-bottom":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.addNewSeller()}}},[t._v("新建零售户")])],1),t._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"80px"}},[a("el-form-item",{attrs:{size:"small",label:"状态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.authStatus,callback:function(e){t.$set(t.filters,"authStatus",e)},expression:"filters.authStatus"}},t._l(t.authStatusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"位置：",prop:"addrProvince"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.addrProvince,callback:function(e){t.$set(t.filters,"addrProvince",e)},expression:"filters.addrProvince"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrCity"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.filters.addrCity,callback:function(e){t.$set(t.filters,"addrCity",e)},expression:"filters.addrCity"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrArea"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.filters.addrArea,callback:function(e){t.$set(t.filters,"addrArea",e)},expression:"filters.addrArea "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"关键词："}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.filters.keywords,callback:function(e){t.$set(t.filters,"keywords",e)},expression:"filters.keywords"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.inputWithSelectChange},slot:"prepend",model:{value:t.filters.searchType,callback:function(e){t.$set(t.filters,"searchType",e)},expression:"filters.searchType"}},[a("el-option",{attrs:{label:"经销商姓名",value:"salerName"}}),t._v(" "),a("el-option",{attrs:{label:"推荐人",value:"higherName"}}),t._v(" "),a("el-option",{attrs:{label:"手机号",value:"phoneNo"}}),t._v(" "),a("el-option",{attrs:{label:"微信ID",value:"wxOpenId"}})],1)],1)],1),t._v(" "),a("div"),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"30px"},attrs:{span:24}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(1)}}},[t._v("按申请成功时间")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(2)}}},[t._v("按团队数量排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(3)}}},[t._v("按积累佣金排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(3)}}},[t._v("按可提现金额排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(3)}}},[t._v("按已提现金额排序")])],1),t._v(" "),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.newList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"salerName",label:"经销商姓名",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"手机号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"region",width:"200",label:"位置"}}),t._v(" "),a("el-table-column",{attrs:{prop:"invitCode",label:"推荐码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"higherName",label:"推荐人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalIncome",label:"累积佣金"}}),t._v(" "),a("el-table-column",{attrs:{prop:"balance",width:"100",label:"可提现金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalPay",width:"100",label:"已提现金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"teamAcount",label:"团队数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"申请时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"申请通过时间",width:"200",prop:"appPassTime"}}),t._v(" "),a("el-table-column",{attrs:{prop:"authStatus",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.accountStatus?a("span",[t._v(t._s("启用"))]):"2"==e.row.accountStatus?a("span",[t._v(t._s("禁用"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.sellerDetail(e.row.salerId)}}},[t._v("查看详情")]),t._v(" "),"1"==e.row.accountStatus?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.disapproval(e.row.salerId)}}},[t._v("禁用")]):t._e(),t._v(" "),"2"==e.row.accountStatus?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){t.approval(e.row.salerId)}}},[t._v("启用")]):t._e()]}}])})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"请输入不通过理由",visible:t.dialogVisible,width:"30%","before-close":t.cancelDialog},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.failReason,callback:function(e){t.failReason=e},expression:"failReason"}}),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.disapproval}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("+y4z"),a("yuvq")},"data-v-13a4dbca",null);e.default=r.exports},hqvV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["orderCode"],name:"ActOrderPageDetail",data:()=>({allProvinceData:[],allCityData:[],allDistrictData:[],selectallPro:"",selectallCity:"",selectallDistrict:"",formDetail:{orderId:"",create_time:"",category:"",awardName:"",score:"",username:"",mobile:"",province:"",city:"",district:"",address:"",status:1,ctime:"",lmobile:"",jmcnl:"",nickName:"",orderStatus:"",orderWLoad:"",waybill:"",finish_time:"",orderFLoad:""}}),created(){this.getObjectPageDetail(this.orderCode),this.init()},watch:{selectallPro(t,e){t&&t!=e&&(this.formDetail.province=t,this.allMoreRightRegionList(t,2))},selectallCity(t,e){t&&t!=e&&(this.formDetail.city=t,this.allMoreRightRegionList(t,3))},selectallDistrict(t,e){t&&t!=e&&(this.formDetail.district=t)}},methods:{init(){this.allRightRegionList()},allRightRegionList(){this.$request.post("/api/wiseqr/dim/regionByPCode",{service:"browser"},!0,t=>{console.log(t.data),"200000"===t.ret&&(this.allProvinceData=t.data)})},allMoreRightRegionList(t,e){this.$request.post("/api/wiseqr/dim/regionByPCode",{parentCode:t},!0,t=>{"200000"===t.ret&&(2==e&&(this.allCityData=t.data),3==e&&(this.allDistrictData=t.data))})},submitFormSave(){let t={userName:this.formDetail.username,mobile:this.formDetail.lmobile,province:this.formDetail.province,city:this.formDetail.city,district:this.formDetail.district,adddress:this.formDetail.address,orderId:this.formDetail.orderId};this.$request.post("/sc/saotx/mall/order/actModifyReceiptInfo",t,!0,t=>{"200000"==t.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnObjectPage()):this.$message({message:t.message,type:"warning"})},t=>{})},returnObjectPage(){this.$router.push({path:"/Orders/mall/act"})},getObjectPageDetail(t){this.$request.post("/sc/saotx/mall/order/selfActOrderDetail",{orderId:t},!0,t=>{"200000"==t.ret&&(console.log(t.data),this.formDetail.orderId=t.data.orderInfo.orderid,this.formDetail.create_time=this.formatDateTime(t.data.orderInfo.create_time),this.formDetail.category=t.data.orderInfo.category,this.formDetail.awardName=t.data.orderInfo.awardName,this.formDetail.score=t.data.orderInfo.score,this.formDetail.status=t.data.orderInfo.status,this.formDetail.mobile=t.data.orderInfo.mobile,this.formDetail.jmcnl=t.data.orderInfo.jmcnl,this.formDetail.nickName=t.data.orderInfo.nickName,this.formDetail.lmobile=t.data.ReceiptInfo.lmobile,this.formDetail.username=t.data.ReceiptInfo.username,this.formDetail.province=t.data.ReceiptInfo.province,this.selectallPro=t.data.ReceiptInfo.province+"",this.formDetail.city=t.data.ReceiptInfo.city,this.selectallCity=t.data.ReceiptInfo.city+"",this.formDetail.district=t.data.ReceiptInfo.district,this.selectallDistrict=t.data.ReceiptInfo.district+"",this.formDetail.address=t.data.ReceiptInfo.address,""!=t.data.orderTrackingInfo.ctime&&(this.formDetail.ctime=this.formatDateTime(t.data.orderTrackingInfo.ctime)),this.formDetail.orderStatus=t.data.orderTrackingInfo.orderStatus,this.formDetail.orderWLoad=t.data.orderTrackingInfo.orderWLoad,this.formDetail.waybill=t.data.orderTrackingInfo.waybill,this.formDetail.finish_time=this.formatDateTime(t.data.orderTrackingInfo.finish_time),this.formDetail.orderFLoad=t.data.orderTrackingInfo.orderFLoad)})},formatDateTime(t){if(null!=t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var i=e.getDate();i=i<10?"0"+i:i;var r=e.getHours();r=r<10?"0"+r:r;var l=e.getMinutes(),o=e.getSeconds();return a+"-"+s+"-"+i+" "+r+":"+(l=l<10?"0"+l:l)+":"+(o=o<10?"0"+o:o)}}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分商城/自建订单明细/订单明细查询")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("div",[a("h1",[t._v("订单信息")])]),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formDetail}},[a("el-row",[a("el-form-item",{attrs:{size:"small",label:"订单号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderId,callback:function(e){t.$set(t.formDetail,"orderId",e)},expression:"formDetail.orderId"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.create_time,callback:function(e){t.$set(t.formDetail,"create_time",e)},expression:"formDetail.create_time"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"活动名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.jmcnl,callback:function(e){t.$set(t.formDetail,"jmcnl",e)},expression:"formDetail.jmcnl"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"中奖人:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.nickName,callback:function(e){t.$set(t.formDetail,"nickName",e)},expression:"formDetail.nickName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"中奖人手机号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.mobile,callback:function(e){t.$set(t.formDetail,"mobile",e)},expression:"formDetail.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"奖项名称:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.awardName,callback:function(e){t.$set(t.formDetail,"awardName",e)},expression:"formDetail.awardName"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("收货人信息")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"联系人姓名:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:1!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.username,callback:function(e){t.$set(t.formDetail,"username",e)},expression:"formDetail.username"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"联系人电话:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:1!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.lmobile,callback:function(e){t.$set(t.formDetail,"lmobile",e)},expression:"formDetail.lmobile"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"收货地址:省:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:1!=t.formDetail.status},model:{value:t.selectallPro,callback:function(e){t.selectallPro=e},expression:"selectallPro"}},t._l(t.allProvinceData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"市:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:1!=t.formDetail.status},model:{value:t.selectallCity,callback:function(e){t.selectallCity=e},expression:"selectallCity"}},t._l(t.allCityData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"区:"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:1!=t.formDetail.status},model:{value:t.selectallDistrict,callback:function(e){t.selectallDistrict=e},expression:"selectallDistrict"}},t._l(t.allDistrictData,function(t,e){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"详细地址:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:1!=t.formDetail.status,placeholder:"请输入内容"},model:{value:t.formDetail.address,callback:function(e){t.$set(t.formDetail,"address",e)},expression:"formDetail.address"}})],1)],1),t._v(" "),a("div",[a("h1",[t._v("订单跟踪")])]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"下单时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.create_time,callback:function(e){t.$set(t.formDetail,"create_time",e)},expression:"formDetail.create_time"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderStatus,callback:function(e){t.$set(t.formDetail,"orderStatus",e)},expression:"formDetail.orderStatus"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{size:"small",label:"发货时间:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.ctime,callback:function(e){t.$set(t.formDetail,"ctime",e)},expression:"formDetail.ctime"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"订单状态:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.orderWLoad,callback:function(e){t.$set(t.formDetail,"orderWLoad",e)},expression:"formDetail.orderWLoad"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"物流号:"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:""},model:{value:t.formDetail.waybill,callback:function(e){t.$set(t.formDetail,"waybill",e)},expression:"formDetail.waybill"}})],1)],1),t._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",disabled:1!=t.formDetail.status},on:{click:t.submitFormSave}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.returnObjectPage}},[t._v("返回列表")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("SLj2")},"data-v-58bfe70b",null);e.default=r.exports},hsYJ:function(t,e){},ihxs:function(t,e){},ipd9:function(t,e){},"iq+h":function(t,e){},j89P:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({loading:!0,info:{id:null,joinEtime:"",actCode:"",redpackMoney:0,lottoryStatus:0},addNum:0,userNum:0,openAwardTime:!1,rules:{actCode:[{required:!0,message:"请输入跑步活动ID",trigger:"blur"}],joinEtime:[{required:!0,message:"请输入结束时间",trigger:"blur"}]}}),created(){this.getInfo()},methods:{getInfo(){this.$request.post("/hbact/saas/runAct/configInfo",{},!0,t=>{if(this.loading=!1,"200"==t.code)return console.log(t.data),t.data.nowConfig&&(this.info=t.data.nowConfig),this.openAwardTime=t.data.openAwardTime,void(this.userNum=t.data.userNum);this.$message.error(t.msg)})},submitForm(t){this.$refs[t].validate(t=>{if(!t)return console.log("error submit!!"),!1;this.save()})},save(){this.loading=!0;let t={id:this.info.id,joinEtime:this.info.joinEtime,actCode:this.info.actCode,redpackMoney:this.info.redpackMoney};this.$request.post("/hbact/saas/runAct/configUpdate",t,!0,t=>{if(this.loading=!1,"200"==t.code)return this.$message.success("保存成功！"),void this.getInfo();this.$message.error(t.msg)})},open(){this.$request.post("/hbact/saas/runAct/awardOpen",{configId:this.info.id},!1,t=>{if("200"==t.code)return this.$message.success(t.msg),void this.getInfo();this.$message.error(t.msg),this.getInfo()})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-col",{staticClass:"mb20"},[a("el-button",{attrs:{type:"primary",disabled:!t.openAwardTime},on:{click:t.open}},[t._v("开奖")]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}}),t._v(" "),1==t.info.lottoryStatus?a("span",[t._v("活动进行中，不可开奖（在结束参与时间后，可操作开奖）")]):t._e(),t._v(" "),2==t.info.lottoryStatus?a("span",[t._v("开奖中")]):t._e(),t._v(" "),3==t.info.lottoryStatus?a("span",[t._v("已开奖")]):t._e(),t._v(" "),4==t.info.lottoryStatus?a("span",[t._v("开奖失败")]):t._e()],1),t._v(" "),a("el-col",{staticClass:"mb20"},[a("div",[t._v("当前已有"),a("span",{staticStyle:{color:"#409EFF"}},[t._v(t._s(t.userNum))]),t._v("人获得瓜分大奖资格")])]),t._v(" "),a("el-col",{staticClass:"mb20"},[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("活动设置：")])]),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.info,rules:t.rules,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"跑步活动ID：",prop:"actCode"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!!t.info.id},model:{value:t.info.actCode,callback:function(e){t.$set(t.info,"actCode",e)},expression:"info.actCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跑步活动结束参与时间：",prop:"joinEtime"}},[a("el-date-picker",{attrs:{disabled:!!t.info.id,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择结束时间"},model:{value:t.info.joinEtime,callback:function(e){t.$set(t.info,"joinEtime",e)},expression:"info.joinEtime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"单个用户可瓜分获得金额：",prop:"redpackMoney"}},[a("el-input-number",{attrs:{disabled:t.info.lottoryStatus>1,step:.01,precision:2,min:0,"controls-position":"right"},model:{value:t.info.redpackMoney,callback:function(e){t.$set(t.info,"redpackMoney",e)},expression:"info.redpackMoney"}}),t._v(" 元\n          ")],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("保存")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("JBIh")},"data-v-0fa4743a",null);e.default=r.exports},j9qG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"CardColletingMgr",components:{},data:()=>({exStime:"",exEtime:"",list:[],form:{num:0,contDay5:0,contDay6:0,contDay7:0},awardType:[{value:1,label:"实物"},{value:3,label:"红包"},{value:6,label:"荷石币"}],awardDemo:{awardType:null,awardName:"",awardPrice:null,awardPic:"",totalNum:null},title:"选择物品",metraList:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,cardNo:null,awardNo:null}),created(){this.getDetail()},mounted(){},methods:{handleSelectChange(t){console.log(t),t.awardName="",t.awardPic="",t.totalNum=null},getDetail(){this.$request.post("/hbact/commucard/saas/queryConfig",{},!0,t=>{if("200"==t.code)return this.exStime=t.data.exConfig.exStime||"",this.exEtime=t.data.exConfig.exEtime||"",this.list=t.data.mainConfig,void this.list.map((t,e)=>{if(t.awardConf.length<3){let e=t.awardConf.length;for(let a=0;a<3;a++)a>e-1&&t.awardConf.push({awardType:null,awardName:"",awardPrice:null,awardPic:"",totalNum:null})}});this.$message.error(t.msg)})},dayscanUpdate(){let t=this.list.map((t,e)=>{let a=[];return t.awardConf.forEach((t,e)=>{if(t.awardType){if(!t.awardName)throw this.$message.error("请完善配置的奖品信息！"),"请完善配置的奖品信息3!";if(!t.awardPrice){if(0==t.awardPrice)throw this.$message.error("奖品面额不能为0！"),"请完善配置的奖品信息2!";throw this.$message.error("请完善配置的奖品信息！"),"请完善配置的奖品信息2!"}if(t.totalNum>0)a.push(t);else{if(!t.id)throw this.$message.error("配置的奖品数量不能为0！"),"请完善配置的奖品信息1!";a.push(t)}}}),{cardConf:t.cardConf,awardConf:a}});return console.log(t),new Promise((e,a)=>{this.$request.post("/hbact/commucard/saas/setConfig",t,!0,t=>{e(t)})})},handleSave(){Promise.all([this.dayscanUpdate()]).then(([t])=>{"200"==t.code?(console.log(t.data),this.$message.success("保存成功！"),this.getDetail()):this.$message.error(t.msg)})},configTime(){this.$request.post("hbact/commucard/saas/exchange/config",{exStime:this.exStime,exEtime:this.exEtime},!1,t=>{"200"===t.code?this.$message.success("保存成功！"):this.$message.error(t.message)})},getList(t,e,a){"1"==t?(this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t&&(this.params.metraFlag="cdDisc",this.title="选择折扣卡"),-1!=e&&(this.cardNo=e),void 0!=a&&-1!=a&&(this.awardNo=a),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.metraList=[],this.metraList=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})},selectPrize(t,e,a,s){let i=this.list[a];console.log(this.list),i.awardConf[s].awardName=t.name,i.awardConf[s].awardPrice=t.marketMoney,i.awardConf[s].awardPic=t.pic,this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},deleteAward(t){this.$confirm("此操作将删除该奖品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/hbact/commucard/saas/delete",{id:t},!1,t=>{"200"===t.code?(this.$message.success("删除成功！"),this.getDetail()):this.$message.error(t.message)})}).catch(()=>{})},forbiddenAward(t){this.$confirm("此操作将禁用该奖品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/hbact/commucard/saas/ban",{id:t},!1,t=>{"200"===t.code?(this.$message.success("禁用成功！"),this.getDetail()):this.$message.error(t.message)})}).catch(()=>{})},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},addCardNum(t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:e})=>{if(0==e)return this.$message.error("数字不能为0");this.$request.post("/hbact/commucard/saas/card/add",{code:t,addNum:e},!1,t=>{"200"===t.code?(this.$message.success("增库成功"),this.getDetail()):this.$message.error(t.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},addRepertory(t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:e})=>{if(0==e)return this.$message.error("数字不能为0");this.$request.post("/hbact/commucard/saas/stock/add",{id:t,addNum:e},!1,t=>{"200"===t.code?(this.$message.success("增库成功"),this.getDetail()):this.$message.error(t.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sign-container"},[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"18px","font-weight":"bolder"}},[t._v("兑换时间设置")])]),t._v(" "),a("el-form",[a("el-form-item",[a("span",[t._v("选择时间：")]),t._v(" "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.exStime,callback:function(e){t.exStime=e},expression:"exStime"}}),t._v(" "),a("span",[t._v("至")]),t._v(" "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.exEtime,callback:function(e){t.exEtime=e},expression:"exEtime"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:t.configTime}},[t._v("保存")])],1)],1)],1),t._v(" "),t._l(t.list,function(e,s){return a("div",{key:s},[a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"18px","font-weight":"bolder"}},[t._v("卡片"+t._s(s+1)+"设置（卡片兑换时间每月20日-25日）")])]),t._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"名称："}},[t._v("\n          "+t._s(e.cardConf.name)+"\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          投放数量"),a("el-input-number",{attrs:{disabled:"",precision:0,min:0,"controls-position":"right"},model:{value:e.cardConf.totalNum,callback:function(a){t.$set(e.cardConf,"totalNum",a)},expression:"item.cardConf.totalNum"}}),t._v("个\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          剩余数量"+t._s(e.cardConf.totalNum-e.cardConf.outNum)+"个\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          中奖概率"),a("el-input-number",{attrs:{precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.cardConf.prizePert,callback:function(a){t.$set(e.cardConf,"prizePert",a)},expression:"item.cardConf.prizePert"}}),t._v("\n          %\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addCardNum(e.cardConf.code)}}},[t._v("增库")])],1),t._v(" "),t._l(e.awardConf,function(e,i){return[a("div",{staticStyle:{height:"30px","font-size":"18px","line-height":"30px",margin:"30px 0",color:"#409EFF"}},[t._v("奖项"+t._s(i+1)+":")]),t._v(" "),a("el-form-item",{attrs:{label:"奖品类型:"}},[a("el-select",{attrs:{disabled:!!e.id,placeholder:"请选择"},on:{change:function(a){t.handleSelectChange(e)}},model:{value:e.awardType,callback:function(a){t.$set(e,"awardType",a)},expression:"ai.awardType"}},t._l(t.awardType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),e.awardType&&!e.id?a("el-form-item",[a("div",[t._v("选择"+t._s("1"==e.awardType?"实物":"3"==e.awardType?"红包":"荷石币")+":\n              "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:""},on:{click:function(a){t.getList(e.awardType,s,i)}}},[t._v("选择")])],1)]):t._e(),t._v(" "),e.awardType&&e.awardName?a("el-form-item",[1!==e.awardType?a("span",{staticStyle:{"margin-right":"20px"}},[t._v("名称: "+t._s(e.awardName))]):t._e(),t._v("\n              "+t._s(3==e.awardType||6==e.awardType?"面额:":"名称:")+"\n              "),3==e.awardType||6==e.awardType?a("el-input-number",{attrs:{disabled:!!e.id,precision:2,min:0,"controls-position":"right"},model:{value:e.awardPrice,callback:function(a){t.$set(e,"awardPrice",a)},expression:"ai.awardPrice"}}):t._e(),t._v("\n              "+t._s(1==e.awardType?e.awardName:3==e.awardType?"元":"荷石币")+"\n              "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n\n            投放数量"),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"ai.totalNum"}}),t._v("个\n            "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n              剩余"+t._s(e.totalNum-e.outNum)+"个\n            ")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),3==e.awardType?a("span",[t._v("总金额:"+t._s(parseFloat((e.awardPrice*e.totalNum).toPrecision(12)))+"元")]):t._e(),t._v(" "),6==e.awardType?a("span",[t._v("总荷石币:"+t._s(e.awardPrice*e.totalNum))]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e.id)}}},[t._v("增库")])],1):t._e(),t._v(" "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.deleteAward(e.id)}}},[t._v("删除")])],1):t._e(),t._v(" "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.forbiddenAward(e.id)}}},[t._v("禁用")])],1):t._e()],1):t._e()]})],2),t._v(" "),a("div",[a("div",{staticStyle:{height:"30px","font-size":"18px","line-height":"30px",margin:"60px 0 30px",color:"red"}},[t._v("已禁用：")]),t._v(" "),t._l(e.banConf,function(e,s){return a("div",{key:s,staticStyle:{height:"30px","font-size":"16px","line-height":"30px",margin:"30px 0"}},[a("span",{staticStyle:{"margin-right":"20px"}},[t._v("名称:"+t._s(e.awardName))]),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}},[t._v("奖品类型:"+t._s(1==e.awardType?"实物":3==e.awardType?"红包":"积分"))]),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}},[t._v("投放数量:"+t._s(e.totalNum))]),t._v(" "),3==e.awardType||6==e.awardType?a("span",{staticStyle:{"margin-right":"20px"}},[t._v("投放面额:"+t._s(e.awardPrice)+t._s(1==e.awardType?e.awardName:3==e.awardType?"元":"荷石币"))]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}},[t._v("剩余数量:"+t._s(e.totalNum-e.outNum))]),t._v(" "),3==e.awardType?a("span",{staticStyle:{"margin-right":"20px"}},[t._v("总金额:"+t._s(parseFloat((e.awardPrice*e.totalNum).toPrecision(12)))+"元")]):t._e(),t._v(" "),6==e.awardType?a("span",{staticStyle:{"margin-right":"20px"}},[t._v("总荷石币:"+t._s(e.awardPrice*e.totalNum))]):t._e()])})],2)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}})],1)}),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("保存")])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e},close:t.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.metraList,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title,t.cardNo,t.awardNo)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],2)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("ihxs")},"data-v-faa28bf4",null);e.default=r.exports},jPiv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"QAMgr",data:()=>({id:"",actCode:"",strategyArr:{},act:{},title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,hb:[],hsb:[],zkk:[],fbk:[],defaultAwae:{awardPic:"",awardPrice:"",awardType:1,curActive:!0,giveScore:0,guideGzh:0,hasPdMaxOut:!1,hasWarn:!1,integral:null,integralPool:null,integralPoolName:null,integralPoolPic:null,isGiveScore:!1,isGuideGzh:!1,isPdMaxOut:!1,isWarn:!1,n:"",outNum:"",pdMaxOut:"",poolId:1,poolName:"",prizeName:"",probability:"",redMoney:"",redTotalMoney:"",remainNum:0,totalNum:"",warnValue:""}}),created(){this.getActCode()},mounted(){},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return this.awae.redMoney*this.awae.totalNum},set:function(t){}}},methods:{getActCode(){this.$request.post("/hbact/hyr/home/actCode",{actType:6},!1,t=>{if("200"==t.code)return this.actCode=t.data.actCode,this.id=t.data.id,void this.getDetail();this.$message.error(t.msg)})},getDetail(){this.$request.post("/api/wiseqr/act/detail",{id:this.id},!0,t=>{if("200000"==t.ret){this.strategyArr=t.data.strategyArr[0],this.act=t.data.act;let e=this.strategyArr.awardArr;return this.hb=[],this.hsb=[],this.zkk=[],this.fbk=[],void e.forEach((t,e)=>{3==t.awardType?this.hb.push(t):6==t.awardType?this.hsb.push(t):7==t.awardType?this.zkk.push(t):8==t.awardType&&this.fbk.push(t)})}this.$message.error(t.messgae)})},getList(t){"1"==t?(this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==t&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})},addRepertory(t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:e})=>{if(0==e)return this.$message.error("数字不能为0");this.$request.post("/api/wiseqr/act/addNum",{id:t.id,increment:e},!0,t=>{"200000"===t.ret?(this.$message.success("增库成功"),this.getDetail()):this.$message.error(t.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},confirmSubmit(){let t={};t.act={actCode:this.act.actCode,dwnum:this.act.dwnum,id:this.act.id,status:this.act.status},t.strategyArr=[{areas:{provinceArr:this.strategyArr.areas.provinceArr,cityArr:this.strategyArr.areas.cityArr,districtArr:this.strategyArr.areas.districtArr},awardArr:[...this.hb,...this.hsb,...this.zkk,...this.fbk],snArr:this.strategyArr.snArr,brandArr:this.strategyArr.brandArr,tf:{id:this.strategyArr.tf.id,tfCode:this.strategyArr.tf.tfCode},tfType:this.strategyArr.tfType}],this.$request.post("/api/wiseqr/act/somtf",t,!0,t=>{"200000"==t.ret?(this.getDetail(),this.$message({type:"success",message:"操作成功!"})):this.$message.error(t.message)})},selectPrize(t,e){let a=JSON.parse(JSON.stringify(this.defaultAwae));a.awardPic=t.pic,a.poolName=t.name,a.prizeName=t.name,a.poolId=t.id,"选择红包"==e&&(a.awardType=3,this.hb.push(a)),"选择荷石币"==e&&(a.awardType=6,this.hsb.push(a)),"选择折扣卡"==e&&(a.awardType=7,this.zkk.push(a)),"选择翻倍卡"==e&&(a.awardType=8,this.fbk.push(a)),this.listVisible=!1},deleteAward(t,e){this[t].splice(e,1)},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QA-container"},[a("div",[a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("红包：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择红包:"),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:""},on:{click:function(e){t.getList(3)}}},[t._v("选择")])],1),t._v(" "),a("el-form",t._l(t.hb,function(e,s){return a("el-form-item",{key:s,attrs:{label:"名称："}},[t._v("\n          面额 "),a("el-input-number",{attrs:{disabled:!!e.id,precision:2,min:0,"controls-position":"right"},model:{value:e.redMoney,callback:function(a){t.$set(e,"redMoney",a)},expression:"item.redMoney"}}),t._v("元\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          投放数量 "),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          剩余"+t._s(e.totalNum-e.outNum)+"个\n          ")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          总金额:"+t._s(parseFloat((e.redMoney*e.totalNum).toPrecision(12)))+"元\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          中奖概率 "),a("el-input-number",{attrs:{precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.probability,callback:function(a){t.$set(e,"probability",a)},expression:"item.probability"}}),t._v("\n          %\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("hb",s)}}},[t._v("删除")])],1)}))],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("荷石币：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择荷石币:"),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){t.getList(6)}}},[t._v("选择")])],1),t._v(" "),a("el-form",t._l(t.hsb,function(e,s){return a("el-form-item",{key:s,attrs:{label:"名称："}},[t._v("\n          面额 "),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.integral,callback:function(a){t.$set(e,"integral",a)},expression:"item.integral"}}),t._v("荷石币\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          投放数量"),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          剩余"+t._s(e.totalNum-e.outNum)+"个\n          ")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          总荷石币:"+t._s(e.integral*e.totalNum)+"\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          中奖概率"),a("el-input-number",{attrs:{precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.probability,callback:function(a){t.$set(e,"probability",a)},expression:"item.probability"}}),t._v("\n          %\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("hsb",s)}}},[t._v("删除")])],1)}))],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("折扣卡：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择折扣卡:"),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){t.getList(7)}}},[t._v("选择")])],1),t._v(" "),a("el-form",t._l(t.zkk,function(e,s){return a("el-form-item",{key:s,attrs:{label:"名称："}},[a("el-input-number",{attrs:{disabled:!!e.id,step:.01,precision:2,min:0,max:1,"controls-position":"right"},model:{value:e.awardPrice,callback:function(a){t.$set(e,"awardPrice",a)},expression:"item.awardPrice"}}),t._v("折扣卡\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          投放数量"),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          剩余"+t._s(e.totalNum-e.outNum)+"个\n          ")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          中奖概率"),a("el-input-number",{attrs:{precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.probability,callback:function(a){t.$set(e,"probability",a)},expression:"item.probability"}}),t._v("\n          %\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("zkk",s)}}},[t._v("删除")])],1)}))],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("翻倍卡：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择翻倍卡:"),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){t.getList(8)}}},[t._v("选择")])],1),t._v(" "),a("el-form",t._l(t.fbk,function(e,s){return a("el-form-item",{key:s,attrs:{label:"名称："}},[a("el-input-number",{attrs:{disabled:!!e.id,step:.01,precision:2,min:1,"controls-position":"right"},model:{value:e.awardPrice,callback:function(a){t.$set(e,"awardPrice",a)},expression:"item.awardPrice"}}),t._v("翻倍卡\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          投放数量"),a("el-input-number",{attrs:{disabled:!!e.id,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          剩余"+t._s(e.totalNum-e.outNum)+"个\n          ")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          中奖概率"),a("el-input-number",{attrs:{precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.probability,callback:function(a){t.$set(e,"probability",a)},expression:"item.probability"}}),t._v("\n          %\n          "),e.id?a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("fbk",s)}}},[t._v("删除")])],1)}))],1)],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v("保存")])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("4sFC")},"data-v-221fe64d",null);e.default=r.exports},jT2U:function(t,e){},jvRN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data:()=>({activeName:"home",addActParams:{conf:"",form:"act-103",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},iconUrl:[{key:1,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:378"},{key:2,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:379"},{key:3,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:380"},{key:4,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:381"},{key:5,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:382"},{key:6,imgUrl:"http://qoss.qrmkt.cn/new_platform/egg.png",$$hashKey:"object:383"}],configItem:{title:"",description:"",headerImgUrl:"http://qoss.qrmkt.cn/new_platform/egg-title.png",bgImgUrl:"http://qoss.qrmkt.cn/new_platform/eggBg.png",actTip:"http://qoss.qrmkt.cn/new_platform/egg-top.png",awardUrl:[{imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zhongjiang74@2x.png"}],drawBgUrl:"http://qoss.qrmkt.cn/new_platform/egg-award-bg.png",drawImgUrl:"http://qoss.qrmkt.cn/new_platform/award_img.png",drawBtnUrl:"http://qoss.qrmkt.cn/new_platform/egg-award-btn.png",cryImgUrl:"http://qoss.qrmkt.cn/new_platform/egg-no-award-bg.png",cryBtnUrl:"http://qoss.qrmkt.cn/new_platform/egg-no-award-btn.png"},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if(console.log(t),"200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upTipImgSuccess(t){if("200000"===t.ret)return this.configItem.actTip=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.cryBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBtnSuccess(t){if("200000"===t.ret)return this.configItem.drawBtnUrl=t.data.accessUrl;this.$message.error(t.message)},upWinningBgSuccess(t){if("200000"===t.ret)return this.configItem.drawBgUrl=t.data.accessUrl;this.$message.error(t.message)},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content phone"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"game-con"},t._l(t.iconUrl,function(t){return a("div",{key:t.key,staticClass:"game-item"},[a("img",{attrs:{src:t.imgUrl,alt:""}})])})),t._v(" "),a("div",{staticClass:"tip"},[a("img",{attrs:{src:t.configItem.actTip,alt:""},on:{click:function(e){t.showEditConIndex=3}}})])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称",maxLength:"15"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,maxLength:"20",placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},[a("div",[a("p",{staticClass:"img-title"},[t._v("活动说明")]),t._v(" "),a("div",{staticClass:"img-con act-tip-img"},[a("img",{attrs:{src:t.configItem.actTip,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upTipImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)])]):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 580*266px格式为jpg\\bmp\\png\\gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 74*90px格式为jpg\\bmp\\png\\gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con award-con"},[a("img",{staticClass:"award-alert",attrs:{src:t.configItem.drawBgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"award-text"},[a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.drawBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.drawBgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px,格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.drawBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px,格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con award-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"award-alert",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"award-no-text"},[a("h3",[t._v("很遗憾，未中奖")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.cryBtnUrl,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为jpg\\bmp\\png\\gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryBtnUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.upNotWinningBtnSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为jpg\\bmp\\png\\gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放:\n\t\t\t\t\t\t"),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("/mPg")},"data-v-98fe57fa",null);e.default=r.exports},kHzs:function(t,e){},kJOH:function(t,e){},kmEB:function(t,e){t.exports={banner:{"act-100":"https://qoss.qrmkt.cn/saas_platform/common/act_tpl/b-act-100.png","act-101":"https://qoss.qrmkt.cn/saas_platform/common/act_tpl/b-act-101.png","act-102":"https://qoss.qrmkt.cn/saas_platform/common/act_tpl/b-act-102.png","act-103":"https://qoss.qrmkt.cn/saas_platform/common/act_tpl/b-act-103.png"}}},"l6l+":function(t,e){},lZBi:function(t,e){},lbet:function(t,e){},m4K6:function(t,e){},meT9:function(t,e){},nV8W:function(t,e){},om1E:function(t,e){},"p+AY":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={components:{addAct:a("xvlj").default},data:()=>({orgHasSaleZone:sessionStorage.orgHasSaleZone,isAllSaleZone:sessionStorage.isAllSaleZone,saleZoneCode:sessionStorage.saleZoneCode,selectOption:[],saleZone:[],keywords:"",actListParams:{ctime:"",form:"",keywords:"",saleZone:null,pageNo:1,pageSize:10},batchRemoveIdList:[],flag:{},total:null,actList:[],addActDialogVisible:!1,delDialogVisible:!1,actFormName:[{name:"全部",code:""}],nowActiveIndex:0,actParams:{pageNo:1,pageSize:4,pcode:""},actTotal:null,actForms:[],loading:!0,formPath:{"act-101":"/market/actTpl/AddActSudoku?id=","act-102":"/market/actTpl/AddWingAct?id=","act-103":"/market/actTpl/addActEgg?id=","act-104":"/market/actTpl/addActFanpaizi?id=","act-111":"/market/actTpl/addHePiaoXiang?id=","act-112":"/market/actTpl/addRockPaperScissors?id=","act-113":"/market/actTpl/addBoating?id=","act-501":"/market/actTpl/addActQuestion?id=","act-301":"/market/actTpl/addActRedPacked?id=","act-105":"/market/actTpl/addRound?id=","act-100":"/market/actTpl/addAct?id=","act-701":"/market/actTpl/addCapsuleToys?id=","act-702":"/market/actTpl/addDadishu?id=","act-703":"/market/actTpl/addDaqiqiu?id=","act-704":"/market/actTpl/addJiawawa?id=","act-705":"/market/actTpl/addDiaohongbao?id="}}),created(){this.getSaleZone(),this.getActType(),this.getActCodeList()},beforeRouteEnter(t,e,a){a()},beforeRouteLeave(t,e,a){a()},methods:{getSaleZoneName(t){if(!t)return"";let e="",a=this.saleZone.find(e=>{if(e.zoneCode==t)return e});return e=a?a.zoneName:""},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[],1==this.isAllSaleZone?this.getActList():(this.actListParams.saleZone=this.saleZoneCode,this.getActList()))})},getActList(){this.loading=!0,this.$request.post("/api/wiseqr/acttpl/list",this.actListParams,!0,t=>{"200000"===t.ret?(this.actList=t.data.list,this.total=t.data.page.count,this.loading=!1):this.$message.error(t.message)},t=>{console.log(t)})},getActType(){this.$request.post("/api/wiseqr/act/allForms",this.actParams,!0,t=>{"200000"==t.ret?(this.selectOption=t.data.list,this.selectOption.unshift({name:"全部",form:""})):this.$message.error(t.message)},t=>{console.log(t)})},addAct(){this.addActDialogVisible=!0,this.actParams.pcode="",this.actParams.pageNo=1,this.nowActiveIndex=0;const t=this.$loading({target:".el-dialog"});this.getAct(()=>t.close())},getAct(t){this.$request.post("/api/wiseqr/act/allForms",this.actParams,!0,e=>{"200000"==e.ret?(this.actForms=[],this.actForms=e.data.list,this.actTotal=e.data.page.count):this.$message.error(e.message),t&&t()},t=>{console.log(t)})},getActCodeList(){this.$request.post("/api/wiseqr/act/formByPCode",{pCode:"",pageNo:1,pageSize:-1},!0,t=>{"200000"==t.ret?t.data.list.forEach(t=>{"form-cate6"!=t.code&&this.actFormName.push(t)}):this.$message.error(t.message)})},getCheckedAct(t,e){this.nowActiveIndex=e,this.actParams.pcode=t.code,this.actParams.pageNo=1;const a=this.$loading({target:".el-dialog"});this.getAct(()=>a.close())},queryActList(){this.actListParams.pageNo=1,this.getActList()},resetSearch(){this.actListParams.ctime="",this.actListParams.form="",this.actListParams.keywords="",this.actListParams.pageNo=1,1==this.isAllSaleZone&&(this.actListParams.saleZone=null),this.getActList()},async delAct(t){let e=[];if(Array.isArray(t)?e=t:e.push(t),"confirm"!==await this.$confirm("您确定删除此模板？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消删除"});this.$request.post("/api/wiseqr/acttpl/remBatch",{idArr:e},!0,t=>{"200000"===t.ret?(this.$message.success("删除成功"),this.getActList()):this.$message.error(t.message)},t=>{console.log(t)})},async batchDel(){if(0==this.batchRemoveIdList.length)return;if("confirm"!==await this.$confirm("您确定删除"+this.batchRemoveIdList.length+"条模板？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t))return this.$message({type:"info",message:"已取消删除"});this.$request.post("/api/wiseqr/acttpl/remBatch",{idArr:this.batchRemoveIdList},!0,t=>{"200000"===t.ret?(this.$message.success("删除成功"),this.actListParams.ctime="",this.actListParams.form="",this.actListParams.keywords="",this.actListParams.pageNo=1,this.actListParams.pageSize=10,this.getActList()):this.$message.error(t.message)},t=>{console.log(t)})},handleSelectionChange(t){this.batchRemoveIdList=[],t.forEach(t=>{this.batchRemoveIdList.push(t.id)})},handleSelectionAllChange(t){this.batchRemoveIdList=[],t.forEach(t=>{this.batchRemoveIdList.push(t.id)})},handleSizeChange(t){this.actListParams.pageSize=t,this.getActList()},handleCurrentChange(t){this.actListParams.pageNo=t,this.getActList()},actHandleSizeChange(t){this.actParams.pageSize=t,this.getAct()},actHandleCurrentChange(t){this.actParams.pageNo=t,this.getAct()},goAddActTpl(t,e){this.$router.push(this.formPath[t]+e)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actTpl-container"},[a("el-card",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addAct()}}},[t._v("新建活动模板")]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.actListParams,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"模板类型："}},[a("el-select",{attrs:{size:"small"},model:{value:t.actListParams.form,callback:function(e){t.$set(t.actListParams,"form",e)},expression:"actListParams.form"}},t._l(t.selectOption,function(t){return a("el-option",{key:t.form,attrs:{label:t.name,value:t.form}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"创建时间："}},[a("el-col",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",type:"date",placeholder:"开始时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.actListParams.ctime,callback:function(e){t.$set(t.actListParams,"ctime",e)},expression:"actListParams.ctime"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.actListParams.saleZone,callback:function(e){t.$set(t.actListParams,"saleZone",e)},expression:"actListParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"关键词："}},[a("el-input",{attrs:{size:"small",placeholder:"请输入关键词"},model:{value:t.actListParams.keywords,callback:function(e){t.$set(t.actListParams,"keywords",e)},expression:"actListParams.keywords"}})],1)],1),t._v(" "),a("el-col",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.queryActList()}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.resetSearch()}}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("el-card",{staticClass:"mt20"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20",staticStyle:{width:"100%"},attrs:{border:"",data:t.actList},on:{"select-all":t.handleSelectionAllChange,select:t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tplCode",label:"模板编号",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"saleZone",label:"销区",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.getSaleZoneName(e.row.saleZone))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"tplCode",label:"模板编号",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"模板名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"note",label:"模板说明",width:"200",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"创建时间",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"creatorName",label:"创建人",width:"150",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"statusName",label:"状态",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.goAddActTpl(e.row.form,e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.$router.push("/market/actTpl/actSetConf?form="+e.row.form+"&tplCode="+e.row.tplCode)}}},[t._v("投放")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.delAct(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-button",{staticClass:"mt20",attrs:{type:"danger"},on:{click:t.batchDel}},[t._v("批量删除")]),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.actListParams.pageNo,layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{staticClass:"addDialog",attrs:{visible:t.addActDialogVisible,width:"900px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addActDialogVisible=e}}},[a("div",{staticClass:"act-wrap"},[a("div",{staticClass:"title"},[a("ul",t._l(t.actFormName,function(e,s){return a("li",{key:s,class:s==t.nowActiveIndex?"active":"",on:{click:function(a){t.getCheckedAct(e,s)}}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticStyle:{clear:"both"}})]),t._v(" "),0!==t.actForms.length?a("div",t._l(t.actForms,function(e){return"act-601"!=e.code?a("div",{key:e.id,staticClass:"act-item"},[a("img",{staticStyle:{height:"282px"},attrs:{src:e.extUrl,alt:e.name}}),t._v(" "),a("p",[t._v(t._s(e.name)),a("i",{staticClass:"el-icon-circle-plus",on:{click:function(a){t.goAddActTpl(e.code,"")}}})])]):t._e()})):a("div",[t._v("暂无")]),t._v(" "),t.actForms?a("el-col",{attrs:{span:24}},[a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":t.actParams.pageNo,"page-size":t.actParams.pageSize,layout:"total, prev, pager, next, jumper",total:t.actTotal},on:{"size-change":t.actHandleSizeChange,"current-change":t.actHandleCurrentChange}})],1):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("nV8W")},"data-v-77c8c439",null);e.default=r.exports},pKQi:function(t,e){},pNFW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","actCode","form"],data(){return{stepActive:1,keywords:"",tableData:[],loading:!1,max:5,total:10,headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},uploadURL:"/api/wiseqr/actquest/import?actCode="+this.actCode}},watch:{},created(){this.getList()},methods:{myCallback(t){this.page=t,this.getList()},addQues(){this.$router.push("/market/actTpl/quesEdit?id="+this.id+"&actCode="+this.actCode+"&form="+this.form)},reset(){this.page=1,this.keywords="",this.search()},addBatch(t){if("200000"===t.ret)return this.page=1,this.keywords="",this.getList(),this.$message.success("导入成功!");this.$message.error(t.message)},editItem(t){this.$router.push("/market/actTpl/quesEdit?quesId="+t.id+"&id="+this.id+"&actCode="+this.actCode+"&form="+this.form)},search(){this.getList()},removeItem(t){var e=this;this.$confirm("确定要删除该问题？").then(a=>{e.deleteQues(t)}).catch(t=>{})},deleteQues(t){this.$request.post("/api/wiseqr/actquest/delete",{actQuest:{id:t.id,quesId:t.quesId,actCode:t.actCode,quesTitle:t.quesTitle,quesType:t.quesType},actAnsw:t.actAnsw},!0,t=>{if("200000"==t.ret)return this.$message.success("删除成功!"),void this.getList();this.$message.error(t.messgae)})},getList(){this.$request.post("/api/wiseqr/actquest/list",{pageNo:this.page,pageSize:this.max,keywords:this.keywords,actCode:this.actCode},!0,t=>{if("200000"==t.ret)return this.total=t.data.page.count,void(this.tableData=t.data.list);this.$message.error(t.messgae)})},getDetail(){this.id&&this.$request.post("/api/wiseqr/act/detail",{id:this.id},!0,t=>{if("200000"==t.ret){if("1"==this.clone){for(let e in this.confData)this.confData[e]=t.data.act[e];console.log(this.confData)}else this.confData=t.data.act;return this.confData.idx=this.confData.idx+"",this.actTime.push(this.confData.stimeStr),void this.actTime.push(this.confData.etimeStr)}this.$message.error(t.messgae)})},nextStep(){this.$router.push("/market/actTpl/actPutConf?id="+this.id+"&actCode="+this.actCode+"&form="+this.form)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ques-list-root"},[a("el-card",[a("el-steps",{staticClass:"step-style",attrs:{active:t.stepActive,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基础设置"}}),t._v(" "),a("el-step",{attrs:{title:"题目设置"}}),t._v(" "),a("el-step",{attrs:{title:"投放设置"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addQues()}}},[t._v("新增题目")]),t._v(" "),a("el-upload",{staticClass:"upload-txt",attrs:{action:t.uploadURL,headers:t.headerObj,"on-success":t.addBatch,accept:".xlsx","show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("批量导入")])],1),t._v(" "),a("br"),t._v("\n           \t 关键字："),a("el-input",{staticClass:"keywords",attrs:{size:"small",placeholder:"请输入关键词"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._v(" "),a("el-button",{staticClass:"search",attrs:{type:"primary",size:"small"},on:{click:function(e){t.search()}}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"search",attrs:{type:"primary",size:"small"},on:{click:function(e){t.reset()}}},[t._v("重置")])],1),t._v(" "),a("el-card",{staticClass:"table-part"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"quesTitle",label:"题目名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"expand",label:"答案"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"题目名称："}},[a("span",[t._v(t._s(e.row.quesTitle))])]),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"题目答案："}}),t._v(" "),a("ul",{staticClass:"aws-part"},t._l(e.row.actAnsw,function(e,s){return a("li",{key:s},[t._v(t._s(e.answName)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.answFlag,expression:"item.answFlag==1"}]})])}))],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.editItem(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.removeItem(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{staticClass:"pagination-css",attrs:{layout:"total,prev, pager, next,jumper",background:"",total:t.total,"page-size":t.max},on:{"current-change":t.myCallback}}),t._v(" "),a("div",{staticClass:"next-div"},[a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("下一步")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("l6l+")},"data-v-497107d3",null);e.default=r.exports},pUAY:function(t,e){},"qE/q":function(t,e){},qVdV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["salerId"],name:"",data:()=>({loading:!0,form:{}}),created(){console.log(this.salerId),this.getReviewDetail()},methods:{getReviewDetail(){this.$request.post("/fxweb/fxsaas/getSalerDetail",{salerId:this.salerId},!0,t=>{t.ok&&(this.loading=!1,this.form=t.data)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"basic-msg-container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"basic-msg-broad"},[a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("经销商姓名：")]),t._v(t._s(t.form.salerName))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("手机号：")]),t._v(t._s(t.form.phoneNo))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("微信ID：")]),t._v(t._s(t.form.wxId?t.form.wxId:""))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("位置：")]),t._v(t._s(t.form.provinceName)+t._s(t.form.cityName)+t._s(t.form.areaName))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("推荐人：")]),t._v(t._s(t.form.higherName))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("推荐码：")]),t._v(t._s(t.form.invitCode))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("团队数量：")]),t._v(t._s(t.form.teamAcount)+"人")]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("累积金额：")]),t._v("￥"+t._s(t.form.totalIncome))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("可提现金额：")]),t._v("￥"+t._s(t.form.balance))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("已提现金额：")]),t._v("￥"+t._s(t.form.totalPay))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("申请时间：")]),t._v(t._s(t.form.ctime))]),t._v(" "),a("div",{staticClass:"basic-msg-item"},[a("span",{staticClass:"title"},[t._v("申请通过时间：")]),t._v(t._s(t.form.appPassTime))])])])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("zV6/"),a("rGrB")},"data-v-68378bc1",null).exports,l={props:["salerId","returnPath"],name:"SellerManage",data:()=>({listLoading:!1,filters:{orderBy:1},fansList:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.querySellerFans()},methods:{querySellerFans(t){let e={salerId:this.salerId,orderBy:this.filters.orderBy,pageNo:this.pageNo,pageSize:10};t&&(e.orderBy=t,e.pageNo=1,this.pageNo=1,this.filters.orderBy=t),this.postSearch(e)},postSearch(t){this.$request.post("/fxweb/fxsaas/getTeamList",t,!0,t=>{console.log(t.data),this.fansList=t.data.listData,this.total=t.data.pageResult.count,this.pageNo=t.data.pageResult.pageNo})},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.querySellerFans()},returnMgr(){this.$router.push({path:this.returnPath})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"90px"}},[a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(1)}}},[t._v("按申请成功时间")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(2)}}},[t._v("按团队数量排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(3)}}},[t._v("按积累佣金排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(3)}}},[t._v("按可提现金额排序")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.querySellerFans(3)}}},[t._v("按已提现金额排序")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.fansList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"wxId",label:"微信ld",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"salerName",label:"经销商姓名",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"手机号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"微信号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"region",width:"200",label:"位置"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.provinceName)+t._s(e.row.cityName)+t._s(e.row.areaName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"invitCode",label:"推荐码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalIncome",label:"累积佣金"}}),t._v(" "),a("el-table-column",{attrs:{prop:"balance",width:"100",label:"可提现金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalPay",width:"100",label:"已提现金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"申请时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"appPassTime",label:"申请通过时间",width:"200"}})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.returnMgr}},[t._v("返回列表")])],1)],1)])},staticRenderFns:[]};var n=a("VU/8")(l,o,!1,function(t){a("F91P"),a("jT2U")},"data-v-63dbbe9a",null).exports,c={props:["salerId","returnPath"],name:"SellerManage",data:()=>({listLoading:!1,showMyTeam:!1,filters:{source:"0",time:[]},myTeam:[],newFxlist:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.getNewFxlist()},methods:{getNewFxlist(){let t={salerId:this.salerId,source:this.filters.source,startTime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endTime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};this.postSearch(t)},postSearch(t){this.$request.post("/fxweb/fxsaas/getMyCommission",t,!0,t=>{console.log(t.data),this.newFxlist=t.data.listData,this.total=t.data.pageResult.count,this.pageNo=t.data.pageResult.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getNewFxlist()},getStatus(){this.filters.source=0,this.filters.time=[],this.pageNo=1,this.currentPage=1,this.getNewFxlist()},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getNewFxlist()},returnMgr(){this.$router.push({path:this.returnPath})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"90px"}},[a("el-form-item",{attrs:{size:"small",label:"佣金来源："}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:t.filters.source,callback:function(e){t.$set(t.filters,"source",e)},expression:"filters.source"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"我的返佣",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"团队返佣",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"时间区间："}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filters.time,callback:function(e){t.$set(t.filters,"time",e)},expression:"filters.time"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.newFxlist}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"抢购人",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"手机号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"微信号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"region",label:"位置",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sourceDesc",label:"佣金来源",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reward",label:"佣金金额",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.reward))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"下单时间\t"}})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.returnMgr}},[t._v("返回列表")])],1)],1)])},staticRenderFns:[]};var m=a("VU/8")(c,d,!1,function(t){a("pUAY"),a("lbet")},"data-v-601e898a",null).exports,p={props:["salerId","returnPath"],name:"SellerManage",data:()=>({listLoading:!1,typeList:[{code:null,name:"全部"},{code:"1",name:"申请中"},{code:"2",name:"已到账"},{code:"3",name:"申请失败"},{code:"4",name:"审核通过"}],filters:{type:null,time:[]},accountFlowList:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.getAccountFlowList()},methods:{getAccountFlowList(){let t={salerId:this.salerId,appStatus:this.filters.type,startTime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endTime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};this.postSearch(t)},postSearch(t){this.$request.post("/fxweb/fxsaas/getMyWithDraw",t,!0,t=>{console.log(t.data),this.accountFlowList=t.data.listData,this.total=t.data.pageResult.count,this.pageNo=t.data.pageResult.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getAccountFlowList()},getStatus(){this.filters.type=null,this.filters.time=[],this.pageNo=1,this.currentPage=1,this.getAccountFlowList()},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getAccountFlowList()},returnMgr(){this.$router.push({path:this.returnPath})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"90px"}},[a("el-form-item",{attrs:{size:"small",label:"提现状态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.type,callback:function(e){t.$set(t.filters,"type",e)},expression:"filters.type"}},t._l(t.typeList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"时间区间："}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filters.time,callback:function(e){t.$set(t.filters,"time",e)},expression:"filters.time"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.accountFlowList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"txTime",label:"申请时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"txAmount",label:"提现金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.txAmount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"txStatus",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"finishTime",label:"到账时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"failReason",label:"备注"}})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.returnMgr}},[t._v("返回列表")])],1)],1)])},staticRenderFns:[]};var g=a("VU/8")(p,u,!1,function(t){a("yV9O"),a("ipd9")},"data-v-194d37ed",null).exports,h={props:["salerId","returnPath"],name:"SellerManage",data:()=>({listLoading:!1,awardTypeList:[{code:null,name:"全部"},{code:"1",name:"待支付"},{code:"2",name:"待发货"},{code:"3",name:"待收货"},{code:"4",name:"已完成"},{code:"5",name:"已取消"}],filters:{orderStatus:null,time:[]},scanInstoreList:[],pageSize:10,pageNo:1,currentPage:1,total:0}),created(){this.getScanInstoreList()},methods:{getScanInstoreList(){let t={salerId:this.salerId,orderStatus:this.filters.orderStatus,startTime:this.filters.time&&this.filters.time[0]?this.filters.time[0]:"",endTime:this.filters.time&&this.filters.time[1]?this.filters.time[1]:"",pageNo:this.pageNo,pageSize:10};this.postSearch(t)},postSearch(t){this.$request.post("/fxweb/fxsaas/getMyOrders",t,!0,t=>{console.log(t.data),this.scanInstoreList=t.data.listData,this.total=t.data.pageResult.count,this.pageNo=t.data.pageResult.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getScanInstoreList()},getStatus(){this.filters.orderStatus=null,this.filters.time=[],this.pageNo=1,this.currentPage=1,this.getScanInstoreList()},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getScanInstoreList()},returnMgr(){this.$router.push({path:this.returnPath})}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"seller-manage-container"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"90px"}},[a("el-form-item",{attrs:{size:"small",label:"订单状态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.orderStatus,callback:function(e){t.$set(t.filters,"orderStatus",e)},expression:"filters.orderStatus"}},t._l(t.awardTypeList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"时间区间："}},[a("el-date-picker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.filters.time,callback:function(e){t.$set(t.filters,"time",e)},expression:"filters.time"}})],1),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.scanInstoreList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"微信号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"buyNum",label:"收货地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addrDetail",label:"数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"支付金额"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("￥"+t._s(e.row.amount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderStatus",label:"支付状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.orderStatus?a("span",[t._v(t._s("待支付"))]):2==e.row.orderStatus?a("span",[t._v(t._s("待发货"))]):3==e.row.orderStatus?a("span",[t._v(t._s("待收货"))]):4==e.row.orderStatus?a("span",[t._v(t._s("已完成"))]):5==e.row.orderStatus?a("span",[t._v(t._s("已取消"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"下单时间"}})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.returnMgr}},[t._v("返回列表")])],1)],1)])},staticRenderFns:[]};var f={name:"DealerDetail",props:["salerId"],components:{DealerMsg1:r,DealerMsg2:n,DealerMsg3:m,DealerMsg4:g,DealerMsg5:a("VU/8")(h,v,!1,function(t){a("/xda"),a("yoed")},"data-v-0a04ac1a",null).exports},data:()=>({activeName:"1",returnPath:"/distribution/dealerMgr"}),methods:{handleClick(t,e){console.log(t,e)}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"seller-detail-container"},[a("dealer-msg1",{attrs:{salerId:t.salerId,returnPath:t.returnPath}}),t._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"TA的团队",name:"1"}},[a("dealer-msg2",{attrs:{salerId:t.salerId,returnPath:t.returnPath}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"佣金明细",name:"2"}},[a("dealer-msg3",{attrs:{salerId:t.salerId,returnPath:t.returnPath}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"提现记录",name:"3"}},[a("dealer-msg4",{attrs:{salerId:t.salerId,returnPath:t.returnPath}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"推广订单明细",name:"4"}},[a("dealer-msg5",{attrs:{salerId:t.salerId,returnPath:t.returnPath}})],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(f,b,!1,function(t){a("4We/")},"data-v-4525aa3c",null);e.default=_.exports},qrNY:function(t,e){},rGrB:function(t,e){},rXYb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"SystemMgr",data:()=>({ruleForm:{radio:"0",aaa:""}})},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"SystemMgr-container"},[a("el-form",[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("申请经销商设置：")])]),t._v(" "),a("el-form-item",{attrs:{label:"申请经销商时，推荐码是否为必填："}},[a("el-radio-group",{model:{value:t.ruleForm.radio,callback:function(e){t.$set(t.ruleForm,"radio",e)},expression:"ruleForm.radio"}},[a("el-radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:"0"}},[t._v("否")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("返佣金额设置：")])]),t._v(" "),a("el-form-item",{attrs:{label:"一级经销商返佣金："}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{precision:2,min:0,"controls-position":"right"},model:{value:t.ruleForm.aaa,callback:function(e){t.$set(t.ruleForm,"aaa",e)},expression:"ruleForm.aaa"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"二级经销商返佣金："}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{precision:2,min:0,"controls-position":"right"},model:{value:t.ruleForm.aaa,callback:function(e){t.$set(t.ruleForm,"aaa",e)},expression:"ruleForm.aaa"}})],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("提现申请阀值设置：")])]),t._v(" "),a("el-form-item",{attrs:{label:"提现需申请阀值金额："}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{precision:2,min:0,"controls-position":"right"},model:{value:t.ruleForm.aaa,callback:function(e){t.$set(t.ruleForm,"aaa",e)},expression:"ruleForm.aaa"}})],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("div"),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){}}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:function(t){}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("x3Il")},"data-v-7bf266ca",null);e.default=r.exports},rpCy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"PicturePuzzleMgr",data(){return{loading:!1,uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},id:"",actCode:"",newAct:!0,brandList:[],brandListReadOnly:[],act:{},config:{id:"",stime:"",etime:"",dayAwardNum:"",weekOutNum:"",weekInNum:"",cardImg1:"",cardName1:"",cardDesc1:"",card1Id:"",cardImg2:"",cardName2:"",cardDesc2:"",card2Id:"",cardImg3:"",cardName3:"",cardDesc3:"",card3Id:"",cardImg4:"",cardName4:"",cardDesc4:"",card4Id:""},confRules:{date:[{required:!0,validator:(t,e,a)=>{this.config.stime&&this.config.etime?this.config.stime>=this.config.etime?a(new Error("开始时间必须小于结束时间")):a():a(new Error("请选择活动时间"))},trigger:"change"}],dayAwardNum:[{required:!0,validator:(t,e,a)=>{this.config.dayAwardNum?a():0==this.config.dayAwardNum?a(new Error("每天可抽奖次数不能为0")):a(new Error("请输入每天可抽奖次数"))},trigger:"blur"}],weekOutNum:[{required:!0,validator:(t,e,a)=>{this.config.weekOutNum?a():0==this.config.weekOutNum?a(new Error("每周可转赠次数不能为0")):a(new Error("请输入每周可转赠次数"))},trigger:"blur"}],weekInNum:[{required:!0,validator:(t,e,a)=>{this.config.weekInNum?a():0==this.config.weekInNum?a(new Error("每周可接受次数不能为0")):a(new Error("请输入每周可接受次数"))},trigger:"blur"}],cardImg1:[{required:!0,message:"请上传卡片图片",trigger:"change"}],cardName1:[{required:!0,message:"请输入卡片名称",trigger:"blur"}],cardDesc1:[{required:!0,message:"请输入卡片介绍",trigger:"blur"}],cardImg2:[{required:!0,message:"请上传卡片图片",trigger:"change"}],cardName2:[{required:!0,message:"请输入卡片名称",trigger:"blur"}],cardDesc2:[{required:!0,message:"请输入卡片介绍",trigger:"blur"}],cardImg3:[{required:!0,message:"请上传卡片图片",trigger:"change"}],cardName3:[{required:!0,message:"请输入卡片名称",trigger:"blur"}],cardDesc3:[{required:!0,message:"请输入卡片介绍",trigger:"blur"}],cardImg4:[{required:!0,message:"请上传卡片图片",trigger:"change"}],cardName4:[{required:!0,message:"请输入卡片名称",trigger:"blur"}],cardDesc4:[{required:!0,message:"请输入卡片介绍",trigger:"blur"}],redpackValue:[{required:!0,validator:(t,e,a)=>{0==e?a(new Error("请输入红包金额")):a()},trigger:"blur"}],scoreValue:[{required:!0,validator:(t,e,a)=>{0==e?a(new Error("请输入荷石币数量")):a()},trigger:"blur"}],cardValue:[{required:!0,validator:(t,e,a)=>{0==e?a(new Error("请输入折扣卡数量")):a()},trigger:"blur"}],totalNum:[{required:!0,validator:(t,e,a)=>{0==e?a(new Error("请输入投放数量")):a()},trigger:"blur"}]},snConf:[{snInfo:[],cardInfo:[],cardsLength:0}],snConfIndex:"",snRules:{snInfo:[{required:!0,validator:(t,e,a)=>{e.length<1?a(new Error("请选择规格")):a()},trigger:"change"}],cardsLength:[{required:!0,validator:(t,e,a)=>{0==e?a(new Error("请选择卡片")):a()},trigger:"change"}]},cardsRules:{cardName:[{required:!0,message:"请选择卡片",trigger:"change"}],totalNum:[{required:!0,validator:(t,e,a)=>{e+""=="0"?a(new Error("请输入投放数量")):a()},trigger:"change"}],prizePert:[{required:!0,validator:(t,e,a)=>{e?a():a(new Error("请输入中奖概率"))},trigger:"change"}]},title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,pintuConfig:"",pintuCardBases:[],pintuGroupSettings:[],pintuPrizes:[],hb:[],hsb:[],zkk:[],fbk:[],defaultAwae:{awdCode:"",awdPicture:"",awdName:"",awdType:1,scoreValue:null,redpackValue:"",cardValue:"",totalNum:"",outNum:"",poolId:1},cardListVisible:!1,cardList:[],multipleSelection:""}},created(){this.getDetail(),this.getBrandList()},mounted(){},computed:{residue:{get:function(){return this.awae.totalNum-this.awae.outNum},set:function(t){}},totalRed:{get:function(){return this.awae.redpackValue*this.awae.totalNum},set:function(t){}}},methods:{add(t){this.snConfIndex=t;let e=[];this.snConf[this.snConfIndex].cardInfo.forEach(t=>{this.cardList.forEach((a,s)=>{a.id==t.cardId&&e.push(a)})}),this.cardListVisible=!0,this.$nextTick(()=>{e.forEach(t=>{this.$refs.multipleTable.toggleRowSelection(t)})})},handleSelectionChange(t){this.multipleSelection=t},toggleSelection(){this.$refs.multipleTable.clearSelection(),this.cardListVisible=!1},handleSelectCards(){this.multipleSelection||(this.multipleSelection=[]);let t=this.snConf[this.snConfIndex].cardInfo.map(t=>t.cardId),e=[];console.log(t),this.multipleSelection.forEach(a=>{if(t.includes(a.id)){let t=this.snConf[this.snConfIndex].cardInfo.find(t=>a.id==t.cardId);e.push(t)}else e.push({actId:a.actId,cardId:a.id,totalNum:"",cardName:a.cardName,outNum:"",prizePert:""})}),this.snConf[this.snConfIndex].cardInfo=[...e],this.snConf[this.snConfIndex].cardsLength=this.multipleSelection.length,this.toggleSelection()},handleRemoveTag(t){let e=[];this.snConf.forEach(t=>{t.snInfo.map(t=>{e.push(t)})}),console.log(e),this.brandList=this.brandListReadOnly.filter(t=>!e.includes(t.sn))},handleVisbleChange(t){if(!t){let t=[];this.snConf.forEach(e=>{e.snInfo.map(e=>{t.push(e)})}),this.brandList=this.brandListReadOnly.filter(e=>!t.includes(e.sn))}},uploadImgUrlSuccess(t,e){return"200000"===t.ret&&console.log(`cardImg${e}`),this.config[`cardImg${e}`]=t.data.accessUrl},getBrandList(){this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:["BRAND-7D41JAAAAA"],pageSize:"-1"},!0,t=>{if("200000"===t.ret)return this.brandList=t.data.list.map(t=>({sn:t.sn,productName:t.allName})),void(this.brandListReadOnly=t.data.list.map(t=>({sn:t.sn,productName:t.allName})));this.$message.error(t.message)})},getCardList(){this.$request.get("/hbact/hyr/ptsaas/cardBase/show",{actId:this.config.id},t=>{"200"!==t.code?this.$message.error(t.message):this.cardList=t.data})},getDetail(){this.loading=!0,this.$request.post("/hbact/hyr/ptsaas/actInfo/show",{id:this.id},!0,t=>{if(this.loading=!1,"200"==t.code){if(t.data.canModify||(this.newAct=!1),this.pintuConfig=t.data.pintuConfig,t.data.pintuConfig&&(this.config.stime=t.data.pintuConfig.stime,this.config.etime=t.data.pintuConfig.etime,this.config.dayAwardNum=t.data.pintuConfig.dayAwardNum,this.config.weekOutNum=t.data.pintuConfig.weekOutNum,this.config.weekInNum=t.data.pintuConfig.weekInNum,t.data.pintuConfig.id&&(this.config.id=t.data.pintuConfig.id,this.getCardList())),this.pintuCardBases=t.data.pintuCardBases,t.data.pintuCardBases&&4==t.data.pintuCardBases.length&&(this.config.cardImg1=t.data.pintuCardBases[0].cardImg,this.config.cardName1=t.data.pintuCardBases[0].cardName,this.config.cardDesc1=t.data.pintuCardBases[0].cardDesc,this.config.card1Id=t.data.pintuCardBases[0].id,this.config.cardImg2=t.data.pintuCardBases[1].cardImg,this.config.cardName2=t.data.pintuCardBases[1].cardName,this.config.cardDesc2=t.data.pintuCardBases[1].cardDesc,this.config.card2Id=t.data.pintuCardBases[1].id,this.config.cardImg3=t.data.pintuCardBases[2].cardImg,this.config.cardName3=t.data.pintuCardBases[2].cardName,this.config.cardDesc3=t.data.pintuCardBases[2].cardDesc,this.config.card3Id=t.data.pintuCardBases[2].id,this.config.cardImg4=t.data.pintuCardBases[3].cardImg,this.config.cardName4=t.data.pintuCardBases[3].cardName,this.config.cardDesc4=t.data.pintuCardBases[3].cardDesc,this.config.card4Id=t.data.pintuCardBases[3].id),this.pintuGroupSettings=t.data.pintuGroupSettings,t.data.pintuPrizes&&t.data.pintuPrizes.length&&(this.snConf=t.data.pintuGroupSettings,this.snConf.forEach((t,e)=>{this.snConf[e].cardsLength=t.cardInfo.length})),this.pintuPrizes=t.data.pintuPrizes,!t.data.pintuPrizes||!t.data.pintuPrizes.length)return;let e=this.pintuPrizes;return this.hb=[],this.hsb=[],this.zkk=[],this.fbk=[],void e.forEach((t,e)=>{3==t.awdType?this.hb.push(t):6==t.awdType?this.hsb.push(t):7==t.awdType?this.zkk.push(t):8==t.awdType&&this.fbk.push(t)})}this.$message.error(t.msg)})},getList(t){"1"==t?(this.params.metraFlag="object",this.title="选择实物"):"2"==t?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==t?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==t?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==t?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==t&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),this.$request.post("/api/wiseqr/metra/list",this.params,!0,t=>{if("200000"===t.ret)return this.list=[],this.list=t.data.list,this.listTotal=t.data.page.count,void(this.listVisible=!0);this.$message.error(t.message)})},handleBaseSave(){this.$refs.actSetConfRef.validate(t=>{if(t){let t={pintuConfig:{stime:this.config.stime,etime:this.config.etime,weekOutNum:this.config.weekOutNum,weekInNum:this.config.weekInNum,dayAwardNum:this.config.dayAwardNum},pintuCardBases:[{cardDesc:this.config.cardDesc1,cardImg:this.config.cardImg1,cardName:this.config.cardName1},{cardDesc:this.config.cardDesc2,cardImg:this.config.cardImg2,cardName:this.config.cardName2},{cardDesc:this.config.cardDesc3,cardImg:this.config.cardImg3,cardName:this.config.cardName3},{cardDesc:this.config.cardDesc4,cardImg:this.config.cardImg4,cardName:this.config.cardName4}]};this.config.id&&(t.pintuConfig.id=this.config.id,t.pintuCardBases.forEach((t,e)=>{t.actId=this.config.id,t.id=this.config[`card${e+1}Id`]})),console.log(t),this.$request.post("/hbact/hyr/ptsaas/actInfo/baseSave",t,!0,t=>{"200"===t.code?(this.$message.success("保存成功"),this.getDetail()):this.$message.error(t.msg)})}})},addRepertory(t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入大于0的整数"}).then(({value:e})=>{if(console.log(e),0==e)return this.$message.error("数字必须大于0");this.$request.post("/hbact/hyr/ptsaas/actInfo/prizeStockAdd",{id:t.id,addNum:e},!0,t=>{"200"===t.code?(this.$message.success("增库成功"),this.getDetail()):this.$message.error(t.msg)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},addCardRepertory(t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入大于0的整数"}).then(({value:e})=>{if(console.log(e),0==e)return this.$message.error("数字必须大于0");this.$request.post("/hbact/hyr/ptsaas/actInfo/cardStockAdd",{id:t.id,addNum:e},!0,t=>{"200"===t.code?(this.$message.success("增库成功"),this.getDetail()):this.$message.error(t.msg)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},confirmSubmit(){let t=!0;if(this.$refs.hbConfRef&&this.$refs.hbConfRef.forEach(e=>{e.validate(e=>{e||(t=!1)})}),this.$refs.hsbConfRef&&this.$refs.hsbConfRef.forEach(e=>{e.validate(e=>{e||(t=!1)})}),this.$refs.zkkConfRef&&this.$refs.zkkConfRef.forEach(e=>{e.validate(e=>{e||(t=!1)})}),this.$refs.fbkConfRef&&this.$refs.fbkConfRef.forEach(e=>{e.validate(e=>{e||(t=!1)})}),this.$refs.awardConf.forEach(e=>{e.validate(e=>{e||(t=!1)})}),this.$refs.cardsConf.forEach(e=>{e.validate(e=>{e||(t=!1)})}),t){let t=[...this.hb,...this.hsb,...this.zkk,...this.fbk];if(0==t.length)return void this.$message.error("请配置奖池");t.forEach((e,a)=>{t[a].actId=this.config.id});let e={actId:this.config.id,pintuGroupSettings:this.snConf.map(t=>({snInfo:t.snInfo,cardInfo:t.cardInfo})),pintuPrizes:t};console.log(e),this.$request.post("/hbact/hyr/ptsaas/actInfo/cardAwardSave",e,!0,t=>{"200"===t.code?(this.$message.success("保存成功"),this.getDetail(),this.getBrandList()):this.$message.error(t.msg)})}},selectPrize(t,e){let a=JSON.parse(JSON.stringify(this.defaultAwae));a.awdPicture=t.pic,a.awdName=t.name,a.poolId=t.id,a.awdCode=t.id,"选择红包"==e&&(a.awdType=3,this.hb.push(a)),"选择荷石币"==e&&(a.awdType=6,this.hsb.push(a)),"选择折扣卡"==e&&(a.awdType=7,this.zkk.push(a)),"选择翻倍卡"==e&&(a.awdType=8,this.fbk.push(a)),this.listVisible=!1},deleteAward(t,e){this[t].splice(e,1)},handSizeChange(t){this.params.pageSize=t,this.getList()},handCurrentChange(t){this.params.pageNo=t,this.getList()},addItem(){this.snConf.push({snInfo:[],cardInfo:[],cardsLength:0})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"QA-container"},[a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("基本设置：")])]),t._v(" "),a("el-form",{ref:"actSetConfRef",attrs:{"label-width":"100px",model:t.config,rules:t.confRules}},[a("el-form-item",{attrs:{label:"活动时间：",prop:"date"}},[a("el-date-picker",{attrs:{disabled:!t.newAct,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.config.stime,callback:function(e){t.$set(t.config,"stime",e)},expression:"config.stime"}}),t._v("\n            至\n            "),a("el-date-picker",{attrs:{disabled:!t.newAct,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择结束时间"},model:{value:t.config.etime,callback:function(e){t.$set(t.config,"etime",e)},expression:"config.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"抽奖限制：",prop:"dayAwardNum"}},[t._v("\n            每人每天前\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.dayAwardNum,callback:function(e){t.$set(t.config,"dayAwardNum",e)},expression:"config.dayAwardNum"}}),t._v("\n            次抽奖可获得卡片\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"转赠限制：",prop:"weekOutNum"}},[t._v("\n            每人每周可转赠\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.weekOutNum,callback:function(e){t.$set(t.config,"weekOutNum",e)},expression:"config.weekOutNum"}}),t._v("\n            张卡片\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"收卡限制：",prop:"weekInNum"}},[t._v("\n            每人每周可接收\n            "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:t.config.weekInNum,callback:function(e){t.$set(t.config,"weekInNum",e)},expression:"config.weekInNum"}}),t._v("\n            张卡片\n          ")],1),t._v(" "),a("el-form-item",{attrs:{"label-width":"auto",label:"卡片设置：(上传卡片图片尺寸313x313px)",prop:""}}),t._v(" "),a("div",{staticStyle:{width:"1120px"}},[a("div",{staticStyle:{overflow:"auto"}},[a("el-form-item",{staticStyle:{width:"120px",float:"left"},attrs:{"label-width":"0px",prop:"cardImg1"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.config.cardImg1,callback:function(e){t.$set(t.config,"cardImg1",e)},expression:"config.cardImg1"}}),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadURL,headers:t.headerObj,disabled:!t.newAct,"on-success":function(e){t.uploadImgUrlSuccess(e,"1")},"show-file-list":!1}},[t.config.cardImg1?a("img",{staticClass:"avatar",attrs:{src:t.config.cardImg1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("div",{staticStyle:{width:"430px",float:"left","margin-right":"20px"}},[a("el-form-item",{attrs:{label:"卡片名称：",prop:"cardName1"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"10",disabled:!t.newAct},model:{value:t.config.cardName1,callback:function(e){t.$set(t.config,"cardName1",e)},expression:"config.cardName1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"卡片介绍：",prop:"cardDesc1"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",maxlength:"100",disabled:!t.newAct},model:{value:t.config.cardDesc1,callback:function(e){t.$set(t.config,"cardDesc1",e)},expression:"config.cardDesc1"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"120px",float:"left"},attrs:{"label-width":"0px",prop:"cardDesc2"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.config.cardImg2,callback:function(e){t.$set(t.config,"cardImg2",e)},expression:"config.cardImg2"}}),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadURL,headers:t.headerObj,disabled:!t.newAct,"on-success":function(e){t.uploadImgUrlSuccess(e,"2")},"show-file-list":!1}},[t.config.cardImg2?a("img",{staticClass:"avatar",attrs:{src:t.config.cardImg2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("div",{staticStyle:{width:"430px",float:"left"}},[a("el-form-item",{attrs:{label:"卡片名称：",prop:"cardName2"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"10",disabled:!t.newAct},model:{value:t.config.cardName2,callback:function(e){t.$set(t.config,"cardName2",e)},expression:"config.cardName2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"卡片介绍：",prop:"cardDesc2"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",maxlength:"100",disabled:!t.newAct},model:{value:t.config.cardDesc2,callback:function(e){t.$set(t.config,"cardDesc2",e)},expression:"config.cardDesc2"}})],1)],1)],1)]),t._v(" "),a("div",{staticStyle:{width:"1120px"}},[a("div",{staticStyle:{overflow:"auto"}},[a("el-form-item",{staticStyle:{width:"120px",float:"left"},attrs:{"label-width":"0px",prop:"cardImg3"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.config.cardImg3,callback:function(e){t.$set(t.config,"cardImg3",e)},expression:"config.cardImg3"}}),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadURL,headers:t.headerObj,disabled:!t.newAct,"on-success":function(e){t.uploadImgUrlSuccess(e,"3")},"show-file-list":!1}},[t.config.cardImg3?a("img",{staticClass:"avatar",attrs:{src:t.config.cardImg3}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("div",{staticStyle:{width:"430px",float:"left","margin-right":"20px"}},[a("el-form-item",{attrs:{label:"卡片名称：",prop:"cardName3"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"10",disabled:!t.newAct},model:{value:t.config.cardName3,callback:function(e){t.$set(t.config,"cardName3",e)},expression:"config.cardName3"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"卡片介绍：",prop:"cardDesc3"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",maxlength:"100",disabled:!t.newAct},model:{value:t.config.cardDesc3,callback:function(e){t.$set(t.config,"cardDesc3",e)},expression:"config.cardDesc3"}})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{width:"120px",float:"left"},attrs:{"label-width":"0px",prop:"cardImg4"}},[a("el-input",{staticStyle:{display:"none"},model:{value:t.config.cardImg4,callback:function(e){t.$set(t.config,"cardImg4",e)},expression:"config.cardImg4"}}),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadURL,headers:t.headerObj,disabled:!t.newAct,"on-success":function(e){t.uploadImgUrlSuccess(e,"4")},"show-file-list":!1}},[t.config.cardImg4?a("img",{staticClass:"avatar",attrs:{src:t.config.cardImg4}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("div",{staticStyle:{width:"430px",float:"left"}},[a("el-form-item",{attrs:{label:"卡片名称：",prop:"cardName4"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"10",disabled:!t.newAct},model:{value:t.config.cardName4,callback:function(e){t.$set(t.config,"cardName4",e)},expression:"config.cardName4"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"卡片介绍：",prop:"cardDesc4"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",maxlength:"100",disabled:!t.newAct},model:{value:t.config.cardDesc4,callback:function(e){t.$set(t.config,"cardDesc4",e)},expression:"config.cardDesc4"}})],1)],1)],1)])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.newAct,expression:"newAct"}],staticStyle:{height:"40px","text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleBaseSave}},[t._v("保存")])],1)],1),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("规格设置：")])]),t._v(" "),a("div",[t.newAct?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addItem}},[t._v("新增规格")]):t._e()],1),t._v(" "),t._l(t.snConf,function(e,s){return[a("div",{staticStyle:{height:"30px","font-size":"18px","line-height":"30px",margin:"20px",color:"#409EFF"}},[t._v("\n          规格设置"+t._s(s+1)+":\n        ")]),t._v(" "),a("el-form",{ref:"awardConf",refInFor:!0,attrs:{model:e,"label-width":"150px",rules:t.snRules,disabled:!t.newAct}},[a("el-form-item",{attrs:{label:"关联规格：",prop:"snInfo"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:"",placeholder:"请选择"},on:{"remove-tag":t.handleRemoveTag,"visible-change":t.handleVisbleChange},model:{value:e.snInfo,callback:function(a){t.$set(e,"snInfo",a)},expression:"item.snInfo"}},t._l(t.brandList,function(t){return a("el-option",{key:t.sn,attrs:{label:t.productName,value:t.sn}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"选择卡片：",prop:"cardsLength"}},[a("el-button",{on:{click:function(e){t.add(s)}}},[t._v("选择")]),t._v(" "),a("el-input",{staticStyle:{width:"300px",display:"none"},attrs:{disabled:""},model:{value:e.cardsLength,callback:function(a){t.$set(e,"cardsLength",a)},expression:"item.cardsLength"}})],1),t._v(" "),a("div"),t._v(" "),t._l(e.cardInfo,function(e,s){return[a("el-form",{ref:"cardsConf",refInFor:!0,attrs:{model:e,"label-width":"150px",rules:t.cardsRules}},[a("el-form-item",{attrs:{label:"卡片名称：",prop:"cardName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!t.newAct,readonly:""},model:{value:e.cardName,callback:function(a){t.$set(e,"cardName",a)},expression:"card.cardName"}})],1),t._v(" "),a("div",{staticStyle:{overflow:"auto",height:"60px"}},[a("div",{staticStyle:{float:"left"}},[a("el-form-item",{attrs:{label:"投放数量：",prop:"totalNum"}},[a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"card.totalNum"}}),t._v("个\n                    "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n                      剩余"+t._s(e.totalNum-(e.outNum?e.outNum:0))+"个\n                    ")])],1)],1),t._v(" "),a("div",{staticStyle:{float:"left"}},[a("el-form-item",{attrs:{label:"中奖概率：",prop:"prizePert"}},[a("el-input-number",{attrs:{disabled:!t.newAct,precision:1,step:.1,min:0,"controls-position":"right"},model:{value:e.prizePert,callback:function(a){t.$set(e,"prizePert",a)},expression:"card.prizePert"}}),t._v("%\n                  ")],1)],1),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addCardRepertory(e)}}},[t._v("增库")])],1)])],1)]})],2),t._v(" "),s>0&&t.newAct?a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{size:"mini",type:"danger"},on:{click:function(e){t.deleteAward("snConf",s)}}},[t._v("删除规格")]):t._e()]})],2),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("奖池设置：")])]),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("红包：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择红包:"),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"",disabled:!t.newAct},on:{click:function(e){t.getList(3)}}},[t._v("选择")])],1),t._v(" "),t._l(t.hb,function(e,s){return a("el-form",{key:s,ref:"hbConfRef",refInFor:!0,attrs:{inline:!0,"label-width":"100px",model:e,rules:t.confRules}},[a("el-form-item",{attrs:{label:"名称：",prop:"redpackValue"}},[t._v("\n            面额 "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:2,min:0,"controls-position":"right"},model:{value:e.redpackValue,callback:function(a){t.$set(e,"redpackValue",a)},expression:"item.redpackValue"}}),t._v("元\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量：",prop:"totalNum"}},[a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n          ")],1),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n              剩余"+t._s(e.totalNum-e.outNum)+"个\n            ")]),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          总金额:"+t._s(parseFloat((e.redpackValue*e.totalNum).toPrecision(12)))+"元\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),t.newAct?a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("hb",s)}}},[t._v("删除")]):t._e()],1)})],2),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("荷石币：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择荷石币:"),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:!t.newAct},on:{click:function(e){t.getList(6)}}},[t._v("选择")])],1),t._v(" "),t._l(t.hsb,function(e,s){return a("el-form",{key:s,ref:"hsbConfRef",refInFor:!0,attrs:{inline:!0,"label-width":"100px",model:e,rules:t.confRules}},[a("el-form-item",{attrs:{label:"名称：",prop:"scoreValue"}},[t._v("\n            面额 "),a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:e.scoreValue,callback:function(a){t.$set(e,"scoreValue",a)},expression:"item.scoreValue"}}),t._v("荷石币\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量：",prop:"totalNum"}},[a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n          ")],1),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n            剩余"+t._s(e.totalNum-e.outNum)+"个\n            ")]),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n          总荷石币:"+t._s(e.scoreValue*e.totalNum)+"\n          "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),t.newAct?a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("hsb",s)}}},[t._v("删除")]):t._e()],1)})],2),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("折扣卡：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择折扣卡:"),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:!t.newAct},on:{click:function(e){t.getList(7)}}},[t._v("选择")])],1),t._v(" "),t._l(t.zkk,function(e,s){return a("el-form",{key:s,ref:"zkkConfRef",refInFor:!0,attrs:{inline:!0,"label-width":"100px",model:e,rules:t.confRules}},[a("el-form-item",{attrs:{label:"名称：",prop:"cardValue"}},[a("el-input-number",{attrs:{disabled:!t.newAct,step:.01,precision:2,min:0,max:1,"controls-position":"right"},model:{value:e.cardValue,callback:function(a){t.$set(e,"cardValue",a)},expression:"item.cardValue"}}),t._v("折扣卡\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量：",prop:"totalNum"}},[a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n          ")],1),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n            剩余"+t._s(e.totalNum-e.outNum)+"个\n            ")]),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),t.newAct?a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("zkk",s)}}},[t._v("删除")]):t._e()],1)})],2),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("el-card",{attrs:{"body-style":{padding:"20px"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("翻倍卡：")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("选择翻倍卡:"),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:!t.newAct},on:{click:function(e){t.getList(8)}}},[t._v("选择")])],1),t._v(" "),t._l(t.fbk,function(e,s){return a("el-form",{key:s,ref:"fbkConfRef",refInFor:!0,attrs:{inline:!0,"label-width":"100px",model:e,rules:t.confRules}},[a("el-form-item",{attrs:{label:"名称：",prop:"cardValue"}},[a("el-input-number",{attrs:{disabled:!t.newAct,step:.01,precision:2,min:1,"controls-position":"right"},model:{value:e.cardValue,callback:function(a){t.$set(e,"cardValue",a)},expression:"item.cardValue"}}),t._v("翻倍卡\n          ")],1),t._v(" "),a("el-form-item",{attrs:{label:"投放数量：",prop:"totalNum"}},[a("el-input-number",{attrs:{disabled:!t.newAct,precision:0,min:0,"controls-position":"right"},model:{value:e.totalNum,callback:function(a){t.$set(e,"totalNum",a)},expression:"item.totalNum"}}),t._v("个\n          ")],1),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v("\n            剩余"+t._s(e.totalNum-e.outNum)+"个\n            ")]),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),t.newAct?t._e():a("span",[a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.addRepertory(e)}}},[t._v("增库")])],1),t._v(" "),a("span",{staticStyle:{"margin-right":"20px"}}),t._v(" "),t.newAct?a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteAward("fbk",s)}}},[t._v("删除")]):t._e()],1)})],2),t._v(" "),a("div",{staticStyle:{height:"30px"}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.newAct,expression:"newAct"}],staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSubmit}},[t._v("保存")])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.listVisible,width:"800px"},on:{"update:visible":function(e){t.listVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.pic,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.selectPrize(e.row,t.title)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":t.params.pageNo,"page-size":t.params.pageSize,layout:"total, prev, pager, next, jumper",total:t.listTotal},on:{"size-change":t.handSizeChange,"current-change":t.handCurrentChange}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1),t._v(" "),a("el-dialog",{attrs:{title:"选择卡片",visible:t.cardListVisible,width:"800px"},on:{"update:visible":function(e){t.cardListVisible=e},close:t.toggleSelection}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.cardList,border:"",stripe:!0},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cardName",label:"卡片名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"卡片图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.cardImg,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cardDesc",label:"卡片介绍",align:"center"}})],1),t._v(" "),a("div",{staticStyle:{height:"40px","text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSelectCards}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:""},on:{click:t.toggleSelection}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("tkAb"),a("Wm6k")},"data-v-414e655a",null);e.default=r.exports},rwsO:function(t,e){},tFn2:function(t,e){},tkAb:function(t,e){},tssb:function(t,e){},u14k:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("G0J2"),i=a("kmEB"),r=a.n(i),l={props:["form","tplCode","id","clone"],components:{quillEditor:s.quillEditor},data(){return{isAllSaleZone:sessionStorage.isAllSaleZone,showSaleZone:!0,showNoneActTag:!1,pickerOptions:{},editorOption:{modules:{toolbar:[[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike",,"blockquote"],[{color:[]},{background:[]},{align:[]}]]},placeholder:"请输入活动说明"},extInfo:{limited:1,time:60},idxSelect:{},confData:{actTag:null,actDesc:"",actName:"",banner:"",form:"",idx:"1",note:"",stimeStr:"",etimeStr:"",showStatus:1,tplCode:"",extInfo:"",number:"",status:"",saleZoneFlag:1,saleZoneCode:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],actTagGroup:[],redConf:{joinNum:1,share:0},confRules:{actName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],note:[{required:!0,message:"请输入活动描述",trigger:"blur"}],saleZoneCode:[{required:!0,message:"请选择销区",trigger:"change"}],actTag:[{required:!0,validator:(t,e,a)=>{this.confData.saleZoneCode&&null==e?a(new Error("请选择活动标签")):a()},trigger:"change"}],date:[{required:!0,validator:(t,e,a)=>{if(this.confData.stimeStr&&this.confData.etimeStr)if(this.confData.stimeStr>=this.confData.etimeStr)a(new Error("开始时间必须小于结束时间"));else if(this.confData.saleZoneFlag){let t=new Date(this.confData.stimeStr).getMonth(),e=new Date(this.confData.stimeStr).getFullYear();t<3?new Date(this.confData.etimeStr).getTime()>new Date(`${e}-04-01 00:00:00`)?a(new Error("配置销区活动时间不支持跨季度")):a():t>=3&&t<6?new Date(this.confData.etimeStr).getTime()>new Date(`${e}-07-01 00:00:00`)?a(new Error("配置销区活动时间不支持跨季度")):a():t>=6&&t<9?new Date(this.confData.etimeStr).getTime()>new Date(`${e}-10-01 00:00:00`)?a(new Error("配置销区活动时间不支持跨季度")):a():t>=9&&(new Date(this.confData.etimeStr).getTime()>new Date(`${e+1}-01-01 00:00:00`)?a(new Error("配置销区活动时间不支持跨季度")):a())}else a();else a(new Error("请选择活动时间"))},trigger:"change"}],idx:[{required:!0,validator:(t,e,a)=>{"0"==e?a(new Error("请选择活动优先级")):a()},trigger:"change"}],banner:[{required:!0,validator:(t,e,a)=>{this.confData.banner?a():a(new Error("请选择活动图片"))}}],desc:[{required:!0,validator:(t,e,a)=>{this.confData.actDesc?a():a(new Error("请输入活动说明"))}}],number:[{required:!0,validator:(t,e,a)=>{this.redConf.joinNum?a():a(new Error("请输入参与次数"))}}],isShare:[{required:!0,validator:(t,e,a)=>{a()}}]},timeDisable:!1,uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},stepActive:0,shareAct:{"act-701":1,"act-702":1,"act-703":1,"act-704":1,"act-705":1,"act-301":1,"act-111":1,"act-112":1,"act-113":1}}},created(){},watch:{showSaleZone(t,e){t?this.confData.saleZoneFlag=1:(this.confData.saleZoneCode=null,this.confData.saleZoneFlag=0,this.getActTag())}},mounted(){if(this.id){const t=this.$loading({target:".actSetConf-container"});this.getDetail(()=>t.close())}else this.confData.banner=r.a.banner[this.form],this.getActTag();this.getIdxSelect(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActTag(){this.id?this.$request.post("/api/actTag/query/saleZoneTag",{saleZoneCode:null},!1,t=>{if("200"==t.code){let e=t.data.tagList.find(t=>t.id==this.confData.actTag);this.actTagGroup=e?[e]:[]}}):this.$request.post("/api/actTag/query/saleZoneTag",{saleZoneCode:this.confData.saleZoneCode},!1,t=>{"200"==t.code&&(this.actTagGroup=t.data.tagList||[])})},handleChangeSaleZone(t){this.confData.actTag=null,this.getActTag()},datetime_to_unix(t){var e=t.replace(/:/g,"-"),a=(e=e.replace(/ /g,"-")).split("-"),s=new Date(Date.UTC(a[0],a[1]-1,a[2],a[3]-8,a[4],a[5]));return parseInt(s.getTime())},limitNum(){if(this.extInfo.time.length>4){var t=this.extInfo.time.slice(0,4);this.extInfo.time=parseInt(t)}},getDetail(t){this.$request.post("/api/wiseqr/act/detail",{id:this.id},!0,e=>{if("200000"==e.ret){if("1"==this.clone)for(let t in this.confData)this.confData[t]=e.data.act[t],this.confData.etimeStr&&this.datetime_to_unix(this.confData.etimeStr)<Date.now()&&(console.log(Date.now()>Date.parse(new Date(this.confData.etimeStr))),this.confData.etimeStr=""),this.pickerOptions={disabledDate:t=>t.getTime()<=Date.now()};else this.confData=e.data.act;return e.data.act.saleZoneFlag||(this.showSaleZone=!1),this.shareAct[this.form]&&(this.redConf=this.confData.extInfo?JSON.parse(this.confData.extInfo):""),this.confData.idx=this.confData.idx+"",this.redConf.extInfo&&(this.extInfo=this.confData.extInfo?JSON.parse(this.confData.extInfo):""),this.confData.stimeStr&&this.confData.etimeStr&&this.handleDisableTime(),"act-501"==this.form&&(this.extInfo=this.confData.extInfo?JSON.parse(this.confData.extInfo):{limited:1,time:60}),this.getActTag(),this.confData.actTag||(this.showNoneActTag=!0),void(t&&t())}t&&t(),this.$message.error(e.message)})},handleDisableTime(){(new Date).getTime()>=new Date(this.confData.stimeStr).getTime()&&1==this.confData.status&&(this.timeDisable=!0),"1"==this.clone&&(this.timeDisable=!1)},getIdxSelect(){this.$request.post("/api/wiseqr/act/idxSelect",{},!0,t=>{if("200000"===t.ret)return this.idxSelect=t.data})},upBannerImg(t){if("200000"===t.ret)return this.confData.banner=t.data.accessUrl,void this.$refs.actSetConfRef.validateField("banner",t=>{});this.$message.error(t.message)},onEditorBlur(){this.$refs.actSetConfRef.validateField("desc",t=>{})},nextStep(){this.$refs.actSetConfRef.validate(t=>t?"act-501"==this.form&&1==this.extInfo.limited&&(this.extInfo.time<=0||!this.extInfo.time)?this.$message.error("请填写时间限制的具体值!"):(this.id?"act-501"==this.form&&(this.confData.extInfo=JSON.stringify(this.extInfo)):(this.confData.form=this.form,"act-501"==this.form&&(this.confData.extInfo=JSON.stringify(this.extInfo)),this.confData.tplCode=this.tplCode),this.shareAct[this.form]&&(this.confData.extInfo=JSON.stringify(this.redConf)),void this.$request.post("/api/wiseqr/act/saveOrModify",this.confData,!0,t=>{if("200000"===t.ret)return"act-501"==this.form?this.$router.push("/market/actTpl/quesActSetConf?id="+t.data.id+"&actCode="+t.data.actCode+"&form="+this.form):"act-301"==this.form?this.$router.push(`/market/actTpl/redPut?id=${t.data.id}&actCode=${t.data.actCode}`):this.$router.push("/market/actTpl/actPutConf?id="+t.data.id+"&actCode="+t.data.actCode+"&form="+this.form);this.$message.error(t.message)})):this.$message.error("请完善表单数据!"))},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),e&&a},back(){this.id?this.$router.back():this.$router.push("/market/actTpl")}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"actSetConf-container"},[a("el-breadcrumb",{directives:[{name:"show",rawName:"v-show",value:"act-501"!=t.form,expression:'form!="act-501"'}],attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("基础设置")])],1),t._v(" "),a("el-card",[a("el-steps",{directives:[{name:"show",rawName:"v-show",value:"act-501"==t.form,expression:'form=="act-501"'}],staticClass:"step-style",attrs:{active:t.stepActive,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基础设置"}}),t._v(" "),a("el-step",{attrs:{title:"题目设置"}}),t._v(" "),a("el-step",{attrs:{title:"投放设置"}})],1),t._v(" "),a("el-form",{ref:"actSetConfRef",attrs:{model:t.confData,"label-width":"150px",rules:t.confRules}},[a("el-form-item",{attrs:{label:"活动名称：",prop:"actName"}},[a("el-input",{attrs:{maxLength:"15",placeholder:"请输入活动名称，15字以内"},model:{value:t.confData.actName,callback:function(e){t.$set(t.confData,"actName",e)},expression:"confData.actName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动描述：",prop:"note"}},[a("el-input",{attrs:{type:"textarea",rows:3,resize:"none",maxLength:"15",placeholder:"请输入活动描述，15字以内"},model:{value:t.confData.note,callback:function(e){t.$set(t.confData,"note",e)},expression:"confData.note"}})],1),t._v(" "),"act-301"!=t.form?a("el-form-item",{attrs:{label:"优先级：",prop:"idx"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.confData.idx,callback:function(e){t.$set(t.confData,"idx",e)},expression:"confData.idx"}},t._l(t.idxSelect,function(t,e,s){return a("el-option",{key:s,attrs:{label:t,value:e}})}))],1):t._e(),t._v(" "),1==t.isAllSaleZone?a("el-form-item",{attrs:{label:"是否投放销区活动："}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",disabled:!!t.id},model:{value:t.showSaleZone,callback:function(e){t.showSaleZone=e},expression:"showSaleZone"}})],1):t._e(),t._v(" "),t.showSaleZone?a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",disabled:!!t.id,placeholder:"请选择"},on:{change:t.handleChangeSaleZone},model:{value:t.confData.saleZoneCode,callback:function(e){t.$set(t.confData,"saleZoneCode",e)},expression:"confData.saleZoneCode"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"活动标签：",prop:"actTag"}},[t._l(t.actTagGroup,function(e,s){return a("el-radio",{key:s,attrs:{disabled:!!t.id,label:e.id},model:{value:t.confData.actTag,callback:function(e){t.$set(t.confData,"actTag",e)},expression:"confData.actTag"}},[t._v(t._s(e.name))])}),t._v(" "),t.showNoneActTag?a("span",[t._v("无")]):t._e(),t._v(" "),a("div",{},[t._v("(非销区活动时为非必选项)")])],2),t._v(" "),a("el-form-item",{attrs:{label:"活动时间：",prop:"date"}},[a("el-date-picker",{attrs:{disabled:t.timeDisable,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.confData.stimeStr,callback:function(e){t.$set(t.confData,"stimeStr",e)},expression:"confData.stimeStr"}}),t._v("\n          至\n          "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间","picker-options":t.pickerOptions},model:{value:t.confData.etimeStr,callback:function(e){t.$set(t.confData,"etimeStr",e)},expression:"confData.etimeStr"}}),t._v("\n          （提示：配置跨季度销区活动，需拆分活动时间配置2个相同活动）\n        ")],1),t._v(" "),"act-301"!==t.form?a("el-form-item",{attrs:{label:"活动图片：",prop:"banner"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":t.beforeAvatarUpload,action:t.uploadURL,headers:t.headerObj,"on-success":t.upBannerImg,"show-file-list":!1}},[t.confData.banner?a("img",{staticClass:"avatar",attrs:{src:t.confData.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传图片的最佳尺寸：750像素*160像素；格式png、jpg；大小不超过2M")])])],1):a("el-form-item",{attrs:{label:"活动图片：",prop:"banner"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":t.beforeAvatarUpload,action:t.uploadURL,headers:t.headerObj,"on-success":t.upBannerImg,"show-file-list":!1}},[t.confData.banner?a("img",{staticClass:"avatar red-packet",attrs:{src:t.confData.banner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon red-packet"}),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传图片的最佳尺寸：200像素*200像素；格式png、jpg；大小不超过2M")])])],1),t._v(" "),"act-301"==t.form?a("el-form-item",{attrs:{label:"参与次数：",prop:"number"}},[t._v("\n          每人每场可参与\n          "),a("el-input-number",{attrs:{precision:0,min:1,"controls-position":"right"},model:{value:t.redConf.joinNum,callback:function(e){t.$set(t.redConf,"joinNum",e)},expression:"redConf.joinNum"}}),t._v("\n          次\n        ")],1):t._e(),t._v(" "),t.shareAct[t.form]?a("el-form-item",{attrs:{label:"分享设置：",prop:"isShare"}},[a("el-radio",{attrs:{label:1},model:{value:t.redConf.share,callback:function(e){t.$set(t.redConf,"share",e)},expression:"redConf.share"}},[t._v("开启分享")]),t._v(" "),a("el-radio",{attrs:{label:0},model:{value:t.redConf.share,callback:function(e){t.$set(t.redConf,"share",e)},expression:"redConf.share"}},[t._v("关闭分享")])],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"活动说明：",prop:"desc"}},[a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption,placeholder:"请输入活动说明，300字以内"},on:{blur:function(e){t.onEditorBlur(e)}},model:{value:t.confData.actDesc,callback:function(e){t.$set(t.confData,"actDesc",e)},expression:"confData.actDesc"}})],1),t._v(" "),"act-501"==t.form?a("el-form-item",{attrs:{label:"答题时间：",prop:"quesTime"}},[a("el-radio",{attrs:{label:1},model:{value:t.extInfo.limited,callback:function(e){t.$set(t.extInfo,"limited",e)},expression:"extInfo.limited"}},[t._v("不限")]),t._v(" "),a("el-radio",{attrs:{label:2},model:{value:t.extInfo.limited,callback:function(e){t.$set(t.extInfo,"limited",e)},expression:"extInfo.limited"}},[t._v("总时间限"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.extInfo.time,expression:"extInfo.time"}],staticClass:"limited-time",attrs:{type:"number"},domProps:{value:t.extInfo.time},on:{input:[function(e){e.target.composing||t.$set(t.extInfo,"time",e.target.value)},t.limitNum]}}),t._v("秒")])],1):t._e(),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.nextStep}},[t._v("保存并进入下一步")]),t._v(" "),a("el-button",{on:{click:t.back}},[t._v("返回列表")])],1)],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(l,o,!1,function(t){a("ZUOX")},"data-v-3effa088",null);e.default=n.exports},uOJp:function(t,e){},uRqG:function(t,e){},v3hH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("DAYN"),i={components:{draggable:a.n(s).a},name:"IntegralPage",data:()=>({listData:[],allBrandsData:[],allSpecisData:[],allareaData:[],selectAllBrands:"",selectSpeciSns:"",selectAllarea:"",id:"1",form:{brandArr:[],snArr:[],cityArr:[],hdCode:"",orderCode:"",etime:"",stime:"",status:"",metraType:6,winnerMobile:"",pageNo:1,pageSize:10},pagination:{total:0},currentPage:1,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},addPool:{},sourceFiles:[]}),created(){this.init()},watch:{selectAllBrands(t,e){t&&t!=e&&(this.form.brandArr=[],this.form.brandArr[0]=t,this.id="",this.selectSpeciSns="",this.form.snArr=[],this.allSpecisList(this.form.brandArr[0]))},selectSpeciSns(t,e){t&&t!=e&&(this.form.snArr=[],this.form.snArr.push(t))},selectAllarea(t,e){t&&t!=e&&(this.form.cityArr=[],this.form.cityArr[0]=t)}},methods:{currentChange(t){this.form.pageNo=t,this.getlistData()},sizeChange(t){this.form.pageSize=t},init(){this.allBrandsList(),this.allareaList(),this.getlistData()},allBrandsList(){this.$request.post("/api/wiseqr/prod/listBrand",{service:"browser"},!0,t=>{"200000"===t.ret&&(this.allBrandsData=t.data.list)})},allSpecisList(t){var e=[];e.push(t),this.$request.post("/api/wiseqr/prod/listTbc",{brandCodeArr:e},!0,t=>{"200000"===t.ret&&(this.allSpecisData=[],this.allSpecisData=t.data.list)})},allareaList(){let t=this;t.$request.post("/api/wiseqr/dim/regionByPCode",{brandListArrObj:{parentCode:"",withRegion:!0}},!0,e=>{if("200000"===e.ret){var a=e.data;0!=a.length&&a.forEach(function(e,a){var s={label:e.name,value:e.code,children:[]};t.$request.post("/api/wiseqr/dim/regionByPCode",{parentCode:e.code},!0,e=>{var a=e.data;null!=a&&0!=a.length&&a.forEach(function(t,e){s.children.push({label:t.name,value:t.code})}),t.allareaData.push(s)})})}})},getlistData(){this.$request.post("/api/wiseqr/order/list",this.form,!0,t=>{console.log(t.data),"200000"===t.ret&&(this.listData=t.data.list,this.initPagination(t.data.page||{}))})},initPagination(t){t&&(this.pagination.total=t.count)},queryData:function(t){this.getlistData()},resetData:function(t){this.selectAllBrands="",this.selectSpeciSns="",this.selectAllarea="",this.id="1",this.form={metraFlag:"Object",hdCode:"",orderCode:"",brandArr:[],snArr:[],cityArr:[],metraType:6,status:"",stime:"",etime:"",winnerMobile:"",pageNo:1,pageSize:10},this.getlistData()},handlerSourceFileBUpload(t){},handleSourceFileSuccess(t,e){if(2e5==t.ret){this.$message({type:"success",message:t.data.successMsg});let e={name:t.data.sourceFile,sourceCode:t.data.sourceCode,count:t.data.successCount};this.sourceFiles.push(e)}else this.$message.error(t.message)},handleSourceFileRemove(t,e){this.sourceFiles=[]},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.form)e.append(a,this.form[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/api/wiseqr/order/export",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple"},[t._v("积分领奖明细")])])],1),t._v(" "),a("div",{staticClass:"space"}),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.form}},[a("el-row",[a("el-form-item",{attrs:{label:"活动ID",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入活动ID"},model:{value:t.form.hdCode,callback:function(e){t.$set(t.form,"hdCode",e)},expression:"form.hdCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"品牌",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllBrands,callback:function(e){t.selectAllBrands=e},expression:"selectAllBrands"}},t._l(t.allBrandsData,function(t,e){return a("el-option",{key:t.brandCode,attrs:{label:t.name,value:t.brandCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"规格",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!t.id,clearable:!!t.id},model:{value:t.selectSpeciSns,callback:function(e){t.selectSpeciSns=e},expression:"selectSpeciSns"}},t._l(t.allSpecisData,function(t,e){return a("el-option",{key:t.product.sn,attrs:{label:t.product.allName,value:t.product.sn}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"订单号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.form.orderCode,callback:function(e){t.$set(t.form,"orderCode",e)},expression:"form.orderCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖地区",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectAllarea,callback:function(e){t.selectAllarea=e},expression:"selectAllarea"}},t._l(t.allareaData,function(e){return a("el-option-group",{key:e.value,attrs:{label:e.label}},t._l(e.children,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"领奖时段",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.stime,callback:function(e){t.$set(t.form,"stime",e)},expression:"form.stime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"至",size:"small"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.form.etime,callback:function(e){t.$set(t.form,"etime",e)},expression:"form.etime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.form.winnerMobile,callback:function(e){t.$set(t.form,"winnerMobile",e)},expression:"form.winnerMobile"}})],1)],1),t._v(" "),a("el-form-item",[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.queryData}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.resetData}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"small",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,border:""}},[a("el-table-column",{attrs:{prop:"hdCode",label:"活动编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCode",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actCode",label:"活动ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"中奖人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"winnerMobile",label:"中奖人手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"awdName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"snName",label:"关联规格"}}),t._v(" "),a("el-table-column",{attrs:{label:"领奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(new Date(e.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"中奖地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.awdProvinceName)+"-"+t._s(e.row.awdCityName)+"-"+t._s(e.row.awdDistrictName))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.form.pageNo,"page-size":t.form.pageSize,total:t.pagination.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,r,!1,function(t){a("OBQS")},"data-v-397f66d4",null);e.default=l.exports},vknl:function(t,e){},vsQH:function(t,e){},wyod:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({loading:!0,info:{}}),created(){this.getInfo()},methods:{getInfo(){this.$request.post("/hbact/card/act/info",{},!0,t=>{if("200"==t.code)return this.info=t.data,void(this.loading=!1);this.$message.error(t.msg)})},open(){this.$request.post("/hbact/card/award/open?pwd=111",{},!0,t=>{if("200"==t.code)return this.$message.success(t.msg),void this.getInfo();this.$message.error(t.msg),this.getInfo()})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-col",{staticClass:"mb20"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("\n        开奖状态："+t._s(1==t.info.lotteryStatus?"等待开奖":2==t.info.lotteryStatus?"开奖中":3==t.info.lotteryStatus?"已开奖":"")+"\n      ")]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("\n        开奖时间："+t._s(t.info.awdBeginTime)+"\n      ")]),t._v(" "),a("div",[t._v("\n        活动结束时间："+t._s(t.info.joinEndTime)+"\n      ")])]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:1!==t.info.lotteryStatus},on:{click:t.open}},[t._v("开奖")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("J8gt")},"data-v-0184deb6",null);e.default=r.exports},x3Il:function(t,e){},xm2p:function(t,e){},xouQ:function(t,e){},xvlj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:["id","edit"],data:()=>({activeName:"home",addActParams:{conf:"",form:"act-100",id:"",name:"",note:"",saleZone:1==sessionStorage.getItem("isAllSaleZone")?null:sessionStorage.getItem("saleZoneCode")},saleZone:[],addActRules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:15,message:"长度不能超过 15 个字符",trigger:"blur"}]},configItem:{title:"",description:"",getBtn:"http://qoss.qrmkt.cn/new_platform/zuan_award_btn.png",award_bg:"http://qoss.qrmkt.cn/new_platform/zuan_award_bg.png",knowBtn:"http://qoss.qrmkt.cn/new_platform/zuan_no_award_btn.png",headerImgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi-header.png",bgImgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi-bg.png",kitsUrl:"http://qoss.qrmkt.cn/new_platform/fanzuanshi-tips.png",iconUrl:[{key:1,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:378"},{key:2,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:379"},{key:3,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:380"},{key:4,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:381"},{key:5,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:382"},{key:6,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:383"},{key:7,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:384"},{key:8,imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",$$hashKey:"object:385"}],iconAwardImg:"http://qoss.qrmkt.cn/new_platform/pc_front/zuanshi.png",awardUrl:[{imgUrl:"http://qoss.qrmkt.cn/new_platform/pc_front/zhongjiang74@2x.png"}],drawImgUrl:"http://qoss.qrmkt.cn/new_platform/award_img.png",cryImgUrl:"http://qoss.qrmkt.cn/new_platform/zuan_no_award_bg.png"},uploadURL:"/api/wiseqr/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId")||"2d07e7953a2a63ceda6df5144d1abec3",token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},gameIndex:null,showEditConIndex:1,isPut:!0}),computed:{},created(){this.getActDetail(),this.getSaleZone()},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,t=>{"200"==t.code&&(this.saleZone=t.data||[])})},getActDetail(){this.id?this.$request.post("/api/wiseqr/acttpl/detail",{id:this.id},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.configItem=JSON.parse(t.data.conf),console.log(this.configItem),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)}):this.edit&&this.$request.post("/api/wiseqr/act/pubTpl",{actCode:this.edit},!0,t=>{"200000"===t.ret?(this.addActParams=t.data,this.addActParams.name=JSON.parse(t.data.conf).title,this.addActParams.note=JSON.parse(t.data.conf).description,this.configItem=JSON.parse(t.data.conf),"未投放"==t.data.statusName?this.isPut=!1:this.isPut=!0):this.$message.error(t.message)})},upBgImgSuccess(t){if("200000"===t.ret)return this.configItem.bgImgUrl=t.data.accessUrl;this.$message.error(t.message)},upTipsImgSuccess(t){if("200000"===t.ret)return this.defaultConf.img.tips.url=t.data.accessUrl;this.$message.error(t.message)},upTopImgSuccess(t){if("200000"===t.ret)return this.configItem.headerImgUrl=t.data.accessUrl;this.$message.error(t.message)},upKitsImgSuccess(t){if("200000"===t.ret)return this.configItem.kitsUrl=t.data.accessUrl;this.$message.error(t.message)},getGameIndex(t){this.gameIndex=t},upKnowBtnImgSuccess(t){if("200000"===t.ret)return this.configItem.knowBtn=t.data.accessUrl;this.$message.error(t.message)},upGetBtnImgSuccess(t){if("200000"===t.ret)return this.configItem.getBtn=t.data.accessUrl;this.$message.error(t.message)},upAwardBgSuccess(t){if("200000"===t.ret)return this.configItem.award_bg=t.data.accessUrl;this.$message.error(t.message)},upGameImgSuccess(t){if("200000"===t.ret)return this.configItem.iconUrl[this.gameIndex].imgUrl=t.data.accessUrl;this.$message.error(t.message)},upNotWinningImgSuccess(t){if("200000"===t.ret)return this.configItem.cryImgUrl=t.data.accessUrl;this.$message.error(t.message)},beforeAvatarUpload(t){const e="image/jpeg"===t.type||"image/png"===t.type||"image/bmp"===t.type||"image/gif"===t.type;return e||this.$message.error("上传图片只能是 JPG 、 PNG 、 GIF 、 BMP 格式!"),e},saveActTpl(){if(!this.addActParams.name)return this.$message.warning("请输入模板名称");this.configItem.title=this.addActParams.name,this.configItem.description=this.addActParams.note,this.addActParams.conf=JSON.stringify(this.configItem),this.edit?this.$request.post("/api/wiseqr/act/mpubTpl",this.addActParams,!0,t=>{"200000"===t.ret?(this.$message.success("保存成功"),this.$router.push("/market/actMgr")):this.$message.error(t.message)}):this.$request.post("/api/wiseqr/acttpl/saveOrModify",this.addActParams,!0,t=>{if("200000"===t.ret)return this.isPut?this.$router.push("/market/actTpl/actSetConf?form="+t.data.form+"&tplCode="+t.data.tplCode):this.$router.push("/market/actTpl"),void this.$message.success("保存成功!");this.$message.error(t.message)})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addActTamConf-container"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("活动")]),t._v(" "),a("el-breadcrumb-item",[t._v("活动模板配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("模板设置")])],1),t._v(" "),a("el-card",[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"首页",name:"home"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"},[a("p",[t._v(t._s(t.addActParams.name))])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=1}}})]),t._v(" "),a("div",{staticClass:"top"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=2}}})]),t._v(" "),a("div",{staticClass:"kits"},[a("img",{attrs:{src:t.configItem.kitsUrl,alt:"",title:"点击编辑"},on:{click:function(e){t.showEditConIndex=3}}})]),t._v(" "),a("div",{staticClass:"game-con"},t._l(t.configItem.iconUrl,function(e){return a("div",{key:e.key,staticClass:"game-item",on:{click:function(e){t.showEditConIndex=4}}},[a("img",{attrs:{src:e.imgUrl,alt:""}})])}))]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-form",{ref:"ruleForm",attrs:{model:t.addActParams,rules:t.addActRules,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入模板名称"},model:{value:t.addActParams.name,callback:function(e){t.$set(t.addActParams,"name",e)},expression:"addActParams.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.addActParams.saleZone,callback:function(e){t.$set(t.addActParams,"saleZone",e)},expression:"addActParams.saleZone"}},t._l(t.saleZone,function(t,e){return a("el-option",{key:e,attrs:{label:t.zoneName,value:t.zoneCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"模板说明"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入模板描述",maxlength:"50",resize:"none"},model:{value:t.addActParams.note,callback:function(e){t.$set(t.addActParams,"note",e)},expression:"addActParams.note"}})],1)],1),t._v(" "),a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[1==t.showEditConIndex?a("div",{staticClass:"edit-bg-img"},[a("p",{staticClass:"img-title"},[t._v("背景图片:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.bgImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upBgImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),2==t.showEditConIndex?a("div",{staticClass:"edit-top-img"},[a("p",{staticClass:"img-title"},[t._v("活动标题:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.headerImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upTopImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),3==t.showEditConIndex?a("div",{staticClass:"edit-kits-img"},[a("p",{staticClass:"img-title"},[t._v("活动锦囊:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.kitsUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upKitsImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]):t._e(),t._v(" "),4==t.showEditConIndex?a("div",{staticClass:"edit-game-img"},t._l(t.configItem.iconUrl,function(e,s){return a("div",{key:e.key},[a("p",{staticClass:"img-title"},[t._v(t._s("钻石"+(s+1)+":"))]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:e.imgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upGameImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.getGameIndex(s)}}},[t._v("更换图片")])],1)],1)])})):t._e(),t._v(" "),1==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 750*1208px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),2==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 700*350px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),3==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 120*120px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e(),t._v(" "),4==t.showEditConIndex?a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 186*162px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]):t._e()])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"活动说明页面",name:"actDesc"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/huodongshuoming.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"我的奖品页面",name:"myPrize"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/pc_front/wodedjiangpin.png"}})])]),t._v(" "),a("div",{staticClass:"footer"})])]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"中奖页面",name:"winning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"winning"},[a("div",{staticClass:"prize-con award-con"},[a("img",{staticClass:"award-alert",attrs:{src:t.configItem.award_bg,alt:""}}),t._v(" "),a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"pic",attrs:{src:t.configItem.drawImgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"award-text"},[a("h3",[t._v("奖品名称")]),t._v(" "),a("p",[t._v("请在24小时内领取")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.getBtn,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.award_bg,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upAwardBgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")]),t._v(" "),a("div",{staticClass:"edit-winning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.getBtn,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upGetBtnImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("el-tab-pane",{staticClass:"clearfix",attrs:{label:"未中奖页面",name:"notWinning"}},[a("div",{staticClass:"ipone"},[a("div",{staticClass:"header"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"bg"},[a("img",{attrs:{src:t.configItem.bgImgUrl}})]),t._v(" "),a("div",{staticClass:"not-winning"},[a("div",{staticClass:"prize-con award-con"},[a("div",{staticClass:"close"},[a("img",{attrs:{src:"http://qoss.qrmkt.cn/new_platform/close_icon.png",alt:""}})]),t._v(" "),a("img",{staticClass:"award-alert",attrs:{src:t.configItem.cryImgUrl,alt:""}}),t._v(" "),a("div",{staticClass:"award-no-text"},[a("h3",[t._v("很遗憾，未中奖")])]),t._v(" "),a("img",{staticClass:"prize-btn",attrs:{src:t.configItem.knowBtn,alt:""}})])])]),t._v(" "),a("div",{staticClass:"footer"})]),t._v(" "),a("div",{staticClass:"edit-box"},[a("el-card",{staticClass:"edit-img",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑图片")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("弹框:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.cryImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upNotWinningImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 562*638px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])]),t._v(" "),a("div",{staticClass:"edit-con"},[a("div",{staticClass:"edit-notWinning-img"},[a("p",{staticClass:"img-title"},[t._v("按钮:")]),t._v(" "),a("div",{staticClass:"img-con"},[a("img",{attrs:{src:t.configItem.knowBtn,alt:""}})]),t._v(" "),a("div",{staticClass:"btn-con"},[a("el-upload",{attrs:{action:t.uploadURL,"before-upload":t.beforeAvatarUpload,headers:t.headerObj,"on-success":t.upKnowBtnImgSuccess,"show-file-list":!1}},[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("更换图片")])],1)],1)]),t._v(" "),a("p",{staticClass:"tips"},[t._v("* 图片建议尺寸为 280*60px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])])],1)]),t._v(" "),a("div",{staticClass:"btn"},[a("p",[t._v("是否投放: "),a("el-switch",{model:{value:t.isPut,callback:function(e){t.isPut=e},expression:"isPut"}})],1),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveActTpl}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("6IBn")},"data-v-2a28b1ec",null);e.default=r.exports},xvlp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"DistributionMgr",data:()=>({listLoading:!1,authStatusList:[{code:null,name:"全部"},{code:"1",name:"未审核"},{code:"2",name:"审核通过"},{code:"3",name:"审核未通过"}],districtList:[{code:"",name:"全部"},{code:"1",name:"城镇"},{code:"2",name:"乡村"}],cateLvl1List:[],cateLvl2List:[],cateLvl3List:[],filters:{authStatus:null,searchType:"",keywords:"",addrProvince:"",addrCity:"",addrArea:""},newList:[],pageSize:10,pageNo:1,currentPage:1,total:0,batchPass:!0,ids:"",dialogVisible:!1,failReason:"",sellerIds:""}),created(){this.getListNewList(),this.getOneCategory()},methods:{addNewSeller(){this.$router.push({path:"/seller/review/addSeller"})},getOneCategory(){this.$request.post("/fxweb/fxsaas/getProvince ",{},!1,t=>{this.cateLvl1List=[...t.data]})},selectBrand1(){this.filters.addrCity="",this.cateLvl2List=[],this.filters.addrArea="",this.cateLvl3List=[],this.getTwoCategory()},getTwoCategory(){""!=this.filters.addrProvince&&this.$request.post("/fxweb/fxsaas/getCity ",{parentCode:this.filters.addrProvince},!1,t=>{this.cateLvl2List=[...t.data]})},selectBrand2(){this.filters.addrArea="",this.cateLvl3List=[],this.getThreeCategory()},getThreeCategory(){""!=this.filters.addrCity&&this.$request.post("/fxweb/fxsaas/getCounty",{parentCode:this.filters.addrCity},!1,t=>{this.cateLvl3List=[...t.data]})},getListNewList(){let t={appStatus:this.filters.authStatus,provinceName:this.filters.addrProvince,cityName:this.filters.addrCity,areaName:this.filters.addrArea,pageNo:this.pageNo,pageSize:10};this.filters.searchType&&this.filters.keywords&&(t[this.filters.searchType]=this.filters.keywords),this.postSearch(t)},postSearch(t){this.$request.post("/fxweb/fxsaas/getSalers",t,!0,t=>{console.log(t.data),this.newList=t.data.salerList,this.total=t.data.pageResult.count,this.pageNo=t.data.pageResult.pageNo})},commitForm(){this.pageNo=1,this.currentPage=1,this.getListNewList()},getStatus(){this.filters.authStatus="1",this.filters.searchType="",this.filters.keywords="",this.filters.addrProvince="",this.filters.addrCity="",this.filters.addrArea="",this.pageNo=1,this.currentPage=1,this.getListNewList()},inputWithSelectChange(t){this.filters.keywords=""},approval(t){let e={salerId:t,appStatus:2};this.$confirm("您确定审核通过吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/fxweb/fxsaas/approvalSalers",e,!0,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.getListNewList()):this.$message({message:t.message,type:"warning"})})})},disapprovalDialog(t){this.dialogVisible=!0,this.sellerIds=t},disapproval(){let t={salerId:this.sellerIds,appStatus:3,appNote:this.failReason};this.$confirm("您确定审核不通过吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$request.post("/fxweb/fxsaas/approvalSalers",t,!0,t=>{t.ok?(this.$message({message:"操作成功！",type:"success"}),this.dialogVisible=!1,this.failReason="",this.getListNewList()):(this.$message({message:t.message,type:"warning"}),this.dialogVisible=!1,this.failReason="",this.getListNewList())})})},cancelDialog(){this.dialogVisible=!1,this.failReason=""},sellerDetail(t){this.$router.push({path:"/seller/review/reviewDetail?sellerId="+t})},jumpTo(){this.$emit("current-change")},handleCurrentChange(t){this.pageNo=t,this.currentPage=t,this.getListNewList()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"review-manage-container"},[a("div",{staticClass:"box-container"},[a("div",{staticClass:"add-new-seller"},[a("el-button",{staticStyle:{display:"none","margin-bottom":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.addNewSeller()}}},[t._v("新建零售户")])],1),t._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px","margin-bottom":"0"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters,"label-width":"90px"}},[a("el-form-item",{attrs:{size:"small",label:"审核状态："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.filters.authStatus,callback:function(e){t.$set(t.filters,"authStatus",e)},expression:"filters.authStatus"}},t._l(t.authStatusList,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"位置：",prop:"addrProvince"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand1},model:{value:t.filters.addrProvince,callback:function(e){t.$set(t.filters,"addrProvince",e)},expression:"filters.addrProvince"}},t._l(t.cateLvl1List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrCity"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},on:{change:t.selectBrand2},model:{value:t.filters.addrCity,callback:function(e){t.$set(t.filters,"addrCity",e)},expression:"filters.addrCity"}},t._l(t.cateLvl2List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"",prop:"addrArea"}},[a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.filters.addrArea,callback:function(e){t.$set(t.filters,"addrArea",e)},expression:"filters.addrArea "}},t._l(t.cateLvl3List,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{size:"small",label:"关键词："}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:t.filters.keywords,callback:function(e){t.$set(t.filters,"keywords",e)},expression:"filters.keywords"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.inputWithSelectChange},slot:"prepend",model:{value:t.filters.searchType,callback:function(e){t.$set(t.filters,"searchType",e)},expression:"filters.searchType"}},[a("el-option",{attrs:{label:"经销商姓名",value:"salerName"}}),t._v(" "),a("el-option",{attrs:{label:"手机号",value:"phoneNo"}}),t._v(" "),a("el-option",{attrs:{label:"微信ID",value:"wxOpenId"}})],1)],1)],1),t._v(" "),a("div"),t._v(" "),a("div"),t._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.commitForm}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:t.getStatus}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.newList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"salerName",label:"申请人姓名",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"手机号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"region",width:"200",label:"位置"}}),t._v(" "),a("el-table-column",{attrs:{prop:"invitCode",label:"推荐码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"higherName",label:"推荐人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"申请时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ownerName",label:"联系人姓名",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"联系人电话",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"申请时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"位置"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.addrProvinceName))]),e.row.addrProvinceName!=e.row.addrCityName?a("span",[t._v(t._s(e.row.addrCityName))]):t._e(),a("span",[t._v(t._s(e.row.addrAreaName))]),a("span",[t._v(t._s(e.row.addrDetail))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"authStatus",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.appStatus?a("span",[t._v(t._s("待审核"))]):"2"==e.row.appStatus?a("span",[t._v(t._s("审核通过"))]):"3"==e.row.appStatus?a("span",[t._v(t._s("审核未通过"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:1!==e.row.appStatus,type:"text",size:"mini"},on:{click:function(a){t.disapprovalDialog(e.row.saler_id)}}},[t._v("审核不通过")]),t._v(" "),a("el-button",{attrs:{disabled:1!==e.row.appStatus,type:"text",size:"mini"},on:{click:function(a){t.approval(e.row.saler_id)}}},[t._v("审核通过")])]}}])})],1)],1),t._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"请输入不通过理由",visible:t.dialogVisible,width:"30%","before-close":t.cancelDialog},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.failReason,callback:function(e){t.failReason=e},expression:"failReason"}}),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("el-button",{attrs:{size:"small"},on:{click:t.cancelDialog}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.disapproval}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("kHzs"),a("QLyS")},"data-v-733020ac",null);e.default=r.exports},xzOO:function(t,e){},yCHs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:()=>({load:!0,queryParams:{orderId:"",orderStatus:"",gradeCode:"",nickName:"",pageNo:1,pageSize:10},orderStatusList:[{name:"待审核",val:0},{name:"审核通过",val:1},{name:"已领取",val:2}],headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},sourceFiles:[],total:0,currentPage4:0,orderList:[],lvlList:[]}),mounted(){this.getOrderList(),this.getLvlList()},methods:{getOrderList(t){t&&(this.queryParams.pageNo=1,this.pageSize=10),this.load=!0,this.$request.post("/api/wiseqr/mborder/list",this.queryParams,!0,t=>{if("200000"===t.ret)return this.orderList=t.data.list,this.total=t.data.page.pageCount,void(this.load=!1);this.$message.error(t.message)})},getLvlList(){this.$request.post("/api/wiseqr/mbgrade/list",{},!0,t=>{"200000"!==t.ret?this.$message.error(t.message):this.lvlList=t.data})},reset(){this.queryParams.orderId="",this.queryParams.orderStatus="",this.queryParams.gradeCode="",this.queryParams.nickName="",this.getOrderList(1)},handleCurrentChange(t){this.queryParams.pageNo=t,this.getOrderList()},handleSourceFileSuccess(t,e){if(2e5==t.ret){this.$message.succecc("上传成功");let e={name:t.data.sourceFile,sourceCode:t.data.sourceCode,count:t.data.successCount};this.sourceFiles.push(e)}else this.sourceFiles=[],this.$message.error(t.message)},handleSourceFileRemove(t,e){this.sourceFiles=[]},beforeAvatarUpload(t){const e="application/vnd.ms-excel"===t.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type;return e||this.$message.error("上传文件的格式只支持 XLS 或 XLSX !"),e},exportData(){var t=new XMLHttpRequest,e=new FormData;for(var a in this.queryParams)e.append(a,this.queryParams[a]);t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("POST","/api/wiseqr/mborder/exportOrder",!0),t.responseType="blob",t.responseType="arraybuffer",t.setRequestHeader("token",sessionStorage.getItem("access_token")),t.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),t.onload=function(e){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=t.getResponseHeader("Content-Disposition"),i=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,i);else{var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=i,r.click(),window.URL.revokeObjectURL(r.href)}}},t.send(e)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",[a("el-card",[a("el-form",{attrs:{model:t.queryParams,inline:""}},[a("el-form-item",{attrs:{label:"用户名称："}},[a("el-input",{attrs:{placeholder:"请输入用户名称"},model:{value:t.queryParams.nickName,callback:function(e){t.$set(t.queryParams,"nickName",e)},expression:"queryParams.nickName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"发货状态："}},[a("el-select",{model:{value:t.queryParams.orderStatus,callback:function(e){t.$set(t.queryParams,"orderStatus",e)},expression:"queryParams.orderStatus"}},t._l(t.orderStatusList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.val}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"用户等级："}},[a("el-select",{model:{value:t.queryParams.gradeCode,callback:function(e){t.$set(t.queryParams,"gradeCode",e)},expression:"queryParams.gradeCode"}},t._l(t.lvlList,function(t,e){return a("el-option",{key:e,attrs:{label:t.gradeNumber,value:t.gradeCode}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"订单号："}},[a("el-input",{attrs:{placeholder:"请输入订单号"},model:{value:t.queryParams.orderId,callback:function(e){t.$set(t.queryParams,"orderId",e)},expression:"queryParams.orderId"}})],1)],1),t._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.getOrderList(1)}}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{plain:""},on:{click:t.reset}},[t._v("重置")])],1)],1),t._v(" "),a("div",{staticClass:"btn mt20 mb20"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.exportData}},[t._v("导出搜索结果")]),t._v(" "),a("el-upload",{staticClass:"upload",attrs:{action:"/api/wiseqr/mborder/importOrder",headers:t.headers,"on-success":t.handleSourceFileSuccess,"on-remove":t.handleSourceFileRemove,"file-list":t.sourceFiles,"before-upload":t.beforeAvatarUpload,"auto-upload":!0}},[a("el-button",{attrs:{type:"primary",plain:""}},[t._v("导入物流信息")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.load,expression:"load"}],attrs:{border:"",data:t.orderList}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickName",label:"用户名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"用户手机号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gradeName",label:"用户等级",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"rightName",label:"权益名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"giftName",label:"奖品",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"订单状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(0==e.row.orderStatus?"待审核":1==e.row.orderStatus?"审核通过":"已领取")+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.$router.push("/orders/member/detail?id="+e.row.orderId)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":this.queryParams.pageNo,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("cxap")},"data-v-3b906dca",null);e.default=r.exports},yV9O:function(t,e){},yoed:function(t,e){},yuvq:function(t,e){},z4wc:function(t,e){},"zV6/":function(t,e){},zWXE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"HengShengLC",data:()=>({loading:!0,info:{}}),created(){this.getInfo()},methods:{getInfo(){this.$request.post("/hbact/lc/saas/act/info",{},!0,t=>{if("200"==t.code)return this.info=t.data,void(this.loading=!1);this.$message.error(t.msg)})},open(){this.$request.post("/hbact/lc/saas/award/open",{},!0,t=>{if("200"==t.code)return this.$message.success(t.msg),void this.getInfo();this.$message.error(t.msg),this.getInfo()})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-col",{staticClass:"mb20"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("\n        开奖状态："+t._s(1==t.info.lotteryStatus?"等待开奖":2==t.info.lotteryStatus?"开奖中":3==t.info.lotteryStatus?"已开奖":"")+"\n      ")]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("\n        开奖时间："+t._s(t.info.awdBeginTime)+"\n      ")]),t._v(" "),a("div",[t._v("\n        活动结束时间："+t._s(t.info.joinEndTime)+"\n      ")])]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:1!==t.info.lotteryStatus},on:{click:t.open}},[t._v("开奖")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("qE/q")},"data-v-95343c32",null);e.default=r.exports},zZS8:function(t,e){},zi0E:function(t,e){}});
//# sourceMappingURL=1.524a591951240ff2f257.js.map