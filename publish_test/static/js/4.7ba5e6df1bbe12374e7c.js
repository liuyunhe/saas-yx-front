webpackJsonp([4],{"/qJv":function(e,t){},"0wWe":function(e,t){},"1D43":function(e,t){},"1Id+":function(e,t){},"1W6q":function(e,t){},"3cWa":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("AGi4"),l=a("CywA"),r={components:{materielTable:s.a,materielForm:l.a},data:()=>({table:!0,metraFlag:"redpack",id:""}),methods:{showTable(e){this.id="",this.table=!0,e&&this.$refs.tableDatas.listMateriel()},showForm(e){this.id=e,this.table=!1}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("materiel-table",{directives:[{name:"show",rawName:"v-show",value:e.table,expression:"table"}],ref:"tableDatas",attrs:{metraFlag:e.metraFlag},on:{showForm:e.showForm}}),e._v(" "),e.table?e._e():a("materiel-form",{attrs:{metraFlag:e.metraFlag,materielId:e.id},on:{showTable:e.showTable}})],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("1W6q")},null,null);t.default=o.exports},"52AW":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"Brand",data:()=>({orgHasSaleZone:sessionStorage.orgHasSaleZone,isAllSaleZone:sessionStorage.isAllSaleZone,saleZoneCode:sessionStorage.saleZoneCode,roleOptList:sessionStorage.roleOptList.split(","),saleZone:[],search:{pageNo:1,pageSize:10,budgetYear:(new Date).getFullYear().toString(),saleZoneCode:null,materialType:3},pagination:{total:0},tableList:[],yearSum:"",form:{show:!1,id:"",materialName:"",budgetValue:"",materialType:3,materialPoolId:null,budgetSeason:"",budgetYear:"",saleZoneCode:"",saleZoneName:"",stock:""},formRules:{materialName:[{required:!0,message:"请输入红包礼品名称",trigger:"change"}],budgetValue:[{required:!0,validator:(e,t,a)=>{"0"==t?a(new Error("请输入预算（个）")):a()},trigger:"blur"}],budgetSeason:[{required:!0,message:"请选择季度",trigger:"change"}],budgetYear:[{required:!0,message:"请选择年份",trigger:"change"}],saleZoneCode:[{required:!0,message:"请选择销区",trigger:"change"}]},title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,awardType:[{value:1,label:"实物"},{value:6,label:"积分"},{value:3,label:"红包"},{value:7,label:"折扣卡"},{value:8,label:"翻倍卡"}],awardNo:""}),created(){1==this.isAllSaleZone?this.getSaleZone():(this.getSaleZone(),this.search.saleZoneCode=this.saleZoneCode,this.getTableList())},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[])})},currentChange(e){this.getTableList(event,e)},sizeChange(e){this.getTableList(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},reset(){this.search={pageNo:1,pageSize:10,budgetYear:"",saleZoneCode:null,materialType:3},this.search.budgetYear=(new Date).getFullYear().toString(),1==this.isAllSaleZone?this.tableList=[]:(this.search.saleZoneCode=this.saleZoneCode,this.getTableList())},resetForm(){this.$refs.ruleForm.resetFields(),this.form={show:!1,id:"",materialName:"",budgetValue:"",materialType:3,materialPoolId:null,budgetSeason:"",budgetYear:"",saleZoneCode:"",saleZoneName:"",stock:""}},getTableList(e,t,a){let s=1;t&&(s=t),this.search.pageNo=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/api/materialBudget/list",this.search,!0,e=>{"200"==e.code&&(this.tableList=e.data.budgetList.list||[],this.yearSum=e.data.yearSum,this.initPagination(e.data.budgetList.page||{}))})},handleSelectZone(e){let t=this.saleZone.find(t=>t.zoneCode==e);console.log(t),this.form.saleZoneName=t.zoneName},dataForm(e,t){this.form.id="",this.form.materialName="",this.form.materialPoolId="",this.form.stock="",t&&t.id&&(this.form.id=t.id,this.form.materialName=t.materialName,this.form.materialPoolId=t.materialPoolId,this.form.stock=t.stock),this.form.show=!0},saveForm(){this.form.id||this.$refs.ruleForm.validate(e=>{if(e){let e={saleZoneCode:this.form.saleZoneCode,saleZoneName:this.form.saleZoneName,budgetValue:this.form.budgetValue,budgetSeason:this.form.budgetSeason,budgetYear:this.form.budgetYear,materialType:this.form.materialType,materialName:this.form.materialName,materialPoolId:this.form.materialPoolId};this.$request.post("/api/materialBudget/add",e,!0,e=>{"200"==e.code?(this.getTableList(),this.form.show=!1,this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.msg||e.message)})}})},addRepertory(e){this.$request.post("/api/wiseqr/metra/detail",{id:e.materialPoolId,metraFlag:"redpack"},!0,t=>{if("200000"==t.ret){let a=t.data.stock;this.$prompt(`<div style="line-height: 30px">物料库红包池：${e.materialName}</div>\n                       <div style="line-height: 30px">剩余库存（元）：${a}</div>\n                       增加预算（元）：（提示：不可超过剩余库存）`,"增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字",dangerouslyUseHTMLString:!0}).then(({value:t})=>0==t?this.$message.error("数字不能为0"):t>a?this.$message.error("增库不可超过剩余库存"):void this.$request.get("/api/materialBudget/valueAdd",{budgetId:e.id,budgetValue:t,materialPoolId:e.materialPoolId},e=>{"200"==e.code?(this.$message.success("增库成功"),this.getTableList()):this.$message.error(e.msg)})).catch(()=>{this.$message({type:"info",message:"取消输入"})})}else this.$message.error(t.msg||t.message)})},async del(e){if("confirm"!==await this.$confirm("您确定删除此预算？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e))return this.$message({type:"info",message:"已取消删除"});this.$request.get("/api/materialBudget/delete",{budgetId:e},e=>{console.log(e),"200"==e.code?(this.$message.success("删除成功"),this.getTableList()):this.$message.error(e.msg)},e=>{console.log(e)})},selectPrize(e,t,a){this.form.materialName=e.name,this.form.materialPoolId=e.id,this.form.stock=e.stock,console.log(e),this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},handleSizeChange(e){this.params.pageSize=e,this.getList()},handleCurrentChange(e){this.params.pageNo=e,this.getList()},getList(e,t){"1"==e?(this.params.metraFlag="object",this.title="选择实物"):"2"==e?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==e?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==e?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==e?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==e&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),void 0!=t&&-1!=t&&(this.awardNo=t),this.$request.post("/api/wiseqr/metra/list",this.params,!0,e=>{if("200000"===e.ret)return this.list=[],this.list=e.data.list,this.listTotal=e.data.page.count,void(this.listVisible=!0);this.$message.error(e.message)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",[e.roleOptList.indexOf("materialBudget_add")>-1?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.dataForm}},[e._v("新建")]):e._e()],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"使用年份：",prop:"budgetYear"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.search.budgetYear,callback:function(t){e.$set(e.search,"budgetYear",t)},expression:"search.budgetYear"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销区："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),e.yearSum?a("div",{staticStyle:{width:"auto",float:"right","margin-left":"30px"}},[e._v("当年预算："+e._s(e.yearSum)+"（元）")]):e._e()],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.search.pageNo-1)*e.search.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"materialName",label:"礼品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetValue",label:"当季度预算（元）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.budgetValue)+"元")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statGiven",label:"已发放（元）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statGiven||0)+"元")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statReceived",label:"已领取（元）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statReceived||0)+"元")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statReceived",label:"剩余（元）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.budgetValue-t.row.budgetUsed||0)+"元")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statTime",label:"统计数据时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statTime||"暂无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetSeason",label:"使用时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.budgetSeason?a("span",[e._v(e._s("第一季度（1月1日00:00-3月31日23:59:59）"))]):e._e(),e._v(" "),2==t.row.budgetSeason?a("span",[e._v(e._s("第二季度（4月1日00:00-6月30日23:59:59）"))]):e._e(),e._v(" "),3==t.row.budgetSeason?a("span",[e._v(e._s("第三季度（7月1日00:00-9月30日23:59:59）"))]):e._e(),e._v(" "),4==t.row.budgetSeason?a("span",[e._v(e._s("第四季度（10月1日00:00-12月31日23:59:59）"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetYear",label:"年份",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleZoneName",label:"销区",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statRest",label:"季度结算(元)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statRest||0)+"元")])]}}])}),e._v(" "),e.roleOptList.indexOf("materialBudget_valueAdd")>-1||e.roleOptList.indexOf("materialBudget_delete")>-1?a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.roleOptList.indexOf("materialBudget_valueAdd")>-1?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.addRepertory(t.row)}}},[e._v("增库")]):e._e(),e._v(" "),e.roleOptList.indexOf("materialBudget_delete")>-1?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.del(t.row.id)}}},[e._v("删除")]):e._e()]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNo,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新建红包",width:"500px",visible:e.form.show},on:{"update:visible":function(t){e.$set(e.form,"show",t)},close:e.resetForm}},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"150px",model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"红包礼品名称：",prop:"materialName"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.getList(3)}}},[e._v(e._s(e.form.materialName?e.form.materialName:"选择"))]),e._v(" "),a("el-input",{staticStyle:{display:"none"},attrs:{size:"small",placeholder:"请输入礼品名称"},model:{value:e.form.materialName,callback:function(t){e.$set(e.form,"materialName",t)},expression:"form.materialName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"剩余库存（元）：",prop:"stock"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{precision:0,min:0,"controls-position":"right",size:"small",disabled:""},model:{value:e.form.stock,callback:function(t){e.$set(e.form,"stock",t)},expression:"form.stock"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预算（元）：",prop:"budgetValue"}},[a("el-input-number",{attrs:{precision:0,min:0,max:e.form.stock||0,"controls-position":"right"},model:{value:e.form.budgetValue,callback:function(t){e.$set(e.form,"budgetValue",t)},expression:"form.budgetValue"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("提示：不可超过剩余库存")])],1),e._v(" "),a("el-form-item",{attrs:{label:"使用季度：",prop:"budgetSeason"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.budgetSeason,callback:function(t){e.$set(e.form,"budgetSeason",t)},expression:"form.budgetSeason"}},[a("el-option",{attrs:{label:"第一季度（1月1日00:00-3月31日23:59:59）",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"第二季度（4月1日00:00-6月30日23:59:59）",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"第三季度（7月1日00:00-9月30日23:59:59）",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"第四季度（10月1日00:00-12月31日23:59:59）",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用年份：",prop:"budgetYear"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.form.budgetYear,callback:function(t){e.$set(e.form,"budgetYear",t)},expression:"form.budgetYear"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:e.handleSelectZone},model:{value:e.form.saleZoneCode,callback:function(t){e.$set(e.form,"saleZoneCode",t)},expression:"form.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.form.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveForm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.listVisible,width:"800px"},on:{"update:visible":function(t){e.listVisible=t},close:e.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"60px"},attrs:{src:e.row.pic,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.selectPrize(t.row,e.title,e.awardNo)}}},[e._v("选择")])]}}])})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":e.params.pageNo,"page-size":e.params.pageSize,layout:"total, prev, pager, next, jumper",total:e.listTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("0wWe")},"data-v-0ed58e64",null);t.default=r.exports},"9W9s":function(e,t){},AGi4:function(e,t,a){"use strict";var s=a("UJCi"),l=a.n(s),r={props:["metraFlag"],data(){return{materielName:l.a.materielName,materielUnit:l.a.materielUnit,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},tabIdx:0,supplierList:[],statusList:[],operTypeList:{},supplierSel:"",form:{metraFlag:this.metraFlag,pageNo:1,pageSize:10,keywords:"",supplierArr:[],status:"",operType:""},pagination:{total:0},materielDatas:[],operLogDatas:[],addPool:{show:!1,id:"",num:"",type:""},sourceFiles:[],pointsPool:"",usedPoints:"",receivedPoints:""}},created(){this.listMateriel(),this.getSuppliers(),this.getStatus(),this.getOperTypes(),"integral"==this.metraFlag&&this.getOrgPoint()},watch:{supplierSel(e,t){e!=t&&(this.form.supplierArr=[],e&&(this.form.supplierArr[0]=e))}},methods:{getOrgPoint(){this.$request.post("/sc/orgPoint/info",{},!1,e=>{"200"==e.code&&(this.pointsPool=e.context.pointsPool,this.usedPoints=e.context.usedPoints,this.receivedPoints=e.context.receivedPoints)})},currentChange(e){0==this.tabIdx?this.listMateriel(event,e):1==this.tabIdx&&this.listOperLog(event,e)},sizeChange(e){0==this.tabIdx?this.listMateriel(event,null,e):1==this.tabIdx&&this.listOperLog(event,null,e)},getSuppliers(){this.$request.post("/api/wiseqr/supplier/list",{pageSize:-1,status:1},!0,e=>{"200000"==e.ret&&(this.supplierList=e.data.list||[])})},getStatus(){this.$request.post("/api/wiseqr/dim/dataStatus",{},!1,e=>{"200000"==e.ret&&(this.statusList=e.data||[])})},getOperTypes(){this.$request.post("/api/wiseqr/metra/operTypes",{},!1,e=>{"200000"==e.ret&&(this.operTypeList=e.data||{})})},resetForm(){this.supplierSel="",this.form={metraFlag:this.metraFlag,pageNo:1,pageSize:10,keywords:"",supplierArr:[],status:"",operType:""},this.currentChange(1)},changeTab(e){this.tabIdx=e.index,0==e.index?this.listMateriel():1==e.index&&this.listOperLog()},materielForm(e,t){let a="";t&&t.id&&(a=t.id),this.$emit("showForm",a)},listMateriel(e,t,a){let s=1;t&&(s=t),this.form.pageNo=s;let l=10;a&&(l=a),this.form.pageSize=l,this.$request.post("/api/wiseqr/metra/list",this.form,!0,e=>{"200000"==e.ret&&(this.materielDatas=e.data.list||[],this.initPagination(e.data.page||{}))})},listOperLog(e,t,a){this.form.pageNo=t||1,this.form.pageSize=a||10,this.$request.post("/api/wiseqr/metra/operList",this.form,!0,e=>{"200000"==e.ret&&(this.operLogDatas=e.data.list||[],this.initPagination(e.data.page||{}))})},initPagination(e){e&&(this.pagination.total=e.count)},handleDelete(e,t){this.$confirm("停用后，将不在提供使用，确认操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{this.modifyData(t.id,0)}).catch(()=>{})},modifyData(e,t){let a={metraFlag:this.metraFlag,id:e,status:t};this.$request.post("/api/wiseqr/metra/modifyStatus",a,!0,e=>{"200000"==e.ret?(this.listMateriel(),this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.message)})},handleAddPool(e,t){this.addPool.id=t.id,this.addPool.type=t.type,this.addPool.show=!0},handlerSourceFileBUpload(e){},handleSourceFileSuccess(e,t){if(2e5==e.ret){this.$message({type:"success",message:e.data.successMsg});let t={name:e.data.sourceFile,sourceCode:e.data.sourceCode,count:e.data.successCount};this.sourceFiles.push(t)}else this.$message.error(e.message)},handleSourceFileRemove(e,t){this.sourceFiles=[]},confirmAddPool(){if(!this.addPool.num)return this.$message.error("增库值不能为空且必须是大于0的整数！"),!1;let e={metraFlag:this.metraFlag,id:this.addPool.id,increment:this.addPool.num};if("virtual"==this.metraFlag&&"890"==this.addPool.type){if(0==this.sourceFiles.length)return this.$message.error("卡密类型的物料必须上传卡密文件！"),!1;let t=this.sourceFiles[0];if(t.count!=this.addPool.num)return this.$confirm("卡密上传成功解析入库数与增库数不同，确认提交吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{e.sourceCode=t.sourceCode,e.sourceFile=t.name,this.requestAddStore(e)}).catch(()=>{}),!1}this.requestAddStore(e)},requestAddStore(e){this.$request.post("/api/wiseqr/metra/addStore",e,!0,e=>{"200000"==e.ret?(this.addPool.id="",this.addPool.num="",this.addPool.type="",this.addPool.show=!1,this.listMateriel()):this.$message.error(e.message)})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.materielForm}},[e._v("新建")]),e._v(" "),"integral"==e.metraFlag?[a("span",{staticStyle:{"margin-left":"30px"}}),e._v(" "),a("span",[e._v("总奖池："+e._s(e.pointsPool))]),e._v(" "),a("span",{staticStyle:{"margin-left":"30px"}}),e._v(" "),a("span",[e._v("已使用："+e._s(e.usedPoints))]),e._v(" "),a("span",{staticStyle:{"margin-left":"30px"}}),e._v(" "),a("span",[e._v("已回收："+e._s(e.receivedPoints))]),e._v(" "),a("span",{staticStyle:{"margin-left":"30px"}}),e._v(" "),a("span",[e._v("可使用："+e._s(e.pointsPool+e.receivedPoints-e.usedPoints))])]:e._e()],2),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.changeTab}},[a("el-tab-pane",{attrs:{label:"物料库"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"筛选信息"}},[a("el-input",{attrs:{size:"small",placeholder:e.materielName[e.metraFlag]+"名称"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.supplierSel,callback:function(t){e.supplierSel=t},expression:"supplierSel"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.supplierList,function(e){return a("el-option",{key:e.supplierCode,attrs:{label:e.name,value:e.supplierCode}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用状态"}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.statusList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})],2)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.listMateriel}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.materielDatas}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.form.pageNo-1)*e.form.pageSize+t.$index+1)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:e.materielName[e.metraFlag]+"名称",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.pic?a("img",{attrs:{src:t.row.pic}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存("+e.materielUnit[e.metraFlag]+")",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"使用状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1==t.row.status?"已启用":"已停用")+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.materielForm(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleAddPool(t.$index,t.row)}}},[e._v("增库")]):e._e(),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),0==t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.modifyData(t.row.id,1)}}},[e._v("启用")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"流水明细"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"筛选信息"}},[a("el-input",{attrs:{size:"small",placeholder:e.materielName[e.metraFlag]+"名称"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.supplierSel,callback:function(t){e.supplierSel=t},expression:"supplierSel"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.supplierList,function(e){return a("el-option",{key:e.supplierCode,attrs:{label:e.name,value:e.supplierCode}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"动作"}},[a("el-select",{attrs:{size:"small",placeholder:"全部"},model:{value:e.form.operType,callback:function(t){e.$set(e.form,"operType",t)},expression:"form.operType"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.operTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})],2)],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.listOperLog}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.operLogDatas}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.form.pageNo-1)*e.form.pageSize+t.$index+1)+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"poolName",label:e.materielName[e.metraFlag]+"名称",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operName",label:"动作",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"actName",label:"活动名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operNum",label:"操作数量("+e.materielUnit[e.metraFlag]+")",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作时间",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(new Date(t.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"creatorName",label:"操作人",align:"center"}})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":e.form.pageNo,"page-size":e.form.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"增库",width:"30%",visible:e.addPool.show},on:{"update:visible":function(t){e.$set(e.addPool,"show",t)}}},[a("el-form",{ref:"addPool",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"增加库存",prop:"stock"}},[a("el-input",{attrs:{size:"small",type:"number"},model:{value:e.addPool.num,callback:function(t){e.$set(e.addPool,"num",t)},expression:"addPool.num"}})],1),e._v(" "),"virtual"==e.metraFlag?a("el-form-item",{attrs:{label:"卡密文件"}},[a("el-upload",{staticClass:"upload-demo",attrs:{size:"small",action:"/api/wiseqr/metra/import",headers:e.headers,data:e.addPool,"before-upload":e.handlerSourceFileBUpload,"on-success":e.handleSourceFileSuccess,"on-remove":e.handleSourceFileRemove,"file-list":e.sourceFiles}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传csv/excel文件")])],1)],1):e._e()],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.addPool.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmAddPool}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("F5N/")},"data-v-2aca902d",null);t.a=o.exports},BPjb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("AGi4"),l=a("CywA"),r={components:{materielTable:s.a,materielForm:l.a},data:()=>({table:!0,metraFlag:"cdDouble",id:""}),methods:{showTable(e){this.id="",this.table=!0,e&&this.$refs.tableDatas.listMateriel()},showForm(e){this.id=e,this.table=!1}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("materiel-table",{directives:[{name:"show",rawName:"v-show",value:e.table,expression:"table"}],ref:"tableDatas",attrs:{metraFlag:e.metraFlag},on:{showForm:e.showForm}}),e._v(" "),e.table?e._e():a("materiel-form",{attrs:{metraFlag:e.metraFlag,materielId:e.id},on:{showTable:e.showTable}})],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("GwMe")},null,null);t.default=o.exports},BonP:function(e,t){},CywA:function(e,t,a){"use strict";var s=a("UJCi"),l=a.n(s),r={props:["metraFlag","materielId"],data(){return{id:this.materielId,materielName:l.a.materielName,materielUnit:l.a.materielUnit,materielType:l.a.materielType,headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},categoryList:[],categorySubList:[],supplierList:[],form:{id:"",name:"",supplierCode:"",pic:"",stock:"",warnValue:"",note:"",marketMoney:"",type:"",subType:"",outUrl:"",sourceCode:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],type:[{required:!0,message:"类型不能为空",trigger:"blur"}],supplierCode:[{required:!0,message:"请选择供应商",trigger:"change"}],marketMoney:[{required:!0,message:"请输入正确的市场价值"}],pic:[{required:!0,message:"请上传礼品图片",trigger:"change"}],stock:[{required:!0,message:"请输入库存值",trigger:"change"}]},elementShow:{889:!1,890:!1},sourceFiles:[]}},created(){this.getSuppliers(),this.metraFlag&&this.id?this.detail():this.form.pic=l.a.banner[this.metraFlag],"virtual"==this.metraFlag&&this.getCategories(1,this.materielType[this.metraFlag])},methods:{downTpl(){location.href="https://qoss.qrmkt.cn/saas_platform/common/materiel-tpl890.xlsx"},integerCheck(e){e&&(0==this.form[e].indexOf("0")&&(this.form[e]=this.form[e].substring(1)),this.form[e]=this.form[e].replace(/[^\.\d]/g,""),this.form[e]=this.form[e].replace(".",""))},getSuppliers(){this.$request.post("/api/wiseqr/supplier/list",{pageSize:-1,status:1},!0,e=>{"200000"==e.ret&&(this.supplierList=e.data.list||[])})},getCategories(e,t,a){for(let e in this.elementShow)this.elementShow[e]=!1;this.elementShow[t]=!0,this.form.subType=a||"",this.categorySubList=[],this.$request.post("/api/wiseqr/dim/query",{cateCode:"award_type",parentCode:t},!0,t=>{"200000"==t.ret&&(1==e?this.categoryList=t.data||[]:this.categorySubList=t.data||[])})},detail(){this.$request.post("/api/wiseqr/metra/detail",{id:this.id,metraFlag:this.metraFlag},!0,e=>{if("200000"==e.ret){let t=e.data;if(t&&(this.form=Object.assign({},this.form,t),"virtual"==this.metraFlag&&(this.getCategories(2,this.form.type,this.form.subType),t.sourceFile))){let e={name:t.sourceFile,sourceCode:t.sourceCode};this.sourceFiles.push(e)}}})},submitForm(e){this.$refs[e].validate(e=>{if(e){if(this.form.metraFlag=this.metraFlag,"virtual"==this.metraFlag&&"890"==this.form.type){if(0==this.sourceFiles.length)return this.$message.error("卡密类型的物料必须上传卡密文件！"),!1;let e=this.sourceFiles[0];if(e.count!=this.form.stock)return this.$confirm("卡密上传成功解析入库数与增库数不同，确认提交吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.form.sourceCode=e.sourceCode,this.form.sourceFile=e.name,this.requestAddStore()}).catch(()=>{}),!1}this.requestAddStore()}})},requestAddStore(){this.$request.post("/api/wiseqr/metra/saveOrModify",this.form,!0,e=>{"200000"==e.ret?this.$emit("showTable",!0):this.$message.error(e.message)})},cancelForm(e){this.$refs[e].resetFields(),this.$emit("showTable")},beforeAvatarUpload(e){let t,a=e.name,s=a.lastIndexOf(".");if(s>-1&&(t=a.substring(s+1)),-1=="png,jpg,jpeg".indexOf(t))return this.$message.error("图片格式错误，只支持：png、jpg、jpeg!"),!1;return!!(e.size/1024/1024<2)||(this.$message.error("上传图片大小不能超过 2MB!"),!1)},handleAvatarSuccess(e,t){2e5==e.ret&&(this.form.pic=e.data.accessUrl)},handlerSourceFileBUpload(e){if(!this.form.type)return this.$message.error("请先选择类型，在上传卡密文件！"),!1},handleSourceFileSuccess(e,t){if(2e5==e.ret){this.$message({type:"success",message:e.data.successMsg});let t={name:e.data.sourceFile,sourceCode:e.data.sourceCode,count:e.data.successCount};this.sourceFiles.push(t)}else this.$message.error(e.message)},handleSourceFileRemove(e,t){this.sourceFiles=[]}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"materiel"},[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:e.materielName[e.metraFlag]+"名称",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),"virtual"==e.metraFlag?a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticClass:"materiel-type",attrs:{size:"small",placeholder:"请选择分类",disabled:!!e.id},on:{change:function(t){e.getCategories(2,e.form.type)}},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.categoryList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})})),e._v(" "),a("el-select",{staticClass:"materiel-type",attrs:{size:"small",placeholder:"请选择子分类",prop:"subType",disabled:!!e.id},model:{value:e.form.subType,callback:function(t){e.$set(e.form,"subType",t)},expression:"form.subType"}},e._l(e.categorySubList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"供应商",prop:"supplierCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择供应商",disabled:!!e.id},model:{value:e.form.supplierCode,callback:function(t){e.$set(e.form,"supplierCode",t)},expression:"form.supplierCode"}},e._l(e.supplierList,function(e){return a("el-option",{key:e.supplierCode,attrs:{label:e.name,value:e.supplierCode}})}))],1),e._v(" "),"object"==e.metraFlag||"virtual"==e.metraFlag?a("el-form-item",{attrs:{label:"市场价值（元）",prop:"marketMoney"}},[a("el-input",{attrs:{size:"small",type:"number"},model:{value:e.form.marketMoney,callback:function(t){e.$set(e.form,"marketMoney",t)},expression:"form.marketMoney"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"礼品图片",prop:"pic"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{size:"small",action:"/api/wiseqr/attach/commonAliUpload",headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.pic?a("img",{staticClass:"avatar",attrs:{src:e.form.pic,width:"100",height:"74"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("* 图片建议尺寸为380*280px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"库存（"+e.materielUnit[e.metraFlag]+"）",prop:"stock"}},[a("el-input",{attrs:{size:"small",type:"text",disabled:!!e.id},nativeOn:{keyup:function(t){e.integerCheck("stock")}},model:{value:e.form.stock,callback:function(t){e.$set(e.form,"stock",t)},expression:"form.stock"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"库存阀值",prop:"warnValue"}},[a("el-input",{attrs:{size:"small",type:"text"},nativeOn:{keyup:function(t){e.integerCheck("warnValue")}},model:{value:e.form.warnValue,callback:function(t){e.$set(e.form,"warnValue",t)},expression:"form.warnValue"}})],1),e._v(" "),"virtual"==e.metraFlag&&e.elementShow[889]?a("el-form-item",{attrs:{label:"链接URL",prop:"outUrl"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.outUrl,callback:function(t){e.$set(e.form,"outUrl",t)},expression:"form.outUrl"}})],1):e._e(),e._v(" "),"virtual"==e.metraFlag&&e.elementShow[890]?a("el-form-item",{attrs:{label:"卡密文件",prop:"sourceCode"}},[a("a",{staticClass:"alike-btn",attrs:{href:"javascript:;"},on:{click:e.downTpl}},[e._v("模板下载")]),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{size:"small",action:"/api/wiseqr/metra/import",headers:e.headers,data:e.form,"before-upload":e.handlerSourceFileBUpload,"on-success":e.handleSourceFileSuccess,"on-remove":e.handleSourceFileRemove,"file-list":e.sourceFiles}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传csv/excel文件")])],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"描述",prop:"note"}},[a("el-input",{attrs:{size:"small",type:"textarea",autosize:{minRows:3,maxRows:10}},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.cancelForm("form")}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("lK/U")},"data-v-40abc77e",null);t.a=o.exports},"F5N/":function(e,t){},FBIe:function(e,t){},FEFX:function(e,t){},"FFm+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"Brand",data:()=>({orgHasSaleZone:sessionStorage.orgHasSaleZone,isAllSaleZone:sessionStorage.isAllSaleZone,saleZoneCode:sessionStorage.saleZoneCode,roleOptList:sessionStorage.roleOptList.split(","),saleZone:[],search:{pageNo:1,pageSize:10,budgetYear:(new Date).getFullYear().toString(),saleZoneCode:null,materialType:1},pagination:{total:0},tableList:[],yearSum:"",form:{show:!1,id:"",materialName:"",budgetValue:"",materialType:1,materialPoolId:null,budgetSeason:"",budgetYear:"",saleZoneCode:"",saleZoneName:"",stock:""},formRules:{materialName:[{required:!0,message:"请选择实物礼品",trigger:"change"}],budgetValue:[{required:!0,validator:(e,t,a)=>{"0"==t?a(new Error("请输入预算（个）")):a()},trigger:"blur"}],budgetSeason:[{required:!0,message:"请选择季度",trigger:"change"}],budgetYear:[{required:!0,message:"请选择年份",trigger:"change"}],saleZoneCode:[{required:!0,message:"请选择销区",trigger:"change"}]},title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,awardType:[{value:1,label:"实物"},{value:6,label:"积分"},{value:3,label:"红包"},{value:7,label:"折扣卡"},{value:8,label:"翻倍卡"}],awardNo:""}),created(){1==this.isAllSaleZone?this.getSaleZone():(this.getSaleZone(),this.search.saleZoneCode=this.saleZoneCode,this.getTableList())},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[])})},currentChange(e){this.getTableList(event,e)},sizeChange(e){this.getTableList(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},reset(){this.search={pageNo:1,pageSize:10,budgetYear:"",saleZoneCode:null,materialType:1},this.search.budgetYear=(new Date).getFullYear().toString(),1==this.isAllSaleZone?this.tableList=[]:(this.search.saleZoneCode=this.saleZoneCode,this.getTableList())},resetForm(){this.$refs.ruleForm.resetFields(),this.form={show:!1,id:"",materialName:"",budgetValue:"",materialType:1,materialPoolId:null,budgetSeason:"",budgetYear:"",saleZoneCode:"",saleZoneName:"",stock:""}},getTableList(e,t,a){let s=1;t&&(s=t),this.search.pageNo=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/api/materialBudget/list",this.search,!0,e=>{"200"==e.code&&(this.tableList=e.data.budgetList.list||[],this.yearSum=e.data.yearSum,this.initPagination(e.data.budgetList.page||{}))})},handleSelectZone(e){let t=this.saleZone.find(t=>t.zoneCode==e);console.log(t),this.form.saleZoneName=t.zoneName},dataForm(e,t){this.form.id="",this.form.materialName="",this.form.materialPoolId="",this.form.stock="",t&&t.id&&(this.form.id=t.id,this.form.materialName=t.materialName,this.form.materialPoolId=t.materialPoolId,this.form.stock=t.stock),this.form.show=!0},saveForm(){this.form.id||this.$refs.ruleForm.validate(e=>{if(e){let e={saleZoneCode:this.form.saleZoneCode,saleZoneName:this.form.saleZoneName,budgetValue:this.form.budgetValue,budgetSeason:this.form.budgetSeason,budgetYear:this.form.budgetYear,materialType:this.form.materialType,materialName:this.form.materialName,materialPoolId:this.form.materialPoolId};this.$request.post("/api/materialBudget/add",e,!0,e=>{"200"==e.code?(this.getTableList(),this.resetForm(),this.form.show=!1,this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.msg||e.message)})}})},addRepertory(e){this.$request.post("/api/wiseqr/metra/detail",{id:e.materialPoolId,metraFlag:"object"},!0,t=>{if("200000"==t.ret){let a=t.data.stock;this.$prompt(`<div style="line-height: 30px">实物礼品名称：${e.materialName}</div>\n                       <div style="line-height: 30px">剩余库存（个）：${a}</div>\n                       增加预算（个）：（提示：不可超过剩余库存）`,"增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字",dangerouslyUseHTMLString:!0}).then(({value:t})=>0==t?this.$message.error("数字不能为0"):t>a?this.$message.error("增库不可超过剩余库存"):void this.$request.get("/api/materialBudget/valueAdd",{budgetId:e.id,budgetValue:t,materialPoolId:e.materialPoolId},e=>{"200"==e.code?(this.$message.success("增库成功"),this.getTableList()):this.$message.error(e.msg)})).catch(()=>{this.$message({type:"info",message:"取消输入"})})}else this.$message.error(t.msg||t.message)})},async del(e){if("confirm"!==await this.$confirm("您确定删除此预算？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e))return this.$message({type:"info",message:"已取消删除"});this.$request.get("/api/materialBudget/delete",{budgetId:e},e=>{console.log(e),"200"==e.code?(this.$message.success("删除成功"),this.getTableList()):this.$message.error(e.msg)},e=>{console.log(e)})},selectPrize(e,t,a){this.form.materialName=e.name,this.form.materialPoolId=e.id,this.form.stock=e.stock,console.log(e),this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},handleSizeChange(e){this.params.pageSize=e,this.getList()},handleCurrentChange(e){this.params.pageNo=e,this.getList()},getList(e,t){"1"==e?(this.params.metraFlag="object",this.title="选择实物"):"2"==e?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==e?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==e?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==e?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==e&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),void 0!=t&&-1!=t&&(this.awardNo=t),this.$request.post("/api/wiseqr/metra/list",this.params,!0,e=>{if("200000"===e.ret)return this.list=[],this.list=e.data.list,this.listTotal=e.data.page.count,void(this.listVisible=!0);this.$message.error(e.message)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",[e.roleOptList.indexOf("materialBudget_add")>-1?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.dataForm}},[e._v("新建")]):e._e()],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"使用年份：",prop:"budgetYear"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.search.budgetYear,callback:function(t){e.$set(e.search,"budgetYear",t)},expression:"search.budgetYear"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销区："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((e.search.pageNo-1)*e.search.pageSize+t.$index+1)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"materialName",label:"礼品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetValue",label:"当季度预算（数量）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.budgetValue)+"个")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statGiven",label:"已发放（数量）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statGiven||0)+"个")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statReceived",label:"已领取（数量）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statReceived||0)+"个")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statReceived",label:"剩余（数量）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.budgetValue-t.row.budgetUsed||0)+"个")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statTime",label:"统计数据时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statTime||"暂无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetSeason",label:"使用时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.budgetSeason?a("span",[e._v(e._s("第一季度（1月1日00:00-3月31日23:59:59）"))]):e._e(),e._v(" "),2==t.row.budgetSeason?a("span",[e._v(e._s("第二季度（4月1日00:00-6月30日23:59:59）"))]):e._e(),e._v(" "),3==t.row.budgetSeason?a("span",[e._v(e._s("第三季度（7月1日00:00-9月30日23:59:59）"))]):e._e(),e._v(" "),4==t.row.budgetSeason?a("span",[e._v(e._s("第四季度（10月1日00:00-12月31日23:59:59）"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetYear",label:"年份",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleZoneName",label:"销区",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statRest",label:"季度结算(数量)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statRest||0)+"个")])]}}])}),e._v(" "),e.roleOptList.indexOf("materialBudget_valueAdd")>-1||e.roleOptList.indexOf("materialBudget_delete")>-1?a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.roleOptList.indexOf("materialBudget_valueAdd")>-1?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.addRepertory(t.row)}}},[e._v("增库")]):e._e(),e._v(" "),e.roleOptList.indexOf("materialBudget_delete")>-1?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.del(t.row.id)}}},[e._v("删除")]):e._e()]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNo,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新建实物",width:"500px",visible:e.form.show},on:{"update:visible":function(t){e.$set(e.form,"show",t)},close:function(t){e.resetForm()}}},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"150px",model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"实物礼品名称：",prop:"materialName"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.getList(1)}}},[e._v(e._s(e.form.materialName?e.form.materialName:"选择"))]),e._v(" "),a("el-input",{staticStyle:{display:"none"},attrs:{size:"small",placeholder:"请输入礼品名称"},model:{value:e.form.materialName,callback:function(t){e.$set(e.form,"materialName",t)},expression:"form.materialName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"剩余库存（个）：",prop:"stock"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{precision:0,min:0,"controls-position":"right",disabled:""},model:{value:e.form.stock,callback:function(t){e.$set(e.form,"stock",t)},expression:"form.stock"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预算（个）：",prop:"budgetValue"}},[a("el-input-number",{attrs:{precision:0,min:0,max:e.form.stock||0,"controls-position":"right"},model:{value:e.form.budgetValue,callback:function(t){e.$set(e.form,"budgetValue",t)},expression:"form.budgetValue"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("提示：不可超过剩余库存")])],1),e._v(" "),a("el-form-item",{attrs:{label:"使用季度：",prop:"budgetSeason"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.budgetSeason,callback:function(t){e.$set(e.form,"budgetSeason",t)},expression:"form.budgetSeason"}},[a("el-option",{attrs:{label:"第一季度（1月1日00:00-3月31日23:59:59）",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"第二季度（4月1日00:00-6月30日23:59:59）",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"第三季度（7月1日00:00-9月30日23:59:59）",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"第四季度（10月1日00:00-12月31日23:59:59）",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用年份：",prop:"budgetYear"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.form.budgetYear,callback:function(t){e.$set(e.form,"budgetYear",t)},expression:"form.budgetYear"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:e.handleSelectZone},model:{value:e.form.saleZoneCode,callback:function(t){e.$set(e.form,"saleZoneCode",t)},expression:"form.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.form.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveForm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.listVisible,width:"800px"},on:{"update:visible":function(t){e.listVisible=t},close:e.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"60px"},attrs:{src:e.row.pic,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.selectPrize(t.row,e.title,e.awardNo)}}},[e._v("选择")])]}}])})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":e.params.pageNo,"page-size":e.params.pageSize,layout:"total, prev, pager, next, jumper",total:e.listTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("FBIe")},"data-v-b6d02be8",null);t.default=r.exports},FOU4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={props:["id"],data:()=>({ruleForm:{name:"",contact:"",mobile:"",addr:"",note:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"}],addr:[{required:!0,message:"请输入地址",trigger:"blur"}]}}),created(){this.getSupplierMsg(this.id)},methods:{submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{let e={id:this.id,addr:this.ruleForm.addr,contact:this.ruleForm.contact,mobile:this.ruleForm.mobile,name:this.ruleForm.name,note:this.ruleForm.note};this.postParams(e)}})},postParams(e){this.$request.post("/api/wiseqr/supplier/saveOrModify",e,!0,e=>{"200000"==e.ret?this.$message({message:"保存成功！",type:"success"}):this.$message({message:e.message,type:"warning"})},e=>{})},getSupplierMsg(e){this.$request.post("/api/wiseqr/supplier/detail",{id:e},!0,e=>{"200000"==e.ret&&(console.log(e.data),this.ruleForm.contact=e.data.contact,this.ruleForm.name=e.data.name,this.ruleForm.mobile=e.data.mobile,this.ruleForm.addr=e.data.addr,this.ruleForm.note=e.data.note)})},returnSupplier(){this.$router.push({path:"/product/supply"})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"edit-supplier-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"供应商名称",prop:"name",size:"small"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"contact",size:"small"}},[a("el-input",{model:{value:e.ruleForm.contact,callback:function(t){e.$set(e.ruleForm,"contact",t)},expression:"ruleForm.contact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"mobile",size:"small"}},[a("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"addr",size:"small"}},[a("el-input",{model:{value:e.ruleForm.addr,callback:function(t){e.$set(e.ruleForm,"addr",t)},expression:"ruleForm.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"note",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入备注(主营商品、品牌等)"},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.returnSupplier}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("wS1y"),a("PReQ")},"data-v-45827d00",null);t.default=r.exports},GwMe:function(e,t){},HD2g:function(e,t){},JDqn:function(e,t){},LwZi:function(e,t){},PReQ:function(e,t){},"Qkf/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"Brand",data:()=>({orgHasSaleZone:sessionStorage.orgHasSaleZone,isAllSaleZone:sessionStorage.isAllSaleZone,saleZoneCode:sessionStorage.saleZoneCode,roleOptList:sessionStorage.roleOptList.split(","),saleZone:[],search:{costYear:(new Date).getFullYear().toString(),saleZoneCode:null,orgId:sessionStorage.getItem("orgId")},pagination:{total:0},tableList:[],yearSum:"",form:{show:!1,id:"",costBudgetValue:"",costYear:"",saleZoneCode:"",saleZoneName:"",costBudgetRest:""},formRules:{materialName:[{required:!0,message:"请输入红包礼品名称",trigger:"change"}],costBudgetValue:[{required:!0,validator:(e,t,a)=>{""==t?a(new Error("请输入预算（元）")):a()},trigger:"blur"}],budgetSeason:[{required:!0,message:"请选择季度",trigger:"change"}],costYear:[{required:!0,message:"请选择年份",trigger:"change"}],saleZoneCode:[{required:!0,message:"请选择销区",trigger:"change"}]},title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,awardType:[{value:1,label:"实物"},{value:6,label:"积分"},{value:3,label:"红包"},{value:7,label:"折扣卡"},{value:8,label:"翻倍卡"}],awardNo:""}),created(){1==this.isAllSaleZone?(this.getSaleZone(),this.getTableList()):(this.getSaleZone(),this.search.saleZoneCode=this.saleZoneCode,this.getTableList())},methods:{closeForm(){console.log(111),this.form.show=!1},getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[])})},currentChange(e){this.getTableList(event,e)},sizeChange(e){this.getTableList(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},reset(){this.search={costYear:"",saleZoneCode:null,orgId:sessionStorage.getItem("orgId")},this.search.costYear=(new Date).getFullYear().toString(),1==this.isAllSaleZone?(this.tableList=[],this.getTableList()):(this.search.saleZoneCode=this.saleZoneCode,this.getTableList())},resetForm(){this.$refs.ruleForm.resetFields(),this.form={show:!1,id:"",costBudgetValue:"",costYear:"",saleZoneCode:"",saleZoneName:"",costBudgetRest:""}},getTableList(e,t,a){this.$request.post("/api/materialBudget/costBudgetList",this.search,!0,e=>{"200"==e.code&&(this.tableList=e.data.costBudget||[])})},handleSelectZone(e){let t=this.saleZone.find(t=>t.zoneCode==e);console.log(t),this.form.saleZoneName=t.zoneName},dataForm(e,t){this.form.id="",this.form.costBudgetRest="",this.form.costBudgetValue="",this.form.costYear="",this.form.saleZoneCode="",this.form.saleZoneName="",t&&t.id&&(this.form.id=t.id,this.form.costBudgetRest=t.costBudgetRest),this.form.show=!0},editItem(e){this.$request.post("/api/materialBudget/costBudgetInfo",{id:e.id},!1,e=>{"200"==e.code&&(this.form.id=e.data.itemInfo.id,this.form.costBudgetRest=e.data.itemInfo.costBudgetRest,this.form.costBudgetValue=e.data.itemInfo.costBudgetValue,this.form.costYear=e.data.itemInfo.costYear,this.form.saleZoneCode=e.data.itemInfo.saleZoneCode,this.form.saleZoneName=e.data.itemInfo.saleZoneName,this.form.show=!0)})},saveForm(){this.$refs.ruleForm.validate(e=>{if(e){let e={orgId:sessionStorage.getItem("orgId"),saleZoneCode:this.form.saleZoneCode,saleZoneName:this.form.saleZoneName,costBudgetValue:this.form.costBudgetValue,costBudgetRest:this.form.costBudgetRest,costYear:this.form.costYear};this.form.id&&(e.id=this.form.id),this.$request.post("/api/materialBudget/saveUpdate",e,!0,e=>{"200"==e.code?(this.getTableList(),this.form.show=!1,this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.msg||e.message)})}})},selectPrize(e,t,a){this.form.materialName=e.name,this.form.materialPoolId=e.id,this.form.costBudgetRest=e.stock,console.log(e),this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},handleSizeChange(e){this.params.pageSize=e,this.getList()},handleCurrentChange(e){this.params.pageNo=e,this.getList()},getList(e,t){"1"==e?(this.params.metraFlag="object",this.title="选择实物"):"2"==e?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==e?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==e?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==e?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==e&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),void 0!=t&&-1!=t&&(this.awardNo=t),this.$request.post("/api/wiseqr/metra/list",this.params,!0,e=>{if("200000"===e.ret)return this.list=[],this.list=e.data.list,this.listTotal=e.data.page.count,void(this.listVisible=!0);this.$message.error(e.message)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",[e.roleOptList.indexOf("materialBudget_add")>-1?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.dataForm}},[e._v("新建")]):e._e()],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"使用年份：",prop:"costYear"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.search.costYear,callback:function(t){e.$set(e.search,"costYear",t)},expression:"search.costYear"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销区："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"costYear",label:"使用年份",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"saleZoneName",label:"销区",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"costBudgetValue",label:"费用预算（单位：元）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.costBudgetValue||0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"costBudgetRest",label:"剩余预算（单位：元）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.costBudgetRest||0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.editItem(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNo,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:(e.form.id?"编辑":"新建")+"红包",width:"500px",visible:e.form.show},on:{"update:visible":function(t){e.$set(e.form,"show",t)},close:e.resetForm}},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"150px",model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"使用年份：",prop:"costYear"}},[a("el-date-picker",{attrs:{disabled:!!e.form.id,type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.form.costYear,callback:function(t){e.$set(e.form,"costYear",t)},expression:"form.costYear"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择",disabled:!!e.form.id},on:{change:e.handleSelectZone},model:{value:e.form.saleZoneCode,callback:function(t){e.$set(e.form,"saleZoneCode",t)},expression:"form.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"费用预算（元）：",prop:"costBudgetValue"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.costBudgetValue,callback:function(t){e.$set(e.form,"costBudgetValue",t)},expression:"form.costBudgetValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"剩余库存（元）：",prop:"costBudgetRest"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.costBudgetRest,callback:function(t){e.$set(e.form,"costBudgetRest",t)},expression:"form.costBudgetRest"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeForm}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveForm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.listVisible,width:"800px"},on:{"update:visible":function(t){e.listVisible=t},close:e.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"60px"},attrs:{src:e.row.pic,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.selectPrize(t.row,e.title,e.awardNo)}}},[e._v("选择")])]}}])})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":e.params.pageNo,"page-size":e.params.pageSize,layout:"total, prev, pager, next, jumper",total:e.listTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("JDqn")},"data-v-0a7d4c6d",null);t.default=r.exports},RZ35:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({brandList:[],prodTypeList:[],packArrList:[],typeList:[],gradeArrList:[],gradeLevelArrList:[],headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},dialogImageUrl:"",dialogVisible:!1,filters:{brandCode:"",prodName:"",sn:"",unitType:"",allName:"",price:"",smallPic:"",typeCode:"",oil:"",nicotine:"",carbonMonoxide:"",length:"",num:"",pack:"",grade:"",gradeLevel:""},rules:{brandCode:[{required:!0,message:"请选择关联品牌",trigger:"change"}],prodName:[{required:!0,message:"请输入规格名称",trigger:"change"}],sn:[{required:!0,message:"请输入SN码名称",trigger:"change"}],unitType:[{required:!0,message:"请选择包装单位",trigger:"change"}],price:[{required:!0,message:"请输入价格",trigger:"change"}],typeCode:[{required:!0,message:"请选择卷烟类型",trigger:"change"}],oil:[{required:!0,message:"请输入焦油量",trigger:"change"}],nicotine:[{required:!0,message:"请输入烟碱量",trigger:"change"}],carbonMonoxide:[{required:!0,message:"请输入一氧碳量",trigger:"change"}],length:[{required:!0,message:"请输入烟支长度",trigger:"change"}],num:[{required:!0,message:"请输入烟支数量",trigger:"change"}],pack:[{required:!0,message:"请选择包装",trigger:"change"}],grade:[{required:!0,message:"请选择价类",trigger:"change"}],gradeLevel:[{required:!0,message:"请选择二级价类",trigger:"change"}]}}),created(){this.getListBrand(),this.getTobaccoPack(),this.getTobaccoGrade(),this.getTobaccoStyle(),this.getProdType()},methods:{getListBrand(){this.$request.post("/api/wiseqr/prod/listBrand",{},!0,e=>{"200000"==e.ret&&(this.brandList=e.data.list)})},selectBrand(e){},getTobaccoPack(){this.$request.post("/api/wiseqr/dim/tobaccoPack",{parentCode:""},!0,e=>{"200000"==e.ret&&(this.packArrList=e.data)})},getTobaccoGrade(){this.$request.post("/api/wiseqr/dim/tobaccoGrade",{},!0,e=>{"200000"==e.ret&&(this.gradeArrList=e.data)})},getTobaccoStyle(){this.$request.post("/api/wiseqr/dim/tobaccoStyle",{},!0,e=>{"200000"==e.ret&&(this.typeList=e.data)})},getProdType(){this.$request.post("/api/wiseqr/dim/prodType",{parentCode:"prod1"},!0,e=>{"200000"==e.ret&&(this.prodTypeList=e.data)})},selectGrade(e){this.filters.gradeLevel="",this.getListGradeLevel()},getListGradeLevel(){this.$request.post("/api/wiseqr/dim/tobaccoGrade",{parentCode:this.filters.grade},!0,e=>{"200000"==e.ret&&(this.gradeLevelArrList=e.data)})},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{let e={carbonMonoxide:this.filters.carbonMonoxide,grade:this.filters.grade,gradeLevel:this.filters.gradeLevel,length:this.filters.length,nicotine:this.filters.nicotine,num:this.filters.num,oil:this.filters.oil,pack:this.filters.pack,price:this.filters.price,sn:this.filters.sn,product:{allName:this.filters.allName,brandCode:this.filters.brandCode,prodName:this.filters.prodName,smallPic:this.filters.smallPic,type:"prod1",unitType:this.filters.unitType},typeCode:this.filters.typeCode};this.$request.post("/api/wiseqr/prod/saveOrModifyTbc",e,!0,e=>{"200000"==e.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnTobaccoMgr()):this.$message({message:e.message,type:"warning"})},e=>{})}})},handleRemove(e,t){console.log(e,t)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleAvatarSuccess(e,t){var a=e.data||{},s=a&&a.accessUrl;this.filters.smallPic=s},returnTobaccoMgr(){this.$router.push({path:"/product/mgr/tobacco"})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"add-tobaccomgr-container clearfix"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{ref:"ruleForm",attrs:{inline:!0,rules:e.rules,model:e.filters,"label-width":"110px"}},[a("div",{staticClass:"add-tobaccomgr-form-title"},[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-container"},[a("el-form-item",{attrs:{size:"small",label:"关联品牌：",prop:"brandCode"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},on:{change:e.selectBrand},model:{value:e.filters.brandCode,callback:function(t){e.$set(e.filters,"brandCode",t)},expression:"filters.brandCode"}},e._l(e.brandList,function(e){return a("el-option",{key:e.brandCode,attrs:{label:e.name,value:e.brandCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"规格名称：",prop:"prodName"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.prodName,callback:function(t){e.$set(e.filters,"prodName",t)},expression:"filters.prodName"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"SN码：",prop:"sn"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.sn,callback:function(t){e.$set(e.filters,"sn",t)},expression:"filters.sn"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"包装单位：",prop:"unitType"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:e.filters.unitType,callback:function(t){e.$set(e.filters,"unitType",t)},expression:"filters.unitType"}},e._l(e.prodTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"产品全称：",prop:"allName"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.allName,callback:function(t){e.$set(e.filters,"allName",t)},expression:"filters.allName"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"价格：",prop:"price"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.price,callback:function(t){e.$set(e.filters,"price",t)},expression:"filters.price"}})],1)],1),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-title"},[e._v("产品图片")]),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-container",staticStyle:{"padding-bottom":"30px"}},[a("el-upload",{staticClass:"tobacco-pic",attrs:{action:"/api/wiseqr/attach/commonAliUpload","list-type":"picture-card",headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.filters.smallPic?a("img",{staticClass:"avatar",attrs:{width:"53",height:"100",src:e.filters.smallPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("* 图片建议尺寸为 160*300px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])],1),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-title"},[e._v("产品信息")]),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-container"},[a("el-form-item",{attrs:{size:"small",label:"卷烟类型：",prop:"typeCode"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:e.filters.typeCode,callback:function(t){e.$set(e.filters,"typeCode",t)},expression:"filters.typeCode"}},e._l(e.typeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"焦油量：",prop:"oil"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.oil,callback:function(t){e.$set(e.filters,"oil",t)},expression:"filters.oil"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"烟碱量：",prop:"nicotine"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.nicotine,callback:function(t){e.$set(e.filters,"nicotine",t)},expression:"filters.nicotine"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"一氧化碳量：",prop:"carbonMonoxide"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.carbonMonoxide,callback:function(t){e.$set(e.filters,"carbonMonoxide",t)},expression:"filters.carbonMonoxide"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"烟支长度：",prop:"length"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.length,callback:function(t){e.$set(e.filters,"length",t)},expression:"filters.length"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"烟支数量：",prop:"num"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.num,callback:function(t){e.$set(e.filters,"num",t)},expression:"filters.num"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"包裝：",prop:"pack"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:e.filters.pack,callback:function(t){e.$set(e.filters,"pack",t)},expression:"filters.pack"}},e._l(e.packArrList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"价类：",prop:"grade"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},on:{change:e.selectGrade},model:{value:e.filters.grade,callback:function(t){e.$set(e.filters,"grade",t)},expression:"filters.grade"}},e._l(e.gradeArrList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"二级价类：",prop:"gradeLevel"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:e.filters.gradeLevel,callback:function(t){e.$set(e.filters,"gradeLevel",t)},expression:"filters.gradeLevel"}},e._l(e.gradeLevelArrList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.returnTobaccoMgr}},[e._v("取消")])],1)],1)])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("qxN8"),a("tRF3")},"data-v-c0feb7d4",null);t.default=r.exports},S2K5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("AGi4"),l=a("CywA"),r={components:{materielTable:s.a,materielForm:l.a},data:()=>({table:!0,metraFlag:"integral",id:""}),methods:{showTable(e){this.id="",this.table=!0,e&&this.$refs.tableDatas.listMateriel()},showForm(e){this.id=e,this.table=!1}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("materiel-table",{directives:[{name:"show",rawName:"v-show",value:e.table,expression:"table"}],ref:"tableDatas",attrs:{metraFlag:e.metraFlag},on:{showForm:e.showForm}}),e._v(" "),e.table?e._e():a("materiel-form",{attrs:{metraFlag:e.metraFlag,materielId:e.id},on:{showTable:e.showTable}})],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("iEoG")},null,null);t.default=o.exports},TCy4:function(e,t){},THUq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={props:["id"],data:()=>({brandList:[],prodTypeList:[],packArrList:[],typeList:[],gradeArrList:[],gradeLevelArrList:[],headers:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token")},dialogImageUrl:"",dialogVisible:!1,filters:{brandCode:"",prodName:"",sn:"",unitType:"",allName:"",price:"",smallPic:"",typeCode:"",oil:"",nicotine:"",carbonMonoxide:"",length:"",num:"",pack:"",grade:"",gradeLevel:""},rules:{brandCode:[{required:!0,message:"请选择关联品牌",trigger:"change"}],prodName:[{required:!0,message:"请输入规格名称",trigger:"change"}],sn:[{required:!0,message:"请输入SN码名称",trigger:"change"}],unitType:[{required:!0,message:"请选择包装单位",trigger:"change"}],price:[{required:!0,message:"请输入价格",trigger:"change"}],typeCode:[{required:!0,message:"请选择卷烟类型",trigger:"change"}],oil:[{required:!0,message:"请输入焦油量",trigger:"change"}],nicotine:[{required:!0,message:"请输入烟碱量",trigger:"change"}],carbonMonoxide:[{required:!0,message:"请输入一氧碳量",trigger:"change"}],length:[{required:!0,message:"请输入烟支长度",trigger:"change"}],num:[{required:!0,message:"请输入烟支数量",trigger:"change"}],pack:[{required:!0,message:"请选择包装",trigger:"change"}],grade:[{required:!0,message:"请选择价类",trigger:"change"}],gradeLevel:[{required:!0,message:"请选择二级价类",trigger:"change"}]}}),created(){this.getListBrand(),this.getTobaccoPack(),this.getTobaccoGrade(),this.getTobaccoStyle(),this.getProdType(),this.getTobaccoMsg(this.id)},methods:{getTobaccoMsg(e){this.$request.post("/api/wiseqr/prod/detailTbc",{id:e},!0,e=>{"200000"==e.ret&&(console.log(e.data),this.filters.carbonMonoxide=e.data.carbonMonoxide,this.filters.grade=e.data.grade+"",this.getListGradeLevel({parentCode:this.filters.grade}),this.filters.gradeLevel=e.data.gradeLevel+"",this.filters.id=e.data.id,this.filters.length=e.data.length,this.filters.nicotine=e.data.nicotine,this.filters.num=e.data.num,this.filters.oil=e.data.oil,this.filters.pack=e.data.pack+"",this.filters.price=e.data.price,this.filters.sn=e.data.sn,this.filters.typeCode=e.data.typeCode+"",this.filters.allName=e.data.product.allName,this.filters.brandCode=e.data.product.brandCode+"",this.filters.prodName=e.data.product.prodName+"",this.filters.smallPic=e.data.product.smallPic,this.filters.unitType=e.data.product.unitType+"")})},getListBrand(){this.$request.post("/api/wiseqr/prod/listBrand",{},!0,e=>{"200000"==e.ret&&(this.brandList=e.data.list)})},selectBrand(e){},getTobaccoPack(){this.$request.post("/api/wiseqr/dim/tobaccoPack",{parentCode:""},!0,e=>{"200000"==e.ret&&(this.packArrList=e.data)})},getTobaccoGrade(){this.$request.post("/api/wiseqr/dim/tobaccoGrade",{},!0,e=>{"200000"==e.ret&&(this.gradeArrList=e.data)})},getTobaccoStyle(){this.$request.post("/api/wiseqr/dim/tobaccoStyle",{},!0,e=>{"200000"==e.ret&&(this.typeList=e.data)})},getProdType(){this.$request.post("/api/wiseqr/dim/prodType",{parentCode:"prod1"},!0,e=>{"200000"==e.ret&&(this.prodTypeList=e.data)})},selectGrade(e){this.filters.gradeLevel="",this.getListGradeLevel({parentCode:this.filters.grade})},getListGradeLevel(e){this.$request.post("/api/wiseqr/dim/tobaccoGrade",e,!0,e=>{"200000"==e.ret&&(this.gradeLevelArrList=e.data)})},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{let e={carbonMonoxide:this.filters.carbonMonoxide,grade:this.filters.grade,gradeLevel:this.filters.gradeLevel,id:this.filters.id,length:this.filters.length,nicotine:this.filters.nicotine,num:this.filters.num,oil:this.filters.oil,pack:this.filters.pack,price:this.filters.price,sn:this.filters.sn,product:{allName:this.filters.allName,brandCode:this.filters.brandCode,prodName:this.filters.prodName,smallPic:this.filters.smallPic,type:"prod1",unitType:this.filters.unitType},typeCode:"1"};this.$request.post("/api/wiseqr/prod/saveOrModifyTbc",e,!0,e=>{"200000"==e.ret?(this.$message({message:"保存成功！",type:"success"}),this.returnTobaccoMgr()):this.$message({message:e.message,type:"warning"})},e=>{})}})},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleAvatarSuccess(e,t){var a=e.data||{},s=a&&a.accessUrl;this.filters.smallPic=s},returnTobaccoMgr(){this.$router.push({path:"/product/mgr/tobacco"})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"add-tobaccomgr-container clearfix"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{ref:"ruleForm",attrs:{inline:!0,rules:e.rules,model:e.filters,"label-width":"110px"}},[a("div",{staticClass:"add-tobaccomgr-form-title"},[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-container"},[a("el-form-item",{attrs:{size:"small",label:"关联品牌：",prop:"brandCode"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择",disabled:""},on:{change:e.selectBrand},model:{value:e.filters.brandCode,callback:function(t){e.$set(e.filters,"brandCode",t)},expression:"filters.brandCode"}},e._l(e.brandList,function(e){return a("el-option",{key:e.brandCode,attrs:{label:e.name,value:e.brandCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"规格名称：",prop:"prodName"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:"",placeholder:"请输入内容"},model:{value:e.filters.prodName,callback:function(t){e.$set(e.filters,"prodName",t)},expression:"filters.prodName"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"SN码：",prop:"sn"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:"",placeholder:"请输入内容"},model:{value:e.filters.sn,callback:function(t){e.$set(e.filters,"sn",t)},expression:"filters.sn"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"包装单位：",prop:"unitType"}},[a("el-select",{staticClass:"tobacco-input",attrs:{disabled:"",placeholder:"请选择"},model:{value:e.filters.unitType,callback:function(t){e.$set(e.filters,"unitType",t)},expression:"filters.unitType"}},e._l(e.prodTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"产品全称：",prop:"allName"}},[a("el-input",{staticClass:"tobacco-input",attrs:{disabled:"",placeholder:"请输入内容"},model:{value:e.filters.allName,callback:function(t){e.$set(e.filters,"allName",t)},expression:"filters.allName"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"价格：",prop:"price"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.price,callback:function(t){e.$set(e.filters,"price",t)},expression:"filters.price"}})],1)],1),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-title"},[e._v("产品图片")]),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-container",staticStyle:{"padding-bottom":"30px"}},[a("el-upload",{staticClass:"tobacco-pic",attrs:{action:"/api/wiseqr/attach/commonAliUpload","list-type":"picture-card",headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.filters.smallPic?a("img",{staticClass:"avatar",attrs:{width:"53",height:"100",src:e.filters.smallPic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("* 图片建议尺寸为 160*300px，格式为*.jpg\\ *.bmp\\ *.png\\ *.gif")])])],1),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-title"},[e._v("产品信息")]),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-container"},[a("el-form-item",{attrs:{size:"small",label:"卷烟类型：",prop:"typeCode"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:e.filters.typeCode,callback:function(t){e.$set(e.filters,"typeCode",t)},expression:"filters.typeCode"}},e._l(e.typeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"焦油量：",prop:"oil"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.oil,callback:function(t){e.$set(e.filters,"oil",t)},expression:"filters.oil"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"烟碱量：",prop:"nicotine"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.nicotine,callback:function(t){e.$set(e.filters,"nicotine",t)},expression:"filters.nicotine"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"一氧化碳量：",prop:"carbonMonoxide"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.carbonMonoxide,callback:function(t){e.$set(e.filters,"carbonMonoxide",t)},expression:"filters.carbonMonoxide"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"烟支长度：",prop:"length"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.length,callback:function(t){e.$set(e.filters,"length",t)},expression:"filters.length"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"烟支数量：",prop:"num"}},[a("el-input",{staticClass:"tobacco-input",attrs:{placeholder:"请输入内容"},model:{value:e.filters.num,callback:function(t){e.$set(e.filters,"num",t)},expression:"filters.num"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"包裝：",prop:"pack"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:e.filters.pack,callback:function(t){e.$set(e.filters,"pack",t)},expression:"filters.pack"}},e._l(e.packArrList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"价类：",prop:"grade"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},on:{change:e.selectGrade},model:{value:e.filters.grade,callback:function(t){e.$set(e.filters,"grade",t)},expression:"filters.grade"}},e._l(e.gradeArrList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"二级价类：",prop:"gradeLevel"}},[a("el-select",{staticClass:"tobacco-input",attrs:{placeholder:"请选择"},model:{value:e.filters.gradeLevel,callback:function(t){e.$set(e.filters,"gradeLevel",t)},expression:"filters.gradeLevel"}},e._l(e.gradeLevelArrList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("div",{staticClass:"add-tobaccomgr-form-bt"},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.returnTobaccoMgr}},[e._v("取消")])],1)],1)])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("1Id+"),a("HD2g")},"data-v-6346749a",null);t.default=r.exports},UJCi:function(e,t){e.exports={banner:{object:"https://qoss.qrmkt.cn/saas_platform/common/materiel-object.png",virtual:"https://qoss.qrmkt.cn/saas_platform/common/materiel-virtual.png",redpack:"https://qoss.qrmkt.cn/saas_platform/common/materiel-redpack.png",integral:"https://qoss.qrmkt.cn/saas_platform/common/materiel-integral.png",cdDisc:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/memberDay/zkka%402x.png",cdDouble:"https://qrmkt.oss-cn-beijing.aliyuncs.com/common/memberDay/fbka%402x.png"},materielName:{object:"实物礼品",virtual:"虚拟礼品",redpack:"红包池",integral:"积分池",cdDisc:"折扣卡",cdDouble:"翻倍卡"},materielUnit:{object:"件",virtual:"个",redpack:"元",integral:"个",cdDisc:"张",cdDouble:"张"},materielType:{object:1,virtual:2,redpack:3,integral:6,cdDisc:7,cdDouble:8}}},i3D1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"",data:()=>({dataStatusList:[],listLoading:!1,filters:{keywords:"",contact:"",mobile:"",status:""},supplyList:[],total:0,currentPage:1,pageNo:1,pageSize:10}),methods:{addSupplier(){this.$router.push({path:"/product/supply/addSupplier"})},getSupplyList(){let e={contact:this.filters.contact,keywords:this.filters.keywords,mobile:this.filters.mobile,pageNo:this.pageNo,pageSize:this.pageSize,status:this.filters.status};this.postSearch(e)},getDataStatus(){this.$request.post("/api/wiseqr/dim/dataStatus",{},!0,e=>{"200000"==e.ret&&(this.dataStatusList=e.data)})},postSearch(e){this.listLoading=!0,this.$request.post("/api/wiseqr/supplier/list",e,!0,e=>{"200000"==e.ret&&(this.supplyList=e.data.list,this.total=e.data.page.count,this.pageSize=e.data.page.pageSize,this.pageNo=e.data.page.pageNo,this.listLoading=!1)})},commitForm(){this.page=1,this.currentPage=1,this.getSupplyList()},getStatus(){this.filters.keywords="",this.filters.contact="",this.filters.mobile="",this.filters.status="",this.pageNo=1,this.currentPage=1,this.getSupplyList()},handleEdit(e,t){this.$router.push({path:"/product/supply/editSupplier?id="+t.id})},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.getSupplyList()},jumpTo(){this.$emit("current-change")},modifyStatus(e,t){let a={id:e,status:t};this.$request.post("/api/wiseqr/supplier/modifyStatus",a,!0,e=>{"200000"==e.ret&&(this.$message({message:"保存成功！",type:"success"}),this.getStatus())})}},created(){this.getDataStatus()},mounted(){this.getSupplyList()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"supply-container clearfix"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addSupplier}},[e._v("新增供应商")])],1),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters,"label-width":"90px"}},[a("el-form-item",{attrs:{size:"small",label:"筛选供应商"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.filters.keywords,callback:function(t){e.$set(e.filters,"keywords",t)},expression:"filters.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"联系人"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.filters.contact,callback:function(t){e.$set(e.filters,"contact",t)},expression:"filters.contact"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"联系电话"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.filters.mobile,callback:function(t){e.$set(e.filters,"mobile",t)},expression:"filters.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"状态"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},e._l(e.dataStatusList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitForm}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:e.getStatus}},[e._v("重置")])],1),e._v("\n        、\n      ")],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.supplyList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"供应商名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contact",label:"联系人",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v(e._s("已停用"))]):a("span",[e._v(e._s("已启用"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.modifyStatus(t.row.id,"0")}}},[e._v("停用")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.modifyStatus(t.row.id,"1")}}},[e._v("启用")])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-button",{staticClass:"btn-jump-to",attrs:{type:"primary"},on:{click:e.jumpTo}},[e._v("跳转")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("9W9s"),a("/qJv")},"data-v-8949a60c",null);t.default=r.exports},iEoG:function(e,t){},iGYT:function(e,t){},"lK/U":function(e,t){},qxN8:function(e,t){},sIf2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("AGi4"),l=a("CywA"),r={components:{materielTable:s.a,materielForm:l.a},data:()=>({table:!0,metraFlag:"virtual",id:""}),methods:{showTable(e){this.id="",this.table=!0,e&&this.$refs.tableDatas.listMateriel()},showForm(e){this.id=e,this.table=!1}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("materiel-table",{directives:[{name:"show",rawName:"v-show",value:e.table,expression:"table"}],ref:"tableDatas",attrs:{metraFlag:e.metraFlag},on:{showForm:e.showForm}}),e._v(" "),e.table?e._e():a("materiel-form",{attrs:{metraFlag:e.metraFlag,materielId:e.id},on:{showTable:e.showTable}})],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("LwZi")},null,null);t.default=o.exports},tJIF:function(e,t){},tRF3:function(e,t){},uQZQ:function(e,t){},vM26:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("AGi4"),l=a("CywA"),r={components:{materielTable:s.a,materielForm:l.a},data:()=>({table:!0,metraFlag:"cdDisc",id:""}),methods:{showTable(e){this.id="",this.table=!0,e&&this.$refs.tableDatas.listMateriel()},showForm(e){this.id=e,this.table=!1}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("materiel-table",{directives:[{name:"show",rawName:"v-show",value:e.table,expression:"table"}],ref:"tableDatas",attrs:{metraFlag:e.metraFlag},on:{showForm:e.showForm}}),e._v(" "),e.table?e._e():a("materiel-form",{attrs:{metraFlag:e.metraFlag,materielId:e.id},on:{showTable:e.showTable}})],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("tJIF")},null,null);t.default=o.exports},vkjV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"",data:()=>({brandList:[],snList:[],packArrList:[],gradeArrList:[],listLoading:!1,filters:{brandCodeArr:[],snArr:[],packArr:[],gradeArr:[],minPrice:"",maxPrice:""},listTbc:[],total:0,currentPage:1,pageNo:1,pageSize:10}),methods:{addTobaccoMgr(){this.$router.push({path:"/product/mgr/tobacco/addTobaccoMr"})},getTbcList(){let e={brandCodeArr:this.filters.brandCodeArr,snArr:this.filters.snArr,gradeArr:this.filters.gradeArr,maxPrice:this.filters.maxPrice,minPrice:this.filters.minPrice,packArr:this.filters.packArr,pageNo:this.pageNo,pageSize:this.pageSize};this.postSearch(e)},selectBrand(e){this.filters.snArr=[],this.getListSN()},getListBrand(){this.$request.post("/api/wiseqr/prod/listBrand",{},!0,e=>{"200000"==e.ret&&(this.brandList=e.data.list)})},getListSN(){this.$request.post("/api/wiseqr/prod/list",{brandCodeArr:this.filters.brandCodeArr},!0,e=>{"200000"==e.ret&&(this.snList=e.data.list)})},getTobaccoPack(){this.$request.post("/api/wiseqr/dim/tobaccoPack",{},!0,e=>{"200000"==e.ret&&(this.packArrList=e.data)})},getTobaccoGrade(){this.$request.post("/api/wiseqr/dim/tobaccoGrade",{},!0,e=>{"200000"==e.ret&&(this.gradeArrList=e.data)})},postSearch(e){this.listLoading=!0,this.$request.post("/api/wiseqr/prod/listTbc",e,!0,e=>{"200000"==e.ret&&(this.listTbc=e.data.list,this.total=e.data.page.count,this.pageSize=e.data.page.pageSize,this.pageNo=e.data.page.pageNo,this.listLoading=!1)})},commitForm(){this.page=1,this.currentPage=1,this.getTbcList()},getStatus(){this.filters.brandCodeArr=[],this.filters.snArr=[],this.filters.packArr=[],this.filters.gradeArr=[],this.filters.minPrice="",this.filters.maxPrice="",this.pageNo=1,this.currentPage=1,this.getTbcList()},handleEdit(e,t){this.$router.push({path:"/product/mgr/tobacco/editTobaccoMr?id="+t.id})},handleCurrentChange(e){this.pageNo=e,this.currentPage=e,this.getTbcList()},jumpTo(){this.$emit("current-change")},addTemplate(){}},created(){this.getListBrand(),this.getTobaccoPack(),this.getTobaccoGrade()},mounted(){this.getTbcList()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"tobacco-container clearfix"},[a("div",{staticClass:"box-container"},[a("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addTobaccoMgr}},[e._v("新增卷烟")])],1),e._v(" "),a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",{attrs:{size:"small",label:"品牌"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},on:{change:e.selectBrand},model:{value:e.filters.brandCodeArr,callback:function(t){e.$set(e.filters,"brandCodeArr",t)},expression:"filters.brandCodeArr"}},e._l(e.brandList,function(e){return a("el-option",{key:e.brandCode,attrs:{label:e.name,value:e.brandCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"规格"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},model:{value:e.filters.snArr,callback:function(t){e.$set(e.filters,"snArr",t)},expression:"filters.snArr"}},e._l(e.snList,function(e){return a("el-option",{key:e.sn,attrs:{label:e.name,value:e.sn}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"包装"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},model:{value:e.filters.packArr,callback:function(t){e.$set(e.filters,"packArr",t)},expression:"filters.packArr"}},e._l(e.packArrList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"价类"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:"请选择"},model:{value:e.filters.gradeArr,callback:function(t){e.$set(e.filters,"gradeArr",t)},expression:"filters.gradeArr"}},e._l(e.gradeArrList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",label:"价格"}},[a("el-input",{staticStyle:{width:"80px"},attrs:{placeholder:"最小值"},model:{value:e.filters.minPrice,callback:function(t){e.$set(e.filters,"minPrice",t)},expression:"filters.minPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{size:"small",label:"至"}},[a("el-input",{staticStyle:{width:"80px"},attrs:{placeholder:"最大值"},model:{value:e.filters.maxPrice,callback:function(t){e.$set(e.filters,"maxPrice",t)},expression:"filters.maxPrice"}})],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",{staticClass:"mr0",attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.commitForm}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"important",attrs:{size:"small"},on:{click:e.getStatus}},[e._v("重置")])],1),e._v("\n        、\n      ")],1)],1)],1),e._v(" "),a("div",{staticClass:"box-container"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"crm-table-wrap",attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.listTbc}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"略缩图",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{display:"block",margin:"0 auto"},attrs:{src:e.row.product.bigPic,width:"23",alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"product.brandName",label:"品牌",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"product.allName",label:"规格",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"product.sn",label:"SN码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gradeName",label:"价类",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"packName",label:"包装",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格（元）",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"footer-toolbar",attrs:{span:24}},[a("el-button",{staticClass:"btn-jump-to",attrs:{type:"primary"},on:{click:e.jumpTo}},[e._v("跳转")]),e._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("TCy4"),a("FEFX")},"data-v-31caf3f6",null);t.default=r.exports},wS1y:function(e,t){},wVVK:function(e,t){},x5In:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"",data:()=>({ruleForm:{name:"",contact:"",mobile:"",addr:"",note:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"}],addr:[{required:!0,message:"请输入地址",trigger:"blur"}]}}),methods:{submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{let e={addr:this.ruleForm.addr,contact:this.ruleForm.contact,mobile:this.ruleForm.mobile,name:this.ruleForm.name,note:this.ruleForm.note};this.postParams(e)}})},postParams(e){this.$request.post("/api/wiseqr/supplier/saveOrModify",e,!0,e=>{"200000"==e.ret?this.$message({message:"保存成功！",type:"success"}):this.$message({message:e.message,type:"warning"})},e=>{})},returnSupplier(){this.$router.push({path:"/product/supply"})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"add-supplier-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"供应商名称",prop:"name",size:"small"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人",prop:"contact",size:"small"}},[a("el-input",{model:{value:e.ruleForm.contact,callback:function(t){e.$set(e.ruleForm,"contact",t)},expression:"ruleForm.contact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"mobile",size:"small"}},[a("el-input",{model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址",prop:"addr",size:"small"}},[a("el-input",{model:{value:e.ruleForm.addr,callback:function(t){e.$set(e.ruleForm,"addr",t)},expression:"ruleForm.addr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"note",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入备注(主营商品、品牌等)"},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:e.returnSupplier}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("BonP"),a("iGYT")},"data-v-7e102786",null);t.default=r.exports},zhYk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"Brand",data:()=>({orgHasSaleZone:sessionStorage.orgHasSaleZone,isAllSaleZone:sessionStorage.isAllSaleZone,saleZoneCode:sessionStorage.saleZoneCode,roleOptList:sessionStorage.roleOptList.split(","),saleZone:[],search:{pageNo:1,pageSize:10,budgetYear:(new Date).getFullYear().toString(),saleZoneCode:null,materialType:6},pagination:{total:0},tableList:[],yearSum:"",form:{show:!1,id:"",materialName:"",budgetValue:"",materialType:6,materialPoolId:null,budgetSeason:"",budgetYear:"",saleZoneCode:"",saleZoneName:"",stock:""},formRules:{materialName:[{required:!0,message:"请输入积分礼品名称",trigger:"change"}],budgetValue:[{required:!0,validator:(e,t,a)=>{"0"==t?a(new Error("请输入预算（个）")):a()},trigger:"blur"}],budgetSeason:[{required:!0,message:"请选择季度",trigger:"change"}],budgetYear:[{required:!0,message:"请选择年份",trigger:"change"}],saleZoneCode:[{required:!0,message:"请选择销区",trigger:"change"}]},title:"选择物品",list:[],params:{metraFlag:"",pageNo:1,pageSize:10,status:1},listTotal:0,listVisible:!1,awardType:[{value:1,label:"实物"},{value:6,label:"积分"},{value:3,label:"红包"},{value:7,label:"折扣卡"},{value:8,label:"翻倍卡"}],awardNo:""}),created(){1==this.isAllSaleZone?this.getSaleZone():(this.getSaleZone(),this.search.saleZoneCode=this.saleZoneCode,this.getTableList())},methods:{getSaleZone(){this.$request.post("/api/saleZone/userSzList",{},!0,e=>{"200"==e.code&&(this.saleZone=e.data||[])})},currentChange(e){this.getTableList(event,e)},sizeChange(e){this.getTableList(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},reset(){this.search={pageNo:1,pageSize:10,budgetYear:"",saleZoneCode:null,materialType:6},this.search.budgetYear=(new Date).getFullYear().toString(),1==this.isAllSaleZone?this.tableList=[]:(this.search.saleZoneCode=this.saleZoneCode,this.getTableList())},resetForm(){this.$refs.ruleForm.resetFields(),this.form={show:!1,id:"",materialName:"",budgetValue:"",materialType:6,materialPoolId:null,budgetSeason:"",budgetYear:"",saleZoneCode:"",saleZoneName:"",stock:""}},getTableList(e,t,a){let s=1;t&&(s=t),this.search.pageNo=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/api/materialBudget/list",this.search,!0,e=>{"200"==e.code&&(this.tableList=e.data.budgetList.list||[],this.yearSum=e.data.yearSum,this.initPagination(e.data.budgetList.page||{}))})},handleSelectZone(e){let t=this.saleZone.find(t=>t.zoneCode==e);console.log(t),this.form.saleZoneName=t.zoneName},dataForm(e,t){this.form.id="",this.form.materialName="",this.form.materialPoolId="",this.form.stock="",t&&t.id&&(this.form.id=t.id,this.form.materialName=t.materialName,this.form.materialPoolId=t.materialPoolId,this.form.stock=t.stock),this.form.show=!0},saveForm(){this.form.id||this.$refs.ruleForm.validate(e=>{if(e){let e={saleZoneCode:this.form.saleZoneCode,saleZoneName:this.form.saleZoneName,budgetValue:this.form.budgetValue,budgetSeason:this.form.budgetSeason,budgetYear:this.form.budgetYear,materialType:this.form.materialType,materialName:this.form.materialName,materialPoolId:this.form.materialPoolId};this.$request.post("/api/materialBudget/add",e,!0,e=>{"200"==e.code?(this.getTableList(),this.form.show=!1,this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.msg||e.message)})}})},addRepertory(e){this.$request.post("/api/wiseqr/metra/detail",{id:e.materialPoolId,metraFlag:"integral"},!0,t=>{if("200000"==t.ret){let a=t.data.stock;this.$prompt(`<div style="line-height: 30px">物料库积分池：${e.materialName}</div>\n                       <div style="line-height: 30px">剩余库存（积分）：${a}</div>\n                       增加预算（积分）：（提示：不可超过剩余库存）`,"增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字",dangerouslyUseHTMLString:!0}).then(({value:t})=>0==t?this.$message.error("数字不能为0"):t>a?this.$message.error("增库不可超过剩余库存"):void this.$request.get("/api/materialBudget/valueAdd",{budgetId:e.id,budgetValue:t,materialPoolId:e.materialPoolId},e=>{"200"==e.code?(this.$message.success("增库成功"),this.getTableList()):this.$message.error(e.msg)})).catch(()=>{this.$message({type:"info",message:"取消输入"})})}else this.$message.error(t.msg||t.message)})},async del(e){if("confirm"!==await this.$confirm("您确定删除此预算？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(e=>e))return this.$message({type:"info",message:"已取消删除"});this.$request.get("/api/materialBudget/delete",{budgetId:e},e=>{console.log(e),"200"==e.code?(this.$message.success("删除成功"),this.getTableList()):this.$message.error(e.msg)},e=>{console.log(e)})},selectPrize(e,t,a){this.form.materialName=e.name,this.form.materialPoolId=e.id,this.form.stock=e.stock,console.log(e),this.handleColseList()},handleColseList(){this.listVisible=!1,this.params.pageNo=1},handleSizeChange(e){this.params.pageSize=e,this.getList()},handleCurrentChange(e){this.params.pageNo=e,this.getList()},getList(e,t){"1"==e?(this.params.metraFlag="object",this.title="选择实物"):"2"==e?(this.params.metraFlag="virtual",this.title="选择虚拟"):"3"==e?(this.params.metraFlag="redpack",this.title="选择红包"):"6"==e?(this.params.metraFlag="integral",this.title="选择荷石币"):"7"==e?(this.params.metraFlag="cdDisc",this.title="选择折扣卡"):"8"==e&&(this.params.metraFlag="cdDouble",this.title="选择翻倍卡"),void 0!=t&&-1!=t&&(this.awardNo=t),this.$request.post("/api/wiseqr/metra/list",this.params,!0,e=>{if("200000"===e.ret)return this.list=[],this.list=e.data.list,this.listTotal=e.data.page.count,void(this.listVisible=!0);this.$message.error(e.message)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",[e.roleOptList.indexOf("materialBudget_add")>-1?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.dataForm}},[e._v("新建")]):e._e()],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"使用年份：",prop:"budgetYear"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.search.budgetYear,callback:function(t){e.$set(e.search,"budgetYear",t)},expression:"search.budgetYear"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销区："}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.search.saleZoneCode,callback:function(t){e.$set(e.search,"saleZoneCode",t)},expression:"search.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")]),e._v(" "),e.yearSum?a("div",{staticStyle:{width:"auto",float:"right","margin-left":"30px"}},[e._v("当年预算："+e._s(e.yearSum)+"（积分）")]):e._e()],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.search.pageNo-1)*e.search.pageSize+t.$index+1)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"materialName",label:"礼品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetValue",label:"当季度预算（积分）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.budgetValue)+"积分")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statGiven",label:"已发放（积分）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statGiven||0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statReceived",label:"已领取（积分）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statReceived||0)+"积分")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statReceived",label:"剩余（积分）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.budgetValue-t.row.budgetUsed||0)+"积分")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"statTime",label:"统计数据时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statTime||"暂无"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetSeason",label:"使用时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.budgetSeason?a("span",[e._v(e._s("第一季度（1月1日00:00-3月31日23:59:59）"))]):e._e(),e._v(" "),2==t.row.budgetSeason?a("span",[e._v(e._s("第二季度（4月1日00:00-6月30日23:59:59）"))]):e._e(),e._v(" "),3==t.row.budgetSeason?a("span",[e._v(e._s("第三季度（7月1日00:00-9月30日23:59:59）"))]):e._e(),e._v(" "),4==t.row.budgetSeason?a("span",[e._v(e._s("第四季度（10月1日00:00-12月31日23:59:59）"))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"saleZoneName",label:"销区",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"budgetYear",label:"年份",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statRest",label:"季度结算(积分)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.statRest||0))])]}}])}),e._v(" "),e.roleOptList.indexOf("materialBudget_valueAdd")>-1||e.roleOptList.indexOf("materialBudget_delete")>-1?a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.roleOptList.indexOf("materialBudget_valueAdd")>-1?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.addRepertory(t.row)}}},[e._v("增库")]):e._e(),e._v(" "),e.roleOptList.indexOf("materialBudget_delete")>-1?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.del(t.row.id)}}},[e._v("删除")]):e._e()]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNo,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新建积分",width:"500px",visible:e.form.show},on:{"update:visible":function(t){e.$set(e.form,"show",t)},close:e.resetForm}},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"150px",model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"积分礼品名称：",prop:"materialName"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.getList(6)}}},[e._v(e._s(e.form.materialName?e.form.materialName:"选择"))]),e._v(" "),a("el-input",{staticStyle:{display:"none"},attrs:{size:"small",placeholder:"请输入礼品名称"},model:{value:e.form.materialName,callback:function(t){e.$set(e.form,"materialName",t)},expression:"form.materialName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"剩余库存（积分）：",prop:"stock"}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{precision:0,min:0,"controls-position":"right",disabled:""},model:{value:e.form.stock,callback:function(t){e.$set(e.form,"stock",t)},expression:"form.stock"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预算（积分）：",prop:"budgetValue"}},[a("el-input-number",{attrs:{precision:0,min:0,max:e.form.stock||0,"controls-position":"right"},model:{value:e.form.budgetValue,callback:function(t){e.$set(e.form,"budgetValue",t)},expression:"form.budgetValue"}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("提示：不可超过剩余库存")])],1),e._v(" "),a("el-form-item",{attrs:{label:"使用季度：",prop:"budgetSeason"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.budgetSeason,callback:function(t){e.$set(e.form,"budgetSeason",t)},expression:"form.budgetSeason"}},[a("el-option",{attrs:{label:"第一季度（1月1日00:00-3月31日23:59:59）",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"第二季度（4月1日00:00-6月30日23:59:59）",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"第三季度（7月1日00:00-9月30日23:59:59）",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"第四季度（10月1日00:00-12月31日23:59:59）",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"使用年份：",prop:"budgetYear"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"选择年"},model:{value:e.form.budgetYear,callback:function(t){e.$set(e.form,"budgetYear",t)},expression:"form.budgetYear"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"销区：",prop:"saleZoneCode"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:e.handleSelectZone},model:{value:e.form.saleZoneCode,callback:function(t){e.$set(e.form,"saleZoneCode",t)},expression:"form.saleZoneCode"}},e._l(e.saleZone,function(e,t){return a("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneCode}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.form.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveForm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.listVisible,width:"800px"},on:{"update:visible":function(t){e.listVisible=t},close:e.handleColseList}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:!0}},[a("el-table-column",{attrs:{prop:"name",label:"礼品名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"礼品图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{height:"60px"},attrs:{src:e.row.pic,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stock",label:"剩余库存",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.selectPrize(t.row,e.title,e.awardNo)}}},[e._v("选择")])]}}])})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-pagination",{attrs:{background:"","current-page":e.params.pageNo,"page-size":e.params.pageSize,layout:"total, prev, pager, next, jumper",total:e.listTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("wVVK")},"data-v-9c59c72e",null);t.default=r.exports},zhld:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({search:{pageNo:1,pageSize:10,name:"",status:""},pagination:{total:0},tableList:[],form:{show:!1,id:"",name:""}}),created(){this.list()},methods:{currentChange(e){this.list(event,e)},sizeChange(e){this.list(event,null,e)},initPagination(e){e&&(this.pagination.total=e.count)},reset(){this.search={pageNo:1,pageSize:10,name:"",status:""},this.list()},list(e,t,a){let s=1;t&&(s=t),this.search.pageNo=s;let l=10;a&&(l=a),this.search.pageSize=l,this.$request.post("/api/wiseqr/prod/brands",this.search,!0,e=>{"200000"==e.ret&&(this.tableList=e.data.list||[],this.initPagination(e.data.page||{}))})},dataForm(e,t){this.form.id="",this.form.name="",t&&t.id&&(this.form.id=t.id,this.form.name=t.name),this.form.show=!0},saveForm(){this.$request.post("/api/wiseqr/prod/brand/saveOrModify",this.form,!0,e=>{"200000"==e.ret?(this.list(),this.form.show=!1,this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.message)})},modifyData(e,t){let a={id:e,status:t};this.$request.post("/api/wiseqr/prod/brand/mstatus",a,!0,e=>{"200000"==e.ret?(this.list(),this.$message({type:"success",message:"操作成功!"})):this.$message.error(e.message)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("el-row",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.dataForm}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"品牌名称"}},[a("el-input",{attrs:{size:"small"},model:{value:e.search.name,callback:function(t){e.$set(e.search,"name",t)},expression:"search.name"}})],1),e._v(" "),e._e(),e._v(" "),a("div"),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.list}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableList}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.search.pageNo-1)*e.search.pageSize+t.$index+1)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"品牌名称",align:"center"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"ctime",label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ctime?a("span",[e._v(e._s(new Date(t.row.ctime).Format("yyyy-MM-dd hh:mm:ss")))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.dataForm(t.$index,t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),e._e(),e._v(" "),e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"space"}),e._v(" "),a("el-pagination",{attrs:{small:!1,background:"",layout:"total, prev, pager, next, jumper","current-page":e.search.pageNo,"page-size":e.search.pageSize,total:e.pagination.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"品牌管理",width:"30%",visible:e.form.show},on:{"update:visible":function(t){e.$set(e.form,"show",t)}}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品牌名称"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.form.show=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveForm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("uQZQ")},"data-v-5a752f19",null);t.default=r.exports},zpga:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("AGi4"),l=a("CywA"),r={components:{materielTable:s.a,materielForm:l.a},data:()=>({table:!0,metraFlag:"object",id:""}),methods:{showTable(e){this.id="",this.table=!0,e&&this.$refs.tableDatas.listMateriel()},showForm(e){this.id=e,this.table=!1}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("materiel-table",{directives:[{name:"show",rawName:"v-show",value:e.table,expression:"table"}],ref:"tableDatas",attrs:{metraFlag:e.metraFlag},on:{showForm:e.showForm}}),e._v(" "),e.table?e._e():a("materiel-form",{attrs:{metraFlag:e.metraFlag,materielId:e.id},on:{showTable:e.showTable}})],1)},staticRenderFns:[]};var o=a("VU/8")(r,i,!1,function(e){a("1D43")},null,null);t.default=o.exports}});
//# sourceMappingURL=4.7ba5e6df1bbe12374e7c.js.map