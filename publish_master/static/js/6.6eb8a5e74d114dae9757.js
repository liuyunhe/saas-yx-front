webpackJsonp([6],{"/cAB":function(e,t,a){"use strict";var s={props:{queryParams:{type:Object,required:!0}},data:()=>({nowDate:"",oldDate:""}),created(){this.getNowDate()},methods:{getNowDate(){let e=(new Date).getTime(),t=e-25056e5;this.nowDate=new Date(e).Format("yyyy-MM-dd"),this.oldDate=new Date(t).Format("yyyy-MM-dd"),this.queryParams.queryTimeArr=[this.oldDate,this.nowDate],this.handleTimeLimit(),this.$emit("init",[this.nowDate,this.oldDate])},handleTimeLimit(){if(this.queryParams.queryTimeArr){let e=new Date(this.queryParams.queryTimeArr[0]).getTime();(new Date(this.queryParams.queryTimeArr[1]).getTime()-e)/1e3/3600/24>30&&(this.$message.error("中奖时段间隔查询不能超过30天"),this.queryParams.queryTimeArr=[this.oldDate,this.nowDate]),this.queryParams.stime=this.queryParams.queryTimeArr[0],this.queryParams.etime=this.queryParams.queryTimeArr[1]}else this.queryParams.stime="",this.queryParams.etime=""}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-form-item",{attrs:{label:"中奖时段："}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",clearable:!1,"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleTimeLimit},model:{value:e.queryParams.queryTimeArr,callback:function(t){e.$set(e.queryParams,"queryTimeArr",t)},expression:"queryParams.queryTimeArr"}})],1)],1)},staticRenderFns:[]},i=a("VU/8")(s,r,!1,null,null,null);t.a=i.exports},"0E29":function(e,t){},"6C/2":function(e,t){},"6kDn":function(e,t){},"6xna":function(e,t){},"7ZCU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({params:{pageNo:1,pageSize:10,termName:""},loading:!0,total:5,drawCircleData:[],numArr:[{num:1,selected:!1},{num:2,selected:!1},{num:3,selected:!1},{num:4,selected:!1},{num:5,selected:!1},{num:6,selected:!1},{num:7,selected:!1},{num:8,selected:!1},{num:9,selected:!1},{num:10,selected:!1},{num:11,selected:!1},{num:12,selected:!1}],nowId:null,selectedNumArr:[],selectedDrawCircle:"",drawList:[],nowDrawCircleTime:"",selectedNumDialogVisible:!1,confirmDialogVisible:!1,prizeStatus:{1:"待开奖",2:"开奖中",3:"开奖完成",4:"开奖异常"}}),created(){this.getDrawList(),this.getQueryList()},methods:{getDrawList(){this.$request.post("/api/saotx/md/listRsl",this.params,!0,e=>{if("200000"===e.ret)return this.drawList=e.data.list,void(this.loading=!1);this.$message.error(e.message)})},getQueryList(){this.$request.post("/api/saotx/md/terms",{},!0,e=>{if("200000"===e.ret)return this.drawCircleData=e.data;this.$message.error(e.message)})},queryDraw(){this.params.pageNo=1,this.params.pageSize=10,this.loading=!0,this.getDrawList()},reset(){this.params.termName="",this.params.pageNo=1,this.params.pageSize=10,this.loading=!0,this.getDrawList()},openDrawDialog(e){this.selectedNumDialogVisible=!0,this.nowDrawCircleTime=e.term+"—"+e.termEnd,this.nowId=e.id},selectedStatus(e){this.numArr[e].selected?(this.numArr[e].selected=!1,this.selectedNumArr[0]===this.numArr[e].num?this.selectedNumArr.shift():this.selectedNumArr.pop()):(this.numArr[e].selected=!0,this.selectedNumArr.push(this.numArr[e].num),this.selectedNumArr.length>2&&(this.numArr[this.selectedNumArr[0]-1].selected=!1,this.selectedNumArr.shift()))},save(){if(2!==this.selectedNumArr.length)return this.$message.warning("请选择2个中奖号码");this.selectedNumArr.sort(function(e,t){return e-t}),this.confirmDialogVisible=!0},drawALottery(){let e=this.selectedNumArr.join(",");this.$request.post("/api/saotx/md/draw",{id:this.nowId,result:e},!0,e=>{"200000"===e.ret?(this.$message.success("开奖成功!"),this.reset()):this.$message.error(e.message),this.selectedNumDialogVisible=!1,this.confirmDialogVisible=!1,this.selectedNumArr=[]})},resetSelectedNum(){this.selectedNumDialogVisible=!1,this.numArr.map(e=>{e.selected=!1}),this.selectedNumArr=[]},handleSizeChange(e){this.params.pageSize=e,this.getDrawList()},handleCurrentChange(e){this.params.pageNo=e,this.getDrawList()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-col",{staticClass:"mb20"},[a("span",[e._v("中奖周期：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.termName,callback:function(t){e.$set(e.params,"termName",t)},expression:"params.termName"}},e._l(e.drawCircleData,function(t){return e.drawCircleData?a("el-option",{key:t.termName,attrs:{label:t.termName,value:t.termName}}):e._e()}))],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.queryDraw}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1),e._v(" "),a("el-card",{staticClass:"mt20"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",stripe:!0,data:e.drawList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"termName",label:"中奖周期"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"开奖周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.term)+"—"+e._s(t.row.termEnd)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"result",label:"开奖号码"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"drawUser",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.drawTime?[e._v("\n          "+e._s(new Date(t.row.drawTime).Format("yyyy-MM-dd hh:mm:ss"))+"\n        ")]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"开奖状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.drawStatus?a("span",[e._v(e._s(e.prizeStatus[t.row.drawStatus]))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"操作项"},scopedSlots:e._u([{key:"default",fn:function(t){return 1==t.row.drawStatus?[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.openDrawDialog(t.row)}}},[e._v("开奖")])]:void 0}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":e.params.pageNo,"page-size":e.params.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{"custom-class":"select-num-dialog",title:"选择中奖号码","close-on-click-modal":!1,center:!0,visible:e.selectedNumDialogVisible,width:"650px"},on:{close:e.resetSelectedNum,"update:visible":function(t){e.selectedNumDialogVisible=t}}},[a("div",{staticClass:"con"},[a("p",[e._v("当前开奖周期时间段为"+e._s(e.nowDrawCircleTime))]),e._v(" "),a("div",{staticClass:"warpper mb20"},e._l(e.numArr,function(t,s){return a("div",{key:s,class:t.selected?"num active":"num",on:{click:function(t){e.selectedStatus(s)}}},[e._v(e._s(t.num))])})),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.selectedNumDialogVisible=!1}}},[e._v("取消")])],1)]),e._v(" "),a("el-dialog",{attrs:{"custom-class":"selected-dialog",width:"500px",title:"当前已选中奖号码","close-on-click-modal":!1,visible:e.confirmDialogVisible},on:{"update:visible":function(t){e.confirmDialogVisible=t}}},[a("div",{staticClass:"con"},[a("div",{staticClass:"num"},[e._v(e._s(e.selectedNumArr[0]))]),e._v(" "),a("div",{staticClass:"num"},[e._v(e._s(e.selectedNumArr[1]))])]),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.drawALottery}},[e._v("确认开奖")]),e._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.confirmDialogVisible=!1}}},[e._v("取消")])],1)])],1)},staticRenderFns:[]};var i=a("VU/8")(s,r,!1,function(e){a("oHKo")},"data-v-3342b6c8",null);t.default=i.exports},"8/nf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={components:{commonConf:a("qM7u").a},data:()=>({data:{},type1:[],type201:[],type202:[],type3:[],type6:[],status:!1}),watch:{},created(){this.getActDetail()},methods:{getActDetail(){this.$request.post("/api/saotx/md/queryExtAct",{flag:2},!0,e=>{if(this.status=!0,"200000"===e.ret)return this.data=e.data,void(0!=this.data.awards.length&&this.data.awards.forEach(e=>{switch(e.awardType){case 1:this.type1.push(e);break;case 201:this.type201.push(e);break;case 202:this.type202.push(e);break;case 3:this.type3.push(e);break;case 6:this.type6.push(e)}}));this.$message.error(e.message)})},save(){this.data.awards=[],this.data.awards.push(...this.type1,...this.type201,...this.type202,...this.type3,...this.type6),this.$request.post("/api/saotx/md/somExtAct",this.data,!0,e=>{if("200000"===e.ret)return this.$message.success("保存成功");this.$message.error(e.message)})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",[a("el-form-item",{attrs:{label:"每人每周参与答题抽奖次数："}},[a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:e.data.num,callback:function(t){e.$set(e.data,"num",t)},expression:"data.num"}}),e._v("\n        次\n      ")],1),e._v(" "),a("el-form-item",{attrs:{label:"答题投放奖品设置："}},[a("span",[e._v("必须配置一项奖品类型")])]),e._v(" "),e.status?a("common-conf",{staticClass:"mt20",attrs:{params:e.type1,type:1}}):e._e(),e._v(" "),e.status?a("common-conf",{staticClass:"mt20",attrs:{params:e.type3,type:3}}):e._e(),e._v(" "),e.status?a("common-conf",{staticClass:"mt20",attrs:{params:e.type6,type:6}}):e._e()],1),e._v(" "),a("div",{staticClass:"mt20 mb20 btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,r,!1,function(e){a("ulGM")},"data-v-11c54740",null);t.default=i.exports},DIId:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("/cAB"),r=a("p3Dr"),i=a("jm70"),l={components:{timeModule:s.a,formBtn:r.a,regionSelect:i.a},data:()=>({queryParams:{activityCode:"ACT-ZCQ2JKDAAAAA",awardProv:[],awardCity:[],stime:"",etime:"",orderCode:"",awardType:"",selType:2,keywords:"",pageNo:1,pageSize:10,status:"",authStatus:"",queryTimeArr:[],oldDate:"",nowDate:""},statusList:[{name:"待领取",status:1},{name:"已领取",status:6},{name:"已发货",status:2},{name:"待审核",status:11},{name:"审核通过",status:12},{name:"审核不通过",status:14}],statusType:{1:"待领取",2:"已发货",6:"已领取",7:"待发货",11:"待审核",12:"审核通过",14:"审核不通过"},statusColor:{1:"yellow",7:"yellow",11:"yellow",14:"red"},checkedStatus:"",awardList:[],total:null,loading:!0}),watch:{checkedStatus(e){e<=6?(this.queryParams.authStatus="",this.queryParams.status=e):(this.queryParams.status="",this.queryParams.authStatus=e)}},created(){},methods:{init(e){e&&(this.queryParams.nowDate=e[0],this.queryParams.oldDate=e[1]),this.getAwardList()},getAwardList(){this.$request.post("/api/saotx/md/orders",this.queryParams,!0,e=>{if("200000"===e.ret)return this.awardList=e.data.list,this.total=e.data.page.count,void(this.loading=!1);this.$message.error(e.message)})},goDetailPage(e,t){let a="/memberday/order/commonAwardDetail";a+="?orderCode="+(e||""),a+="&tsUuid="+(t||""),this.$router.push(a)},handleSizeChange(e){this.queryParams.pageSize=e,this.getAwardList()},handleCurrentChange(e){this.queryParams.pageNo=e,this.getAwardList()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",{ref:"form",attrs:{model:e.queryParams,"label-width":"110px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{attrs:{clearable:!0,placeholder:"请选择活动区域"},model:{value:e.checkedStatus,callback:function(t){e.checkedStatus=t},expression:"checkedStatus"}},e._l(e.statusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.status}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("time-module",{attrs:{queryParams:e.queryParams},on:{init:e.init}})],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单号："}},[a("el-input",{model:{value:e.queryParams.orderCode,callback:function(t){e.$set(e.queryParams,"orderCode",t)},expression:"queryParams.orderCode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"姓名/手机号："}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.queryParams.keywords,callback:function(t){e.$set(e.queryParams,"keywords",t)},expression:"queryParams.keywords"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中奖地区："}},[a("region-select",{attrs:{queryParams:e.queryParams}})],1)],1)],1)],1),e._v(" "),a("form-btn",{attrs:{num:2,queryParams:e.queryParams},on:{init:e.init}})],1),e._v(" "),a("el-card",{staticClass:"mt20"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:!0,"v-loading":e.loading,data:e.awardList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"55",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"activityName",label:"活动名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"prizeWinner",label:"中奖人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"中奖人手机号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"awardTypeName",label:"奖品类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"awardName",label:"奖品名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"term",label:"中奖时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"中奖地区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.awardProvince)+e._s(t.row.awardCity?"-"+t.row.awardCity:"")+e._s(t.row.awardDistrict?"-"+t.row.awardDistrict:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.authStatus?a("span",{class:e.statusColor[t.row.authStatus]},[e._v(e._s(e.statusType[t.row.authStatus]))]):a("span",{class:e.statusColor[t.row.status]},[e._v(e._s(e.statusType[t.row.status]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作项"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.awardType&&1!=t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goDetailPage(t.row.orderCode,t.row.tsUuid)}}},[e._v("详情")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":e.queryParams.pageNo,"page-size":e.queryParams.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var n=a("VU/8")(l,o,!1,function(e){a("g87K")},"data-v-32a5ded5",null);t.default=n.exports},ImH9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("G0J2"),r={components:{quillEditor:s.quillEditor},data(){return{editorOption:{modules:{toolbar:[[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike",,"blockquote"],[{color:[]},{background:[]},{align:[]}]]},placeholder:"请输入活动说明"},active:0,value1:"",value2:"",form:{activityCode:"",activityName:"",stimeStr:"",etimeStr:"",activityDec:"",activityForm:"act-12",activityEntrance:"",idx:"",activityDoc:"",showStatus:1},backupsForm:{},idxSelect:[{name:"高",idx:500},{name:"中",idx:300},{name:"低",idx:100}],confRules:{activityName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],activityDec:[{required:!0,message:"请输入活动描述",trigger:"blur"}],date:[{required:!0,validator:(e,t,a)=>{this.form.stimeStr&&this.form.etimeStr?this.form.stimeStr>=this.form.etimeStr?a(new Error("开始时间必须小于结束时间")):a():a(new Error("请选择活动时间"))},trigger:"change"}],idx:[{required:!0,validator:(e,t,a)=>{"0"==t?a(new Error("请选择活动优先级")):a()},trigger:"change"}],banner:[{required:!0,validator:(e,t,a)=>{this.form.activityEntrance?a():a(new Error("请选择活动图片"))}}],desc:[{required:!0,validator:(e,t,a)=>{this.form.activityDoc?a():a(new Error("请输入活动说明"))}}]},timeDisable:!1,uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")}}},created(){this.getActData()},methods:{getActData(){this.$request.post("/api/saotx/md/queryBase",{},!0,e=>{"200000"===e.ret&&(this.form=e.data,this.backupsForm=JSON.parse(JSON.stringify(e.data)),this.form.stimeStr&&this.handleDisableTime())})},handleDisableTime(){(new Date).getTime()>=new Date(this.form.stimeStr).getTime()&&(this.timeDisable=!0)},upBannerImg(e){if("200000"===e.ret)return this.form.activityEntrance=e.data.accessUrl,void this.$refs.baseConfRef.validateField("banner",e=>{});this.$message.error(e.message)},upBannerImgErr(e){this.$message.error("上传图片失败, 请重试!")},onEditorBlur(){this.$refs.baseConfRef.validateField("desc",e=>{})},nextStep(){JSON.stringify(this.form)===JSON.stringify(this.backupsForm)?this.$emit("nextStep",this.form.activityCode):this.$refs.baseConfRef.validate(e=>{if(!e)return this.$message.error("请完善表单数据!");this.$request.post("/api//saotx/md/somBase",this.form,!0,e=>{if("200000"===e.ret)return this.$emit("nextStep",this.form.activityCode);this.$message.error(e.message)})})},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"baseConfRef",attrs:{model:e.form,"label-width":"140px",rules:e.confRules}},[a("el-form-item",{attrs:{label:"活动名称：",prop:"activityName"}},[a("el-input",{attrs:{maxlength:15},model:{value:e.form.activityName,callback:function(t){e.$set(e.form,"activityName",t)},expression:"form.activityName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动描述：",prop:"activityDec"}},[a("el-input",{staticClass:"textarea",attrs:{type:"textarea",rows:3,resize:"none"},model:{value:e.form.activityDec,callback:function(t){e.$set(e.form,"activityDec",t)},expression:"form.activityDec"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优先级：",prop:"idx"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.idx,callback:function(t){e.$set(e.form,"idx",t)},expression:"form.idx"}},e._l(e.idxSelect,function(e){return a("el-option",{key:e.idx,attrs:{label:e.name,value:e.idx}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"活动时间：",prop:"date"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm",disabled:e.timeDisable,type:"datetime",placeholder:"选择开始时间"},model:{value:e.form.stimeStr,callback:function(t){e.$set(e.form,"stimeStr",t)},expression:"form.stimeStr"}}),e._v("\n    至\n    "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择结束时间"},model:{value:e.form.etimeStr,callback:function(t){e.$set(e.form,"etimeStr",t)},expression:"form.etimeStr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动图片：",prop:"banner"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":e.beforeAvatarUpload,action:e.uploadURL,headers:e.headerObj,"on-success":e.upBannerImg,"on-error":e.upBannerImgErr,"show-file-list":!1}},[e.form.activityEntrance?a("img",{staticClass:"avatar",attrs:{src:e.form.activityEntrance}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传图片的最佳尺寸：750像素*270像素；格式png、jpg；大小不超过2M")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"活动说明：",prop:"desc"}},[a("quill-editor",{ref:"myTextEditor",attrs:{options:e.editorOption,placeholder:"请输入活动说明"},on:{blur:function(t){e.onEditorBlur(t)}},model:{value:e.form.activityDoc,callback:function(t){e.$set(e.form,"activityDoc",t)},expression:"form.activityDoc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否在落地页显示"}},[a("el-radio",{attrs:{label:1},model:{value:e.form.showStatus,callback:function(t){e.$set(e.form,"showStatus",t)},expression:"form.showStatus"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.form.showStatus,callback:function(t){e.$set(e.form,"showStatus",t)},expression:"form.showStatus"}},[e._v("否")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("保存并进入下一步")])],1)],1)},staticRenderFns:[]};var l=a("VU/8")(r,i,!1,function(e){a("X4E/")},"data-v-0e2d8371",null).exports,o={props:["params"],data:()=>({brandList:[],oldSnArr:[],defaultList:[]}),created(){this.getBrandRules()},methods:{getBrandRules(){this.$request.post("api/saotx/prod/list",{brandCodeArr:["BRAND-7D41JAAAAA"],pageSize:"-1"},!0,e=>{if("200000"===e.ret)return e.data.list.map(e=>{e.disable=!1}),this.defaultList=e.data.list,this.params.forEach(()=>{this.brandList.push(JSON.parse(JSON.stringify(this.defaultList)))}),void this.disableOption();this.$message.error(e.message)})},disableOption(){this.params.map((e,t)=>{let a=e.snArr;this.oldSnArr[t]=a,this.brandList.map((e,s)=>{s!==t&&e.map(e=>{a.map(t=>{t==e.sn&&(e.disable=!0)})})})})},handleRepeat(e){if(0==this.oldSnArr[e].length)this.disableOption();else if(this.oldSnArr[e].length>this.params[e].snArr.length){let t="",a=this.params[e].snArr;this.oldSnArr[e].forEach((s,r)=>{let i=this.oldSnArr[e][r],l=!1;a.forEach((e,t)=>{s==e&&(l=!0)}),l||(t=i)}),this.brandList.forEach(e=>{e.forEach(e=>{e.sn==t&&(e.disable=!1)})}),this.oldSnArr[e]=JSON.parse(JSON.stringify(this.params[e].snArr))}else if(this.oldSnArr[e].length<this.params[e].snArr.length){let t="",a=this.oldSnArr[e];this.params[e].snArr.forEach((s,r)=>{this.params[e][r];let i=!1;a.forEach((e,t)=>{s==e&&(i=!0)}),i||(t=s)}),this.brandList.forEach((a,s)=>{e!==s&&a.forEach(e=>{e.sn==t&&(e.disable=!0)})}),this.oldSnArr[e]=JSON.parse(JSON.stringify(this.params[e].snArr))}},add(){this.params.push({snArr:[],score:null,luck:null}),this.brandList.push(JSON.parse(JSON.stringify(this.defaultList))),this.oldSnArr.push([]),this.disableOption()},del(e){this.$confirm("是否删除该项规则?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.params.splice(e,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",e._l(e.params,function(t,s){return a("el-form",{key:s,attrs:{model:t,inline:""}},[a("el-form-item",{attrs:{label:"规格:"}},[a("el-select",{staticClass:"ml10",staticStyle:{width:"240px"},attrs:{multiple:"",placeholder:"请选择","collapse-tags":""},on:{change:function(t){e.handleRepeat(s)}},model:{value:t.snArr,callback:function(a){e.$set(t,"snArr",a)},expression:"item.snArr"}},e._l(e.brandList[s],function(t){return t?a("el-option",{key:t.id,attrs:{disabled:t.disable,label:t.allName,value:t.sn}}):e._e()}))],1),e._v(" "),a("el-form-item",{attrs:{label:"扫码获得:"}},[a("el-input-number",{staticClass:"ml10",attrs:{precision:0,min:0,"controls-position":"right"},model:{value:t.score,callback:function(a){e.$set(t,"score",a)},expression:"item.score"}}),e._v(" 荷石币\n      "),a("el-input-number",{staticClass:"ml10",attrs:{precision:0,min:0,"controls-position":"right"},model:{value:t.luck,callback:function(a){e.$set(t,"luck",a)},expression:"item.luck"}}),e._v(" 幸运值\n    ")],1),e._v(" "),a("el-form-item",[0==s?a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]):a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.del(s)}}},[e._v("删除")])],1)],1)}))},staticRenderFns:[]};var c=a("VU/8")(o,n,!1,function(e){a("zBEX")},"data-v-dd0dd220",null).exports,m={props:["params"],data:()=>({queryParams:{type:2,subType:202,pageNo:1,pageSize:-1},dataList:[],dataListVisible:!1,total:null,selectedItem:[]}),created(){this.getCheckedCard()},mounted(){},methods:{getCheckedCard(){0!=this.params.length&&this.params.forEach(e=>{this.selectedItem.push({id:e.poolId})})},handleSelectionChange(e,t){this.selectedItem=e},handleSelectionAllChange(e){this.selectedItem=e},confirmChecked(){this.dataListVisible=!1,this.selectedItem.forEach((e,t)=>{-1===JSON.stringify(this.params).indexOf('"poolId":'+e.id+",")&&this.params.push({awardName:e.name,awardPicUrl:e.icon,totalNum:null,stockNum:null,probability:null,score:null,minred:null,redTotalMoney:null,redNum:null,poolId:e.id,awardType:202})})},add(e,t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:a})=>{if(0==a)return this.$message.error("数字不能为0");this.$request.post("/api/saotx/md/addAward",{id:e,increment:a},!0,e=>{"200000"===e.ret?(this.$message.success("增库成功"),this.params[t].totalNum+=Number(a)):this.$message.error(e.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},del(e,t){this.$confirm("是否删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.params.splice(t,1),this.selectedItem.forEach((t,a)=>{if(t.id==e.poolId)return this.selectedItem.splice(a,1)}),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},getDoubleCardList(){this.dataListVisible=!0,this.$request.post("/api/saotx/md/listMaterial",this.queryParams,!0,e=>{if("200000"===e.ret)return this.dataList=e.data.list,this.total=e.data.page.count,void this.$nextTick(e=>{this.selectedItem.forEach(e=>{this.$refs.doubleCardTable.toggleRowSelection(this.dataList.find(t=>t.id==e.id),!0)})});this.$message.error(e.message)})},reset(){this.queryParams.name="",this.getDoubleCardList()},handleCurrentChange(e){this.queryParams.pageNo=e,this.getDoubleCardList()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("翻倍卡")])]),e._v(" "),a("el-form",[a("el-form-item",[e._v("\n      选择翻倍卡：\n      "),a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.getDoubleCardList}})],1),e._v(" "),e._l(e.params,function(t,s){return e.params?a("el-form-item",{key:s},[a("span",{staticStyle:{display:"inline-block",width:"70px"}},[e._v(e._s(t.awardName))]),e._v("\n      投放数量：\n      "),a("el-input-number",{attrs:{disabled:!!t.id,precision:0,min:0,"controls-position":"right"},model:{value:t.totalNum,callback:function(a){e.$set(t,"totalNum",a)},expression:"item.totalNum"}}),e._v(" "),t.id?a("span",{staticClass:"mr20",staticStyle:{"font-size":"12px",color:"#aaa"}},[e._v("\n        剩余数量："+e._s(t.totalNum-t.stockNum)+"个\n      ")]):e._e(),e._v("\n      中奖概率：\n      "),a("el-input-number",{attrs:{precision:2,min:0,max:100,"controls-position":"right"},model:{value:t.probability,callback:function(a){e.$set(t,"probability",a)},expression:"item.probability"}}),e._v("%\n      "),a("el-button",{staticClass:"ml20",attrs:{type:"danger"},on:{click:function(a){e.del(t,s)}}},[e._v("删除")]),e._v(" "),t.id?a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.add(t.id,s)}}},[e._v("增库")]):e._e()],1):e._e()})],2),e._v(" "),a("el-dialog",{attrs:{title:"选择翻倍卡","close-on-click-modal":!1,visible:e.dataListVisible,width:"800px"},on:{"update:visible":function(t){e.dataListVisible=t}}},[a("el-form",{attrs:{inline:"","label-width":"40px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getDoubleCardList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.reset}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{height:"500px",overflow:"auto"}},[a("el-table",{ref:"doubleCardTable",staticStyle:{width:"100%"},attrs:{data:e.dataList,"tooltip-effect":"dark"},on:{"select-all":e.handleSelectionAllChange,select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"valueAlias",label:"倍数"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.icon,width:"50",alt:""}})]}}])})],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.confirmChecked}},[e._v("选择勾选的翻倍卡")])],1)],1)},staticRenderFns:[]},u=a("VU/8")(m,d,!1,null,null,null).exports,p={props:["params"],data:()=>({queryParams:{name:"",type:2,subType:201,pageNo:1,pageSize:-1},dataList:[],dataListVisible:!1,total:null,selectedItem:[]}),created(){this.getCheckedCard()},methods:{getCheckedCard(){0!=this.params.length&&this.params.forEach(e=>{this.selectedItem.push({id:e.poolId})})},handleSelectionChange(e,t){this.selectedItem=e},handleSelectionAllChange(e){this.selectedItem=e},confirmChecked(){this.dataListVisible=!1,this.selectedItem.forEach((e,t)=>{-1===JSON.stringify(this.params).indexOf('"poolId":'+e.id+",")&&this.params.push({awardName:e.name,awardPicUrl:e.icon,totalNum:null,stockNum:null,probability:null,score:null,minred:null,redTotalMoney:null,redNum:null,poolId:e.id,awardType:201})})},add(e,t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:a})=>{if(0==a)return this.$message.error("数字不能为0");this.$request.post("/api/saotx/md/addAward",{id:e,increment:a},!0,e=>{"200000"===e.ret?(this.$message.success("增库成功"),this.params[t].totalNum+=Number(a)):this.$message.error(e.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},del(e,t){this.$confirm("是否删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.params.splice(t,1),this.selectedItem.forEach((t,a)=>{if(t.id==e.poolId)return this.selectedItem.splice(a,1)}),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},getDoubleCardList(){this.dataListVisible=!0,this.$request.post("/api/saotx/md/listMaterial",this.queryParams,!0,e=>{if("200000"===e.ret)return this.dataList=e.data.list,this.total=e.data.page.count,void this.$nextTick(e=>{this.selectedItem.forEach(e=>{this.$refs.doubleCardTable.toggleRowSelection(this.dataList.find(t=>t.id==e.id),!0)})});this.$message.error(e.message)})},reset(){this.queryParams.name="",this.getDoubleCardList()},handleCurrentChange(e){this.queryParams.pageNo=e,this.getDoubleCardList()}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("折扣卡")])]),e._v(" "),a("el-form",[a("el-form-item",[e._v("\n      选择折扣卡：\n      "),a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.getDoubleCardList}})],1),e._v(" "),e._l(e.params,function(t,s){return e.params?a("el-form-item",{key:s},[a("span",{staticStyle:{display:"inline-block",width:"70px"}},[e._v(e._s(t.awardName))]),e._v("\n      投放数量：\n      "),a("el-input-number",{attrs:{disabled:!!t.id,precision:0,min:0,"controls-position":"right"},model:{value:t.totalNum,callback:function(a){e.$set(t,"totalNum",a)},expression:"item.totalNum"}}),e._v(" "),t.id?a("span",{staticClass:"mr20",staticStyle:{"font-size":"12px",color:"#aaa"}},[e._v("\n        剩余数量："+e._s(t.totalNum-t.stockNum)+"个\n      ")]):e._e(),e._v("\n      中奖概率：\n      "),a("el-input-number",{attrs:{precision:2,min:0,max:100,"controls-position":"right"},model:{value:t.probability,callback:function(a){e.$set(t,"probability",a)},expression:"item.probability"}}),e._v("%\n      "),a("el-button",{staticClass:"ml20",attrs:{type:"danger"},on:{click:function(a){e.del(t,s)}}},[e._v("删除")]),e._v(" "),t.id?a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.add(t.id,s)}}},[e._v("增库")]):e._e()],1):e._e()})],2),e._v(" "),a("el-dialog",{attrs:{title:"选择折扣卡","close-on-click-modal":!1,visible:e.dataListVisible,width:"800px"},on:{"update:visible":function(t){e.dataListVisible=t}}},[a("el-form",{attrs:{inline:"","label-width":"40px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getDoubleCardList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.reset}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{height:"500px",overflow:"auto"}},[a("el-table",{ref:"doubleCardTable",staticStyle:{width:"100%"},attrs:{data:e.dataList,"tooltip-effect":"dark"},on:{"select-all":e.handleSelectionAllChange,select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"valueAlias",label:"倍数"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.icon,width:"50",alt:""}})]}}])})],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.confirmChecked}},[e._v("选择勾选的折扣卡")])],1)],1)},staticRenderFns:[]},v={props:["params","double","discount"],components:{doubleCard:u,discountCard:a("VU/8")(p,h,!1,null,null,null).exports},data:()=>({})},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("幸运值")])]),e._v(" "),a("el-form",{attrs:{model:e.params}},[a("el-form-item",[e._v("\n        每分享一次可获得\n        "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{precision:0,min:0,"controls-position":"right"},model:{value:e.params.shareLuck,callback:function(t){e.$set(e.params,"shareLuck",t)},expression:"params.shareLuck"}}),e._v("\n        幸运值\n      ")],1),e._v(" "),a("el-form-item",[e._v("\n        每周每人最多可获得\n        "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{precision:0,min:0,"controls-position":"right"},model:{value:e.params.shareMaxpwLuck,callback:function(t){e.$set(e.params,"shareMaxpwLuck",t)},expression:"params.shareMaxpwLuck"}}),e._v("\n        幸运值\n      ")],1)],1)],1),e._v(" "),e.double?a("double-card",{staticClass:"mt20",attrs:{params:e.double}}):e._e(),e._v(" "),e.discount?a("discount-card",{staticClass:"mt20",attrs:{params:e.discount}}):e._e()],1)},staticRenderFns:[]},y=a("VU/8")(v,f,!1,null,null,null).exports,g={props:["params"],data:()=>({}),mounted(){}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-card",[a("el-form",{attrs:{"label-width":"100px"}},e._l(e.params,function(t,s){return a("div",{key:s},[a("el-form-item",{attrs:{label:202===t.type?"翻倍卡转赠":"折扣卡转赠"}},[a("el-radio",{attrs:{label:0},model:{value:t.give,callback:function(a){e.$set(t,"give",a)},expression:"item.give"}},[e._v("不可转赠")])],1),e._v(" "),a("el-form-item",[a("el-radio",{attrs:{label:1},model:{value:t.give,callback:function(a){e.$set(t,"give",a)},expression:"item.give"}},[e._v("可转赠")])],1),e._v(" "),1==t.give?a("el-form-item",[a("div",[e._v("\n            "+e._s((t.type,"接收转赠翻倍卡数量："))+"\n            "),a("el-radio",{attrs:{label:0},model:{value:t.isRecieveMax,callback:function(a){e.$set(t,"isRecieveMax",a)},expression:"item.isRecieveMax"}},[e._v("不限制")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:t.isRecieveMax,callback:function(a){e.$set(t,"isRecieveMax",a)},expression:"item.isRecieveMax"}},[e._v("指定")]),e._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{disabled:1!=t.isRecieveMax,precision:0,min:0,"controls-position":"right"},model:{value:t.recieveMaxNum,callback:function(a){e.$set(t,"recieveMaxNum",a)},expression:"item.recieveMaxNum"}}),e._v("\n            张\n          ")],1)]):e._e()],1)}))],1)],1)},staticRenderFns:[]},_={components:{normConf:c,shareConf:y,makeConf:a("VU/8")(g,b,!1,null,null,null).exports},props:["activityCode"],data(){var e=(e,t,a)=>{};return{rules:{scanTimes:[{required:!0,validator:e}],lotteryStime:[{required:!0,validator:e}]},rules2:{snGiveSets:[{required:!0,validator:e}],form:[{required:!0,validator:e}]},form:{},selectedProv:"130000",selectedCityIndex:"",selectedAreaIndex:"",cityList:[],areaList:[],disableAreaName:[],doubleArr:[],discountArr:[],status:!1}},watch:{},created(){this.getActDetail(),this.getCityList()},methods:{getActDetail(){this.$request.post("/api/saotx/md/queryExt",{activityCode:this.activityCode},!0,e=>{"200000"===e.ret&&(this.status=!0,this.form=e.data,0!=this.form.blackList.length&&this.handleBlack(),0==this.form.snGiveSets.length&&this.form.snGiveSets.push({snArr:[],score:null,luck:null}),0==this.form.giveSets.length&&this.form.giveSets.push({type:202,typeName:"翻倍卡",give:null,isRecieveMax:null,recieveMaxNum:null},{type:201,typeName:"折扣卡",give:null,isRecieveMax:null,recieveMaxNum:null}),this.form.shareAwards&&0!=this.form.shareAwards.length&&this.form.shareAwards.forEach(e=>{201==e.awardType?this.discountArr.push(e):202==e.awardType&&this.doubleArr.push(e)}))})},getCityList(){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:[this.selectedProv]},!0,e=>{if("200000"===e.ret)return this.cityList=e.data;this.$meaasge.error(e.message)})},getAreaList(e){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:[this.cityList[e].code]},!0,t=>{if("200000"===t.ret)return t.data.map(e=>{e.disable=!1}),this.areaList=t.data,void this.areaListDisable(e);this.$meaasge.error(t.message)})},nextStep(){if(!this.form.lotteryStime)return this.$message.error("请选择开奖时间");this.form.lotteryStime=this.form.lotteryStime.split(":").join(""),this.form.shareAwards=[],this.form.shareAwards=[...this.discountArr,...this.doubleArr],this.$request.post("/api/saotx/md/somExt",this.form,!0,e=>{if("200000"===e.ret)return this.$emit("nextStep",this.form.activityCode);this.$message.error(e.message)})},back(){this.$emit("back")},selectDisable(e){let t="河北省 "+this.cityList[this.selectedCityIndex].name+" "+this.areaList[e].name;-1==this.disableAreaName.indexOf(t)&&(this.disableAreaName.push(t),this.form.districtBlacklist?this.form.districtBlacklist.push(this.areaList[e].code):(this.form.districtBlacklist=[],this.form.districtBlacklist.push(this.areaList[e].code))),this.selectedCityIndex="",this.selectedAreaIndex="",this.areaList=[]},handleClose(e){let t=this.disableAreaName.indexOf(e);this.disableAreaName.splice(t,1),this.form.districtBlacklist.splice(t,1)},areaListDisable(e){var t=[];this.disableAreaName.forEach(a=>{1!==a.indexOf(this.cityList[e])&&t.push(a)}),t.forEach(e=>{this.areaList.forEach(t=>{-1!=e.indexOf(t.name)&&(t.disable=!0)})})},handleBlack(){this.form.blackList.map(e=>{let t=e.provName+" "+e.cityName+" "+e.districtName;this.disableAreaName.push(t)})}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{attrs:{modal:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"选号设置：",prop:"scanTimes"}},[a("span",[e._v("每扫")]),e._v(" "),a("el-input-number",{attrs:{"controls-position":"right",min:0,precision:0},model:{value:e.form.scanTimes,callback:function(t){e.$set(e.form,"scanTimes",t)},expression:"form.scanTimes"}}),e._v(" "),a("span",[e._v("包烟可参与一次选号")])],1),e._v(" "),a("el-form-item",{attrs:{label:"开奖时间：",prop:"lotteryStime"}},[a("span",[e._v("每周六")]),e._v(" "),a("el-time-picker",{staticStyle:{width:"130px"},attrs:{align:"center",editable:!1,format:"HH:mm","value-format":"HH:mm",placeholder:"请选择时间"},model:{value:e.form.lotteryStime,callback:function(t){e.$set(e.form,"lotteryStime",t)},expression:"form.lotteryStime"}})],1),e._v(" "),a("el-form",{attrs:{"label-position":"top",rules:e.rules2}},[a("el-form-item",{attrs:{label:"规格参数：",prop:"snGiveSets"}},[e.status?a("norm-conf",{staticClass:"ml40",attrs:{params:e.form.snGiveSets}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"分享设置：",prop:"form"}},[e.status?a("share-conf",{staticClass:"ml40",attrs:{params:e.form,double:e.doubleArr,discount:e.discountArr}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"转赠设置："}},[e.status?a("make-conf",{staticClass:"ml40",attrs:{params:e.form.giveSets}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"中奖地区黑名单设置："}},[a("div",{staticClass:"ml40"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedProv,callback:function(t){e.selectedProv=t},expression:"selectedProv"}},[a("el-option",{attrs:{value:"130000",label:"河北省"}})],1),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getAreaList},model:{value:e.selectedCityIndex,callback:function(t){e.selectedCityIndex=t},expression:"selectedCityIndex"}},e._l(e.cityList,function(t,s){return e.cityList?a("el-option",{key:t.code,attrs:{label:t.name,value:s}}):e._e()})),e._v(" "),a("el-select",{attrs:{placeholder:"请选择","no-data-text":"请先选择市"},on:{change:e.selectDisable},model:{value:e.selectedAreaIndex,callback:function(t){e.selectedAreaIndex=t},expression:"selectedAreaIndex"}},e._l(e.areaList,function(t,s){return e.areaList?a("el-option",{key:t.code,attrs:{disabled:t.disable,label:t.name,value:s}}):e._e()})),e._v(" "),a("el-col",{staticClass:"mt20"},e._l(e.disableAreaName,function(t,s){return 0!=e.disableAreaName.length?a("el-tag",{key:s,attrs:{type:"info",color:"#fff",closable:!0,size:"medium"},on:{close:function(a){e.handleClose(t)}}},[e._v(e._s(t))]):e._e()}))],1)])],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.back}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(_,w,!1,function(e){a("L9VZ")},"data-v-69c9b57a",null).exports,C={props:["params","outRange"],data:()=>({type:1,index:null,prizeListVisible:!1,dataList:[],totlaMoney:[],titleName:""}),created(){0==this.params.length&&this.params.push({awardName:null,awardType:3,awardValue:null,rangeType:1,srange:null,erange:null,materialId:null}),0==this.outRange.length&&this.outRange.push({awardName:null,awardType:6,awardValue:null,rangeType:2,srange:null,erange:null,materialId:null}),this.calculate()},methods:{calculate(e){if(void 0!=e){let t=((this.params[e].erange-this.params[e].srange+1)*this.params[e].awardValue).toFixed(2);this.totlaMoney.splice(e,1,t)}else this.params.forEach(e=>{let t=((e.erange-e.srange+1)*e.awardValue).toFixed(2);this.totlaMoney.push(t)})},checkScore(){this.prizeListVisible=!0},checked(e){3==e.type?(this.params[this.index].materialId=e.id,this.params[this.index].awardName=e.name,this.params[this.index].awardValue=e.value,this.calculate(this.index)):(this.outRange[0].materialId=e.id,this.outRange[0].awardName=e.name,this.outRange[0].awardValue=e.value),this.prizeListVisible=!1},getPrizeList(e,t){3===e?this.titleName="选择红包":6===e&&(this.titleName="选择荷石币");let a={type:e,pageSize:-1};void 0!=t&&(this.index=t),this.prizeListVisible=!0,this.$request.post("/api/saotx/md/listMaterial",a,!0,e=>{"200000"!==e.ret?this.$message.error(e.message):this.dataList=e.data.list})},add(){this.params.push({awardName:null,awardType:3,awardValue:null,rangeType:1,srange:null,erange:null,materialId:null})},del(e){this.$confirm("是否删除该项规则?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.params.splice(e,1),this.params.map((e,t)=>{if(2==e.rangeType)return this.index=t}),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-form-item",{attrs:{label:"名次设置：",prop:"srange"}},e._l(e.params,function(t,s){return a("div",{key:s,staticClass:"mb20"},[1==t.rangeType?a("div",[a("el-input-number",{staticStyle:{width:"90px"},attrs:{precision:0,min:1,"controls-position":"right"},on:{change:function(t){e.calculate(s)}},model:{value:t.srange,callback:function(a){e.$set(t,"srange",a)},expression:"item.srange"}}),e._v("\n        —\n        "),a("el-input-number",{staticStyle:{width:"90px"},attrs:{precision:0,min:1,"controls-position":"right"},on:{change:function(t){e.calculate(s)}},model:{value:t.erange,callback:function(a){e.$set(t,"erange",a)},expression:"item.erange"}}),e._v("\n        名，红包面额\n        "),e._v(" "),t.materialId?e._e():a("span",[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){e.getPrizeList(3,s)}}}),e._v("\n          元\n        ")],1),e._v(" "),t.materialId?a("span",[e._v("\n          "+e._s(t.awardName)+"\n          "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.getPrizeList(3,s)}}},[e._v("更换")])],1):e._e(),e._v(" "),a("span",{staticClass:"ml20 mr20"},[e._v("\n          总金额\n          "),a("el-input",{staticStyle:{width:"80px"},attrs:{disabled:"",value:isNaN(e.totlaMoney[s])?"":e.totlaMoney[s]}}),e._v("\n          元\n        ")],1),e._v(" "),0!==s?a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.del(s)}}},[e._v("删除")]):e._e(),e._v(" "),s===e.params.length-1?a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")]):e._e()],1):e._e()])})),e._v(" "),a("el-form-item",{attrs:{label:"排名以外：",prop:"awardName"}},[a("div",[e._v("\n      可获得\n      "),e.outRange[0].materialId?e._e():a("span",[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){e.getPrizeList(6)}}}),e._v("\n        荷石币\n      ")],1),e._v(" "),e.outRange[0].materialId?a("span",[e._v("\n        "+e._s(e.outRange[0].awardValue)+"\n        荷石币\n        "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.getPrizeList(6)}}},[e._v("更换")])],1):e._e()])]),e._v(" "),a("el-dialog",{attrs:{title:e.titleName,"close-on-click-modal":!1,visible:e.prizeListVisible,width:"800px"},on:{"update:visible":function(t){e.prizeListVisible=t}}},[a("el-table",{ref:"doubleCardTable",staticClass:"mb20",staticStyle:{width:"100%"},attrs:{data:e.dataList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.icon,width:"50",alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.checked(t.row)}}},[e._v("选择")])]}}])})],1)],1)],1)},staticRenderFns:[]},$={components:{rankConf:a("VU/8")(C,k,!1,null,null,null).exports},props:["activityCode"],data(){var e=(e,t,a)=>{};return{rules:{areas:[{required:!0,validator:e}],srange:[{required:!0,validator:e}],awardName:[{required:!0,validator:e}]},rules2:{awards:[{required:!0,validator:e}],prov:[{required:!0,validator:e}],srange:[{required:!0,validator:e}],awardName:[{required:!0,validator:e}]},areas:[],prov:[],cityList:[],selectedCity:[],provList:[],defaultPond:!0,TfPond:!1,form:{},flag:!1,stop:!1,oldSelectList:["1"]}},watch:{},created(){this.getActDetail(),this.getCityList(),this.getProvList()},methods:{getActDetail(){this.$request.post("/api/saotx/md/queryBaseAward",{activityCode:this.activityCode},!0,e=>{if("200000"===e.ret)return this.flag=!0,this.form=e.data,this.form[0].areas.forEach(e=>{this.areas.push(e.cityCode),this.oldSelectList.push(e.cityCode)}),void(this.form.length>2&&(this.form[2].areas.forEach(e=>{this.prov.push(e.provCode)}),this.TfPond=!0));this.$message.error(e.message)})},getProvList(){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:[]},!0,e=>{if("200000"===e.ret)return e.data.map((t,a)=>{"130000"==t.code&&e.data.splice(a,1)}),void(this.provList=e.data);this.$message.error(e.message)})},getCityList(){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:["130000"]},!0,e=>{if("200000"===e.ret)return this.cityList=[{code:"000000",name:"全部"}],void this.cityList.push(...e.data);this.$meaasge.error(e.message)})},addTf(e){e?this.form.splice(2,0,{activityCode:this.activityCode,areas:[],awards:[],outRange:[],awardType:null,awardSubType:null,rangeType:null,tfType:"1",tfStrategy:"22"}):this.form.splice(2,1)},handleRepetitive(e,t){var a=e.awards[t].srange,s=e.awards[t].erange;for(let l=t+1;l<e.awards.length;l++){var r=e.awards[l].erange,i=e.awards[l].srange;if(a<=i&&s>=i||a<=r&&s>=r)return this.$message.error("名次不能重复"),void(this.stop=!0);this.stop=!1}t<e.awards.length-1&&(t++,this.handleRepetitive(e,t))},checkAll(e){let t=[];for(let e of this.cityList)t.push(e.code);const a=1===this.oldSelectList.length?[]:this.oldSelectList[1];if(e.includes("000000")&&(this.areas=t),a.includes("000000")&&!e.includes("000000")&&(this.areas=[]),a.includes("000000")&&e.includes("000000")){const t=e.indexOf("000000");e.splice(t,1),this.areas=e}if(a.includes("000000")||e.includes("000000")||e.length===t.length-1&&(this.areas=["000000"].concat(e)),this.oldSelectList[1]=this.areas,0==this.areas.length)return this.areaList=[],void(this.selectAreaList=[])},save(){this.form.forEach((e,t)=>{0!=t&&this.stop||this.handleRepetitive(e,0)}),this.stop||(this.form[0].areas=[],this.cityList.map(e=>{this.areas.forEach(t=>{t==e.code&&this.form[0].areas.push({provCode:"130000",cityCode:t})})}),this.TfPond&&(this.form[2].areas=[],this.provList.map(e=>{this.prov.forEach(t=>{t==e.code&&this.form[2].areas.push({provCode:t})})})),this.$request.post("/api/saotx/md/somBaseAward",{activityCode:this.activityCode,strategy:this.form},!0,e=>{if("200000"===e.ret)return this.$message.success("保存成功"),void this.$emit("back");this.$message.error(e.message)}))}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("span",[e._v("奖项设置：")]),e._v(" "),a("el-card",{staticClass:"mt20"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("省内")])]),e._v(" "),a("el-form",{attrs:{"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"销区：",prop:"areas"}},[e._v("\n        河北省\n        "),a("el-select",{staticClass:"ml20",attrs:{multiple:"","collapse-tags":"",placeholder:"请选择区"},on:{change:e.checkAll},model:{value:e.areas,callback:function(t){e.areas=t},expression:"areas"}},e._l(e.cityList,function(t,s){return e.cityList?a("el-option",{key:s,attrs:{label:t.name,value:t.code}}):e._e()}))],1),e._v(" "),e.flag?a("rank-conf",{attrs:{params:e.form[0].awards,outRange:e.form[0].outRange}}):e._e()],1)],1),e._v(" "),a("el-card",{staticClass:"mt20"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("省外")])]),e._v(" "),a("el-form",{attrs:{"label-width":"100px",rules:e.rules2}},[a("el-form-item",{attrs:{label:"投放类型：",prop:"awards"}},[a("div",{staticClass:"mt20 mb20"},[a("div",[e._v("默认奖池")]),e._v(" "),e.flag?a("rank-conf",{attrs:{params:e.form[1].awards,outRange:e.form[1].outRange}}):e._e()],1),e._v(" "),a("div",[a("el-checkbox",{staticClass:"mr20",on:{change:e.addTf},model:{value:e.TfPond,callback:function(t){e.TfPond=t},expression:"TfPond"}},[e._v("定投奖池")]),e._v(" "),e.TfPond?a("div",[a("el-form-item",{attrs:{label:"地区：",prop:"prov"}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择区"},model:{value:e.prov,callback:function(t){e.prov=t},expression:"prov"}},e._l(e.provList,function(t,s){return e.provList?a("el-option",{key:s,attrs:{disabled:!!t.disable,label:t.name,value:t.code}}):e._e()}))],1),e._v(" "),a("rank-conf",{attrs:{params:e.form[2].awards,outRange:e.form[2].outRange}})],1):e._e()],1)])],1)],1),e._v(" "),a("div",{staticClass:"btn mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var P={components:{baseConf:l,rulesConf:x,putConf:a("VU/8")($,q,!1,function(e){a("UF2m")},"data-v-e8f985c0",null).exports},data:()=>({active:0,actCode:""}),created(){},methods:{next(e){if(e)return this.actCode=e,void this.active++;this.$message.error("系统繁忙，请重试!")},back(){this.active=0}}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基础设置"}}),e._v(" "),a("el-step",{attrs:{title:"规则设置"}}),e._v(" "),a("el-step",{attrs:{title:"投放设置"}})],1),e._v(" "),0==e.active?a("base-conf",{on:{nextStep:e.next}}):e._e(),e._v(" "),1==e.active?a("rules-conf",{attrs:{activityCode:e.actCode},on:{nextStep:e.next,back:e.back}}):e._e(),e._v(" "),2==e.active?a("put-conf",{attrs:{activityCode:e.actCode},on:{back:e.back}}):e._e()],1)],1)},staticRenderFns:[]};var L=a("VU/8")(P,S,!1,function(e){a("6xna")},"data-v-20069118",null);t.default=L.exports},"K+H4":function(e,t){},L9VZ:function(e,t){},O33F:function(e,t){},"Px+L":function(e,t){},"U+FS":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("/cAB"),r=a("p3Dr"),i=a("jm70"),l={components:{timeModule:s.a,formBtn:r.a,regionSelect:i.a},data:()=>({queryParams:{activityCode:"ACT-ZCQ2JKDBBBBB",awardProv:[],awardCity:[],stime:"",etime:"",orderCode:"",awardType:"",selType:"2",keywords:"",pageNo:1,pageSize:10,status:"",queryTimeArr:[],oldDate:"",nowDate:""},total:null,form:{},awardList:[],loading:!0}),created(){},methods:{init(e){e&&(this.queryParams.nowDate=e[0],this.queryParams.oldDate=e[1]),this.getAwardList()},getAwardList(){this.$request.post("/api/saotx/md/orders",this.queryParams,!0,e=>{if("200000"===e.ret)return this.awardList=e.data.list,this.total=e.data.page.count,void(this.loading=!1);this.$message.error(e.message)})},handleSizeChange(e){this.queryParams.pageSize=e,this.getAwardList()},handleCurrentChange(e){this.queryParams.pageNo=e,this.getAwardList()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",{attrs:{model:e.queryParams,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"姓名/手机号:"}},[a("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:e.queryParams.keywords,callback:function(t){e.$set(e.queryParams,"keywords",t)},expression:"queryParams.keywords"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("time-module",{attrs:{queryParams:e.queryParams},on:{init:e.init}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"中奖地区:"}},[a("region-select",{attrs:{queryParams:e.queryParams}})],1)],1)],1)],1),e._v(" "),a("form-btn",{attrs:{num:1,queryParams:e.queryParams},on:{init:e.init}})],1),e._v(" "),a("el-card",{staticClass:"mt20"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"","v-loading":e.loading,stripe:!0,data:e.awardList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"activityName",label:"活动名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"termName",label:"中奖周期"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"prizeWinner",label:"中奖人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"中奖人手机"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"awardType",label:"奖品类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"awardName",label:"奖品名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"term",label:"中奖时间"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"中奖地区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.awardProvince)+"-"+e._s(t.row.awardCity)+e._s(t.row.awardDistrict?"-"+t.row.awardDistrict:""))])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":e.queryParams.pageNo,"page-size":e.queryParams.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var n=a("VU/8")(l,o,!1,function(e){a("ouhD")},"data-v-5b55871c",null);t.default=n.exports},UF2m:function(e,t){},"X4E/":function(e,t){},X77c:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={props:["awardList","loading"],data:()=>({prizeType:{1:"实物",201:"折扣卡",202:"翻倍卡",3:"红包",6:"积分"}}),methods:{goDetailPage(e){this.$router.push("/memberday/order/commonAwardDetail?orderCode="+e)}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"","v-loading":e.loading,stripe:!0,data:e.awardList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{align:"center",prop:"orderCode",label:"订单号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"activityName",label:"活动名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"prizeWinner",label:"中奖人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mobile",label:"中奖人手机号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"awardType",label:"奖品类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.prizeType[t.row.awardType]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"awardName",label:"奖品名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"term",label:"中奖时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(new Date(t.row.ctime).Format("yyyy-MM-dd hh:mm:ss"))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"中奖地区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.awardProvince)+e._s(t.row.awardCity?"-"+t.row.awardCity:"")+e._s(t.row.awardDistrict?"-"+t.row.awardDistrict:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"orderStatus",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作项"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.awardType&&1!=t.row.status?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.goDetailPage(t.row.orderCode)}}},[e._v("详情")]):e._e()]}}])})],1)],1)},staticRenderFns:[]},i=a("VU/8")(s,r,!1,null,null,null).exports,l=a("/cAB"),o=a("p3Dr"),n=a("jm70"),c={components:{commonList:i,timeModule:l.a,formBtn:o.a,regionSelect:n.a},data:()=>({queryParams:{activityCode:"ACT-ZCQ2JKDU6EP8",awardProv:[],awardCity:[],stime:"",etime:"",orderCode:"",awardType:"",selType:"",keywords:"",pageNo:1,pageSize:10,status:"",queryTimeArr:[],oldDate:"",nowDate:"",selectedOptions:[]},actName:[{name:"会员日活动",code:"ACT-ZCQ2JKDU6EP8"},{name:"大转盘",code:"ACT-VS6X49FJ5357"},{name:"答题",code:"ACT-1911YB84P681"}],orderStatusList:[{name:"待领取",status:1},{name:"已发货",status:2},{name:"已领取",status:6}],awardTypeList:[{name:"实物",type:1},{name:"翻倍卡",type:202},{name:"折扣卡",type:201},{name:"红包",type:3},{name:"积分",type:6}],keywordsTypeList:[{name:"订单号",type:1},{name:"姓名/手机号",type:2}],form:{},awardList:[],total:0,loading:!0}),created(){},methods:{init(e){e&&(this.queryParams.nowDate=e[0],this.queryParams.oldDate=e[1]),this.getAwardList()},getAwardList(){this.$request.post("/api/saotx/md/orders",this.queryParams,!0,e=>{if("200000"===e.ret)return this.awardList=e.data.list,this.total=e.data.page.count,void(this.loading=!1);this.$message.error(e.message)})},handleSizeChange(e){this.queryParams.pageSize=e,this.getAwardList()},handleCurrentChange(e){this.queryParams.pageNo=e,this.getAwardList()}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",{ref:"form",attrs:{model:e.queryParams,"label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"活动名称："}},[a("el-select",{model:{value:e.queryParams.activityCode,callback:function(t){e.$set(e.queryParams,"activityCode",t)},expression:"queryParams.activityCode"}},e._l(e.actName,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("time-module",{attrs:{queryParams:e.queryParams},on:{init:e.init}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"奖品类型："}},[a("el-select",{attrs:{clearable:!0,placeholder:"请选择活动区域"},model:{value:e.queryParams.awardType,callback:function(t){e.$set(e.queryParams,"awardType",t)},expression:"queryParams.awardType"}},e._l(e.awardTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.type}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单状态："}},[a("el-select",{attrs:{clearable:!0,placeholder:"请选择"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.orderStatusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.status}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"关键词："}},[a("el-col",{attrs:{span:10}},[a("el-select",{attrs:{clearable:!0,placeholder:"请选择"},model:{value:e.queryParams.selType,callback:function(t){e.$set(e.queryParams,"selType",t)},expression:"queryParams.selType"}},e._l(e.keywordsTypeList,function(e,t){return a("el-option",{key:t,attrs:{value:e.type,label:e.name}})}))],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{disabled:!e.queryParams.selType,placeholder:"请输入"},model:{value:e.queryParams.keywords,callback:function(t){e.$set(e.queryParams,"keywords",t)},expression:"queryParams.keywords"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"中奖地区："}},[a("region-select",{attrs:{queryParams:e.queryParams}})],1)],1)],1)],1),e._v(" "),a("form-btn",{attrs:{num:2,isBaseAward:!0,queryParams:e.queryParams},on:{init:e.init}})],1),e._v(" "),a("el-card",{staticClass:"mt20"},[a("common-list",{attrs:{awardList:e.awardList,loading:e.loading}}),e._v(" "),a("el-pagination",{staticClass:"mt20",attrs:{background:"","current-page":e.queryParams.pageNo,"page-size":e.queryParams.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,m,!1,function(e){a("O33F")},"data-v-6d00f876",null);t.default=d.exports},XiPn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={props:["openDialog","params"],data(){return{deliverDialogVisible:!1,orderDialogVisible:!1,radio:"",scaleStyle:null,statusList:{11:"待审核",12:"审核通过",14:"审核不通过"},saveParams:{orderCode:this.params.orderCode,authStatus:12,authDesc:""}}},created(){},methods:{confirm(){return this.params.province||this.params.city||this.params.detail?this.params.logisticalCompany&&this.params.logisticalCode?void this.$request.post("/api/saotx/md/modifyOrder",this.params,!0,e=>{if("200000"===e.ret)return this.$message.success("物流信息上传成功"),this.deliverDialogVisible=!1,void this.$emit("refresh");this.$message.error(e.message)}):this.$message.error("请输入物流信息"):this.$message.error("请完善收货人信息")},scaleUp(){this.scaleStyle={position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(5)",display:"block","z-index":"9999999",cursor:"pointer"}},restore(){this.scaleStyle=null},save(){if(14==this.saveParams.authStatus&&!this.saveParams.authDesc)return this.$message.error("请输入不通过原因!");this.$request.post("/api/saotx/md/authOrder",this.saveParams,!0,e=>{if("200000"===e.ret)return this.$message.success("保存成功!"),void this.$emit("refresh");this.$message.error(e.message)})},reset(){this.$emit("taggle")}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-dialog",{attrs:{visible:e.openDialog,width:"400px",top:"35vh","close-on-click-modal":!1},on:{"update:visible":function(t){e.openDialog=t},close:e.reset}},[a("h3",[e._v("确认发货")]),e._v(" "),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"物流订单号："}},[a("el-input",{attrs:{placeholder:"请输入物流订单号"},model:{value:e.params.logisticalCode,callback:function(t){e.$set(e.params,"logisticalCode",t)},expression:"params.logisticalCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物流公司："}},[a("el-input",{attrs:{placeholder:"请输入物流公司"},model:{value:e.params.logisticalCompany,callback:function(t){e.$set(e.params,"logisticalCompany",t)},expression:"params.logisticalCompany"}})],1),e._v(" "),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){e.openDialog=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),2==e.params.status?a("div",[a("el-form",{staticClass:"mt20",attrs:{model:e.params,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"认证照片："}},[e.params.img.img?a("div",[a("img",{staticClass:"img",style:e.scaleStyle,attrs:{title:e.scaleStyle?"点击关闭":"",src:e.params.img.img},on:{click:e.restore}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.scaleUp}},[e._v("查看大图")])],1):a("span",[e._v("待上传")])]),e._v(" "),e.params.img.img?a("div",[a("el-form-item",{attrs:{label:"状态："}},[a("span",[e._v(e._s(e.statusList[e.params.img.authStatus]))])]),e._v(" "),11==e.params.img.authStatus?a("el-form-item",{attrs:{label:"照片审核："}},[a("el-radio",{attrs:{label:12},model:{value:e.saveParams.authStatus,callback:function(t){e.$set(e.saveParams,"authStatus",t)},expression:"saveParams.authStatus"}},[e._v("审核通过")]),e._v(" "),a("el-radio",{attrs:{label:14},model:{value:e.saveParams.authStatus,callback:function(t){e.$set(e.saveParams,"authStatus",t)},expression:"saveParams.authStatus"}},[e._v("审核不通过")]),e._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"230px","margin-left":"10px"},attrs:{disabled:12==e.saveParams.authStatus,placeholder:"不通过原因描述"},model:{value:e.saveParams.authDesc,callback:function(t){e.$set(e.saveParams,"authDesc",t)},expression:"saveParams.authDesc"}})],1):e._e(),e._v(" "),14==e.params.img.authStatus?a("el-form-item",{attrs:{label:"不通过原因："}},[a("span",{staticStyle:{color:"#FF0000"}},[e._v(e._s(e.params.authDesc))])]):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"btn"},[e.params.img.img&&11==e.params.img.authStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]):e._e(),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1)],1)],1):e._e()],1)},staticRenderFns:[]};var i={props:["orderCode","tsUuid"],components:{superPop:a("VU/8")(s,r,!1,function(e){a("0E29")},"data-v-2ba10cbc",null).exports},data:()=>({rules:{mobile:[{validator:(e,t,a)=>{/^1[34578]\d{9}$/.test(t)?a():a(new Error("手机号码有误，请重填"))},trigger:"blur"}]},orderData:{},provList:[],cityList:[],areaList:[],props:{label:"name",value:"name",children:"children"},selectedOptions:[],superConfVisible:!1,openDialogFlag:!1}),created(){this.getProvList(),this.getOrderDetail()},methods:{getOrderDetail(){this.$request.post("/api/saotx/md/orderd",{orderCode:this.orderCode,tsUuid:this.tsUuid},!0,e=>{if("200000"===e.ret)return this.orderData=e.data,"ACT-ZCQ2JKDAAAAA"==this.orderData.activityCode&&(this.superConfVisible=!0),this.orderData.province&&this.selectedOptions.push(this.orderData.province),this.orderData.city&&(this.selectedOptions.push(this.orderData.city),this.reverseCheckedCity()),void(this.orderData.district&&this.selectedOptions.push(this.orderData.district));this.$message.error(e.message)})},checkedAddress(){if(0==this.selectedOptions.length)return this.orderData.province="",this.orderData.city="",void(this.orderData.district="");this.orderData.province=this.selectedOptions[0]?this.selectedOptions[0]:"",this.orderData.city=this.selectedOptions[1]?this.selectedOptions[1]:"",this.orderData.district=this.selectedOptions[2]?this.selectedOptions[2]:""},async handleItemChange(e){1==e.length?this.provList.forEach((t,a)=>{e.indexOf(t.name)>-1&&!t.children.length&&this.getCityList(t.code,a)}):2==e.length&&this.cityList.forEach((t,a)=>{e.indexOf(t.name)>-1&&!t.children.length&&this.getAreaList(t.code,a)})},save(e){if(!e)return this.orderData.send=0,void this.$request.post("/api/saotx/md/modifyOrder",this.orderData,!0,e=>{if("200000"===e.ret)return this.$message.success("保存成功"),void this.getOrderDetail();this.$message.error(e.message)});this.orderData.send=1,this.openDialogFlag=!0},taggle(){this.openDialogFlag=!1},refresh(){this.getOrderDetail(),this.openDialogFlag=!1},reverseCheckedCity(){0!=this.provList.length?(this.provList.forEach((e,t)=>{e.name==this.orderData.province&&this.getCityList(e.code,t)}),this.orderData.district&&this.reverseCheckedArea()):setTimeout(this.reverseCheckedCity,100)},reverseCheckedArea(){0!=this.cityList.length?this.cityList.forEach((e,t)=>{e.name==this.orderData.city&&this.getAreaList(e.code,t)}):setTimeout(this.reverseCheckedArea,100)},getProvList(){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:[]},!0,e=>{if("200000"===e.ret)return e.data.map(e=>{"710000"!=e.code&&(e.children=[])}),void(this.provList=e.data);this.$message.error(e.message)})},getCityList(e,t){this.cityList=[];let a=[];a.push(e),this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:a},!0,e=>{if("200000"===e.ret)return e.data.map(e=>{e.children=[]}),this.cityList=e.data,void this.$set(this.provList[t],"children",this.cityList);this.$message.error(e.message)})},getAreaList(e,t){this.areaList=[];let a=[];a.push(e),this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:a},!0,e=>{if("200000"===e.ret)return this.areaList=e.data,void this.$set(this.cityList[t],"children",this.areaList);this.$message.error(e.message)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("实物领奖明细")])]),e._v(" "),a("span",[e._v("订单信息")]),e._v(" "),a("el-form",{staticClass:"ml20 mt20",attrs:{"label-position":"right","label-width":"120px",model:e.orderData,inline:""}},[a("el-col",[a("el-form-item",{attrs:{label:"订单编号："}},[a("p",{staticStyle:{width:"290px"}},[e._v(e._s(e.orderData.orderCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"活动名称："}},[a("p",{staticStyle:{width:"180px"}},[e._v(e._s(e.orderData.activityName))])]),e._v(" "),a("el-form-item",{attrs:{label:"中奖人："}},[a("p",[e._v(e._s(e.orderData.prizeWinner))])]),e._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号："}},[a("p",[e._v(e._s(e.orderData.winnerMobile))])])],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"微信号："}},[a("p",{staticStyle:{width:"290px"}},[e._v(e._s(e.orderData.prizeWinner))])]),e._v(" "),a("el-form-item",{attrs:{label:"奖品类型："}},[a("p",{staticStyle:{width:"180px"}},[e._v(e._s(e.orderData.awardTypeName))])]),e._v(" "),a("el-form-item",{attrs:{label:"奖项名称："}},[a("p",[e._v(e._s(e.orderData.awardName))])])],1),e._v(" "),a("el-form-item",{attrs:{label:"中奖时间："}},[a("p",{staticStyle:{width:"290px"}},[e._v(e._s(new Date(e.orderData.ctime).Format("yyyy-MM-dd hh:mm:ss")))])]),e._v(" "),a("el-form-item",{attrs:{label:"中奖地区："}},[a("p",[e._v(e._s(e.orderData.awardProvince)+"/"+e._s(e.orderData.awardCity)+e._s(e.orderData.awardDistrict?"/"+e.orderData.awardDistrict:""))])])],1)],1),e._v(" "),a("el-card",{staticClass:"mt20"},[a("span",[e._v("收货人信息")]),e._v(" "),a("el-form",{staticClass:"ml20 mt20 edit-form",attrs:{"label-width":"100px",rules:e.rules,model:e.orderData}},[a("el-form-item",{attrs:{label:"收货人："}},[a("el-input",{attrs:{disabled:2==e.orderData.status},model:{value:e.orderData.receiver,callback:function(t){e.$set(e.orderData,"receiver",t)},expression:"orderData.receiver"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号：",prop:"mobile"}},[a("el-input",{attrs:{disabled:2==e.orderData.status},model:{value:e.orderData.mobile,callback:function(t){e.$set(e.orderData,"mobile",t)},expression:"orderData.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收货地址："}},[a("el-cascader",{attrs:{disabled:2==e.orderData.status,options:e.provList,clearable:!0,props:e.props},on:{change:e.checkedAddress,"active-item-change":e.handleItemChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址："}},[a("el-input",{attrs:{disabled:2==e.orderData.status,type:"textarea",autosize:"",resize:"none",placeholder:"请输入内容"},model:{value:e.orderData.detail,callback:function(t){e.$set(e.orderData,"detail",t)},expression:"orderData.detail"}})],1)],1),e._v(" "),a("el-col",[a("span",[e._v("订单跟踪")])]),e._v(" "),a("el-col",{staticClass:"mt20 mb20 ml20"},[a("span",{staticClass:"mr20"},[e._v("下单时间："+e._s(new Date(e.orderData.ctime).Format("yyyy-MM-dd hh:mm:ss")))]),e._v(" "),a("span",[e._v("状态："+e._s(e.orderData.orderStatus))])]),e._v(" "),e.superConfVisible?a("super-pop",{attrs:{openDialog:e.openDialogFlag,params:e.orderData},on:{taggle:e.taggle,refresh:e.refresh}}):e._e(),e._v(" "),a("el-col",{staticClass:"btn"},[7==e.orderData.status||6==e.orderData.status?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save(0)}}},[e._v("保存")]):e._e(),e._v(" "),"ACT-ZCQ2JKDAAAAA"==e.orderData.activityCode&&7==e.orderData.status||6==e.orderData.status?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save(1)}}},[e._v("确认发货")]):e._e(),e._v(" "),2!=e.orderData.status||"ACT-ZCQ2JKDAAAAA"!=e.orderData.activityCode?a("el-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")]):e._e()],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,l,!1,function(e){a("mwq0")},"data-v-42a92e3b",null);t.default=o.exports},g87K:function(e,t){},jm70:function(e,t,a){"use strict";var s={props:{queryParams:{type:Object,required:!0}},data:()=>({provList:[],cityList:[],props:{label:"name",value:"name",children:"children"}}),created(){this.getProvList()},methods:{handleRegion(){0!=this.queryParams.selectedOptions.length?(this.queryParams.awardProv=[this.queryParams.selectedOptions[0]],this.queryParams.awardCity=[this.queryParams.selectedOptions[1]]):(this.queryParams.awardProv=[],this.queryParams.awardCity=[])},async handleItemChange(e){this.provList.forEach((t,a)=>{e.indexOf(t.name)>-1&&!t.children.length&&this.getCityList(t.code,a)})},getProvList(){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:[]},!0,e=>{if("200000"===e.ret)return e.data.map(e=>{e.children=[]}),void(this.provList=e.data);this.$message.error(e.message)})},getCityList(e,t){this.cityList=[];let a=[];a.push(e),this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:a},!0,e=>{if("200000"===e.ret)return this.cityList=e.data,void this.$set(this.provList[t],"children",this.cityList);this.$message.error(e.message)})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-cascader",{attrs:{clearable:!0,options:e.provList,props:e.props},on:{change:e.handleRegion,"active-item-change":e.handleItemChange},model:{value:e.queryParams.selectedOptions,callback:function(t){e.$set(e.queryParams,"selectedOptions",t)},expression:"queryParams.selectedOptions"}})],1)},staticRenderFns:[]},i=a("VU/8")(s,r,!1,null,null,null);t.a=i.exports},luhN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={props:["params"],data(){return{form:{id:this.params.id,type:this.params.type,subType:null,name:"",icon:"",value:0,note:""},confRules:{subType:[{required:!0,message:"请选择礼品分类",trigger:"blur"}],name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],value:[{required:!0,message:"请输入数值",trigger:"blur"}],icon:[{required:!0,validator:(e,t,a)=>{this.form.icon?a():a(new Error("请选择活动图片"))}}]},uploadURL:"/api/saotx/attach/commonAliUpload",headerObj:{loginId:sessionStorage.getItem("access_loginId"),token:sessionStorage.getItem("access_token"),CLIENTSESSIONID:sessionStorage.getItem("CLIENTSESSIONID")},detailData:{},typeName:""}},created(){this.prizeDetail()},methods:{prizeDetail(){this.params.id&&this.$request.post("/api/saotx/md/detailMaterial",{id:this.params.id},!0,e=>{"200000"===e.ret?this.form=e.data:this.$message.error(e.message)})},getTypeName(){},save(){2!=this.params.type&&(this.form.subType=""),this.$refs.prizeConfRef.validate(e=>{if(!e)return this.$message.error("请完善表单数据!");this.$request.post("/api/saotx/md/somMaterial",this.form,!0,e=>{"200000"===e.ret?(this.params.id?this.$message.success("修改成功"):this.$message.success("添加成功"),this.$router.push("/memberday/material/prizeList?type="+this.params.type)):this.$message.error(e.message)})})},goBack(){this.$router.push("/memberday/material/prizeList?type="+this.params.type)},upBannerImg(e){if("200000"===e.ret)return this.form.icon=e.data.accessUrl,void this.$refs.prizeConfRef.validateField("icon",e=>{});this.$message.error(e.message)},upBannerImgErr(e){this.$message.error("上传图片失败, 请重试!")},beforeAvatarUpload(e){const t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",{ref:"prizeConfRef",attrs:{model:e.form,"label-width":"100px",rules:e.confRules}},[a("el-form-item",{attrs:{label:"礼品名称",prop:"name"}},[a("el-input",{attrs:{maxlength:15},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),2==e.params.type?a("el-form-item",{attrs:{label:"礼品分类",prop:"subType"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.subType,callback:function(t){e.$set(e.form,"subType",t)},expression:"form.subType"}},[a("el-option",{attrs:{label:"翻倍卡",value:202}}),e._v(" "),a("el-option",{attrs:{label:"折扣卡",value:201}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"礼品图片",prop:"icon"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"before-upload":e.beforeAvatarUpload,action:e.uploadURL,headers:e.headerObj,"on-success":e.upBannerImg,"on-error":e.upBannerImgErr,"show-file-list":!1}},[e.form.icon?a("img",{staticClass:"avatar",attrs:{src:e.form.icon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上传图片的最佳尺寸：360像素*270像素；格式png、jpg；大小不超过2M")])])],1),e._v(" "),2==e.params.type&&202==e.form.subType?a("el-form-item",{attrs:{label:"翻倍倍数",prop:"value"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10,precision:0},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}}),e._v(" 倍\n          ")],1):e._e(),e._v(" "),2==e.params.type&&201==e.form.subType?a("el-form-item",{attrs:{label:"折扣值",prop:"value"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:1,precision:2,step:.1},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}}),e._v(" 折\n        ")],1):e._e(),e._v(" "),3==e.params.type?a("el-form-item",{attrs:{label:"红包面额",prop:"value"}},[a("el-input-number",{attrs:{"controls-position":"right",min:.3,precision:2},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}}),e._v(" 元\n        ")],1):e._e(),e._v(" "),6==e.params.type?a("el-form-item",{attrs:{label:"积分面额",prop:"value"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,precision:0},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}}),e._v(" 荷石币\n        ")],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"活动描述"}},[a("el-input",{attrs:{type:"textarea",rows:3,resize:"none"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1),e._v(" "),a("el-form-item",{staticClass:"mt20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.goBack}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var i={components:{commonConf:a("VU/8")(s,r,!1,function(e){a("K+H4")},"data-v-d381f816",null).exports},props:["type","id"],data(){return{params:{type:this.type,id:this.id}}}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("common-conf",{attrs:{params:this.params}})],1)},staticRenderFns:[]},o=a("VU/8")(i,l,!1,null,null,null);t.default=o.exports},mwq0:function(e,t){},oHKo:function(e,t){},ouhD:function(e,t){},p3Dr:function(e,t,a){"use strict";var s={props:{isBaseAward:{type:Boolean,default:!1},num:{type:Number,required:!0},selectedOptions:{type:Array,required:!0},queryParams:{type:Object,required:!0}},data:()=>({headers:{token:sessionStorage.getItem("access_token"),loginId:sessionStorage.getItem("access_loginId")},sourceFiles:[]}),methods:{queryAwardList(){this.queryParams.pageNo=1,this.queryParams.pageSize=10,this.$emit("init")},reset(){this.isBaseAward&&(this.queryParams.activityCode="ACT-ZCQ2JKDU6EP8"),this.queryParams.awardProv=[],this.queryParams.awardCity=[],this.queryParams.stime=this.queryParams.oldDate,this.queryParams.etime=this.queryParams.nowDate,this.queryParams.status="",this.queryParams.orderCode="",this.queryParams.awardType="",this.queryParams.selType=null,this.queryParams.keywords="",this.queryParams.pageNo=1,this.queryParams.pageSize=10,this.queryTimeArr=[this.queryParams.oldDate,this.queryParams.nowDate],this.queryParams.selectedOptions=[],this.$emit("init")},exportData(){var e=new XMLHttpRequest,t=new FormData;for(var a in this.queryParams)t.append(a,this.queryParams[a]);e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("POST","/api/saotx/md/orderExport",!0),e.responseType="blob",e.responseType="arraybuffer",e.setRequestHeader("token",sessionStorage.getItem("access_token")),e.setRequestHeader("loginId",sessionStorage.getItem("access_loginId")),e.onload=function(t){if(200==this.status){var a=new Blob([this.response],{type:"application/vnd.ms-excel"}),s=e.getResponseHeader("Content-Disposition"),r=decodeURI(s.match(/filename=(.*?)(;|$)/)[1]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,r);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(a),i.download=r,i.click(),window.URL.revokeObjectURL(i.href)}}},e.send(t)},handleSourceFileSuccess(e,t){if(2e5==e.ret){this.$message({type:"success",message:e.data});let t={name:e.data.sourceFile,sourceCode:e.data.sourceCode,count:e.data.successCount};this.sourceFiles.push(t)}else this.$message.error(e.message)},handleSourceFileRemove(e,t){this.sourceFiles=[]},beforeAvatarUpload(e){const t="application/vnd.ms-excel"===e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type;return t||this.$message.error("上传文件的格式只支持 XLS 或 XLSX !"),t}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.queryAwardList}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.reset}},[e._v("重置")]),e._v(" "),2==e.num?a("el-upload",{staticClass:"upload",attrs:{action:"/api/saotx/md/import",headers:e.headers,"on-success":e.handleSourceFileSuccess,"on-remove":e.handleSourceFileRemove,"file-list":e.sourceFiles,"before-upload":e.beforeAvatarUpload,"auto-upload":!0}},[a("el-button",{attrs:{type:"primary",plain:""}},[e._v("导入物流信息")])],1):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.exportData}},[e._v("导出搜索结果")])],1)},staticRenderFns:[]};var i=a("VU/8")(s,r,!1,function(e){a("6C/2")},"data-v-b1950178",null);t.a=i.exports},q3MM:function(e,t){},qM7u:function(e,t,a){"use strict";var s={props:["params","type"],data:()=>({loading:!0,queryParams:{name:"",type:2,subType:null,pageNo:1,pageSize:-1},prizeType:{1:{tableName:"",btnText:"选择勾选的实物",titleName:"选择实物：",title:"实物",awardName:"实物名称",units:""},3:{tableName:"金额",btnText:"选择勾选的红包",titleName:"选择红包：",title:"红包",awardName:"面额",units:"元"},202:{tableName:"倍数",btnText:"选择勾选的翻倍卡",titleName:"选择翻倍卡：",title:"翻倍卡",awardName:"翻倍卡",units:"倍"},201:{tableName:"折扣",btnText:"选择勾选的折扣卡",titleName:"选择折扣卡：",title:"折扣卡",awardName:"折扣值",units:"折"},6:{tableName:"荷石币",btnText:"选择勾选的积分",titleName:"选择荷石币：",title:"荷石币",awardName:"面额",units:"荷石币"}},dataList:[],dataListVisible:!1,total:null,selectedItem:[],totlaMoney:[],totalRedNum:null,totalSurplusNul:null}),created(){},mounted(){this.getCheckedCard(),this.calculate()},methods:{calculate(e){if(3==this.type){if(void 0!=e){let t=(this.params[e].totalNum*this.params[e].minred).toFixed(2);this.totlaMoney.splice(e,1,t)}else this.params.forEach(e=>{let t=(e.totalNum*e.minred).toFixed(2);this.totlaMoney.push(t)});this.totalRedNum=null,this.totalSurplusNul=null,this.params.map(e=>{this.totalSurplusNul+=(e.totalNum-e.redNumStock)*e.minred.toFixed(2),this.totalRedNum+=e.totalNum*e.minred.toFixed(2)}),this.totalSurplusNul=this.totalSurplusNul.toFixed(2),this.totalRedNum=this.totalRedNum.toFixed(2)}else if(6==this.type)if(void 0!=e){let t=this.params[e].totalNum*this.params[e].score;this.totlaMoney.splice(e,1,t)}else this.params.forEach(e=>{let t=e.totalNum*e.score;this.totlaMoney.push(t)})},getCheckedCard(){0!=this.params.length&&this.params.forEach(e=>{this.selectedItem.push({id:e.poolId})})},handleSelectionChange(e,t){this.selectedItem=e,console.log(this.selectedItem)},handleSelectionAllChange(e){this.selectedItem=e},confirmChecked(){this.dataListVisible=!1,this.selectedItem.forEach((e,t)=>{-1===JSON.stringify(this.params).indexOf('"poolId":'+e.id+",")&&this.params.push({awardName:e.name,awardPicUrl:e.icon,totalNum:null,stockNum:null,probability:null,score:e.value,minred:e.value,redTotalMoney:null,redNum:null,poolId:e.id,awardType:this.type})}),this.calculate()},add(e,t){this.$prompt("请输入数字","增库",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{1,}$/,inputErrorMessage:"请输入数字"}).then(({value:a})=>{if(0==a)return this.$message.error("数字不能为0");this.$request.post("/api/saotx/md/addAward",{id:e,increment:a},!0,e=>{"200000"===e.ret?(this.$message.success("增库成功"),this.params[t].totalNum+=Number(a),this.calculate(t)):this.$message.error(e.message)})}).catch(()=>{this.$message({type:"info",message:"取消输入"})})},del(e,t){this.$confirm("是否删除该项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.params.splice(t,1),this.selectedItem.forEach((t,a)=>{if(t.id==e.poolId)return this.selectedItem.splice(a,1)}),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},getMaterialList(){switch(this.type){case 1:this.queryParams.type=1;break;case 201:this.queryParams.type=2,this.queryParams.subType=201;break;case 202:this.queryParams.type=2,this.queryParams.subType=202;break;case 3:this.queryParams.type=3;break;case 6:this.queryParams.type=6}this.dataListVisible=!0,this.$request.post("/api/saotx/md/listMaterial",this.queryParams,!0,e=>{if(this.loading=!1,"200000"===e.ret)return this.dataList=e.data.list,this.total=e.data.page.count,void this.$nextTick(e=>{this.selectedItem.forEach(e=>{this.$refs.doubleCardTable.toggleRowSelection(this.dataList.find(t=>t.id==e.id),!0)})});this.$message.error(e.message)})},reset(){this.queryParams.name="",this.getMaterialList()},handleCurrentChange(e){this.queryParams.pageNo=e,this.getMaterialList()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.prizeType[e.type].title))]),e._v(" "),3==e.type?a("span",{staticStyle:{color:"#999"}},[e._v("投入总金额："+e._s(e.totalRedNum)+"元  剩余总金额："+e._s(e.totalSurplusNul)+"元")]):e._e()]),e._v(" "),a("el-form",[a("el-form-item",[a("span",[e._v(e._s(e.prizeType[e.type].titleName))]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.getMaterialList}})],1),e._v(" "),e._l(e.params,function(t,s){return e.params?a("el-form-item",{key:s},[a("span",[e._v(e._s(e.prizeType[e.type].awardName))]),e._v(" "),1==t.awardType?a("span",[a("el-input",{staticStyle:{width:"120px"},attrs:{disabled:!0,value:t.awardName}})],1):a("span",[a("el-input",{staticStyle:{width:"80px"},attrs:{disabled:!0,value:t.minred}})],1),e._v(" "),a("span",[e._v(e._s(e.prizeType[e.type].units))]),e._v("\n        投放数量：\n        "),1==e.type||202==e.type||201==e.type?a("el-input-number",{attrs:{disabled:!!t.id,precision:0,min:0,"controls-position":"right"},model:{value:t.totalNum,callback:function(a){e.$set(t,"totalNum",a)},expression:"item.totalNum"}}):e._e(),e._v(" "),3==e.type?a("el-input-number",{attrs:{disabled:!!t.id,precision:0,min:0,"controls-position":"right"},on:{change:function(t){e.calculate(s)}},model:{value:t.totalNum,callback:function(a){e.$set(t,"totalNum",a)},expression:"item.totalNum"}}):e._e(),e._v(" "),6==e.type?a("el-input-number",{attrs:{disabled:!!t.id,precision:0,min:0,"controls-position":"right"},on:{change:function(t){e.calculate(s)}},model:{value:t.totalNum,callback:function(a){e.$set(t,"totalNum",a)},expression:"item.totalNum"}}):e._e(),e._v(" "),t.id?a("span",{staticClass:"mr20",staticStyle:{"font-size":"12px",color:"#aaa"}},[3==e.type?a("span",[e._v("剩余数量："+e._s(t.totalNum-t.redNumStock)+"个")]):a("span",[e._v("剩余数量："+e._s(t.totalNum-t.stockNum)+"个")])]):e._e(),e._v(" "),3==e.type?a("span",[e._v("\n          总金额\n          "),a("el-input",{staticStyle:{width:"100px"},attrs:{value:isNaN(e.totlaMoney[s])?"":e.totlaMoney[s],disabled:!0}}),e._v("\n          元\n        ")],1):e._e(),e._v(" "),6==e.type?a("span",[e._v("\n          总荷石币\n          "),a("el-input",{staticStyle:{width:"100px"},attrs:{value:isNaN(e.totlaMoney[s])?"":e.totlaMoney[s],disabled:!0}})],1):e._e(),e._v("\n        中奖概率：\n        "),a("el-input-number",{attrs:{precision:2,min:0,max:100,"controls-position":"right"},model:{value:t.probability,callback:function(a){e.$set(t,"probability",a)},expression:"item.probability"}}),e._v("%\n        "),a("el-button",{staticClass:"ml20",attrs:{type:"danger"},on:{click:function(a){e.del(t,s)}}},[e._v("删除")]),e._v(" "),t.id?a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.add(t.id,s)}}},[e._v("增库")]):e._e()],1):e._e()})],2),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dataListVisible,width:"800px"},on:{"update:visible":function(t){e.dataListVisible=t}}},[a("el-form",{attrs:{inline:"","label-width":"40px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getMaterialList}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:e.reset}},[e._v("重置")])],1)],1),e._v(" "),a("div",{staticStyle:{height:"500px",overflow:"auto"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"doubleCardTable",staticClass:"mb20",staticStyle:{width:"100%"},attrs:{data:e.dataList,"tooltip-effect":"dark"},on:{"select-all":e.handleSelectionAllChange,select:e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"valueAlias",label:e.prizeType[e.type].tableName}}),e._v(" "),a("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.icon,width:"50"}})]}}])})],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.confirmChecked}},[e._v(e._s(e.prizeType[e.type].btnText))])],1)],1)],1)},staticRenderFns:[]},i=a("VU/8")(s,r,!1,null,null,null);t.a=i.exports},rDgP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={components:{commonConf:a("qM7u").a},data:()=>({data:{},type1:[],type201:[],type202:[],type3:[],type6:[],status:!1,flag:!1}),computed:{awards(){return this.data.awards}},watch:{awards(e){e.length>7&&this.$message.warning("奖品设置项最多不能超过7条")}},created(){this.getActDetail()},methods:{getActDetail(){this.$request.post("/api/saotx/md/queryExtAct",{flag:1},!0,e=>{if(this.status=!0,"200000"===e.ret)return this.data=e.data,void(0!=e.data.awards.length&&(e.data.awards.forEach(e=>{switch(e.awardType){case 1:this.type1.push(e);break;case 201:this.type201.push(e);break;case 202:this.type202.push(e);break;case 3:this.type3.push(e);break;case 6:this.type6.push(e)}}),this.flag=!0));this.$message.error(e.message)})},save(){this.data.awards=[],this.data.awards.push(...this.type1,...this.type201,...this.type202,...this.type3,...this.type6),this.data.awards.length>7||this.$request.post("/api/saotx/md/somExtAct",this.data,!0,e=>{if("200000"===e.ret)return this.$message.success("保存成功");this.$message.error(e.message)})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-form",[a("el-form-item",{attrs:{label:"荷石币消耗："}},[e._v("\n        消耗\n        "),a("el-input-number",{attrs:{precision:0,min:0,"controls-position":"right"},model:{value:e.data.num,callback:function(t){e.$set(e.data,"num",t)},expression:"data.num"}}),e._v("\n        荷石币可抽一次奖\n        "),a("span",{staticClass:"ml20"},[e._v("\n          每周首次抽奖免费\n        ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"大转盘投放奖品设置："}},[a("span",[e._v("必须配置一项奖品类型")])]),e._v(" "),e.status?a("common-conf",{staticClass:"mt20",attrs:{params:e.type1,type:1}}):e._e(),e._v(" "),e.status?a("common-conf",{staticClass:"mt20",attrs:{params:e.type201,type:201}}):e._e(),e._v(" "),e.status?a("common-conf",{staticClass:"mt20",attrs:{params:e.type3,type:3}}):e._e(),e._v(" "),e.status?a("common-conf",{staticClass:"mt20",attrs:{params:e.type6,type:6}}):e._e()],1),e._v(" "),a("div",{staticClass:"mt20 mb20 btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,r,!1,function(e){a("6kDn")},"data-v-7d2f6459",null);t.default=i.exports},ssAF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:()=>({form:{name:"test"},provList:[],cityList:[],areaList:[],props:{label:"name",value:"code",children:"children"},selectedOptions:[]}),created(){this.getProvList()},methods:{getOrderDetail(){},clg(){console.log(this.selectedOptions)},async handleItemChange(e){1==e.length?this.provList.forEach((t,a)=>{e.indexOf(t.code)>-1&&!t.children.length&&this.getCityList(e,a)}):2==e.length&&this.cityList.forEach((t,a)=>{e.indexOf(t.code)>-1&&!t.children.length&&this.getAreaList(e,a)})},test(e){},getProvList(){this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:[]},!0,e=>{if("200000"===e.ret)return e.data.map(e=>{e.children=[]}),void(this.provList=e.data);this.$message.error(e.message)})},getCityList(e,t){this.cityList=[];let a=[];a.push(e[0]),this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:a},!0,e=>{if("200000"===e.ret)return e.data.map(e=>{e.children=[]}),this.cityList=e.data,void this.$set(this.provList[t],"children",this.cityList);this.$message.error(e.message)})},getAreaList(e,t){this.areaList=[];let a=[];a.push(e[1]),this.$request.post("/api/saotx/dim/regionByMultiParent",{parentArr:a},!0,e=>{if("200000"===e.ret)return this.areaList=e.data,void this.$set(this.cityList[t],"children",this.areaList);this.$message.error(e.message)})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("实物领奖明细")])]),e._v(" "),a("span",[e._v("订单信息")]),e._v(" "),a("el-form",{staticClass:"ml20 mt20",attrs:{"label-position":"left",model:e.form,inline:""}},[a("el-col",[a("el-form-item",{attrs:{label:"订单编号："}},[a("span",[e._v(e._s(e.form.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"活动名称："}},[a("span",[e._v(e._s(e.form.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"中奖人："}},[a("span",[e._v(e._s(e.form.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"中奖人手机号："}},[a("span",[e._v(e._s(e.form.name))])])],1),e._v(" "),a("el-col",[a("el-form-item",{attrs:{label:"微信号："}},[a("span",[e._v(e._s(e.form.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"奖品类型："}},[a("span",[e._v(e._s(e.form.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"奖项名称："}},[a("span",[e._v(e._s(e.form.name))])])],1),e._v(" "),a("el-form-item",{attrs:{label:"中奖时间："}},[a("span",[e._v("2018-06-08 12:26:18")])]),e._v(" "),a("el-form-item",{attrs:{label:"中奖地区："}},[a("span",[e._v("浙江省/杭州市/西湖区")])])],1)],1),e._v(" "),a("el-card",{staticClass:"mt20"},[a("span",[e._v("收货人信息")]),e._v(" "),a("el-form",{staticClass:"ml20 mt20 edit-form",attrs:{"label-width":"100px",model:e.form}},[a("el-form-item",{attrs:{label:"收货人："}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号："}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动名称："}},[a("el-cascader",{attrs:{options:e.provList,props:e.props},on:{change:e.clg,"active-item-change":e.handleItemChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址："}},[a("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",placeholder:"请输入内容"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),a("el-col",[a("span",[e._v("收货人信息")])]),e._v(" "),a("el-col",{staticClass:"mt20 mb20 ml20"},[a("span",{staticClass:"mr20"},[e._v("下单时间：2018-06-08 12:26:18")]),e._v(" "),a("span",[e._v("状态：发货")])]),e._v(" "),a("el-col",{staticClass:"ml20 mb20"},[a("el-button",{attrs:{type:"primary"}},[e._v("确认发货")]),e._v(" "),a("el-button",[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,r,!1,function(e){a("q3MM")},"data-v-1852b189",null);t.default=i.exports},ulGM:function(e,t){},zBEX:function(e,t){},zMUm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={props:["type"],data(){return{loading:!0,queryParams:{type:this.type,keywords:"",subType:"",pageNo:1,pageSize:10},total:null,listData:[]}},watch:{type:function(e){this.queryParams.type=e,this.getPrizeList()}},created(){this.type?this.getPrizeList():this.$router.push("/memberday/material/prizeList?type=1")},methods:{getPrizeList(){this.$request.post("/api/saotx/md/listMaterial",this.queryParams,!0,e=>{"200000"===e.ret&&(this.listData=e.data.list,this.total=e.data.page.count,this.loading=!1)})},query(e){this.queryParams.pageNo=1,e&&(this.queryParams.keywords="",this.queryParams.subType=""),this.getPrizeList()},editPrize(e){this.$router.push("/memberday/material/prizeConf?type="+this.type+"&id="+e)},addPrize(){this.$router.push("/memberday/material/prizeConf?type="+this.type)},handleCurrentChange(e){this.queryParams.pageNo=e,this.getPrizeList()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-card",[a("el-col",{staticClass:"mb20"},[1==e.type?a("el-button",{attrs:{type:"primary"},on:{click:e.addPrize}},[e._v("新建实物礼品")]):e._e(),e._v(" "),2==e.type?a("el-button",{attrs:{type:"primary"},on:{click:e.addPrize}},[e._v("新建虚拟礼品")]):e._e(),e._v(" "),3==e.type?a("el-button",{attrs:{type:"primary"},on:{click:e.addPrize}},[e._v("新建红包礼品")]):e._e(),e._v(" "),6==e.type?a("el-button",{attrs:{type:"primary"},on:{click:e.addPrize}},[e._v("新建积分礼品")]):e._e()],1),e._v(" "),a("el-form",{attrs:{inline:"",model:e.queryParams}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{type:"text"},model:{value:e.queryParams.keywords,callback:function(t){e.$set(e.queryParams,"keywords",t)},expression:"queryParams.keywords"}})],1),e._v(" "),2==e.type?a("el-form-item",{attrs:{label:"礼品分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.queryParams.subType,callback:function(t){e.$set(e.queryParams,"subType",t)},expression:"queryParams.subType"}},[a("el-option",{attrs:{label:"翻倍卡",value:202}}),e._v(" "),a("el-option",{attrs:{label:"折扣卡",value:201}})],1)],1):e._e()],1),e._v(" "),a("el-col",{staticClass:"mb20"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.query(0)}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){e.query(1)}}},[e._v("重置")])],1)],1),e._v(" "),a("el-card",{staticClass:"mt20"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb20",attrs:{border:"",data:e.listData}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),e._v(" "),2==e.type?a("el-table-column",{attrs:{align:"center",label:"礼品分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(201==t.row.subType?"折扣卡":"翻倍卡")+"\n        ")]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"礼品名称"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"礼品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{width:"100",src:e.row.icon,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.editPrize(t.row.id)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.queryParams.pageNo,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]},i={components:{commonList:a("VU/8")(s,r,!1,null,null,null).exports},props:["type"],data:()=>({}),created(){}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("common-list",{attrs:{type:this.type}})],1)},staticRenderFns:[]};var o=a("VU/8")(i,l,!1,function(e){a("Px+L")},"data-v-d08da952",null);t.default=o.exports}});
//# sourceMappingURL=6.6eb8a5e74d114dae9757.js.map